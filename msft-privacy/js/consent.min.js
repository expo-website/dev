/* eslint-disable */

!function(){"use strict";var x=function(e,t){return(x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function K(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}x(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var L=function(){return(L=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function s(e,c,s,a){return new(s=s||Promise)(function(n,t){function r(e){try{i(a.next(e))}catch(e){t(e)}}function o(e){try{i(a.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,o)}i((a=a.apply(e,c||[])).next())})}function a(r,o){var i,c,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(n){return function(e){var t=[n,e];if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,c&&(s=2&t[0]?c.return:t[0]?c.throw||((s=c.return)&&s.call(c),0):c.next)&&!(s=s.call(c,t[1])).done)return s;switch(c=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,c=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=o.call(r,a)}catch(e){t=[6,e],c=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}}function l(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),c=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)c.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return c}function f(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||((r=r||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}V.isObject=function(e){return e&&"object"==typeof e&&!Array.isArray(e)},V.mergeDeep=function(e){for(var t,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(!n.length)return e;var o=n.shift();if(this.isObject(e)&&this.isObject(o))for(var i in o)this.isObject(o[i])?(e[i]||Object.assign(e,((t={})[i]={},t)),this.mergeDeep(e[i],o[i])):Object.assign(e,((t={})[i]=o[i],t));return this.mergeDeep.apply(this,f([e],l(n),!1))};var t,N,$,i,B=V;function V(){}(e=t=t||{}).PRESENTATION="presentation",e.PREVIEW="preview",e.CONFIG="config",e.HANDLEBAR="handlebar",e.PROXY="proxy",e.DSR="dsr",(e=N=N||{}).PRESENTATION="$jsRootPath/msft-privacy/packages/$packageId/js/presentation.min.js",e.PREVIEW="$jsRootPath/msft-privacy/packages/$packageId/js/preview.min.js",e.HANDLEBAR="$jsRootPath/msft-privacy/packages/$packageId/js/vendor/handlebars.min.js",e.PROXY="$jsRootPath/msft-privacy/packages/$packageId/js/proxy.min.js",e.DSR="$jsRootPath/msft-privacy/packages/$packageId/js/dsr.min.js",(e=$=$||{}).PRESENTATION="msft-presentation.js",e.HANDLEBAR="msft-handlebars.js",e.PROXY="msft-proxy.js",e.DSR="dsr.js",(e=i=i||{}).PATH="path",e.VARIABLE="variable";var H,e=function(e){this.state=e||{config:{},debug:{logs:[],events:[]},custom:{}}},n=(K(r,H=e),Object.defineProperty(r.prototype,"debugInfo",{get:function(){return this.state.debug},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"config",{get:function(){return this.state.config},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"userConsent",{get:function(){return this.state.custom.userConsent},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isHeadless",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isPreviewMode",{get:function(){var e;return(null==(e=this.state.config.initConfig)?void 0:e.preview)||!1},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isActionDisabled",{get:function(){var e;return(null==(e=this.state.config.initConfig)?void 0:e.disableActions)||!1},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isLivePreviewMode",{get:function(){var e;try{return"ConsentLivePreview"===(null==(e=window.parent)?void 0:e.name)}catch(e){return!1}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"presentationVariable",{get:function(){return $.PRESENTATION},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"handlebarVariable",{get:function(){return $.HANDLEBAR},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"proxyVariable",{get:function(){return $.PROXY},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"dsrVariable",{get:function(){return $.DSR},enumerable:!1,configurable:!0}),r);function r(e){return H.call(this,e)||this}K(U,W=e),U.prototype.saveDebugInfo=function(e){var t=e.event,e=e.log;t&&this.state.debug.events.push(t),e&&this.state.debug.logs.push(e)},U.prototype.setUserConsent=function(e){this.state.custom.userConsent=e},U.prototype.setInitConfig=function(e){this.state.config.initConfig=e};var W,o=U;function U(e){return W.call(this,e)||this}var Y,e=(new e).state,c={getters:new n(e),reducers:new o(e),addReducers:function(e){this.reducers=B.mergeDeep(this.reducers,e)},addGetters:function(e){Object.defineProperties(this.getters,Object.getOwnPropertyDescriptors(e.prototype))}},z=((n=Y=Y||{})[n.INFO=0]="INFO",n[n.WARN=1]="WARN",n[n.ERROR=2]="ERROR",G.log=function(e,t){switch(e){case Y.WARN:console.warn(t);break;case Y.ERROR:console.error(t)}},G);function G(){}q.info=function(e,t){q.log(Y.INFO,e,t)},q.warn=function(e,t){q.log(Y.WARN,e,t)},q.error=function(e,t){q.log(Y.ERROR,e,t)},q.log=function(e,t,n){t=q.formatLogMessage(e,t,n);c.reducers.saveDebugInfo({log:t}),z.log(e,t)},q.formatLogMessage=function(e,t,n){n=n?"| ".concat(JSON.stringify(n)):"";return"[".concat(Y[e],"] ").concat(t," ").concat(n)};var Q,u=q;function q(){}function X(){this.strategy=Q.REPLAY_ALL}(o=Q=Q||{})[o.REPLAY_ALL=0]="REPLAY_ALL",o[o.REPLAY_LATEST=1]="REPLAY_LATEST",o[o.SKIP=2]="SKIP",X.prototype.execute=function(t,e){e.forEach(function(e){e=e.payload;return t(e)})};e=new X;function J(){this.strategy=Q.REPLAY_LATEST}J.prototype.execute=function(e,t){t.length&&e(t[t.length-1].payload)};n=new J;function Z(){this.strategy=Q.SKIP}Z.prototype.execute=function(){};var o=new Z,ee=((d={})[Q.REPLAY_ALL]=e,d[Q.REPLAY_LATEST]=n,d[Q.SKIP]=o,d),te=(ne.record=function(e,t){this.eventsLogs[e]=this.eventsLogs[e]||[],this.eventsLogs[e].push({payload:t})},ne.replay=function(e,t,n){void 0===n&&(n=this.DEFAULT_STRATEGY),ee[n].execute(t,this.eventsLogs[e]||[])},ne.eventsLogs={},ne.DEFAULT_STRATEGY=Q.REPLAY_LATEST,ne);function ne(){}function re(){this.events={},this.eventIdCounter=0}re.getDefaultEventDetails=function(){return{executionCount:0,callbacks:[]}},re.prototype.on=function(e,t,n){var n=void 0===n?{}:n,r=n.sync,r=void 0!==r&&r,n=n.replayStrategy,r=(u.info("Callback registered for event : ".concat(e)),this.eventIdCounter++,{id:this.eventIdCounter,fn:t,sync:r});return this.events[e]=this.events[e]||re.getDefaultEventDetails(),this.events[e].callbacks.push(r),te.replay(e,t,n),this.eventIdCounter},re.prototype.trigger=function(e,r){var t=this,n=(void 0===r&&(r={}),(null==(n=this.events[e])?void 0:n.callbacks)||[]);u.info("Started executing '".concat(n.length,"' callbacks for event '").concat(e,"'"),r),c.reducers.saveDebugInfo({event:e}),n.forEach(function(n){return s(t,void 0,void 0,function(){var t;return a(this,function(e){switch(e.label){case 0:return e.trys.push([0,3,,4]),n.sync?[3,2]:[4,Promise.resolve()];case 1:e.sent(),e.label=2;case 2:return n.fn(r),[3,4];case 3:return t=e.sent(),u.error("Error in executing callback id : ".concat(n.id),t),[3,4];case 4:return[2]}})})}),te.record(e,r),u.info("Completed executing '".concat(n.length,"' callbacks for event '").concat(e,"'"),r),this.events[e]&&this.events[e].executionCount++},re.prototype.off=function(e,t){var n=null==(n=this.events[e])?void 0:n.callbacks.findIndex(function(e){return e.id===t||e.fn===t});"number"==typeof n&&~n?(u.info("Removing event listener '".concat(this.events[e].callbacks[n].id,"' of '").concat(e,"' event")),this.events[e].callbacks.splice(n,1)):u.error("Unable to remove event listener for event '".concat(e,"'. No matching event id or callback found."))},re.prototype.hasListener=function(e){return 0<(null==(e=this.events[e])?void 0:e.callbacks.length)};var oe,ie,ce,se,ae,ue,le,fe,de,ge,pe,ve,he,ye,me,Se,be,we=new re,n=((e=oe=oe||{}).Explicit="Explicit",e.Implicit="Implicit",(n=ie=ie||{}).ConsentChanged="ConsentChanged",n.ShowConsentNotice="ShowConsentNotice",n.ShowFirstPage="ShowFirstPage",n.CloseConsentNotice="CloseConsentNotice",n.AcceptAll="AcceptAll",n.RejectAll="RejectAll",n.ShowTemplate="ShowTemplate",n.CloseTemplate="CloseTemplate",n.UpdateConsent="UpdateConsent",n.AnchorTagClicked="AnchorTagClicked",n.FetchConfig="FetchConfig",n.QuestionsFormSubmitWithoutMetaData="QuestionsFormSubmitWithoutMetaData",n.QuestionsFormSubmit="QuestionsFormSubmit",n.ShowPreferences="ShowPreferences",n.ConsentPreference="MSFTConsentPreference",(o=ce=ce||{}).Init="Init",o.CoreConsentModelSelected="CoreConsentModelSelected",o.ConfigReady="ConfigReady",(d=se=se||{}).Default="Default",d.HeadLess="HeadLess",(e=ae=ae||{}).Url="Url",e.Text="Text",(n=ue=ue||{}).OFF="0",n.ON="1",(le=le||{}).Consent="msft-consent",(o=fe=fe||{}).Script="script",o.IFrame="iframe",(d=de=de||{}).TrackerCategory="trackerCategory",d.Questions="Questions",(ge=ge||{}).TemplateError="<b>There is something wrong with template. Please check logs.</b>",(e=pe=pe||{}).day="day",e.week="week",e.month="month",e.year="year",(n=ve=ve||{}).Text="Text",n.Email="Email",n.Radio="Radio",n.MultiSelect="MultiSelect",n.Select="Select",n.Date="Date",n.PhoneNumber="PhoneNumber",n.CreditCard="CreditCard",n.Number="Number",n.MultiLineText="multiLineText",(he=he||{}).Required="Required",(o=ye=ye||{}).Question="question",o.Placeholder="placeholder",o.Options="options",(d=me=me||{}).WebConsentModel="WebConsentModel",d.QuestionModel="DSRSubmissionModel",(e=Se=Se||{}).WebConsentPackage="WebConsentPackage",e.FIDESPackage="FIDESPackage",e.DSRSubmissionPackage="DSRSubmissionPackage",(be=be||{}).Preferences="Preferences",Object.freeze({__proto__:null,get ConsentModelType(){return oe},get PublicEvents(){return ie},get Events(){return ce},get SDKMode(){return se},get StyleType(){return ae},get Preference(){return ue},get Cookie(){return le},get RegisteredDivType(){return fe},get NoticeType(){return de},get ErrorStrings(){return ge},get IntervalUnits(){return pe},get QuestionType(){return ve},get QuestionValidation(){return he},get QuestionField(){return ye},get ModelKind(){return me},get PackageKind(){return Se},get Template(){return be}})),_e=(Te.initConsent=function(e){c.reducers.setInitConfig(e),we.trigger(ce.Init,e)},Te);function Te(){}Ce.init=function(e){_e.initConsent(e)},Ce.on=function(e,t,n){n=(void 0===n?{}:n).sync,n=void 0!==n&&n;if(!(e in ce))return we.on(e,t,{sync:n});u.error("Cannot subscribe to internal event '".concat(e,"'."))},Ce.trigger=function(e,t){e in ce?u.error("Cannot trigger internal event '".concat(e,"'.")):we.trigger(e,t)},Ce.off=function(e,t){e in ce?u.error("Cannot detach listener for internal event '".concat(e,"'.")):we.off(e,t)};o=Ce;function Ce(){}g.createIFrame=function(e,t,n,r){var o,i=null==(o=c.getters.config.initConfig)?void 0:o.renderTemplateWithoutIframe;document.body?g.appendElement(i?g.getDivElement(e,t,null==n):g.getIframeObject(e,t,null==n,r),n):window.addEventListener("DOMContentLoaded",function(){g.appendElement(i?g.getDivElement(e,t,null==n):g.getIframeObject(e,t,null==n,r),n)})},g.getIframeObject=function(e,t,n,r){e='<html><head><style>.msft-iframe-body{background-color: rgb(204 204 204 / 60%);}</style></head><body class="msft-iframe-body">'.concat(e).concat(g.getAllStylesAsText(r),"</body></html>"),r=document.createElement("iframe");return r.setAttribute("style","height:100%;width:100%;border:0;position:".concat(n?"fixed":"relative",";top:0;left:0;z-index:5000;")),r.className="msft-model-container",r.setAttribute("sandbox","allow-scripts allow-forms"),r.id=t,r.srcdoc=e,r},g.getDivElement=function(e,n,t){for(var r=document.createElement("style"),o=(r.appendChild(document.createTextNode(".msft-iframe-body{background-color: rgb(204 204 204 / 60%);height:100%;width:100%}")),document.createElement("div")),e=(o.innerHTML=e,o.className="msft-iframe-body",document.createElement("div")),i=(e.setAttribute("style","height:100%;width:100%;border:0;position:".concat(t?"fixed":"relative",";top:0;left:0;z-index:5000;")),e.className="msft-model-container",e.id=n,e.appendChild(r),e.appendChild(o),e.getElementsByTagName("script")),c=[],s=0;s<i.length;s++){var a,u=document.createElement("script");i[s].src?u.src=i[s].src:(a=document.createTextNode(i[s].innerHTML),u.appendChild(a)),c.push(u)}return setTimeout(function(){c.forEach(function(e){var t;null!=(t=document.getElementById(n))&&t.appendChild(e)})}),e},g.appendElement=function(e,t){(t||document.body).appendChild(e)},g.appendStyles=function(e){var n="";return null!=e&&e.forEach(function(e){var t;e.type==ae.Text?((t=document.createElement("style")).appendChild(document.createTextNode(e.value)),n+=t.outerHTML):e.type==ae.Url&&((t=document.createElement("link")).rel="stylesheet",t.href=e.value,n+=t.outerHTML)}),n},g.getAllStylesAsText=function(e){var t="",n=f(f([],l(document.getElementsByTagName("style")),!1),l(document.getElementsByTagName("link")),!1);return t+=this.appendStyles(e),n.forEach(function(e){return t+=e.outerHTML}),t+=this.appendStyles(window.__MSFT_SDK.Store.getters.styles)};var d=g;function g(){}Me.AddPublicApis=function(e){this.PublicApis=e},Me.exposeApis=function(){var e=Object.getOwnPropertyNames(window.MSFTConsent).filter(function(e){return"function"==typeof e}),t=Object.getOwnPropertyNames(this.PublicApis);e.forEach(function(e){t.includes(e)&&u.warn("Already existing Public Api with the same name '".concat(e,"'"))}),Object.defineProperties(window.MSFTConsent,Object.getOwnPropertyDescriptors(this.PublicApis))};e=Me;function Me(){}var Ee=Object.freeze({__proto__:null,Constants:{OFF:"0",ON:"1",COOKIE_NAME:"APCC",ConsentConfig:"MicrosoftConsentConfig"}}),Pe=(Oe.topologicalSort=function(e){var n=this,r=this.getAdjacencyList(e),o={};return Object.keys(r).reduce(function(e,t){return e.concat(n.dfs(t,r,o))},[])},Oe.dfs=function(e,n,r,o){var t,i=this;if((o=void 0===o?{}:o)[e])throw new Error("Circular dependency found!");return r[e]?[]:(o[e]=!0,t=(null==(t=n[e])?void 0:t.reduce(function(e,t){return e.concat(i.dfs(t,n,r,o))},[]))||[],r[e]=!0,o[e]=!1,t.concat(e))},Oe.getAdjacencyList=function(e){var n={};return e.forEach(function(e){var e=l(e,2),t=e[0],e=e[1];n[t]=n[t]||[],(t=n[t]).push.apply(t,f([],l(e),!1))}),n},Oe);function Oe(){}var De={Translation:function(e,t){var n;u.info("fetch translation callback invoked",{noticeName:e,translation:t}),window.__MSFT_SDK.Store.reducers.setTranslations(f(f([],l(window.__MSFT_SDK.Store.getters.translations||[]),!1),[((n={})[e]=t.translations,n)],!1))},Model:function(e){u.info("fetch model callback invoked",{val:e}),window.__MSFT_SDK.Store.reducers.setCurrentModel(e)},Template:function(e){u.info("fetch template callback invoked",{val:e}),window.__MSFT_SDK.Store.reducers.setTemplate(e)},Question:function(e){u.info("fetch questions callback invoked",{val:e}),window.__MSFT_SDK.Store.reducers.setQuestions(f(f([],l(window.__MSFT_SDK.Store.getters.questions),!1),[e],!1))}},ke=function(){var e;return{fields:{packageId:null==(e=window.__MSFT_SDK.config)?void 0:e.id,modelId:(null==(e=c.getters.selectedCoreModel)?void 0:e.id)||"",lcid:c.getters.lcid,sdkRootPath:(null==(e=c.getters.config.initConfig)?void 0:e.assetsPath)||(null==(e=c.getters.packageConfigurations)?void 0:e.assetsPath)||"",jsRootPath:(null==(e=c.getters.config.initConfig)?void 0:e.jsPath)||(null==(e=c.getters.config.initConfig)?void 0:e.assetsPath)||(null==(e=c.getters.packageConfigurations)?void 0:e.assetsPath)||"",modelVersion:(null==(e=c.getters.selectedCoreModel)?void 0:e.version.toString())||"0",packageVersion:"latest"},modules:f([{module:t.CONFIG,source:{type:i.VARIABLE,value:"config.js"},dependency:[],callback:function(){window.__MSFT_SDK.EventBus.trigger(window.__MSFT_SDK.enums.Events.ConfigReady)},condition:function(){return!(c.getters.isPreviewMode||c.getters.isLivePreviewMode)},configs:f(f(f([],l((null==(e=c.getters.selectedCoreModel)?void 0:e.kind)===me.WebConsentModel?window.__MSFT_SDK.Store.getters.bannerTrackerCategories.map(function(t){return{source:{type:i.PATH,value:"$sdkRootPath/msft-privacy/packages/$packageId/$packageVersion/models/$modelId/translations/".concat(t.id,"/$lcid.json")},callback:function(e){return De.Translation(t.id,e)}}}):[]),!1),[{source:{type:i.PATH,value:"$sdkRootPath/msft-privacy/packages/$packageId/$packageVersion/models/$modelId/translations/model/$lcid.json"},callback:function(e){return De.Translation("model",e)}},{source:{type:i.PATH,value:"$sdkRootPath/msft-privacy/packages/$packageId/$packageVersion/models/$modelId/model.json"},callback:De.Model},{source:{type:i.PATH,value:"$sdkRootPath/msft-privacy/packages/$packageId/$packageVersion/models/$modelId/templates/".concat(null==(e=c.getters.selectedCoreModel)?void 0:e.layout.id,"/template.json")},callback:De.Template}],!1),l((null==(e=c.getters.selectedCoreModel)?void 0:e.kind)===me.QuestionModel?f(f([],l(null==(e=c.getters.selectedCoreModel)?void 0:e.questions.map(function(t){return{source:{type:i.PATH,value:"$sdkRootPath/msft-privacy/packages/$packageId/$packageVersion/models/$modelId/translations/".concat(t,"/$lcid.json")},callback:function(e){return De.Translation(t,e)}}})),!1),l(null==(e=c.getters.selectedCoreModel)?void 0:e.questions.map(function(e){return{source:{type:i.PATH,value:"$sdkRootPath/msft-privacy/packages/$packageId/$packageVersion/models/$modelId/questions/".concat(e,"/1/question.json")},callback:function(e){return De.Question(e)}}})),!1):[]),!1)},{module:t.PRESENTATION,source:c.getters.isPreviewMode?{type:i.VARIABLE,value:c.getters.presentationVariable}:{type:i.PATH,value:N.PRESENTATION},condition:function(){return!c.getters.isHeadless},dependency:f([t.HANDLEBAR,t.CONFIG,t.PROXY],l((null==(e=c.getters.selectedCoreModel)?void 0:e.kind)===me.QuestionModel?[t.DSR]:[]),!1)},{module:t.HANDLEBAR,source:c.getters.isPreviewMode?{type:i.VARIABLE,value:c.getters.handlebarVariable}:{type:i.PATH,value:N.HANDLEBAR},condition:function(){return!c.getters.isHeadless},dependency:[]},{module:t.PREVIEW,source:{type:i.PATH,value:N.PREVIEW},condition:function(){return c.getters.isLivePreviewMode},dependency:[]},{module:t.PROXY,source:c.getters.isPreviewMode?{type:i.VARIABLE,value:c.getters.proxyVariable}:{type:i.PATH,value:N.PROXY},callback:function(e){window.__MSFT_SDK.Store.reducers.setProxyJS(e)},dependency:[]}],l((null==(e=c.getters.selectedCoreModel)?void 0:e.kind)===me.QuestionModel?[{module:t.DSR,source:c.getters.isPreviewMode?{type:i.VARIABLE,value:c.getters.dsrVariable}:{type:i.PATH,value:N.DSR},dependency:[]}]:[]),!1)}},Fe=(Ae.deferred=function(){var n={};return n.promise=new Promise(function(e,t){n.resolve=e,n.reject=t}),n},Ae);function Ae(){}je.addScriptToDOM=function(e){var t=Fe.deferred(),n=document.createElement("script");return n.type="text/javascript",n.appendChild(document.createTextNode(e)),n.onload=function(){return t.resolve()},n.onerror=function(){return t.reject()},document.body?document.body.appendChild(n):window.addEventListener("DOMContentLoaded",function(){document.body.appendChild(n)}),t.promise};var Ie=je;function je(){}xe.fetch=function(o){return s(this,void 0,void 0,function(){var t,n,r;return a(this,function(e){return t=Fe.deferred(),n=t.promise,r=t.resolve,window.__MSFT_SDK.EventBus.trigger(ie.FetchConfig,{path:o,callback:function(e){r(e.data)}}),[2,n]})})};var Re=xe;function xe(){}Le.fetch=function(t){return s(this,void 0,void 0,function(){return a(this,function(e){try{return[2,this.exponentialRetry(function(){return fetch(t).then(function(e){if(e.ok)return e;throw new Error(e.statusText)})})]}catch(e){u.error("Unable to fetch asset '".concat(t,"'"))}return[2]})})},Le.exponentialRetry=function(i,c){return void 0===c&&(c=0),s(this,void 0,void 0,function(){var t,n,r,o=this;return a(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,i()];case 1:return[2,e.sent()];case 2:if(t=e.sent(),(n=c+1)<this.MAX_RETRY_COUNT)return r=Fe.deferred(),setTimeout(function(){o.exponentialRetry(i,n).then(function(){return r.resolve()}).catch(function(){return r.reject()})},this.EXPONENTIAL_DELAY_FACTOR_IN_MS*n),[2,r.promise];throw t;case 3:return[2]}})})},Le.MAX_RETRY_COUNT=3,Le.EXPONENTIAL_DELAY_FACTOR_IN_MS=250;var Ke=Le;function Le(){}Ne.fetchWrapper=function(n){var r;return s(this,void 0,void 0,function(){var t;return a(this,function(e){switch(e.label){case 0:return null!=(r=window.__MSFT_SDK)&&r.EventBus.hasListener(ie.FetchConfig)?[4,Re.fetch(n)]:[3,2];case 1:return[2,e.sent()];case 2:return[4,Ke.fetch(n)];case 3:return[4,null==(t=e.sent())?void 0:t.text()];case 4:return[2,null!=(r=e.sent())?r:""]}})})};var p=Ne;function Ne(e,t){this.source=e,this.value="",this.callback=t}K(Ve,$e=p),Ve.prototype.fetch=function(){return s(this,void 0,void 0,function(){var t;return a(this,function(e){switch(e.label){case 0:return(u.info("Fetching js module",this.source),this.source.type!==i.VARIABLE)?[3,1]:(this.value=window[this.source.value],[3,3]);case 1:return t=this,[4,Ve.fetchWrapper(this.source.value)];case 2:t.value=e.sent(),e.label=3;case 3:return[2]}})})},Ve.prototype.addToDOM=function(){return Ie.addScriptToDOM(this.value)},Ve.prototype.execute=function(){return this.callback?(this.callback(this.value),Promise.resolve()):this.addToDOM()};var $e,Be=Ve;function Ve(e,t){return $e.call(this,e,t)||this}K(Ue,He=p),Ue.prototype.fetch=function(){var o;return s(this,void 0,void 0,function(){var t,n,r;return a(this,function(e){switch(e.label){case 0:return(u.info("Fetching json module",this.source),this.source.type!==i.VARIABLE)?[3,1]:(this.value=window[this.source.value],[3,4]);case 1:return e.trys.push([1,3,,4]),t=this,r=(n=JSON).parse,[4,Ue.fetchWrapper(this.source.value)];case 2:return t.value=r.apply(n,[e.sent()]),[3,4];case 3:return e.sent(),u.error("Error in fetching : ".concat(null==(o=this.source)?void 0:o.value)),[3,4];case 4:return[2]}})})},Ue.prototype.execute=function(){return this.callback&&this.value?(this.callback(this.value),Promise.resolve()):Promise.reject(new Error("Callback not provided"))};var He,We=Ue;function Ue(e,t){return He.call(this,e,t)||this}ze.resolveDependencies=function(){return s(this,void 0,void 0,function(){var t,n,r;return a(this,function(e){switch(e.label){case 0:return r=this.getModuleMapAndDependency(),t=r.moduleMap,r=r.moduleDependency,n=this.fetchAllAssets(t),r=Pe.topologicalSort(r),u.info("dependencies execution sequence",r),[4,Promise.all(n)];case 1:return e.sent(),r.forEach(function(e){t[e]&&t[e].forEach(function(e){return e.execute()})}),[2]}})})},ze.fetchAllAssets=function(e){var t=[];return Object.values(e).forEach(function(e){e.forEach(function(e){t.push(e.fetch())})}),t},ze.getModuleMapAndDependency=function(){var c=this,s={},a=[],e=ke(),u=e.fields;return e.modules.forEach(function(e){var t=e.module,n=e.source,r=e.configs,o=e.condition,i=e.dependency,e=e.callback;o&&!o()||(s[t]=f([],l(c.getModuleTypeInstances({source:n,callback:e,fields:u})),!1),a.push([t,i||[]]),r&&(s["".concat(t,".configs")]=r.reduce(function(e,t){return e.concat(c.getModuleTypeInstances(L(L({},t),{fields:u})))},[]),a.push([t,["".concat(t,".configs")]])))}),{moduleMap:s,moduleDependency:a}},ze.getModuleTypeInstances=function(e){var t=e.source,n=e.callback,e=e.fields;if(void 0===t)return[];var r=[],o=t.value.split(".").pop();return t.type===i.PATH?this.resolvePathFields({path:t.value,fields:e}).forEach(function(e){ze.addModuleResolver({value:e,type:i.PATH},r,o,n)}):ze.addModuleResolver(t,r,o,n),r},ze.addModuleResolver=function(e,t,n,r){switch(n){case"js":t.push(new Be(e,r));break;case"json":r?t.push(new We(e,r)):u.error("No callback provided for json asset with ".concat(e.type," '").concat(e.value,"'. Skipping it."));break;default:u.error("Cannot resolve dependency. Unknown extension identified for ".concat(e.type," '").concat(e.value,"'"))}},ze.resolvePathFields=function(e){var t=e.path,o=e.fields,e=f([],l(t.matchAll(/\$(\w+)/g)),!1),i=[t];return e.forEach(function(n){var e=o[n[1]],e=Array.isArray(e)?e:[e],r=[];e.forEach(function(t){i.forEach(function(e){r.push(e.replace(n[0],t))})}),i=r}),i};var Ye=ze;function ze(){}function Ge(e){return e&&e.Math==Math&&e}function v(e){try{return!!e()}catch(e){return!0}}function Qe(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}function qe(e){return kt(Dt(e),8,-1)}function Xe(e){return null==e}function Je(e){if(jt(e))throw Rt("Can't call method on "+e);return e}function Ze(e){return xt(Kt(e))}function et(e,t){return arguments.length<2?(n=Bt[e],Vt(n)?n:void 0):Bt[e]&&Bt[e][t];var n}function tt(e){try{return Qt(e)}catch(e){return"Object"}}function nt(e,t){return e=e[t],en(e)?void 0:Zt(e)}function rt(t,n){try{sn(cn,t,{value:n,configurable:!0,writable:!0})}catch(e){cn[t]=n}return n}function ot(e){return ln(un(e))}function it(e){return"Symbol("+(void 0===e?"":e)+")_"+hn(++pn+vn,36)}function h(e){var t;return mn(_n,e)&&(bn||"string"==typeof _n[e])||(t="Symbol."+e,bn&&mn(Tn,e)?_n[e]=Tn[e]:_n[e]=(wn&&Cn?Cn:Mn)(t)),_n[e]}function ct(e){return e=In(e,"string"),jn(e)?e:e+""}function st(e){return xn?Rn.createElement(e):{}}function at(e){if(Yn(e))return e;throw Gn(zn(e)+" is not an object")}function ut(e){return ar[e]||(ar[e]=sr(e))}function lt(e,t,n,r){var o=(r=r||{}).enumerable,i=void 0!==r.name?r.name:t;if(Er(n)&&Or(n,i,r),r.global)o?e[t]=n:Dr(t,n);else{try{r.unsafe?e[t]&&(o=!0):delete e[t]}catch(e){}o?e[t]=n:Pr.f(e,t,{value:n,enumerable:!1,configurable:!r.nonConfigurable,writable:!r.nonWritable})}return e}function ft(e){return(e=+e)!=e||0==e?0:Ar(e)}function dt(e){return 0<e?Kr(xr(e),9007199254740991):0}function gt(s){return function(e,t,n){var r,o=Nr(e),i=Br(o),c=$r(n,i);if(s&&t!=t){for(;c<i;)if((r=o[c++])!=r)return!0}else for(;c<i;c++)if((s||c in o)&&o[c]===t)return s||c||0;return!s&&-1}}function pt(e,t){var n,r=Hr(e),o=0,i=[];for(n in r)!Vr(Ur,n)&&Vr(r,n)&&Yr(i,n);for(;t.length>o;)!Vr(r,n=t[o++])||~Wr(i,n)||Yr(i,n);return i}function vt(e,t){return(e=so[co(e)])==uo||e!=ao&&(oo(t)?ro(t):!!t)}function ht(e,t){var n,r,o,i=e.target,c=e.global,s=e.stat,a=c?lo:s?lo[i]||vo(i,{}):(lo[i]||{}).prototype;if(a)for(n in t){if(r=t[n],o=e.dontCallGetSet?(o=fo(a,n))&&o.value:a[n],!yo(c?n:i+(s?".":"#")+n,e.forced)&&void 0!==o){if(typeof r==typeof o)continue;ho(r,o)}(e.sham||o&&o.sham)&&go(r,"sham",!0),po(a,n,r,e)}}function yt(e){if("Symbol"===To(e))throw TypeError("Cannot convert a Symbol value to a string");return Co(e)}function mt(){var e=Mo(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}var St,bt,wt,_t,p="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},p=Ge("object"==typeof globalThis&&globalThis)||Ge("object"==typeof window&&window)||Ge("object"==typeof self&&self)||Ge("object"==typeof p&&p)||function(){return this}()||Function("return this")(),y={},Tt=!v(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),Ct=!v(function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}),Mt=Function.prototype.call,Et=Ct?Mt.bind(Mt):function(){return Mt.apply(Mt,arguments)},m={},S={}.propertyIsEnumerable,Pt=Object.getOwnPropertyDescriptor,b=Pt&&!S.call({1:2},1),b=(m.f=b?function(e){e=Pt(this,e);return!!e&&e.enumerable}:S,Ct),S=Function.prototype,Ot=S.call,S=b&&S.bind.bind(Ot,Ot),b=b?S:function(e){return function(){return Ot.apply(e,arguments)}},S=b,Dt=S({}.toString),kt=S("".slice),S=v,Ft=qe,At=Object,It=b("".split),S=S(function(){return!At("z").propertyIsEnumerable(0)})?function(e){return"String"==Ft(e)?It(e,""):At(e)}:At,jt=Xe,Rt=TypeError,xt=S,Kt=Je,S="object"==typeof document&&document.all,S={all:S,IS_HTMLDDA:void 0===S&&void 0!==S},Lt=S.all,w=S.IS_HTMLDDA?function(e){return"function"==typeof e||e===Lt}:function(e){return"function"==typeof e},Nt=w,$t=S.all,S=S.IS_HTMLDDA?function(e){return"object"==typeof e?null!==e:Nt(e)||e===$t}:function(e){return"object"==typeof e?null!==e:Nt(e)},Bt=p,Vt=w,Ht=b({}.isPrototypeOf),_=et("navigator","userAgent")||"",T=p.process,C=p.Deno,T=T&&T.versions||C&&C.version,C=T&&T.v8,Wt=(E=!(E=C?0<(M=C.split("."))[0]&&M[0]<4?1:+(M[0]+M[1]):E)&&_&&(!(M=_.match(/Edge\/(\d+)/))||74<=M[1])&&(M=_.match(/Chrome\/(\d+)/))?+M[1]:E,E),T=v,C=!!Object.getOwnPropertySymbols&&!T(function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&Wt&&Wt<41}),_=C&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Ut=et,Yt=w,zt=Ht,Gt=Object,M=_?function(e){return"symbol"==typeof e}:function(e){var t=Ut("Symbol");return Yt(t)&&zt(t.prototype,Gt(e))},Qt=String,qt=w,Xt=tt,Jt=TypeError,Zt=function(e){if(qt(e))return e;throw Jt(Xt(e)+" is not a function")},en=Xe,tn=Et,nn=w,rn=S,on=TypeError,E={exports:{}},cn=p,sn=Object.defineProperty,T=rt,P="__core-js_shared__",T=p[P]||T(P,{}),an=T,un=((E.exports=function(e,t){return an[e]||(an[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.26.1",mode:"global",copyright:"Â© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.26.1/LICENSE",source:"https://github.com/zloirock/core-js"}),Je),ln=Object,fn=ot,dn=b({}.hasOwnProperty),P=Object.hasOwn||function(e,t){return dn(fn(e),t)},gn=b,pn=0,vn=Math.random(),hn=gn(1..toString),gn=p,yn=E.exports,mn=P,Sn=it,bn=C,wn=_,_n=yn("wks"),Tn=gn.Symbol,Cn=Tn&&Tn.for,Mn=wn?Tn:Tn&&Tn.withoutSetter||Sn,En=Et,Pn=S,On=M,Dn=nt,kn=function(e,t){var n,r;if("string"===t&&nn(n=e.toString)&&!rn(r=tn(n,e)))return r;if(nn(n=e.valueOf)&&!rn(r=tn(n,e)))return r;if("string"!==t&&nn(n=e.toString)&&!rn(r=tn(n,e)))return r;throw on("Can't convert object to primitive value")},Fn=TypeError,An=h("toPrimitive"),In=function(e,t){if(!Pn(e)||On(e))return e;var n=Dn(e,An);if(n){if(n=En(n,e,t=void 0===t?"default":t),!Pn(n)||On(n))return n;throw Fn("Can't convert object to primitive value")}return kn(e,t=void 0===t?"number":t)},jn=M,C=S,Rn=p.document,xn=C(Rn)&&C(Rn.createElement),Kn=st,_=!Tt&&!v(function(){return 7!=Object.defineProperty(Kn("div"),"a",{get:function(){return 7}}).a}),Ln=Et,Nn=m,$n=Qe,Bn=Ze,Vn=ct,Hn=P,Wn=_,Un=Object.getOwnPropertyDescriptor,yn=(y.f=Tt?Un:function(e,t){if(e=Bn(e),t=Vn(t),Wn)try{return Un(e,t)}catch(e){}if(Hn(e,t))return $n(!Ln(Nn.f,e,t),e[t])},{}),gn=Tt&&v(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype}),Yn=S,zn=String,Gn=TypeError,Qn=_,qn=at,Xn=ct,Jn=TypeError,Zn=Object.defineProperty,er=Object.getOwnPropertyDescriptor,tr="enumerable",nr="configurable",rr="writable",Sn=(yn.f=Tt?gn?function(e,t,n){var r;return qn(e),t=Xn(t),qn(n),"function"==typeof e&&"prototype"===t&&"value"in n&&rr in n&&!n[rr]&&((r=er(e,t))&&r[rr]&&(e[t]=n.value,n={configurable:(nr in n?n:r)[nr],enumerable:(tr in n?n:r)[tr],writable:!1})),Zn(e,t,n)}:Zn:function(e,t,n){if(qn(e),t=Xn(t),qn(n),Qn)try{return Zn(e,t,n)}catch(e){}if("get"in n||"set"in n)throw Jn("Accessors not supported");return"value"in n&&(e[t]=n.value),e},Tt),or=yn,ir=Qe,M=Sn?function(e,t,n){return or.f(e,t,ir(1,n))}:function(e,t,n){return e[t]=n,e},C={exports:{}},m=Tt,_=P,Sn=Function.prototype,O=m&&Object.getOwnPropertyDescriptor,_=_(Sn,"name"),_={EXISTS:_,PROPER:_&&"something"===function(){}.name,CONFIGURABLE:_&&(!m||O(Sn,"name").configurable)},m=w,O=T,cr=b(Function.toString),Sn=(m(O.inspectSource)||(O.inspectSource=function(e){return cr(e)}),O.inspectSource),m=w,O=p.WeakMap,m=m(O)&&/native code/.test(String(O)),O=E.exports,sr=it,ar=O("keys"),O={},ur=S,lr=M,fr=P,D=ut,dr=O,gr="Object already initialized",pr=p.TypeError,k=p.WeakMap,vr=m||T.state?((wt=T.state||(T.state=new k)).get=wt.get,wt.has=wt.has,wt.set=wt.set,St=function(e,t){if(wt.has(e))throw pr(gr);return t.facade=e,wt.set(e,t),t},bt=function(e){return wt.get(e)||{}},function(e){return wt.has(e)}):(dr[_t=D("state")]=!0,St=function(e,t){if(fr(e,_t))throw pr(gr);return t.facade=e,lr(e,_t,t),t},bt=function(e){return fr(e,_t)?e[_t]:{}},function(e){return fr(e,_t)}),m={set:St,get:bt,has:vr,enforce:function(e){return vr(e)?bt(e):St(e,{})},getterFor:function(t){return function(e){if(ur(e)&&(e=bt(e)).type===t)return e;throw pr("Incompatible receiver, "+t+" required")}}},T=v,hr=w,yr=P,mr=Tt,Sr=_.CONFIGURABLE,br=Sn,wr=m.enforce,_r=m.get,Tr=Object.defineProperty,Cr=mr&&!T(function(){return 8!==Tr(function(){},"length",{value:8}).length}),Mr=String(String).split("String"),k=C.exports=function(e,t,n){"Symbol("===String(t).slice(0,7)&&(t="["+String(t).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(t="get "+t),n&&n.setter&&(t="set "+t),(!yr(e,"name")||Sr&&e.name!==t)&&(mr?Tr(e,"name",{value:t,configurable:!0}):e.name=t),Cr&&n&&yr(n,"arity")&&e.length!==n.arity&&Tr(e,"length",{value:n.arity});try{n&&yr(n,"constructor")&&n.constructor?mr&&Tr(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}n=wr(e);return yr(n,"source")||(n.source=Mr.join("string"==typeof t?t:"")),e},Er=(Function.prototype.toString=k(function(){return hr(this)&&_r(this).source||br(this)},"toString"),w),Pr=yn,Or=C.exports,Dr=rt,dr={},kr=Math.ceil,Fr=Math.floor,Ar=Math.trunc||function(e){e=+e;return(0<e?Fr:kr)(e)},Ir=ft,jr=Math.max,Rr=Math.min,xr=ft,Kr=Math.min,Lr=dt,Nr=Ze,$r=function(e,t){e=Ir(e);return e<0?jr(e+t,0):Rr(e,t)},Br=function(e){return Lr(e.length)},D={includes:gt(!0),indexOf:gt(!1)},_=b,Vr=P,Hr=Ze,Wr=D.indexOf,Ur=O,Yr=_([].push),T=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],zr=pt,Gr=T.concat("length","prototype"),k=(dr.f=Object.getOwnPropertyNames||function(e){return zr(e,Gr)},{}),C=(k.f=Object.getOwnPropertySymbols,et),Qr=dr,qr=k,Xr=at,Jr=b([].concat),D=C("Reflect","ownKeys")||function(e){var t=Qr.f(Xr(e)),n=qr.f;return n?Jr(t,n(e)):t},Zr=P,eo=D,to=y,no=yn,ro=v,oo=w,io=/#|\.prototype\./,co=vt.normalize=function(e){return String(e).replace(io,".").toLowerCase()},so=vt.data={},ao=vt.NATIVE="N",uo=vt.POLYFILL="P",lo=p,fo=y.f,go=M,po=lt,vo=rt,ho=function(e,t,n){for(var r=eo(t),o=no.f,i=to.f,c=0;c<r.length;c++){var s=r[c];Zr(e,s)||n&&Zr(n,s)||o(e,s,i(t,s))}},yo=vt,_={},dr=(_[h("toStringTag")]="z","[object z]"===String(_)),k=dr,mo=w,So=qe,bo=h("toStringTag"),wo=Object,_o="Arguments"==So(function(){return arguments}()),C=k?So:function(e){var t;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(t=function(e,t){try{return e[t]}catch(e){}}(e=wo(e),bo))?t:_o?So(e):"Object"==(t=So(e))&&mo(e.callee)?"Arguments":t},To=C,Co=String,Mo=at,D=v,Eo=p.RegExp,y=D(function(){var e=Eo("a","y");return e.lastIndex=2,null!=e.exec("abcd")}),_=y||D(function(){return!Eo("a","y").sticky}),k={BROKEN_CARET:y||D(function(){var e=Eo("^r","gy");return e.lastIndex=2,null!=e.exec("str")}),MISSED_STICKY:_,UNSUPPORTED_Y:y},D={},Po=pt,Oo=T,_=Object.keys||function(e){return Po(e,Oo)},Do=yn,ko=at,Fo=Ze,Ao=_;D.f=Tt&&!gn?Object.defineProperties:function(e,t){ko(e);for(var n,r=Fo(t),o=Ao(t),i=o.length,c=0;c<i;)Do.f(e,n=o[c++],r[n]);return e};function Io(){}function jo(e){e.write(Zo("")),e.close();var t=e.parentWindow.Object;return e=null,t}function Ro(e){if("Function"===bi(e))return wi(e)}function xo(o){return function(e,t){var n,e=Fi(Ai(e)),t=ki(t),r=e.length;return t<0||r<=t?o?"":void 0:(n=ji(e,t))<55296||56319<n||t+1===r||(r=ji(e,t+1))<56320||57343<r?o?Ii(e,t):n:o?Ri(e,t,t+2):r-56320+(n-55296<<10)+65536}}function Ko(e,t,n){return t+(n?xi(e,t).length:1)}function Lo(i,c,s,a,u,e){var l=s+i.length,f=a.length,t=Hi;return void 0!==u&&(u=Ki(u),t=Vi),$i(e,t,function(e,t){var n;switch(Ni(t,0)){case"$":return"$";case"&":return i;case"`":return Bi(c,0,s);case"'":return Bi(c,l);case"<":n=u[Bi(t,1,-1)];break;default:var r,o=+t;if(0==o)return e;if(f<o)return 0!==(r=Li(o/10))&&r<=f?void 0===a[r-1]?Ni(t,1):a[r-1]+Ni(t,1):e;n=a[o-1]}return void 0===n?"":n})}function No(e,t){var n=e.exec;if(Yi(n))return null!==(n=Wi(n,e,t))&&Ui(n),n;if("RegExp"===zi(e))return Wi(Gi,e,t);throw Qi("RegExp#exec called on incompatible receiver")}function $o(e){var t;return yc(e)&&(void 0!==(t=e[Sc])?!!t:"RegExp"==mc(e))}function Bo(e){var t=e.flags;return void 0!==t||"flags"in Cc||wc(e,"flags")||!_c(Cc,e)?t:bc(Tc,e)}function Vo(e,t,n){return n>e.length?-1:""===t?n:xc(e,t,n)}function Ho(e,t){return $c(Nc[e].prototype[t])}var Wo,y=et("document","documentElement"),Uo=at,Yo=D,zo=T,_=O,Go=y,Qo=st,qo="prototype",Xo="script",Jo=ut("IE_PROTO"),Zo=function(e){return"<"+Xo+">"+e+"</"+Xo+">"},ei=function(){try{Wo=new ActiveXObject("htmlfile")}catch(e){}ei="undefined"==typeof document||document.domain&&Wo?jo(Wo):(e=Qo("iframe"),t="java"+Xo+":",e.style.display="none",Go.appendChild(e),e.src=String(t),(t=e.contentWindow.document).open(),t.write(Zo("document.F=Object")),t.close(),t.F);for(var e,t,n=zo.length;n--;)delete ei[qo][zo[n]];return ei()},Tt=(_[Jo]=!0,Object.create||function(e,t){var n;return null!==e?(Io[qo]=Uo(e),n=new Io,Io[qo]=null,n[Jo]=e):n=ei(),void 0===t?n:Yo.f(n,t)}),gn=v,ti=p.RegExp,D=gn(function(){var e=ti(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}),T=v,ni=p.RegExp,O=T(function(){var e=ni("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}),ri=Et,y=b,oi=yt,ii=mt,_=k,gn=E.exports,ci=Tt,si=m.get,T=D,k=O,ai=gn("native-string-replace",String.prototype.replace),ui=RegExp.prototype.exec,li=ui,fi=y("".charAt),di=y("".indexOf),gi=y("".replace),pi=y("".slice),vi=(E=/b*/g,ri(ui,D=/a/,"a"),ri(ui,E,"a"),0!==D.lastIndex||0!==E.lastIndex),hi=_.BROKEN_CARET,yi=void 0!==/()??/.exec("")[1],O=li=vi||yi||hi||T||k?function(e){var t,n,r,o,i,c,s=this,a=si(s),e=oi(e),u=a.raw;if(u)return u.lastIndex=s.lastIndex,f=ri(li,u,e),s.lastIndex=u.lastIndex,f;var l=a.groups,u=hi&&s.sticky,f=ri(ii,s),a=s.source,d=0,g=e;if(u&&(f=gi(f,"y",""),-1===di(f,"g")&&(f+="g"),g=pi(e,s.lastIndex),0<s.lastIndex&&(!s.multiline||s.multiline&&"\n"!==fi(e,s.lastIndex-1))&&(a="(?: "+a+")",g=" "+g,d++),t=new RegExp("^(?:"+a+")",f)),yi&&(t=new RegExp("^"+a+"$(?!\\s)",f)),vi&&(n=s.lastIndex),r=ri(ui,u?t:s,g),u?r?(r.input=pi(r.input,d),r[0]=pi(r[0],d),r.index=s.lastIndex,s.lastIndex+=r[0].length):s.lastIndex=0:vi&&r&&(s.lastIndex=s.global?r.index+r[0].length:n),yi&&r&&1<r.length&&ri(ai,r[0],t,function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(r[o]=void 0)}),r&&l)for(r.groups=i=ci(null),o=0;o<l.length;o++)i[(c=l[o])[0]]=r[c[1]];return r}:li,gn=(ht({target:"RegExp",proto:!0,forced:/./.exec!==O},{exec:O}),Ct),y=Function.prototype,mi=y.apply,Si=y.call,D="object"==typeof Reflect&&Reflect.apply||(gn?Si.bind(mi):function(){return Si.apply(mi,arguments)}),bi=qe,wi=b,_i=Ro,Ti=lt,Ci=O,Mi=v,Ei=h,Pi=M,Oi=Ei("species"),Di=RegExp.prototype,E=b,ki=ft,Fi=yt,Ai=Je,Ii=E("".charAt),ji=E("".charCodeAt),Ri=E("".slice),xi={codeAt:xo(!1),charAt:xo(!0)}.charAt,_=b,Ki=ot,Li=Math.floor,Ni=_("".charAt),$i=_("".replace),Bi=_("".slice),Vi=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,Hi=/\$([$&'`]|\d{1,2})/g,Wi=Et,Ui=at,Yi=w,zi=qe,Gi=O,Qi=TypeError,qi=D,Xi=Et,T=b,k=function(n,e,t,r){var c,o=Ei(n),s=!Mi(function(){var e={};return e[o]=function(){return 7},7!=""[n](e)}),i=s&&!Mi(function(){var e=!1,t=/a/;return"split"===n&&((t={constructor:{}}).constructor[Oi]=function(){return t},t.flags="",t[o]=/./[o]),t.exec=function(){return e=!0,null},t[o](""),!e});s&&i&&!t||(c=_i(/./[o]),i=e(o,""[n],function(e,t,n,r,o){var e=_i(e),i=t.exec;return i===Ci||i===Di.exec?s&&!o?{done:!0,value:c(t,n,r)}:{done:!0,value:e(n,t,r)}:{done:!1}}),Ti(String.prototype,n,i[0]),Ti(Di,o,i[1])),r&&Pi(Di[o],"sham",!0)},Ct=v,Ji=at,Zi=w,ec=Xe,tc=ft,nc=dt,rc=yt,oc=Je,ic=Ko,cc=nt,sc=Lo,ac=No,uc=h("replace"),lc=Math.max,fc=Math.min,dc=T([].concat),gc=T([].push),pc=T("".indexOf),vc=T("".slice),y="$0"==="a".replace(/./,"$0"),hc=!!/./[uc]&&""===/./[uc]("a","$0"),yc=(k("replace",function(e,S,b){var w=hc?"$":"$0";return[function(e,t){var n=oc(this),r=ec(e)?void 0:cc(e,uc);return r?Xi(r,e,n,t):Xi(S,rc(n),e,t)},function(e,t){var n=Ji(this),r=rc(e);if("string"==typeof t&&-1===pc(t,w)&&-1===pc(t,"$<")){e=b(S,n,r,t);if(e.done)return e.value}for(var o,i=Zi(t),c=(i||(t=rc(t)),n.global),s=(c&&(o=n.unicode,n.lastIndex=0),[]);null!==(d=ac(n,r))&&(gc(s,d),c);)""===rc(d[0])&&(n.lastIndex=ic(r,nc(n.lastIndex),o));for(var a,u="",l=0,f=0;f<s.length;f++){for(var d,g=rc((d=s[f])[0]),p=lc(fc(tc(d.index),r.length),0),v=[],h=1;h<d.length;h++)gc(v,void 0===(a=d[h])?a:String(a));var y=d.groups,m=i?(m=dc([g],v,p,r),void 0!==y&&gc(m,y),rc(qi(t,void 0,m))):sc(g,r,p,v,y,t);l<=p&&(u+=vc(r,l,p)+m,l=p+g.length)}return u+vc(r,l)}]},!!Ct(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})||!y||hc),S),mc=qe,Sc=h("match"),bc=Et,wc=P,_c=Ht,Tc=mt,Cc=RegExp.prototype,gn=ht,Mc=Et,M=b,Ec=Je,Pc=w,Oc=Xe,Dc=$o,kc=yt,Fc=nt,Ac=Bo,Ic=Lo,jc=h("replace"),Rc=TypeError,xc=M("".indexOf),Kc=(M("".replace),M("".slice)),Lc=Math.max,Nc=(gn({target:"String",proto:!0},{replaceAll:function(e,t){var n,r,o,i,c,s,a,u=Ec(this),l=0,f=0,d="";if(!Oc(e)){if(Dc(e)&&(n=kc(Ec(Ac(e))),!~xc(n,"g")))throw Rc("`.replaceAll` does not allow non-global regexes");if(n=Fc(e,jc))return Mc(n,e,u,t)}for(r=kc(u),o=kc(e),(i=Pc(t))||(t=kc(t)),c=o.length,s=Lc(1,c),l=Vo(r,o,0);-1!==l;)a=i?kc(t(o,l,r)):Ic(o,r,l,[],void 0,t),d+=Kc(r,f,l)+a,f=l+c,l=Vo(r,o,l+s);return f<r.length&&(d+=Kc(r,f)),d}}),p),$c=b;Ho("String","replaceAll");var Bc=C;dr||lt(Object.prototype,"toString",dr?{}.toString:function(){return"[object "+Bc(this)+"]"},{unsafe:!0});var Vc,E=!v(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),Hc=P,Wc=w,Uc=ot,_=E,Yc=ut("IE_PROTO"),zc=Object,Gc=zc.prototype,O=v,D=w,T=S,k=_?zc.getPrototypeOf:function(e){e=Uc(e);if(Hc(e,Yc))return e[Yc];var t=e.constructor;return Wc(t)&&e instanceof t?t.prototype:e instanceof zc?Gc:null},Ct=lt,Qc=h("iterator"),y=!1;[].keys&&("next"in(Ht=[].keys())?(M=k(k(Ht)))!==Object.prototype&&(Vc=M):y=!0);function qc(){return this}function Xc(){}function Jc(e){if(!as(e))return!1;try{return ds(Xc,fs,e),!0}catch(e){return!1}}function Zc(e){if(!as(e))return!1;switch(us(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return vs||!!ps(gs,ls(e))}catch(e){return!0}}D((Vc=!T(Vc)||O(function(){var e={};return Vc[Qc].call(e)!==e})?{}:Vc)[Qc])||Ct(Vc,Qc,function(){return this});var gn={IteratorPrototype:Vc,BUGGY_SAFARI_ITERATORS:y},es=yn.f,ts=P,ns=h("toStringTag"),rs=gn.IteratorPrototype,os=Tt,is=Qe,cs=function(e,t,n){(e=e&&!n?e.prototype:e)&&!ts(e,ns)&&es(e,ns,{configurable:!0,value:t})},ss={},p=b,dr=v,as=w,us=C,ls=Sn,fs=[],ds=et("Reflect","construct"),gs=/^\s*(?:class|function)\b/,ps=p(gs.exec),vs=!gs.exec(Xc);Zc.sham=!0;function hs(e){var t=Ds(this),e=Os(e),n=js(t,RegExp),r=Os(As(t)),n=new n(n===RegExp?t.source:t,r),o=!!~Vs(r,"g"),r=!!~Vs(r,"u");return n.lastIndex=Ps(t.lastIndex),new Us(n,e,o,r)}var ys=!ds||dr(function(){var e;return Jc(Jc.call)||!Jc(Object)||!Jc(function(){e=!0})||e})?Zc:Jc,ms=tt,Ss=TypeError,bs=at,ws=function(e){if(ys(e))return e;throw Ss(ms(e)+" is not a constructor")},_s=Xe,Ts=h("species"),E=ht,Cs=Et,S=Ro,_=function(e,t,n,r){t+=" Iterator";return e.prototype=os(rs,{next:is(+!r,n)}),cs(e,t,!1),ss[t]=qc,e},Ms=function(e,t){return{value:e,done:t}},Es=Je,Ps=dt,Os=yt,Ds=at,ks=Xe,Fs=$o,As=Bo,Is=nt,k=lt,Ht=v,js=function(e,t){var e=bs(e).constructor;return void 0===e||_s(e=bs(e)[Ts])?t:ws(e)},Rs=Ko,xs=No,M=m,Ks=h("matchAll"),D="RegExp String",Ls=D+" Iterator",Ns=M.set,$s=M.getterFor(Ls),T=RegExp.prototype,Bs=TypeError,Vs=S("".indexOf),Hs=S("".matchAll),Ws=!!Hs&&!Ht(function(){Hs("a",/./)}),Us=_(function(e,t,n,r){Ns(this,{type:Ls,regexp:e,string:t,global:n,unicode:r,done:!1})},D,function(){var e=$s(this);if(e.done)return Ms(void 0,!0);var t=e.regexp,n=e.string,r=xs(t,n);return null===r?(e.done=!0,Ms(void 0,!0)):(e.global?""===Os(r[0])&&(t.lastIndex=Rs(n,Ps(t.lastIndex),e.unicode)):e.done=!0,Ms(r,!1))});E({target:"String",proto:!0,forced:Ws},{matchAll:function(e){var t,n=Es(this);if(ks(e)){if(Ws)return Hs(n,e)}else{if(Fs(e)&&(t=Os(Es(As(e))),!~Vs(t,"g")))throw Bs("`.matchAll` does not allow non-global regexes");if(Ws)return Hs(n,e);if(t=Is(e,Ks))return Cs(t,e,n)}return t=Os(n),new RegExp(e,"g")[Ks](t)}}),Ks in T||k(T,Ks,hs);Ho("String","matchAll"),window.__MSFT_SDK={EventBus:we,Logger:u,Store:c,Utils:{IFrameUtils:d,ObjectUtils:B},enums:n,constants:Ee,Helpers:e,config:(null==(O=window.__MSFT_SDK)?void 0:O.config)||null,websiteConfiguration:(null==(Ct=window.__MSFT_SDK)?void 0:Ct.websiteConfiguration)||{},initConsent:_e.initConsent,debug:function(){return{events:window.__MSFT_SDK.Store.getters.debugInfo.events,logs:window.__MSFT_SDK.Store.getters.debugInfo.logs,state:window.__MSFT_SDK.Store.getters.state}}},window.MSFTConsent=o,we.on(ce.CoreConsentModelSelected,function(){Ye.resolveDependencies()}),zs.ConvertToMilliseconds=function(e){switch(e.unit){case pe.day:return 864e5*e.value;case pe.week:return 864e5*e.value*7;case pe.month:return 864e5*e.value*30;case pe.year:return 864e5*e.value*365;default:return u.error("Invalid unit for interval : ".concat(e.unit)),e.value}};var Ys=zs;function zs(){}F.encodeConsent=function(e,t){u.info("encoding consent",{consent:e,model:t});var n=e.preferences,e="".concat(F.CONSENTVERSION,"=")+t.consentVersion.toString()+"%",e=(e+="".concat(F.CONSENTID,"=")+t.consentId+"%")+Object.keys(n).map(function(e){return"".concat(e,"=").concat(n[e]===ue.ON?ue.ON:ue.OFF)}).join("%");return u.info("encoded consent string: ".concat(e)),e},F.decodeConsentString=function(e){u.info("decoding consent string: ".concat(e));var n={};return e.split("%").forEach(function(e){var t,e=e.split("=");2===e.length&&(t=e[0],e=e[1],t!==F.CONSENTVERSION&&t!==F.CONSENTID&&(n[t]=e))}),u.info("decoded consent",{preferences:n}),{preferences:n}},F.getVersionFromString=function(e){var t=e.match(/consentVersion=([\d.]+)%/);if(null==t)return-1;t=parseInt(t[1]);return isNaN(t)?-1:(u.info("getVersionString str: ".concat(e," found consentVersion: ").concat(t)),t)},F.getModelIdFromString=function(e){var t=e.match(/consentId=([^%]+)%/);if(null!=t)return u.info("getModelIdFromString str: ".concat(e," found version: ").concat(t[1])),t[1]},F.CONSENTVERSION="consentVersion",F.CONSENTID="consentId";var Gs=F;function F(){}qs.getUserCountryOrRegion=function(){return s(this,void 0,void 0,function(){var t,n;return a(this,function(e){switch(e.label){case 0:t=window.__MSFT_SDK.Store.getters.packageConfigurations.geoTrackingURL,e.label=1;case 1:return e.trys.push([1,3,,4]),[4,fetch(t).then(function(e){return(null==(e=e.headers.get("country"))?void 0:e.toLowerCase())||null})];case 2:return[2,e.sent()];case 3:return n=e.sent(),console.error("Got exception while fetching geo location. Switching to alternate way.",n),[2,""];case 4:return[2]}})})};var Qs=qs;function qs(){}var y=function(e){this.state=e||{config:{sdkConfig:window.__MSFT_SDK.config,websiteConfiguration:window.__MSFT_SDK.websiteConfiguration},custom:{lcid:"",proxyJS:"",languageBlockList:[],lcidList:[],templateData:{}}}},Xs=(Js.get=function(){return document.cookie},Js.getItem=function(t){return u.info("get cookie key: ".concat(t)),document.cookie.split("; ").find(function(e){return e.startsWith("".concat(t,"="))})||""},Js.set=function(e){u.info("set cookie: ".concat(e)),document.cookie=e},Js.setItem=function(e,t,n){var r;u.info("set cookie key: ".concat(e," value: ").concat(t," ttl: ").concat(n)),n&&((r=new Date).setTime(r.getTime()+n),r=r.toUTCString()),document.cookie="".concat(e,"=").concat(t).concat(r?"; expires=".concat(r):"","; path=/")},Js);function Js(){}K(A,Zs=y),Object.defineProperty(A.prototype,"currentModel",{get:function(){return this.state.config.currentModel},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"selectedCoreModel",{get:function(){return this.state.config.selectedCoreModel},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"applicableTrackerCategories",{get:function(){var e;return this.websiteConfiguration.trackerCategories&&this.websiteConfiguration.trackerCategories.length?this.websiteConfiguration.trackerCategories:null==(e=this.sdkConfig)?void 0:e.trackerCategories},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"bannerTrackerCategories",{get:function(){var n=this;return((this.currentModel||this.selectedCoreModel).trackerCategories||[]).filter(function(t){var e;return null==(e=n.applicableTrackerCategories)?void 0:e.some(function(e){return e.id===t.id})})},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"models",{get:function(){return this.state.config.sdkConfig.models},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"template",{get:function(){return this.state.config.template},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"startingLayoutPage",{get:function(){var t=null==(e=null==(e=null==(e=window.__MSFT_SDK.Store.getters)?void 0:e.config)?void 0:e.initConfig)?void 0:e.startingLayoutPage,e=null==(e=null==(e=this.state.config.template)?void 0:e.pages)?void 0:e.some(function(e){return e.name===t});return t&&e?t:(null==(e=this.state.config.template)?void 0:e.initPage)||""},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"translations",{get:function(){return this.state.config.translations||[]},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"styles",{get:function(){return this.state.custom.styles||[]},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"timezone",{get:function(){return window.Intl.DateTimeFormat().resolvedOptions().timeZone},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"languages",{get:function(){var n=this,e=navigator.languages,r=[];return e.forEach(function(e){if(!n.state.custom.languageBlockList.includes(e))for(var t=0;t<n.state.custom.lcidList.length;t++)if(e.startsWith(n.state.custom.lcidList[t])){r.includes(n.state.custom.lcidList[t])||r.push(n.state.custom.lcidList[t]);break}}),r},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"encodedConsent",{get:function(){return Xs.getItem(window.__MSFT_SDK.enums.Cookie.Consent)},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"templateParentMap",{get:function(){var e;return(null==(e=this.state.config.template)?void 0:e.componentParentMap)||{}},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"extendedTrackers",{get:function(){return this.state.config.sdkConfig.extendedTrackers},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"defaultModel",{get:function(){var e;return null==(e=this.state.config.sdkConfig)?void 0:e.defaultConsentModel},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"lcid",{get:function(){return this.state.custom.lcid},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"components",{get:function(){return this.state.config.components||{}},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"proxyJS",{get:function(){return this.state.custom.proxyJS},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"questions",{get:function(){return this.state.config.questions||[]},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"templateData",{get:function(){return this.state.custom.templateData},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"sdkConfig",{get:function(){return this.state.config.sdkConfig},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"packageConfigurations",{get:function(){var e;return(null==(e=this.state.config.sdkConfig)?void 0:e.configurations)||{}},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"websiteConfiguration",{get:function(){return this.state.config.websiteConfiguration||{}},enumerable:!1,configurable:!0});var Zs,ea=A;function A(e){var t=Zs.call(this,e)||this;return t.state.custom=L(L({},e.custom),{languageBlockList:["ca-Es-VALENCIA","kok"],lcidList:["af","am","ar","az","bg","bn","bs","ca","cs","cy","da","de","el","en-GB","en","es-MX","es","et","eu","fa","fil","fi","fr-CA","fr","ga","gd","gl","gu","he","hi","hr","hu","id","is","it","ja","ka","kk","km","kn","ko","lb","lo","lt","lv","mi","mk","ml","mr","ms","mt","nl","ne","nb","nn","or","pa","pl","pt-BR","pt","qu","ro","ru","sk","sl","sq","sr","sv","ta","te","th","tr","tt","ug","uk","ur","vi","zh-CN","zh-TW","zh"]}),t}K(I,ta=y),I.prototype.setCurrentModel=function(e){this.state.config.currentModel=e},I.prototype.setSelectedCoreModel=function(e){this.state.config.selectedCoreModel=e},I.prototype.setTemplate=function(e){this.state.config.template=e},I.prototype.setTranslations=function(e){this.state.config.translations=e},I.prototype.setStyles=function(e){this.state.custom.styles=e},I.prototype.setEncodedConsentString=function(e,t,n){Xs.setItem(e,t,n)},I.prototype.setLcid=function(e){this.state.custom.lcid=e},I.prototype.setComponents=function(e){this.state.config.components=e},I.prototype.setProxyJS=function(e){this.state.custom.proxyJS=e},I.prototype.setQuestions=function(e){this.state.config.questions=e},I.prototype.setTemplateData=function(e){this.state.custom.templateData=e},I.prototype.setSDKconfig=function(e){this.state.config.sdkConfig=e};var ta,yn=I;function I(e){return ta.call(this,e)||this}var P=(new y).state,na={getters:new ea(P),reducers:new yn(P)};function j(){window.__MSFT_SDK.Store.addReducers(na.reducers),window.__MSFT_SDK.Store.addGetters(ea),j.registerEvents()}j.registerEvents=function(){window.__MSFT_SDK.EventBus.on(window.__MSFT_SDK.enums.Events.Init,j.onInit)},j.matchLocation=function(e,t){if(!t||!Array.isArray(t))return!1;for(var n=0;n<t.length;n++){var r=t[n].toLowerCase();if("all"===r||r===e)return!0}return 0===t.length},j.selectConsentModel=function(i){return s(this,void 0,void 0,function(){var t,n,r,o;return a(this,function(e){switch(e.label){case 0:return(t=i.countryOrRegion,r=i.coreModels,n=i.LCID,r=r||window.__MSFT_SDK.Store.getters.models,u.info("selecting consent model",{models:r,countryCode:t,timezone:window.__MSFT_SDK.Store.getters.timezone}),Array.isArray(r)&&0!==r.length)?(o=r.find(function(e){return e.name===window.__MSFT_SDK.Store.getters.defaultModel})||r[0],[4,j.selectModelByGeoLocation(r,null==t?void 0:t.toLowerCase())]):(window.__MSFT_SDK.Logger.info("Models not found."),[2]);case 1:return o=e.sent()||o,window.__MSFT_SDK.Store.reducers.setSelectedCoreModel(o),j.selectLanguageCode(o.translations,o.defaultLCID,n),window.__MSFT_SDK.EventBus.trigger(ce.CoreConsentModelSelected),window.__MSFT_SDK.Logger.info("Consent model selected."),[2]}})})},j.selectModelByGeoLocation=function(i,c){return s(this,void 0,void 0,function(){var t,n,r,o;return a(this,function(e){switch(e.label){case 0:return(t=window.__MSFT_SDK.Store.getters.timezone,!window.__MSFT_SDK.Store.getters.isPreviewMode&&window.__MSFT_SDK.Store.getters.packageConfigurations.isGeoTrackingEnabled)?[4,Qs.getUserCountryOrRegion()]:[3,2];case 1:return r=e.sent(),[3,3];case 2:r="",e.label=3;case 3:return n=r,o=c||n,[2,i.find(function(e){return Boolean(o?j.matchModelByCountryOrRegion(e,o):j.matchModelByTimezoneArea(e,t))})]}})})},j.matchModelByTimezoneArea=function(t,n){return s(this,void 0,void 0,function(){return a(this,function(e){return[2,j.matchLocation(n,t.attributes.geoLocations)]})})},j.matchModelByCountryOrRegion=function(e,t){return j.matchLocation(t,e.attributes.countriesOrRegions)},j.selectLanguageCode=function(e,t,n){for(var r=t,o=n?[n]:window.__MSFT_SDK.Store.getters.languages,i=0;i<o.length;i++)if(e.includes(o[i])){r=o[i];break}u.info("selected language code",{lcid:r}),window.__MSFT_SDK.Store.reducers.setLcid(r)},j.onInit=function(t){return s(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return[4,j.fetchCoreConfig(t)];case 1:return e.sent(),[4,j.selectConsentModel(t)];case 2:return e.sent(),j.updateConfigIfPresent(t),[2]}})})},j.updateConfigIfPresent=function(e){var t=e.translations,n=e.templates,e=e.models;e&&(e=e.find(function(e){return e.id===(null==(e=window.__MSFT_SDK.Store.getters.selectedCoreModel)?void 0:e.id)}))&&window.__MSFT_SDK.Store.reducers.setCurrentModel(e),t&&window.__MSFT_SDK.Store.reducers.setTranslations(t[window.__MSFT_SDK.Store.getters.lcid]),n&&(e=n.find(function(e){return e.id===(null==(e=window.__MSFT_SDK.Store.getters.selectedCoreModel)?void 0:e.layout.id)})||n[0],window.__MSFT_SDK.Store.reducers.setTemplate(e),window.__MSFT_SDK.EventBus.trigger(window.__MSFT_SDK.enums.Events.ConfigReady))},j.fetchCoreConfig=function(o){return s(this,void 0,void 0,function(){var t,n,r;return a(this,function(e){switch(e.label){case 0:return(r=window.__MSFT_SDK.Store.getters.sdkConfig,o.preview)?[2]:null!=r&&null!=r.models?[3,2]:(r=Fe.deferred(),t=r.promise,n=r.resolve,[4,Re.fetch("/msft-privacy/packages/".concat(window.__MSFT_SDK.config.id,"/latest/core-config.js"))]);case 1:return r=e.sent(),Ie.addScriptToDOM(r),setTimeout(function(){var e;window.__MSFT_SDK.Store.reducers.setSDKconfig(null==(e=window.__MSFT_SDK)?void 0:e.config),n()}),[2,t];case 2:return[2]}})})},j();oa.getTrackerCategories=function(){if(void 0!==window.__MSFT_SDK.Store.getters.currentModel)return window.__MSFT_SDK.Store.getters.bannerTrackerCategories;throw new Error("Consent Model not selected.")},oa.getWebsiteConfiguration=function(){return window.__MSFT_SDK.Store.getters.websiteConfiguration},oa.getPackageConfiguration=function(){return window.__MSFT_SDK.Store.getters.sdkConfig},oa.getDefaultConsent=function(t){var n={preferences:{}};return window.__MSFT_SDK.Store.getters.bannerTrackerCategories.forEach(function(e){n.preferences[e.categoryName]=e.isEssential||t===window.__MSFT_SDK.enums.ConsentModelType.Implicit?window.__MSFT_SDK.enums.Preference.ON:window.__MSFT_SDK.enums.Preference.OFF}),u.info("evaluating default consent",{consentModelType:t,consent:n}),n};var ra=oa;function oa(){}R.registerEvents=function(){window.__MSFT_SDK.EventBus.on(window.__MSFT_SDK.enums.Events.ConfigReady,R.showNoticeIfConsentInvalid),window.__MSFT_SDK.EventBus.on(window.__MSFT_SDK.enums.PublicEvents.AcceptAll,R.acceptAllCategories),window.__MSFT_SDK.EventBus.on(window.__MSFT_SDK.enums.PublicEvents.RejectAll,R.rejectAllNonEssentialCategories),window.__MSFT_SDK.EventBus.on(window.__MSFT_SDK.enums.PublicEvents.UpdateConsent,R.setConsent)},R.getConsent=function(){return window.__MSFT_SDK.Store.getters.userConsent||ra.getDefaultConsent(window.__MSFT_SDK.enums.ConsentModelType.Explicit)},R.getConsentFor=function(e){return R.getConsent().preferences[e]},R.setConsent=function(e){u.info("set consent",{payload:e});var t,e=e.consent,n=window.__MSFT_SDK.Store.getters.currentModel,r=window.__MSFT_SDK.Store.getters.selectedCoreModel;void 0===n||void 0===r?window.__MSFT_SDK.Logger.warn("Cannot set user consent before consent model is ready."):(r=Gs.encodeConsent(e,r),window.__MSFT_SDK.Store.reducers.setEncodedConsentString(window.__MSFT_SDK.enums.Cookie.Consent,r,Ys.ConvertToMilliseconds(n.expiry)),window.__MSFT_SDK.Store.reducers.setUserConsent(e),window.__MSFT_SDK.Logger.info("Consent updated."),window.__MSFT_SDK.EventBus.trigger(window.__MSFT_SDK.enums.PublicEvents.ConsentChanged),t=e.preferences,r=Object.keys(t).filter(function(e){return t[e]==ue.ON}).join(","),window.dataLayer=window.dataLayer||[],n={event:window.__MSFT_SDK.enums.PublicEvents.ConsentPreference,categories:r},window.dataLayer.push(n))},R.isConsentValid=function(){if(null!=(e=window.__MSFT_SDK.Store.getters.config.initConfig)&&e.preview)return!1;var e=window.__MSFT_SDK.Store.getters.encodedConsent;if(void 0===e)return!1;if(void 0===window.__MSFT_SDK.Store.getters.selectedCoreModel)return window.__MSFT_SDK.Logger.warn("Consent model not selected, can't validate consent."),!0;var t=window.__MSFT_SDK.Store.getters.selectedCoreModel,n=t.consentVersion,t=t.consentId;return Gs.getVersionFromString(e)===n&&Gs.getModelIdFromString(e)===t},R.showNoticeIfConsentInvalid=function(){var t,e,n,r;(null==(e=window.__MSFT_SDK.Store.getters.selectedCoreModel)?void 0:e.kind)===me.WebConsentModel&&(t=(null==(e=window.__MSFT_SDK.Store.getters.selectedCoreModel)?void 0:e.consentType)||oe.Explicit,e=R.isConsentValid(),u.info("consent valid: ".concat(e)),e||t!==oe.Explicit||window.__MSFT_SDK.EventBus.trigger(window.__MSFT_SDK.enums.PublicEvents.ShowFirstPage),n=e?Gs.decodeConsentString(window.__MSFT_SDK.Store.getters.encodedConsent).preferences:{},r={preferences:{}},window.__MSFT_SDK.Store.getters.bannerTrackerCategories.forEach(function(e){e.isEssential?r.preferences[e.categoryName]=window.__MSFT_SDK.enums.Preference.ON:r.preferences[e.categoryName]=n[e.categoryName]||R.getDefaultPreference(t)}),window.__MSFT_SDK.Store.reducers.setUserConsent(r),window.__MSFT_SDK.EventBus.trigger(window.__MSFT_SDK.enums.PublicEvents.ConsentChanged))},R.getDefaultPreference=function(e){return e===oe.Explicit?ue.OFF:ue.ON},R.acceptAllCategories=function(){var t={preferences:{}};window.__MSFT_SDK.Store.getters.bannerTrackerCategories.forEach(function(e){t.preferences[e.categoryName]=window.__MSFT_SDK.enums.Preference.ON}),R.setConsent({consent:t}),window.__MSFT_SDK.EventBus.trigger(window.__MSFT_SDK.enums.PublicEvents.CloseConsentNotice)},R.rejectAllNonEssentialCategories=function(){var t={preferences:{}};window.__MSFT_SDK.Store.getters.bannerTrackerCategories.forEach(function(e){t.preferences[e.categoryName]=e.isEssential?window.__MSFT_SDK.enums.Preference.ON:window.__MSFT_SDK.enums.Preference.OFF}),R.setConsent({consent:t}),window.__MSFT_SDK.EventBus.trigger(window.__MSFT_SDK.enums.PublicEvents.CloseConsentNotice)};var ia=R;function R(){R.registerEvents()}function ca(){}new ia,ca.getConsent=function(){return s(this,void 0,void 0,function(){return a(this,function(e){return[2,Promise.resolve(ia.getConsent())]})})},ca.getTrackerCategories=function(){return s(this,void 0,void 0,function(){return a(this,function(e){return[2,Promise.resolve(ra.getTrackerCategories())]})})},ca.getWebsiteConfiguration=function(){return Promise.resolve(ra.getWebsiteConfiguration())},ca.getPackageConfiguration=function(){return Promise.resolve(ra.getPackageConfiguration())},ca.getConsentModels=function(){return window.__MSFT_SDK.Store.getters.models.map(function(e){var t=e.name,n=e.version,e=e.id;return{id:e,name:t,version:n,selected:(null==(t=window.__MSFT_SDK.Store.getters.currentModel)?void 0:t.id)===e}})},window.__MSFT_SDK.Helpers.AddPublicApis(ca),window.__MSFT_SDK.Helpers.exposeApis()}();
