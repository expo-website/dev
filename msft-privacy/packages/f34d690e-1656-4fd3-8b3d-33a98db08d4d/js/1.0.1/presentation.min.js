(function () {
    'use strict';

    /******************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */
    /* global Reflect, Promise */

    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };

    function __extends(d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    }

    var __assign = function() {
        __assign = Object.assign || function __assign(t) {
            for (var s, i = 1, n = arguments.length; i < n; i++) {
                s = arguments[i];
                for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
            }
            return t;
        };
        return __assign.apply(this, arguments);
    };

    function __awaiter(thisArg, _arguments, P, generator) {
        function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
        return new (P || (P = Promise))(function (resolve, reject) {
            function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
            function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
            function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
            step((generator = generator.apply(thisArg, _arguments || [])).next());
        });
    }

    function __generator(thisArg, body) {
        var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
        return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
        function verb(n) { return function (v) { return step([n, v]); }; }
        function step(op) {
            if (f) throw new TypeError("Generator is already executing.");
            while (_) try {
                if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
                if (y = 0, t) op = [op[0] & 2, t.value];
                switch (op[0]) {
                    case 0: case 1: t = op; break;
                    case 4: _.label++; return { value: op[1], done: false };
                    case 5: _.label++; y = op[1]; op = [0]; continue;
                    case 7: op = _.ops.pop(); _.trys.pop(); continue;
                    default:
                        if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                        if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                        if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                        if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                        if (t[2]) _.ops.pop();
                        _.trys.pop(); continue;
                }
                op = body.call(thisArg, _);
            } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
            if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
        }
    }

    function __read(o, n) {
        var m = typeof Symbol === "function" && o[Symbol.iterator];
        if (!m) return o;
        var i = m.call(o), r, ar = [], e;
        try {
            while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);
        }
        catch (error) { e = { error: error }; }
        finally {
            try {
                if (r && !r.done && (m = i["return"])) m.call(i);
            }
            finally { if (e) throw e.error; }
        }
        return ar;
    }

    function __spreadArray(to, from, pack) {
        if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {
            if (ar || !(i in from)) {
                if (!ar) ar = Array.prototype.slice.call(from, 0, i);
                ar[i] = from[i];
            }
        }
        return to.concat(ar || Array.prototype.slice.call(from));
    }

    var ConsentModelType;
    (function (ConsentModelType) {
        ConsentModelType["Explicit"] = "Explicit";
        ConsentModelType["Implicit"] = "Implicit";
    })(ConsentModelType || (ConsentModelType = {}));
    var PublicEvents;
    (function (PublicEvents) {
        PublicEvents["ConsentChanged"] = "ConsentChanged";
        PublicEvents["ShowConsentNotice"] = "ShowConsentNotice";
        PublicEvents["ShowFirstPage"] = "ShowFirstPage";
        PublicEvents["CloseConsentNotice"] = "CloseConsentNotice";
        PublicEvents["AcceptAll"] = "AcceptAll";
        PublicEvents["RejectAll"] = "RejectAll";
        PublicEvents["ShowLayout"] = "ShowLayout";
        PublicEvents["CloseLayout"] = "CloseLayout";
        PublicEvents["UpdateConsent"] = "UpdateConsent";
        PublicEvents["AnchorTagClicked"] = "AnchorTagClicked";
        PublicEvents["FetchConfig"] = "FetchConfig";
        PublicEvents["QuestionsFormSubmitWithoutMetaData"] = "QuestionsFormSubmitWithoutMetaData";
        PublicEvents["QuestionsFormSubmit"] = "QuestionsFormSubmit";
        PublicEvents["ShowPreferences"] = "ShowPreferences";
        PublicEvents["ConsentPreference"] = "MSFTConsentPreference";
        PublicEvents["DataPropsUpdated"] = "DataPropsUpdated";
        PublicEvents["Done"] = "Done";
    })(PublicEvents || (PublicEvents = {}));
    var Events;
    (function (Events) {
        Events["Init"] = "Init";
        Events["CoreConsentModelSelected"] = "CoreConsentModelSelected";
        Events["ConfigReady"] = "ConfigReady";
        Events["ConsentInvalid"] = "ConsentInvalid";
    })(Events || (Events = {}));
    var Attributes;
    (function (Attributes) {
        // Web consent events
        Attributes["ConsentNotice"] = "msft-consent-notice";
        Attributes["AcceptAll"] = "msft-consent-accept-all";
        Attributes["OpenPreference"] = "msft-consent-open-preferences";
        Attributes["ClosePreference"] = "msft-consent-close-preferences";
        Attributes["DeclineAll"] = "msft-consent-decline-all";
        Attributes["SavePreferences"] = "msft-consent-save-preferences";
        Attributes["Purpose"] = "msft-consent-tracker-category";
        // DSR events
        Attributes["QuestionnaireForm"] = "msft-questionnaire-form";
        Attributes["QuestionnaireFormSubmit"] = "msft-questionnaire-form-submit";
        // Generic events
        Attributes["Redirect"] = "msft-redirect";
        Attributes["OpenPage"] = "msft-open-page";
        Attributes["ClosePage"] = "msft-close-page";
        Attributes["TriggerEvent"] = "msft-trigger";
        Attributes["ToggleId"] = "msft-toggle-id";
        Attributes["ToggleOn"] = "msft-toggle-on";
        Attributes["ToggleOff"] = "msft-toggle-off";
        Attributes["FormPayloadData"] = "msft-payload-data";
        Attributes["FormId"] = "msft-payload-form-id";
        Attributes["FormInputIDs"] = "msft-payload-input-ids";
    })(Attributes || (Attributes = {}));
    var SDKMode;
    (function (SDKMode) {
        SDKMode["Default"] = "Default";
        SDKMode["HeadLess"] = "HeadLess";
    })(SDKMode || (SDKMode = {}));
    var StyleType;
    (function (StyleType) {
        StyleType["Url"] = "Url";
        StyleType["Text"] = "Text";
    })(StyleType || (StyleType = {}));
    var Preference;
    (function (Preference) {
        Preference["OFF"] = "0";
        Preference["ON"] = "1";
    })(Preference || (Preference = {}));
    var Cookie;
    (function (Cookie) {
        Cookie["Consent"] = "msft-consent";
        Cookie["ConsentMetadata"] = "msft-consent-metadata";
    })(Cookie || (Cookie = {}));
    var RegisteredDivType;
    (function (RegisteredDivType) {
        RegisteredDivType["Script"] = "script";
        RegisteredDivType["IFrame"] = "iframe";
    })(RegisteredDivType || (RegisteredDivType = {}));
    var NoticeType;
    (function (NoticeType) {
        NoticeType["Control"] = "Control";
        NoticeType["Questions"] = "Questions";
    })(NoticeType || (NoticeType = {}));
    var ErrorStrings;
    (function (ErrorStrings) {
        ErrorStrings["LayoutError"] = "<b>There is something wrong with layout. Please check logs.</b>";
    })(ErrorStrings || (ErrorStrings = {}));
    var IntervalUnits;
    (function (IntervalUnits) {
        IntervalUnits["day"] = "day";
        IntervalUnits["week"] = "week";
        IntervalUnits["month"] = "month";
        IntervalUnits["year"] = "year";
    })(IntervalUnits || (IntervalUnits = {}));
    var QuestionType;
    (function (QuestionType) {
        QuestionType["Text"] = "Text";
        QuestionType["Email"] = "Email";
        QuestionType["Radio"] = "Radio";
        QuestionType["MultiSelect"] = "MultiSelect";
        QuestionType["Select"] = "Select";
        QuestionType["Date"] = "Date";
        QuestionType["PhoneNumber"] = "PhoneNumber";
        QuestionType["CreditCard"] = "CreditCard";
        QuestionType["Number"] = "Number";
        QuestionType["MultiLineText"] = "multiLineText";
    })(QuestionType || (QuestionType = {}));
    var QuestionValidation;
    (function (QuestionValidation) {
        QuestionValidation["Required"] = "Required";
    })(QuestionValidation || (QuestionValidation = {}));
    var QuestionField;
    (function (QuestionField) {
        QuestionField["Question"] = "question";
        QuestionField["Placeholder"] = "placeholder";
        QuestionField["Options"] = "options";
    })(QuestionField || (QuestionField = {}));
    var ModelKind;
    (function (ModelKind) {
        ModelKind["WebConsent"] = "MICROSOFT.WebConsent";
        ModelKind["DSRSubmission"] = "MICROSOFT.DSRSubmission";
    })(ModelKind || (ModelKind = {}));
    var PackageKind;
    (function (PackageKind) {
        PackageKind["WebConsentPackage"] = "WebConsentPackage";
        PackageKind["FIDESPackage"] = "FIDESPackage";
        PackageKind["DSRSubmissionPackage"] = "DSRSubmissionPackage";
    })(PackageKind || (PackageKind = {}));
    var Layout;
    (function (Layout) {
        Layout["Preferences"] = "Preferences";
    })(Layout || (Layout = {}));
    var AppConfigurationType;
    (function (AppConfigurationType) {
        AppConfigurationType["PurposeConfiguration"] = "purposeConfiguration";
    })(AppConfigurationType || (AppConfigurationType = {}));

    var registerHeplers = function () {
        if (window.Handlebars) {
            window.Handlebars.registerHelper('toLowerCase', function (type) {
                var _a;
                return (_a = type.toLowerCase()) !== null && _a !== void 0 ? _a : type;
            });
            window.Handlebars.registerHelper('equals', function (param1, param2) {
                var _a;
                return (_a = param1.toLowerCase() === param2.toLowerCase()) !== null && _a !== void 0 ? _a : false;
            });
        }
    };

    var kind = 'trackerConsent';

    // Below regex is to allow any whitespace as well like "< data-prop >consentId< \ data-prop >"
    /* eslint-disable no-useless-escape */
    var customVariablesRegex = /<\s*data-prop\s*>(\s|&nbsp;)*(.*?)(\s|&nbsp;)*<\s*[\/\\]\s*data-prop\s*>/g;
    /* eslint-enable no-useless-escape */
    var replaceDataPropsInLayoutValues = function (originalDetails) {
        var stringifiedResult = replaceDataProps(JSON.stringify(originalDetails));
        return JSON.parse(stringifiedResult);
    };
    var replaceDataProps = function (str) {
        var dataProps = window.__MSFT_SDK[kind].Store.getters.dataProps;
        return str.replaceAll(customVariablesRegex, function () {
            var _a;
            var result = [];
            for (var _i = 0; _i < arguments.length; _i++) {
                result[_i] = arguments[_i];
            }
            var variableName = (_a = result[2]) === null || _a === void 0 ? void 0 : _a.trim();
            return dataProps[variableName]
                ? dataProps[variableName].toString()
                : result[0];
        });
    };

    var ObjectUtils = /** @class */ (function () {
        function ObjectUtils() {
        }
        ObjectUtils.isObject = function (item) {
            return item && typeof item === 'object' && !Array.isArray(item);
        };
        ObjectUtils.mergeDeep = function (target) {
            var _a, _b;
            var sources = [];
            for (var _i = 1; _i < arguments.length; _i++) {
                sources[_i - 1] = arguments[_i];
            }
            if (!sources.length)
                return target;
            var source = sources.shift();
            if (this.isObject(target) && this.isObject(source)) {
                for (var key in source) {
                    if (this.isObject(source[key])) {
                        if (!target[key])
                            Object.assign(target, (_a = {}, _a[key] = {}, _a));
                        this.mergeDeep(target[key], source[key]);
                    }
                    else {
                        Object.assign(target, (_b = {}, _b[key] = source[key], _b));
                    }
                }
            }
            return this.mergeDeep.apply(this, __spreadArray([target], __read(sources), false));
        };
        return ObjectUtils;
    }());

    var SDKModules;
    (function (SDKModules) {
        SDKModules["PRESENTATION"] = "presentation";
        SDKModules["PREVIEW"] = "preview";
        SDKModules["CONFIG"] = "config";
        SDKModules["HANDLEBAR"] = "handlebar";
        SDKModules["PROXY"] = "proxy";
        SDKModules["DSR"] = "dsr";
    })(SDKModules || (SDKModules = {}));
    var SDKModulesPath;
    (function (SDKModulesPath) {
        SDKModulesPath["PRESENTATION"] = "$jsRootPath/msft-privacy/packages/$packageId/js/$consentSDKVersion/presentation.min.js";
        SDKModulesPath["PREVIEW"] = "$jsRootPath/msft-privacy/packages/$packageId/js/$consentSDKVersion/preview.min.js";
        SDKModulesPath["HANDLEBAR"] = "$jsRootPath/msft-privacy/packages/$packageId/js/$consentSDKVersion/vendor/handlebars.min.js";
        SDKModulesPath["PROXY"] = "$jsRootPath/msft-privacy/packages/$packageId/js/$consentSDKVersion/proxy.min.js";
        SDKModulesPath["DSR"] = "$jsRootPath/msft-privacy/packages/$packageId/js/$consentSDKVersion/dsr.min.js";
    })(SDKModulesPath || (SDKModulesPath = {}));
    var SDKModulesSourceVariable;
    (function (SDKModulesSourceVariable) {
        SDKModulesSourceVariable["PRESENTATION"] = "msft-presentation.js";
        SDKModulesSourceVariable["HANDLEBAR"] = "msft-handlebars.js";
        SDKModulesSourceVariable["PROXY"] = "msft-proxy.js";
        SDKModulesSourceVariable["DSR"] = "dsr.js";
    })(SDKModulesSourceVariable || (SDKModulesSourceVariable = {}));
    var ModuleSourceType;
    (function (ModuleSourceType) {
        ModuleSourceType["PATH"] = "path";
        ModuleSourceType["VARIABLE"] = "variable";
    })(ModuleSourceType || (ModuleSourceType = {}));

    var State = /** @class */ (function () {
        function State(state) {
            this.state = state || {
                config: {},
                debug: {
                    logs: [],
                    events: [],
                },
                custom: {},
                userValues: {},
            };
        }
        return State;
    }());

    var Getters = /** @class */ (function (_super) {
        __extends(Getters, _super);
        function Getters(state) {
            return _super.call(this, state) || this;
        }
        Object.defineProperty(Getters.prototype, "debugInfo", {
            get: function () {
                return this.state.debug;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(Getters.prototype, "config", {
            get: function () {
                return this.state.config;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(Getters.prototype, "userConsent", {
            get: function () {
                return this.state.custom.userConsent;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(Getters.prototype, "isHeadless", {
            // TODO: Implement below getters
            get: function () {
                return false;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(Getters.prototype, "isPreviewMode", {
            get: function () {
                var _a;
                return ((_a = this.state.config.initConfig) === null || _a === void 0 ? void 0 : _a.preview) || false;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(Getters.prototype, "isActionDisabled", {
            get: function () {
                var _a;
                return ((_a = this.state.config.initConfig) === null || _a === void 0 ? void 0 : _a.disableActions) || false;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(Getters.prototype, "isLivePreviewMode", {
            get: function () {
                var _a;
                try {
                    return ((_a = window.parent) === null || _a === void 0 ? void 0 : _a.name) === 'ConsentLivePreview';
                }
                catch (_err) {
                    // If we try to access outer IFrame we get error
                    // Uncaught (in promise) DOMException: Blocked a frame with origin "https://localhost:23309" from accessing a cross-origin frame.
                    // This catch block is to bypass the error
                    return false;
                }
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(Getters.prototype, "presentationVariable", {
            get: function () {
                return SDKModulesSourceVariable.PRESENTATION;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(Getters.prototype, "handlebarVariable", {
            get: function () {
                return SDKModulesSourceVariable.HANDLEBAR;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(Getters.prototype, "proxyVariable", {
            get: function () {
                return SDKModulesSourceVariable.PROXY;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(Getters.prototype, "dsrVariable", {
            get: function () {
                return SDKModulesSourceVariable.DSR;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(Getters.prototype, "dataProps", {
            get: function () {
                return this.state.custom.dynamicValues || {};
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(Getters.prototype, "isGPCEnabled", {
            get: function () {
                var _a;
                var gpcValue = (_a = window.navigator.globalPrivacyControl) === null || _a === void 0 ? void 0 : _a.toString();
                return gpcValue ? gpcValue === 'true' || gpcValue === '1' : false;
            },
            enumerable: false,
            configurable: true
        });
        return Getters;
    }(State));

    var EventsReplayStrategy;
    (function (EventsReplayStrategy) {
        EventsReplayStrategy[EventsReplayStrategy["REPLAY_ALL"] = 0] = "REPLAY_ALL";
        EventsReplayStrategy[EventsReplayStrategy["REPLAY_LATEST"] = 1] = "REPLAY_LATEST";
        EventsReplayStrategy[EventsReplayStrategy["SKIP"] = 2] = "SKIP";
    })(EventsReplayStrategy || (EventsReplayStrategy = {}));

    var ReplayAllEvents = /** @class */ (function () {
        function ReplayAllEvents() {
            this.strategy = EventsReplayStrategy.REPLAY_ALL;
        }
        ReplayAllEvents.prototype.execute = function (callback, events) {
            events.forEach(function (_a) {
                var payload = _a.payload;
                return callback(payload);
            });
        };
        return ReplayAllEvents;
    }());
    var ReplayAllEvents$1 = new ReplayAllEvents();

    var ReplayLatestEvent = /** @class */ (function () {
        function ReplayLatestEvent() {
            this.strategy = EventsReplayStrategy.REPLAY_LATEST;
        }
        ReplayLatestEvent.prototype.execute = function (callback, events) {
            if (events.length) {
                callback(events[events.length - 1].payload);
            }
        };
        return ReplayLatestEvent;
    }());
    var ReplayLatestEvent$1 = new ReplayLatestEvent();

    var SkipEventReplay = /** @class */ (function () {
        function SkipEventReplay() {
            this.strategy = EventsReplayStrategy.SKIP;
        }
        SkipEventReplay.prototype.execute = function () {
            return void 0;
        };
        return SkipEventReplay;
    }());
    var SkipEventReplay$1 = new SkipEventReplay();

    var _a;
    var ReplayStrategy = (_a = {},
        _a[EventsReplayStrategy.REPLAY_ALL] = ReplayAllEvents$1,
        _a[EventsReplayStrategy.REPLAY_LATEST] = ReplayLatestEvent$1,
        _a[EventsReplayStrategy.SKIP] = SkipEventReplay$1,
        _a);

    var EventsRecording = /** @class */ (function () {
        function EventsRecording() {
        }
        EventsRecording.record = function (event, payload) {
            this.eventsLogs[event] = this.eventsLogs[event] || [];
            this.eventsLogs[event].push({ payload: payload });
        };
        EventsRecording.replay = function (event, callback, strategy) {
            if (strategy === void 0) { strategy = this.DEFAULT_STRATEGY; }
            ReplayStrategy[strategy].execute(callback, this.eventsLogs[event] || []);
        };
        EventsRecording.eventsLogs = {};
        EventsRecording.DEFAULT_STRATEGY = EventsReplayStrategy.REPLAY_LATEST;
        return EventsRecording;
    }());

    var EventBus = /** @class */ (function () {
        function EventBus() {
            this.events = {};
            this.eventIdCounter = 0;
        }
        /**
         * Gets default event details.
         * @returns {IEventDetails} Default event details
         */
        EventBus.getDefaultEventDetails = function () {
            return {
                executionCount: 0,
                callbacks: [],
            };
        };
        /**
         * Add an event listener.
         * @param {string} event Event name
         * @param {ICallback} callback Listener callback
         * @param {IEventHandlerProperties} properties Additional configuration properties
         * @returns {number} Event ID
         */
        EventBus.prototype.on = function (event, callback, _a) {
            var _b = _a === void 0 ? {} : _a, _c = _b.sync, sync = _c === void 0 ? false : _c, replayStrategy = _b.replayStrategy;
            Logger.info("Callback registered for event : ".concat(event));
            this.eventIdCounter++;
            var eventDetails = {
                id: this.eventIdCounter,
                fn: callback,
                sync: sync,
            };
            this.events[event] =
                this.events[event] || EventBus.getDefaultEventDetails();
            this.events[event].callbacks.push(eventDetails);
            EventsRecording.replay(event, callback, replayStrategy);
            return this.eventIdCounter;
        };
        /**
         * Execute an event.
         * @param {string} event Event name
         * @param {import("core/types/interfaces").IGenericObject} payload Payload data
         */
        EventBus.prototype.trigger = function (event, payload) {
            var _this = this;
            var _a;
            if (payload === void 0) { payload = {}; }
            var callbacks = ((_a = this.events[event]) === null || _a === void 0 ? void 0 : _a.callbacks) || [];
            // Let the logic run even if no active listeners so that we can record the events.
            Logger.info("Started executing '".concat(callbacks.length, "' callbacks for event '").concat(event, "'"), payload);
            Store.reducers.saveDebugInfo({ event: event });
            callbacks.forEach(function (eventHandler) { return __awaiter(_this, void 0, void 0, function () {
                var e_1;
                return __generator(this, function (_a) {
                    switch (_a.label) {
                        case 0:
                            _a.trys.push([0, 3, , 4]);
                            if (!!eventHandler.sync) return [3 /*break*/, 2];
                            return [4 /*yield*/, Promise.resolve()];
                        case 1:
                            _a.sent();
                            _a.label = 2;
                        case 2:
                            eventHandler.fn(payload);
                            return [3 /*break*/, 4];
                        case 3:
                            e_1 = _a.sent();
                            Logger.error("Error in executing callback id : ".concat(eventHandler.id, " for event '").concat(event), e_1);
                            return [3 /*break*/, 4];
                        case 4: return [2 /*return*/];
                    }
                });
            }); });
            EventsRecording.record(event, payload);
            Logger.info("Completed executing '".concat(callbacks.length, "' callbacks for event '").concat(event, "'"), payload);
            if (this.events[event]) {
                this.events[event].executionCount++;
            }
        };
        /**
         * Detach an event listener.
         * @param {string} event Event name
         * @param {number | ICallback} eventIdOrCallback Event listener ID or callback to remove
         */
        EventBus.prototype.off = function (event, eventIdOrCallback) {
            var _a;
            var idx = (_a = this.events[event]) === null || _a === void 0 ? void 0 : _a.callbacks.findIndex(function (eventDetails) {
                return eventDetails.id === eventIdOrCallback ||
                    eventDetails.fn === eventIdOrCallback;
            });
            if (typeof idx === 'number' && ~idx) {
                Logger.info("Removing event listener '".concat(this.events[event].callbacks[idx].id, "' of '").concat(event, "' event"));
                this.events[event].callbacks.splice(idx, 1);
            }
            else {
                Logger.error("Unable to remove event listener for event '".concat(event, "'. No matching event id or callback found."));
            }
        };
        /**
         * Checks if any event listener is attached in the event bus.
         * @param {string} event Event name
         * @returns {boolean} True if an event listener is attached else false
         */
        EventBus.prototype.hasListener = function (event) {
            var _a;
            return ((_a = this.events[event]) === null || _a === void 0 ? void 0 : _a.callbacks.length) > 0;
        };
        return EventBus;
    }());
    var EventBus$1 = new EventBus();

    var Reducers = /** @class */ (function (_super) {
        __extends(Reducers, _super);
        function Reducers(state) {
            return _super.call(this, state) || this;
        }
        Reducers.prototype.saveDebugInfo = function (_a) {
            var event = _a.event, log = _a.log;
            if (event) {
                this.state.debug.events.push(event);
            }
            if (log) {
                this.state.debug.logs.push(log);
            }
        };
        Reducers.prototype.setUserConsent = function (consent) {
            this.state.custom.userConsent = consent;
        };
        Reducers.prototype.setInitConfig = function (initConfig) {
            this.state.config.initConfig = initConfig;
            if (initConfig === null || initConfig === void 0 ? void 0 : initConfig.dataProps) {
                this.setDataProps(initConfig.dataProps);
            }
        };
        Reducers.prototype.setDataProps = function (values) {
            this.state.custom.dynamicValues = __assign(__assign({}, (this.state.custom.dynamicValues || {})), values);
            EventBus$1.trigger(PublicEvents.DataPropsUpdated, this.state.custom.dynamicValues);
        };
        Reducers.prototype.addCustomUserValue = function (key, value) {
            this.state.userValues[key] = value;
        };
        Reducers.prototype.getCustomUserValue = function (key) {
            return this.state.userValues[key];
        };
        return Reducers;
    }(State));

    var state = new State().state;
    var getter = new Getters(state);
    var reducer = new Reducers(state);
    var Store = {
        getters: getter,
        reducers: reducer,
        addReducers: function (reducers) {
            this.reducers = ObjectUtils.mergeDeep(this.reducers, reducers);
        },
        addGetters: function (getters) {
            Object.defineProperties(this.getters, Object.getOwnPropertyDescriptors(getters.prototype));
        },
    };

    var LogLevels;
    (function (LogLevels) {
        LogLevels[LogLevels["INFO"] = 0] = "INFO";
        LogLevels[LogLevels["WARN"] = 1] = "WARN";
        LogLevels[LogLevels["ERROR"] = 2] = "ERROR";
    })(LogLevels || (LogLevels = {}));

    var ConsoleLogger = /** @class */ (function () {
        function ConsoleLogger() {
        }
        /**
         * Browser's console logger plugin.
         * @param {LogLevels} level Log level
         * @param {string} message Log message
         */
        ConsoleLogger.log = function (level, message) {
            switch (level) {
                case LogLevels.WARN:
                    console.warn(message);
                    break;
                case LogLevels.ERROR:
                    console.error(message);
                    break;
                default:
                    {
                        console.log(message);
                    }
                    break;
            }
        };
        return ConsoleLogger;
    }());

    /**
     * @typedef {import("core/types/interfaces").IGenericObject} IGenericObject
     */
    var Logger = /** @class */ (function () {
        function Logger() {
        }
        /**
         * Info logs
         * @param {string} message Logger message
         * @param {IGenericObject} data Additional details to log
         */
        Logger.info = function (message, data) {
            Logger.log(LogLevels.INFO, message, data);
        };
        /**
         * Warning logs
         * @param {string} message Logger message
         * @param {IGenericObject} data Additional details to log
         */
        Logger.warn = function (message, data) {
            Logger.log(LogLevels.WARN, message, data);
        };
        /**
         * Error logs
         * @param {string} message Logger message
         * @param {IGenericObject} data Additional details to log
         */
        Logger.error = function (message, data) {
            Logger.log(LogLevels.ERROR, message, data);
        };
        /**
         * Logs the message using the plugin based in level.
         * @param {LogLevels} logLevel Log level
         * @param {string} message Logger message
         * @param {IGenericObject} data Additional details to log
         */
        Logger.log = function (logLevel, message, data) {
            var formattedMessage = Logger.formatLogMessage(logLevel, message, data);
            Store.reducers.saveDebugInfo({ log: formattedMessage });
            ConsoleLogger.log(logLevel, formattedMessage);
        };
        /**
         * Formats the logger message.
         * @param {LogLevels} logLevel Log level
         * @param {string} message Logger message
         * @param {IGenericObject} data Additional details to log
         * @returns {string} Formatted logger message
         */
        Logger.formatLogMessage = function (logLevel, message, data) {
            var stringifiedData = data ? "| ".concat(JSON.stringify(data)) : '';
            return "[".concat(LogLevels[logLevel], "] ").concat(message, " ").concat(stringifiedData);
        };
        return Logger;
    }());

    var ConsentEncodingService = /** @class */ (function () {
        function ConsentEncodingService() {
        }
        /**
         * Encode user's consent preference
         * @param  {import("core/types/interfaces").IUserConsent} consent user's consent object
         * @param  {import("core/types/interfaces").ICoreConsentModel} model current selected consent model
         * @returns {string} encoded consent
         */
        ConsentEncodingService.encodeConsent = function (consent, model) {
            Logger.info('encoding consent', { consent: consent, model: model });
            var preferences = consent.preferences;
            var encodedConsentString = Object.keys(preferences)
                .map(function (purpose) {
                return "".concat(purpose, "=").concat(preferences[purpose] === Preference.ON
                    ? Preference.ON
                    : Preference.OFF);
            })
                .join('%');
            Logger.info("encoded consent string: ".concat(encodedConsentString));
            return encodedConsentString;
        };
        ConsentEncodingService.encodeConsentMetadata = function (consent, model, bannerPurposes, country) {
            Logger.info('encoding consent', { consent: consent, model: model });
            var preferences = consent.preferences;
            var encodedConsentString = "".concat(ConsentEncodingService.CONSENTVERSION, "=") +
                model.properties.consentVersion.toString() +
                '%';
            encodedConsentString +=
                "".concat(ConsentEncodingService.CONSENTID, "=") +
                    model.properties.consentId +
                    '%';
            var acceptAll = true, declineAll = true;
            bannerPurposes.forEach(function (bannerPurpose) {
                if (!bannerPurpose.properties.isEssential) {
                    if (preferences[bannerPurpose.name] === Preference.OFF)
                        acceptAll = false;
                    else
                        declineAll = false;
                }
            });
            encodedConsentString +=
                "".concat(ConsentEncodingService.ACCEPTALL, "=") +
                    (acceptAll ? Preference.ON : Preference.OFF) +
                    '%';
            encodedConsentString +=
                "".concat(ConsentEncodingService.DECLINEALL, "=") +
                    (declineAll ? Preference.ON : Preference.OFF) +
                    '%';
            encodedConsentString +=
                "".concat(ConsentEncodingService.COUNTRY, "=") + country + '%';
            Logger.info("encoded consent metadata string: ".concat(encodedConsentString));
            return encodedConsentString;
        };
        /**
         * Decode encoded consent string.
         * @param  {string} encodedConsentString encoded consent
         * @returns {import("core/types/interfaces").IUserConsent} object having user preference for all purposes
         */
        ConsentEncodingService.decodeConsentString = function (encodedConsentString) {
            var _a;
            Logger.info("decoding consent string: ".concat(encodedConsentString));
            var preferences = {};
            (_a = encodedConsentString === null || encodedConsentString === void 0 ? void 0 : encodedConsentString.split('%')) === null || _a === void 0 ? void 0 : _a.forEach(function (pairStr) {
                var pair = pairStr.split('=');
                if (pair.length !== 2)
                    return;
                var key = pair[0];
                var val = pair[1];
                if (key !== ConsentEncodingService.CONSENTVERSION &&
                    key !== ConsentEncodingService.CONSENTID) {
                    preferences[key] = val;
                }
            });
            Logger.info('decoded consent', { preferences: preferences });
            return { preferences: preferences };
        };
        /**
         * Get version from encoded consent metadata string
         * @param  {string} encodedConsentString encoded consent metadata
         * @returns {number} version
         */
        ConsentEncodingService.getVersionFromMetadataString = function (encodedConsentString) {
            var match = encodedConsentString.match(/consentVersion=([\d.]+)%/);
            if (match == null) {
                return -1;
            }
            var res = parseInt(match[1]);
            if (isNaN(res)) {
                return -1;
            }
            Logger.info("getVersionString str: ".concat(encodedConsentString, " found consentVersion: ").concat(res));
            return res;
        };
        /**
         * Get model name from encoded consent metadata string
         * @param  {string} encodedConsentString encoded consent metadata
         * @returns {string | undefined} name
         */
        ConsentEncodingService.getModelIdFromMetadataString = function (encodedConsentString) {
            var match = encodedConsentString.match(/consentId=([^%]+)%/);
            if (match == null) {
                return undefined;
            }
            Logger.info("getModelIdFromString str: ".concat(encodedConsentString, " found version: ").concat(match[1]));
            return match[1];
        };
        /**
         * Get country from encoded consent metadata string
         * @param  {string} encodedConsentString encoded consent metadata
         * @returns {string | undefined} name
         */
        ConsentEncodingService.getCountryFromMetadataString = function (encodedConsentString) {
            var match = encodedConsentString.match(/country=([^%]+)/);
            if (match == null) {
                return undefined;
            }
            Logger.info("getCountryFromMetadataString str: ".concat(encodedConsentString, " found country: ").concat(match[1]));
            return match[1];
        };
        ConsentEncodingService.getAcceptAllFromMetadataString = function (encodedConsentString) {
            var match = encodedConsentString.match(/acceptAll=([^%]+)%/);
            if (match == null) {
                return false;
            }
            Logger.info("getAcceptAllFromString str: ".concat(encodedConsentString, " found acceptAll: ").concat(match[1]));
            return match[1] === Preference.ON;
        };
        ConsentEncodingService.getDeclineAllFromMetadataString = function (encodedConsentString) {
            var match = encodedConsentString.match(/declineAll=([^%]+)%/);
            if (match == null) {
                return false;
            }
            Logger.info("getDeclineAllFromString str: ".concat(encodedConsentString, " found declineAll: ").concat(match[1]));
            return match[1] === Preference.ON;
        };
        ConsentEncodingService.CONSENTVERSION = 'consentVersion';
        ConsentEncodingService.CONSENTID = 'consentId';
        ConsentEncodingService.ACCEPTALL = 'acceptAll';
        ConsentEncodingService.DECLINEALL = 'declineAll';
        ConsentEncodingService.COUNTRY = 'country';
        return ConsentEncodingService;
    }());

    var Constants = {
        OFF: '0',
        ON: '1',
        COOKIE_NAME: 'APCC',
        ConsentConfig: 'MicrosoftConsentConfig',
        PurposeControl: 'MICROSOFT.TrackerCategory',
        GeoLocations: 'GeoLocations',
        CountriesOrRegions: 'CountriesOrRegions',
        ComponentContents: 'ComponentContents',
    };

    var LayoutHandler = /** @class */ (function () {
        function LayoutHandler() {
            LayoutHandler.registerShowLayoutHandlers();
        }
        /**
         * Register event handlers to open/close different layouts
         */
        LayoutHandler.registerShowLayoutHandlers = function () {
            window.__MSFT_SDK[kind].EventBus.on(window.__MSFT_SDK[kind].enums.PublicEvents.ShowConsentNotice, LayoutHandler.showFirstPage);
            window.__MSFT_SDK[kind].EventBus.on(window.__MSFT_SDK[kind].enums.PublicEvents.CloseConsentNotice, LayoutHandler.hideConsentNotice);
            window.__MSFT_SDK[kind].EventBus.on(window.__MSFT_SDK[kind].enums.Events.Init, LayoutHandler.saveStylesOnInit);
            window.__MSFT_SDK[kind].EventBus.on(window.__MSFT_SDK[kind].enums.PublicEvents.ShowLayout, LayoutHandler.showLayout);
            window.__MSFT_SDK[kind].EventBus.on(window.__MSFT_SDK[kind].enums.PublicEvents.CloseLayout, LayoutHandler.closeLayout);
            window.__MSFT_SDK[kind].EventBus.on(window.__MSFT_SDK[kind].enums.PublicEvents.ConsentChanged, LayoutHandler.init);
            window.__MSFT_SDK[kind].EventBus.on(window.__MSFT_SDK[kind].enums.Events.ConfigReady, LayoutHandler.init);
            window.__MSFT_SDK[kind].EventBus.on(window.__MSFT_SDK[kind].enums.PublicEvents.ShowPreferences, LayoutHandler.showPreferences);
        };
        LayoutHandler.showPreferences = function () {
            try {
                LayoutHandler.showLayout({ layoutId: Layout.Preferences });
            }
            catch (e) {
                LayoutHandler.showFirstPage();
            }
        };
        /**
         * Show layout
         * @param  {import("core/types/interfaces").IGenericObject} payload payload data
         */
        LayoutHandler.showLayout = function (_a) {
            var _b;
            var layoutId = _a.layoutId;
            if (window.__MSFT_SDK[kind].Store.getters.components &&
                window.__MSFT_SDK[kind].Store.getters.components[layoutId]) {
                var consentModel = window.__MSFT_SDK[kind].Store.getters.currentModel;
                LayoutHandler.showLayoutInIFrame(window.__MSFT_SDK[kind].Store.getters.components[layoutId], layoutId, [
                    {
                        type: StyleType.Text,
                        value: ((_b = consentModel === null || consentModel === void 0 ? void 0 : consentModel.layout.ui.css) === null || _b === void 0 ? void 0 : _b[layoutId.toLowerCase()]) || '',
                    },
                ], LayoutHandler.getParentElement(layoutId));
            }
            else {
                throw new Error("Layout : ".concat(layoutId, " not found."));
            }
        };
        /**
         * Hide layout
         * @param  {import("core/types/interfaces").IGenericObject} payload payload data
         */
        LayoutHandler.closeLayout = function (_a) {
            var layoutId = _a.layoutId;
            LayoutHandler.closeIFrame(layoutId);
        };
        /**
         * Save styles passed by user in window.__MSFT_SDK[kind].Store
         * @param  {import("core/types/interfaces").IInitConfig} config init config
         */
        LayoutHandler.saveStylesOnInit = function (config) {
            if (config.styles) {
                window.__MSFT_SDK[kind].Logger.info('user provided styles persisted to window.__MSFT_SDK[kind].Store.');
                window.__MSFT_SDK[kind].Store.reducers.setStyles(config.styles);
            }
        };
        LayoutHandler.toPascalCase = function (str) {
            if (typeof str === 'string') {
                return str[0].toUpperCase() + str.slice(1);
            }
            return str;
        };
        LayoutHandler.validationArrayToObject = function (validations) {
            return validations.reduce(function (previous, current) {
                var _a;
                return __assign(__assign({}, previous), (_a = {}, _a[LayoutHandler.toPascalCase(current.type)] = current.value, _a));
            }, {});
        };
        LayoutHandler.getLayoutData = function (consentModel) {
            var _a;
            return __awaiter(this, void 0, void 0, function () {
                var groupedTranslations, purposeComponents, data, preferences, purposesMap, questionMap, addedPurposes, consentMetadata, layoutDetails;
                return __generator(this, function (_b) {
                    groupedTranslations = window.__MSFT_SDK[kind].Store.getters.translations;
                    purposeComponents = window.__MSFT_SDK[kind].Store.getters.purposeComponents;
                    data = {};
                    data[NoticeType.Control] = [];
                    data[Constants.ComponentContents] = [];
                    preferences = window.MSFTPrivacy[kind].getConsent().preferences;
                    purposesMap = new Map();
                    questionMap = new Map();
                    addedPurposes = new Set();
                    if (consentModel.kind === ModelKind.WebConsent) {
                        window.__MSFT_SDK[kind].Store.getters.bannerPurposes.forEach(function (purpose) {
                            purposesMap.set(purpose.objectId, purpose);
                        });
                        consentMetadata = window.__MSFT_SDK[kind].Store.getters.encodedConsentMetadata;
                        data[ConsentEncodingService.ACCEPTALL] =
                            ConsentEncodingService.getAcceptAllFromMetadataString(consentMetadata);
                        data[ConsentEncodingService.DECLINEALL] =
                            ConsentEncodingService.getDeclineAllFromMetadataString(consentMetadata);
                    }
                    else if (consentModel.kind === ModelKind.DSRSubmission) {
                        consentModel.controls.forEach(function (control) {
                            control.instances.forEach(function (instance) {
                                questionMap.set(instance.name, __assign(__assign({}, instance), { controlType: control.name }));
                            });
                        });
                    }
                    purposeComponents.forEach(function (component) {
                        data[Constants.ComponentContents].push({
                            name: component.name,
                            content: component.view.content,
                            css: component.view.css,
                        });
                    });
                    groupedTranslations.forEach(function (groupedTranslation) {
                        return Object.keys(groupedTranslation).forEach(function (namespace) {
                            var _a;
                            var _b, _c, _d, _e, _f, _g;
                            if (namespace === 'model') {
                                var controlInstances_1 = [];
                                var controlsDisplayOrder_1 = (_b = consentModel.controlsDisplayOrder) !== null && _b !== void 0 ? _b : [];
                                var modelTranslations_1 = groupedTranslation[namespace];
                                delete modelTranslations_1.trackerCategory;
                                Object.keys(modelTranslations_1).forEach(function (field) {
                                    var _a;
                                    if (Array.isArray(modelTranslations_1[field])) {
                                        modelTranslations_1[field].forEach(function (translationInstance) {
                                            var controlInstance = questionMap.get(translationInstance.name);
                                            if (controlInstance !== undefined) {
                                                var index = controlsDisplayOrder_1.findIndex(function (c) { return c === translationInstance.name; });
                                                translationInstance.validations =
                                                    LayoutHandler.validationArrayToObject((controlInstance === null || controlInstance === void 0 ? void 0 : controlInstance.validations) || []);
                                                translationInstance.controlType =
                                                    controlInstance === null || controlInstance === void 0 ? void 0 : controlInstance.controlType;
                                                controlsDisplayOrder_1.length != 0
                                                    ? (controlInstances_1[index] = translationInstance)
                                                    : controlInstances_1.push(translationInstance);
                                            }
                                        });
                                    }
                                    else {
                                        data = __assign(__assign({}, data), (_a = {}, _a[field] = modelTranslations_1[field], _a));
                                    }
                                });
                                (_a = data[NoticeType.Control]).push.apply(_a, __spreadArray([], __read(controlInstances_1), false));
                            }
                            else if (purposesMap.has(namespace) &&
                                !addedPurposes.has(namespace)) {
                                var purposeTranslation = __assign(__assign({}, groupedTranslation[namespace]), { name: (_c = purposesMap.get(namespace)) === null || _c === void 0 ? void 0 : _c.name, isEssential: (_e = (_d = purposesMap.get(namespace)) === null || _d === void 0 ? void 0 : _d.properties) === null || _e === void 0 ? void 0 : _e.isEssential, isOn: preferences[((_f = purposesMap.get(namespace)) === null || _f === void 0 ? void 0 : _f.name) || ''] === '1', controlType: (_g = purposesMap.get(namespace)) === null || _g === void 0 ? void 0 : _g.type });
                                data[NoticeType.Control].push(purposeTranslation);
                                addedPurposes.add(namespace);
                            }
                        });
                    });
                    data[NoticeType.Control] = __spreadArray(__spreadArray([], __read(data[NoticeType.Control].filter(function (control) { return control.isEssential; })), false), __read(data[NoticeType.Control].filter(function (control) { return !control.isEssential; })), false);
                    data['msft-script-open'] = '<script>';
                    data['msft-script-close'] = '</script>';
                    window.__MSFT_SDK[kind].Logger.info('getLayout data invoked', {
                        consentModel: consentModel,
                        data: data,
                    });
                    layoutDetails = __assign(__assign(__assign(__assign(__assign({}, data), window.__MSFT_SDK[kind].Store.getters.layoutData), (((_a = consentModel.layout) === null || _a === void 0 ? void 0 : _a.properties) || {})), { consentModel: consentModel, modelProps: consentModel.properties }), (window.__MSFT_SDK[kind].Store.getters.dataProps || {}));
                    return [2 /*return*/, replaceDataPropsInLayoutValues(layoutDetails)];
                });
            });
        };
        /**
         * Perform all necessary steps like replacing placeholders in
         * layouts during init.
         */
        LayoutHandler.init = function () {
            return __awaiter(this, void 0, void 0, function () {
                var consentModel, layout, data;
                return __generator(this, function (_a) {
                    switch (_a.label) {
                        case 0:
                            registerHeplers();
                            if (window.__MSFT_SDK[kind].Store.getters.currentModel === undefined ||
                                window.__MSFT_SDK[kind].Store.getters.layout === undefined) {
                                window.__MSFT_SDK[kind].Logger.warn('Cannot call init before config is ready.');
                                return [2 /*return*/];
                            }
                            consentModel = window.__MSFT_SDK[kind].Store.getters
                                .currentModel;
                            layout = window.__MSFT_SDK[kind].Store.getters.layout;
                            return [4 /*yield*/, LayoutHandler.getLayoutData(consentModel)];
                        case 1:
                            data = _a.sent();
                            layout.pages.forEach(function (page) {
                                var _a;
                                var layoutString;
                                var componentCss = '';
                                try {
                                    data[Constants.ComponentContents].forEach(function (c) {
                                        page.content = page.content.replace('{{{' + c.name + '}}}', c.content);
                                        componentCss += c.css;
                                    });
                                    // component css on top to maintain higher priority of layout css over component css
                                    var layout_1 = window.Handlebars.compile(componentCss + page.css + page.content);
                                    layoutString = layout_1(data);
                                }
                                catch (e) {
                                    window.__MSFT_SDK[kind].Logger.error(e.message, e);
                                    layoutString = ErrorStrings.LayoutError;
                                }
                                window.__MSFT_SDK[kind].Store.reducers.setComponents(__assign(__assign({}, window.__MSFT_SDK[kind].Store.getters.components), (_a = {}, _a[page.name] = layoutString, _a)));
                            });
                            window.__MSFT_SDK[kind].Logger.info('Components updated');
                            if (!LayoutHandler.initialized) {
                                window.__MSFT_SDK[kind].EventBus.on(window.__MSFT_SDK[kind].enums.PublicEvents.ShowFirstPage, LayoutHandler.showFirstPage);
                                LayoutHandler.initialized = true;
                            }
                            return [2 /*return*/];
                    }
                });
            });
        };
        /**
         * Show Consent notice layout
         */
        LayoutHandler.showFirstPage = function () {
            var _a;
            return __awaiter(this, void 0, void 0, function () {
                var consentModel, initComponent, layout;
                return __generator(this, function (_b) {
                    switch (_b.label) {
                        case 0:
                            if (!!LayoutHandler.initialized) return [3 /*break*/, 2];
                            return [4 /*yield*/, LayoutHandler.init()];
                        case 1:
                            _b.sent();
                            _b.label = 2;
                        case 2:
                            consentModel = window.__MSFT_SDK[kind].Store.getters.currentModel;
                            if (consentModel === undefined) {
                                window.__MSFT_SDK[kind].Logger.warn('Cannot call init before consent model is selected.');
                                return [2 /*return*/];
                            }
                            initComponent = window.__MSFT_SDK[kind].Store.getters.startingLayoutPage;
                            if (window.__MSFT_SDK[kind].Store.getters.components === undefined ||
                                initComponent === undefined ||
                                window.__MSFT_SDK[kind].Store.getters.components[initComponent] ===
                                    undefined) {
                                window.__MSFT_SDK[kind].Logger.error('Notice layout not found.');
                                return [2 /*return*/];
                            }
                            layout = window.__MSFT_SDK[kind].Store.getters.components[initComponent];
                            LayoutHandler.showLayoutInIFrame(layout, initComponent, [
                                {
                                    type: StyleType.Text,
                                    value: ((_a = consentModel.layout.ui.css) === null || _a === void 0 ? void 0 : _a[initComponent.toLowerCase()]) || '',
                                },
                            ], LayoutHandler.getParentElement(initComponent));
                            return [2 /*return*/];
                    }
                });
            });
        };
        LayoutHandler.getParentElement = function (layoutId) {
            var _a;
            var parentMap = ((_a = window.__MSFT_SDK[kind].Store.getters.config.initConfig) === null || _a === void 0 ? void 0 : _a.componentParentMap) ||
                window.__MSFT_SDK[kind].Store.getters.layoutParentMap;
            var parentElementId = (parentMap === null || parentMap === void 0 ? void 0 : parentMap[layoutId]) || (parentMap === null || parentMap === void 0 ? void 0 : parentMap['*']);
            if (parentElementId) {
                return document.getElementById(parentElementId);
            }
            return null;
        };
        /**
         * Adds layout to iframe and append it to dom
         * @param  {string} layout layout to add
         * @param  {string} iframeId iframe id
         * @param  {import("core/types/interfaces").IStyle[]} styles user provided styles
         * @param  {HTMLElement|null} parentElement if iframe should be added to a specific element instead of body
         */
        LayoutHandler.showLayoutInIFrame = function (layout, iframeId, styles, parentElement) {
            var _a, _b;
            if (styles === void 0) { styles = []; }
            var iframeElement = document.getElementById(iframeId);
            if (iframeElement) {
                window.__MSFT_SDK[kind].Logger.info("Layout: ".concat(iframeId, " is already open."));
            }
            else {
                if (layout === ErrorStrings.LayoutError &&
                    (!window.__MSFT_SDK[kind].Store.getters.isLivePreviewMode ||
                        !window.__MSFT_SDK[kind].Store.getters.isPreviewMode)) {
                    return;
                }
                var data = {
                    origin: window.origin,
                    renderLayoutWithoutIframe: (_a = window.__MSFT_SDK[kind].Store.getters.config.initConfig) === null || _a === void 0 ? void 0 : _a.renderLayoutWithoutIframe,
                    executionContexts: ((_b = window.__MSFT_SDK[kind].Store.getters.config.initConfig) === null || _b === void 0 ? void 0 : _b.executionContexts) || [],
                    isGPCEnabled: window.__MSFT_SDK[kind].Store.getters.isGPCEnabled &&
                        window.__MSFT_SDK[kind].Store.getters.shouldHonourGPC,
                };
                layout =
                    "<script>var msftData = ".concat(JSON.stringify(data), "</script>\n        <script>").concat(window.__MSFT_SDK[kind].Store.getters.proxyJS, "</script>") +
                        replaceDataProps(layout);
                window.__MSFT_SDK[kind].Utils.IFrameUtils.createIFrame(layout, iframeId, parentElement, styles);
            }
        };
        /**
         * Hide consent notice iframe
         */
        LayoutHandler.hideConsentNotice = function () {
            var consentModel = window.__MSFT_SDK[kind].Store.getters.currentModel;
            if (consentModel === undefined) {
                window.__MSFT_SDK[kind].Logger.warn('Cannot call hideConsentNotice before consent model is selected.');
                return;
            }
            var initComponent = window.__MSFT_SDK[kind].Store.getters.startingLayoutPage;
            initComponent && LayoutHandler.closeIFrame(initComponent);
        };
        /**
         * Set iframe display to none
         * @param  {string} iframeId id of iframe element
         */
        LayoutHandler.closeIFrame = function (iframeId) {
            var _a;
            var iframeElement = document.getElementById(iframeId);
            (_a = iframeElement === null || iframeElement === void 0 ? void 0 : iframeElement.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild(iframeElement);
        };
        LayoutHandler.initialized = false;
        return LayoutHandler;
    }());

    window.onmessage = function (e) { return __awaiter(void 0, void 0, void 0, function () {
        var response;
        var _a;
        var _b;
        return __generator(this, function (_c) {
            switch (_c.label) {
                case 0:
                    if (!(e.origin === 'null')) return [3 /*break*/, 3];
                    if (window.__MSFT_SDK[kind].Store.getters.isActionDisabled &&
                        e.data.method === 'trigger') {
                        return [2 /*return*/];
                    }
                    response = (_a = window.MSFTPrivacy[kind])[e.data.method].apply(_a, __spreadArray([], __read(e.data.params), false));
                    if (!(response instanceof Promise)) return [3 /*break*/, 2];
                    return [4 /*yield*/, response];
                case 1:
                    response = _c.sent();
                    _c.label = 2;
                case 2:
                    if (e.data.responseId) {
                        (_b = e.source) === null || _b === void 0 ? void 0 : _b.postMessage(__assign(__assign({}, e.data), { response: response }), { targetOrigin: '*' });
                    }
                    _c.label = 3;
                case 3: return [2 /*return*/];
            }
        });
    }); };
    window.__MSFT_SDK[kind].EventBus.on(PublicEvents.AnchorTagClicked, function (_a) {
        var attributes = _a.attributes;
        if (window.__MSFT_SDK[kind].Store.getters.isPreviewMode) {
            return;
        }
        var aTag = document.createElement('a');
        Object.keys(attributes).forEach(function (attrName) {
            aTag.setAttribute(attrName, attributes[attrName]);
        });
        aTag.click();
    });
    new LayoutHandler();

}());
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJlc2VudGF0aW9uLm1pbi5qcyIsInNvdXJjZXMiOlsiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3RzbGliL3RzbGliLmVzNi5qcyIsIi4uLy4uLy4uLy4uLy4uL1NESy9zcmMvY29yZS9jb25zdGFudHMvZW51bXMudHMiLCIuLi8uLi8uLi8uLi8uLi9TREsvc3JjL3ByZXNlbnRhdGlvbi9oYW5kbGViYXJIZWxwZXJzLnRzIiwiLi4vLi4vLi4vLi4vLi4vU0RLL3NyYy9jb21tb24vc2RrLnRzIiwiLi4vLi4vLi4vLi4vLi4vU0RLL3NyYy9wcmVzZW50YXRpb24vZGF0YVByb3BzSGVscGVycy50cyIsIi4uLy4uLy4uLy4uLy4uL1NESy9zcmMvY29yZS91dGlscy9PYmplY3RVdGlscy50cyIsIi4uLy4uLy4uLy4uLy4uL1NESy9zcmMvY29yZS9kZXBlbmRlbmN5TWFuYWdlci9lbnVtL21vZHVsZXMudHMiLCIuLi8uLi8uLi8uLi8uLi9TREsvc3JjL2NvcmUvc3RvcmUvU3RhdGUudHMiLCIuLi8uLi8uLi8uLi8uLi9TREsvc3JjL2NvcmUvc3RvcmUvR2V0dGVycy50cyIsIi4uLy4uLy4uLy4uLy4uL1NESy9zcmMvY29yZS9ldmVudEJ1cy9ldmVudHNSZWNvcmRlci9lbnVtL0V2ZW50c1JlcGxheS50cyIsIi4uLy4uLy4uLy4uLy4uL1NESy9zcmMvY29yZS9ldmVudEJ1cy9ldmVudHNSZWNvcmRlci9ldmVudHNSZXBsYXlTdHJhdGVneS9SZXBsYXlBbGxFdmVudHMudHMiLCIuLi8uLi8uLi8uLi8uLi9TREsvc3JjL2NvcmUvZXZlbnRCdXMvZXZlbnRzUmVjb3JkZXIvZXZlbnRzUmVwbGF5U3RyYXRlZ3kvUmVwbGF5TGF0ZXN0RXZlbnQudHMiLCIuLi8uLi8uLi8uLi8uLi9TREsvc3JjL2NvcmUvZXZlbnRCdXMvZXZlbnRzUmVjb3JkZXIvZXZlbnRzUmVwbGF5U3RyYXRlZ3kvU2tpcEV2ZW50UmVwbGF5LnRzIiwiLi4vLi4vLi4vLi4vLi4vU0RLL3NyYy9jb3JlL2V2ZW50QnVzL2V2ZW50c1JlY29yZGVyL2V2ZW50c1JlcGxheVN0cmF0ZWd5L2luZGV4LnRzIiwiLi4vLi4vLi4vLi4vLi4vU0RLL3NyYy9jb3JlL2V2ZW50QnVzL2V2ZW50c1JlY29yZGVyL2luZGV4LnRzIiwiLi4vLi4vLi4vLi4vLi4vU0RLL3NyYy9jb3JlL2V2ZW50QnVzL2luZGV4LnRzIiwiLi4vLi4vLi4vLi4vLi4vU0RLL3NyYy9jb3JlL3N0b3JlL1JlZHVjZXJzLnRzIiwiLi4vLi4vLi4vLi4vLi4vU0RLL3NyYy9jb3JlL3N0b3JlL2luZGV4LnRzIiwiLi4vLi4vLi4vLi4vLi4vU0RLL3NyYy9jb3JlL2xvZ2dlci9lbnVtLnRzIiwiLi4vLi4vLi4vLi4vLi4vU0RLL3NyYy9jb3JlL2xvZ2dlci9wbHVnaW5zL0NvbnNvbGVMb2dnZXIudHMiLCIuLi8uLi8uLi8uLi8uLi9TREsvc3JjL2NvcmUvbG9nZ2VyL2luZGV4LnRzIiwiLi4vLi4vLi4vLi4vLi4vU0RLL3NyYy9jb25zZW50L0NvbnNlbnRFbmNvZGluZ1NlcnZpY2UudHMiLCIuLi8uLi8uLi8uLi8uLi9TREsvc3JjL2NvcmUvY29uc3RhbnRzL2NvbnN0YW50cy50cyIsIi4uLy4uLy4uLy4uLy4uL1NESy9zcmMvcHJlc2VudGF0aW9uL0xheW91dEhhbmRsZXIudHMiLCIuLi8uLi8uLi8uLi8uLi9TREsvc3JjL3ByZXNlbnRhdGlvbi9pbmRleC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLlxyXG5cclxuUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55XHJcbnB1cnBvc2Ugd2l0aCBvciB3aXRob3V0IGZlZSBpcyBoZXJlYnkgZ3JhbnRlZC5cclxuXHJcblRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEhcclxuUkVHQVJEIFRPIFRISVMgU09GVFdBUkUgSU5DTFVESU5HIEFMTCBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZXHJcbkFORCBGSVRORVNTLiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SIEJFIExJQUJMRSBGT1IgQU5ZIFNQRUNJQUwsIERJUkVDVCxcclxuSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NXHJcbkxPU1MgT0YgVVNFLCBEQVRBIE9SIFBST0ZJVFMsIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBORUdMSUdFTkNFIE9SXHJcbk9USEVSIFRPUlRJT1VTIEFDVElPTiwgQVJJU0lORyBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBVU0UgT1JcclxuUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS5cclxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cclxuLyogZ2xvYmFsIFJlZmxlY3QsIFByb21pc2UgKi9cclxuXHJcbnZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24oZCwgYikge1xyXG4gICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19leHRlbmRzKGQsIGIpIHtcclxuICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXHJcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xyXG4gICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG59XHJcblxyXG5leHBvcnQgdmFyIF9fYXNzaWduID0gZnVuY3Rpb24oKSB7XHJcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gX19hc3NpZ24odCkge1xyXG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpIHRbcF0gPSBzW3BdO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdDtcclxuICAgIH1cclxuICAgIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19yZXN0KHMsIGUpIHtcclxuICAgIHZhciB0ID0ge307XHJcbiAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkgJiYgZS5pbmRleE9mKHApIDwgMClcclxuICAgICAgICB0W3BdID0gc1twXTtcclxuICAgIGlmIChzICE9IG51bGwgJiYgdHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPT09IFwiZnVuY3Rpb25cIilcclxuICAgICAgICBmb3IgKHZhciBpID0gMCwgcCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocyk7IGkgPCBwLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChlLmluZGV4T2YocFtpXSkgPCAwICYmIE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChzLCBwW2ldKSlcclxuICAgICAgICAgICAgICAgIHRbcFtpXV0gPSBzW3BbaV1dO1xyXG4gICAgICAgIH1cclxuICAgIHJldHVybiB0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xyXG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xyXG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcGFyYW0ocGFyYW1JbmRleCwgZGVjb3JhdG9yKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwga2V5KSB7IGRlY29yYXRvcih0YXJnZXQsIGtleSwgcGFyYW1JbmRleCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpIHtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0ZXIodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XHJcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cclxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxyXG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19nZW5lcmF0b3IodGhpc0FyZywgYm9keSkge1xyXG4gICAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZztcclxuICAgIHJldHVybiBnID0geyBuZXh0OiB2ZXJiKDApLCBcInRocm93XCI6IHZlcmIoMSksIFwicmV0dXJuXCI6IHZlcmIoMikgfSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKG9wKSB7XHJcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xyXG4gICAgICAgIHdoaWxlIChfKSB0cnkge1xyXG4gICAgICAgICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSBvcFswXSAmIDIgPyB5W1wicmV0dXJuXCJdIDogb3BbMF0gPyB5W1widGhyb3dcIl0gfHwgKCh0ID0geVtcInJldHVyblwiXSkgJiYgdC5jYWxsKHkpLCAwKSA6IHkubmV4dCkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7XHJcbiAgICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcclxuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9XHJcbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCB2YXIgX19jcmVhdGVCaW5kaW5nID0gT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xyXG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcclxuICAgIHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihtLCBrKTtcclxuICAgIGlmICghZGVzYyB8fCAoXCJnZXRcIiBpbiBkZXNjID8gIW0uX19lc01vZHVsZSA6IGRlc2Mud3JpdGFibGUgfHwgZGVzYy5jb25maWd1cmFibGUpKSB7XHJcbiAgICAgICAgZGVzYyA9IHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIG1ba107IH0gfTtcclxuICAgIH1cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBrMiwgZGVzYyk7XHJcbn0pIDogKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XHJcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xyXG4gICAgb1trMl0gPSBtW2tdO1xyXG59KTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2V4cG9ydFN0YXIobSwgbykge1xyXG4gICAgZm9yICh2YXIgcCBpbiBtKSBpZiAocCAhPT0gXCJkZWZhdWx0XCIgJiYgIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvLCBwKSkgX19jcmVhdGVCaW5kaW5nKG8sIG0sIHApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX192YWx1ZXMobykge1xyXG4gICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDtcclxuICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pO1xyXG4gICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSBcIm51bWJlclwiKSByZXR1cm4ge1xyXG4gICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDtcclxuICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9O1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyBcIk9iamVjdCBpcyBub3QgaXRlcmFibGUuXCIgOiBcIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3JlYWQobywgbikge1xyXG4gICAgdmFyIG0gPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdO1xyXG4gICAgaWYgKCFtKSByZXR1cm4gbztcclxuICAgIHZhciBpID0gbS5jYWxsKG8pLCByLCBhciA9IFtdLCBlO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICB3aGlsZSAoKG4gPT09IHZvaWQgMCB8fCBuLS0gPiAwKSAmJiAhKHIgPSBpLm5leHQoKSkuZG9uZSkgYXIucHVzaChyLnZhbHVlKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlcnJvcikgeyBlID0geyBlcnJvcjogZXJyb3IgfTsgfVxyXG4gICAgZmluYWxseSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKHIgJiYgIXIuZG9uZSAmJiAobSA9IGlbXCJyZXR1cm5cIl0pKSBtLmNhbGwoaSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZpbmFsbHkgeyBpZiAoZSkgdGhyb3cgZS5lcnJvcjsgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFyO1xyXG59XHJcblxyXG4vKiogQGRlcHJlY2F0ZWQgKi9cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkKCkge1xyXG4gICAgZm9yICh2YXIgYXIgPSBbXSwgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgYXIgPSBhci5jb25jYXQoX19yZWFkKGFyZ3VtZW50c1tpXSkpO1xyXG4gICAgcmV0dXJuIGFyO1xyXG59XHJcblxyXG4vKiogQGRlcHJlY2F0ZWQgKi9cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkQXJyYXlzKCkge1xyXG4gICAgZm9yICh2YXIgcyA9IDAsIGkgPSAwLCBpbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpbDsgaSsrKSBzICs9IGFyZ3VtZW50c1tpXS5sZW5ndGg7XHJcbiAgICBmb3IgKHZhciByID0gQXJyYXkocyksIGsgPSAwLCBpID0gMDsgaSA8IGlsOyBpKyspXHJcbiAgICAgICAgZm9yICh2YXIgYSA9IGFyZ3VtZW50c1tpXSwgaiA9IDAsIGpsID0gYS5sZW5ndGg7IGogPCBqbDsgaisrLCBrKyspXHJcbiAgICAgICAgICAgIHJba10gPSBhW2pdO1xyXG4gICAgcmV0dXJuIHI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZEFycmF5KHRvLCBmcm9tLCBwYWNrKSB7XHJcbiAgICBpZiAocGFjayB8fCBhcmd1bWVudHMubGVuZ3RoID09PSAyKSBmb3IgKHZhciBpID0gMCwgbCA9IGZyb20ubGVuZ3RoLCBhcjsgaSA8IGw7IGkrKykge1xyXG4gICAgICAgIGlmIChhciB8fCAhKGkgaW4gZnJvbSkpIHtcclxuICAgICAgICAgICAgaWYgKCFhcikgYXIgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tLCAwLCBpKTtcclxuICAgICAgICAgICAgYXJbaV0gPSBmcm9tW2ldO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB0by5jb25jYXQoYXIgfHwgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZnJvbSkpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdCh2KSB7XHJcbiAgICByZXR1cm4gdGhpcyBpbnN0YW5jZW9mIF9fYXdhaXQgPyAodGhpcy52ID0gdiwgdGhpcykgOiBuZXcgX19hd2FpdCh2KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNHZW5lcmF0b3IodGhpc0FyZywgX2FyZ3VtZW50cywgZ2VuZXJhdG9yKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIGcgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSksIGksIHEgPSBbXTtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyBpZiAoZ1tuXSkgaVtuXSA9IGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoYSwgYikgeyBxLnB1c2goW24sIHYsIGEsIGJdKSA+IDEgfHwgcmVzdW1lKG4sIHYpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gcmVzdW1lKG4sIHYpIHsgdHJ5IHsgc3RlcChnW25dKHYpKTsgfSBjYXRjaCAoZSkgeyBzZXR0bGUocVswXVszXSwgZSk7IH0gfVxyXG4gICAgZnVuY3Rpb24gc3RlcChyKSB7IHIudmFsdWUgaW5zdGFuY2VvZiBfX2F3YWl0ID8gUHJvbWlzZS5yZXNvbHZlKHIudmFsdWUudikudGhlbihmdWxmaWxsLCByZWplY3QpIDogc2V0dGxlKHFbMF1bMl0sIHIpOyB9XHJcbiAgICBmdW5jdGlvbiBmdWxmaWxsKHZhbHVlKSB7IHJlc3VtZShcIm5leHRcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiByZWplY3QodmFsdWUpIHsgcmVzdW1lKFwidGhyb3dcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUoZiwgdikgeyBpZiAoZih2KSwgcS5zaGlmdCgpLCBxLmxlbmd0aCkgcmVzdW1lKHFbMF1bMF0sIHFbMF1bMV0pOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jRGVsZWdhdG9yKG8pIHtcclxuICAgIHZhciBpLCBwO1xyXG4gICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiLCBmdW5jdGlvbiAoZSkgeyB0aHJvdyBlOyB9KSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobiwgZikgeyBpW25dID0gb1tuXSA/IGZ1bmN0aW9uICh2KSB7IHJldHVybiAocCA9ICFwKSA/IHsgdmFsdWU6IF9fYXdhaXQob1tuXSh2KSksIGRvbmU6IG4gPT09IFwicmV0dXJuXCIgfSA6IGYgPyBmKHYpIDogdjsgfSA6IGY7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNWYWx1ZXMobykge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBtID0gb1tTeW1ib2wuYXN5bmNJdGVyYXRvcl0sIGk7XHJcbiAgICByZXR1cm4gbSA/IG0uY2FsbChvKSA6IChvID0gdHlwZW9mIF9fdmFsdWVzID09PSBcImZ1bmN0aW9uXCIgPyBfX3ZhbHVlcyhvKSA6IG9bU3ltYm9sLml0ZXJhdG9yXSgpLCBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaSk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaVtuXSA9IG9bbl0gJiYgZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgdiA9IG9bbl0odiksIHNldHRsZShyZXNvbHZlLCByZWplY3QsIHYuZG9uZSwgdi52YWx1ZSk7IH0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCBkLCB2KSB7IFByb21pc2UucmVzb2x2ZSh2KS50aGVuKGZ1bmN0aW9uKHYpIHsgcmVzb2x2ZSh7IHZhbHVlOiB2LCBkb25lOiBkIH0pOyB9LCByZWplY3QpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ha2VUZW1wbGF0ZU9iamVjdChjb29rZWQsIHJhdykge1xyXG4gICAgaWYgKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkoY29va2VkLCBcInJhd1wiLCB7IHZhbHVlOiByYXcgfSk7IH0gZWxzZSB7IGNvb2tlZC5yYXcgPSByYXc7IH1cclxuICAgIHJldHVybiBjb29rZWQ7XHJcbn07XHJcblxyXG52YXIgX19zZXRNb2R1bGVEZWZhdWx0ID0gT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCB2KSB7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgXCJkZWZhdWx0XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHYgfSk7XHJcbn0pIDogZnVuY3Rpb24obywgdikge1xyXG4gICAgb1tcImRlZmF1bHRcIl0gPSB2O1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0U3Rhcihtb2QpIHtcclxuICAgIGlmIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpIHJldHVybiBtb2Q7XHJcbiAgICB2YXIgcmVzdWx0ID0ge307XHJcbiAgICBpZiAobW9kICE9IG51bGwpIGZvciAodmFyIGsgaW4gbW9kKSBpZiAoayAhPT0gXCJkZWZhdWx0XCIgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vZCwgaykpIF9fY3JlYXRlQmluZGluZyhyZXN1bHQsIG1vZCwgayk7XHJcbiAgICBfX3NldE1vZHVsZURlZmF1bHQocmVzdWx0LCBtb2QpO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0RGVmYXVsdChtb2QpIHtcclxuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgZGVmYXVsdDogbW9kIH07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHJlY2VpdmVyLCBzdGF0ZSwga2luZCwgZikge1xyXG4gICAgaWYgKGtpbmQgPT09IFwiYVwiICYmICFmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBhY2Nlc3NvciB3YXMgZGVmaW5lZCB3aXRob3V0IGEgZ2V0dGVyXCIpO1xyXG4gICAgaWYgKHR5cGVvZiBzdGF0ZSA9PT0gXCJmdW5jdGlvblwiID8gcmVjZWl2ZXIgIT09IHN0YXRlIHx8ICFmIDogIXN0YXRlLmhhcyhyZWNlaXZlcikpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgcmVhZCBwcml2YXRlIG1lbWJlciBmcm9tIGFuIG9iamVjdCB3aG9zZSBjbGFzcyBkaWQgbm90IGRlY2xhcmUgaXRcIik7XHJcbiAgICByZXR1cm4ga2luZCA9PT0gXCJtXCIgPyBmIDoga2luZCA9PT0gXCJhXCIgPyBmLmNhbGwocmVjZWl2ZXIpIDogZiA/IGYudmFsdWUgOiBzdGF0ZS5nZXQocmVjZWl2ZXIpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19jbGFzc1ByaXZhdGVGaWVsZFNldChyZWNlaXZlciwgc3RhdGUsIHZhbHVlLCBraW5kLCBmKSB7XHJcbiAgICBpZiAoa2luZCA9PT0gXCJtXCIpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIG1ldGhvZCBpcyBub3Qgd3JpdGFibGVcIik7XHJcbiAgICBpZiAoa2luZCA9PT0gXCJhXCIgJiYgIWYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIGFjY2Vzc29yIHdhcyBkZWZpbmVkIHdpdGhvdXQgYSBzZXR0ZXJcIik7XHJcbiAgICBpZiAodHlwZW9mIHN0YXRlID09PSBcImZ1bmN0aW9uXCIgPyByZWNlaXZlciAhPT0gc3RhdGUgfHwgIWYgOiAhc3RhdGUuaGFzKHJlY2VpdmVyKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCB3cml0ZSBwcml2YXRlIG1lbWJlciB0byBhbiBvYmplY3Qgd2hvc2UgY2xhc3MgZGlkIG5vdCBkZWNsYXJlIGl0XCIpO1xyXG4gICAgcmV0dXJuIChraW5kID09PSBcImFcIiA/IGYuY2FsbChyZWNlaXZlciwgdmFsdWUpIDogZiA/IGYudmFsdWUgPSB2YWx1ZSA6IHN0YXRlLnNldChyZWNlaXZlciwgdmFsdWUpKSwgdmFsdWU7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2NsYXNzUHJpdmF0ZUZpZWxkSW4oc3RhdGUsIHJlY2VpdmVyKSB7XHJcbiAgICBpZiAocmVjZWl2ZXIgPT09IG51bGwgfHwgKHR5cGVvZiByZWNlaXZlciAhPT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgcmVjZWl2ZXIgIT09IFwiZnVuY3Rpb25cIikpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgdXNlICdpbicgb3BlcmF0b3Igb24gbm9uLW9iamVjdFwiKTtcclxuICAgIHJldHVybiB0eXBlb2Ygc3RhdGUgPT09IFwiZnVuY3Rpb25cIiA/IHJlY2VpdmVyID09PSBzdGF0ZSA6IHN0YXRlLmhhcyhyZWNlaXZlcik7XHJcbn1cclxuIiwiZXhwb3J0IGVudW0gQ29uc2VudE1vZGVsVHlwZSB7XHJcbiAgRXhwbGljaXQgPSAnRXhwbGljaXQnLFxyXG4gIEltcGxpY2l0ID0gJ0ltcGxpY2l0JyxcclxufVxyXG5cclxuZXhwb3J0IGVudW0gUHVibGljRXZlbnRzIHtcclxuICBDb25zZW50Q2hhbmdlZCA9ICdDb25zZW50Q2hhbmdlZCcsXHJcbiAgU2hvd0NvbnNlbnROb3RpY2UgPSAnU2hvd0NvbnNlbnROb3RpY2UnLFxyXG4gIFNob3dGaXJzdFBhZ2UgPSAnU2hvd0ZpcnN0UGFnZScsXHJcbiAgQ2xvc2VDb25zZW50Tm90aWNlID0gJ0Nsb3NlQ29uc2VudE5vdGljZScsXHJcbiAgQWNjZXB0QWxsID0gJ0FjY2VwdEFsbCcsXHJcbiAgUmVqZWN0QWxsID0gJ1JlamVjdEFsbCcsXHJcbiAgU2hvd0xheW91dCA9ICdTaG93TGF5b3V0JyxcclxuICBDbG9zZUxheW91dCA9ICdDbG9zZUxheW91dCcsXHJcbiAgVXBkYXRlQ29uc2VudCA9ICdVcGRhdGVDb25zZW50JyxcclxuICBBbmNob3JUYWdDbGlja2VkID0gJ0FuY2hvclRhZ0NsaWNrZWQnLFxyXG4gIEZldGNoQ29uZmlnID0gJ0ZldGNoQ29uZmlnJyxcclxuICBRdWVzdGlvbnNGb3JtU3VibWl0V2l0aG91dE1ldGFEYXRhID0gJ1F1ZXN0aW9uc0Zvcm1TdWJtaXRXaXRob3V0TWV0YURhdGEnLFxyXG4gIFF1ZXN0aW9uc0Zvcm1TdWJtaXQgPSAnUXVlc3Rpb25zRm9ybVN1Ym1pdCcsXHJcbiAgU2hvd1ByZWZlcmVuY2VzID0gJ1Nob3dQcmVmZXJlbmNlcycsXHJcbiAgQ29uc2VudFByZWZlcmVuY2UgPSAnTVNGVENvbnNlbnRQcmVmZXJlbmNlJyxcclxuICBEYXRhUHJvcHNVcGRhdGVkID0gJ0RhdGFQcm9wc1VwZGF0ZWQnLFxyXG4gIERvbmUgPSAnRG9uZScsXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIEV2ZW50cyB7XHJcbiAgSW5pdCA9ICdJbml0JyxcclxuICBDb3JlQ29uc2VudE1vZGVsU2VsZWN0ZWQgPSAnQ29yZUNvbnNlbnRNb2RlbFNlbGVjdGVkJyxcclxuICBDb25maWdSZWFkeSA9ICdDb25maWdSZWFkeScsXHJcbiAgQ29uc2VudEludmFsaWQgPSAnQ29uc2VudEludmFsaWQnLFxyXG59XHJcblxyXG5leHBvcnQgZW51bSBBdHRyaWJ1dGVzIHtcclxuICAvLyBXZWIgY29uc2VudCBldmVudHNcclxuICBDb25zZW50Tm90aWNlID0gJ21zZnQtY29uc2VudC1ub3RpY2UnLFxyXG4gIEFjY2VwdEFsbCA9ICdtc2Z0LWNvbnNlbnQtYWNjZXB0LWFsbCcsXHJcbiAgT3BlblByZWZlcmVuY2UgPSAnbXNmdC1jb25zZW50LW9wZW4tcHJlZmVyZW5jZXMnLFxyXG4gIENsb3NlUHJlZmVyZW5jZSA9ICdtc2Z0LWNvbnNlbnQtY2xvc2UtcHJlZmVyZW5jZXMnLFxyXG4gIERlY2xpbmVBbGwgPSAnbXNmdC1jb25zZW50LWRlY2xpbmUtYWxsJyxcclxuICBTYXZlUHJlZmVyZW5jZXMgPSAnbXNmdC1jb25zZW50LXNhdmUtcHJlZmVyZW5jZXMnLFxyXG4gIFB1cnBvc2UgPSAnbXNmdC1jb25zZW50LXRyYWNrZXItY2F0ZWdvcnknLFxyXG5cclxuICAvLyBEU1IgZXZlbnRzXHJcbiAgUXVlc3Rpb25uYWlyZUZvcm0gPSAnbXNmdC1xdWVzdGlvbm5haXJlLWZvcm0nLFxyXG4gIFF1ZXN0aW9ubmFpcmVGb3JtU3VibWl0ID0gJ21zZnQtcXVlc3Rpb25uYWlyZS1mb3JtLXN1Ym1pdCcsXHJcblxyXG4gIC8vIEdlbmVyaWMgZXZlbnRzXHJcbiAgUmVkaXJlY3QgPSAnbXNmdC1yZWRpcmVjdCcsXHJcbiAgT3BlblBhZ2UgPSAnbXNmdC1vcGVuLXBhZ2UnLFxyXG4gIENsb3NlUGFnZSA9ICdtc2Z0LWNsb3NlLXBhZ2UnLFxyXG4gIFRyaWdnZXJFdmVudCA9ICdtc2Z0LXRyaWdnZXInLFxyXG4gIFRvZ2dsZUlkID0gJ21zZnQtdG9nZ2xlLWlkJyxcclxuICBUb2dnbGVPbiA9ICdtc2Z0LXRvZ2dsZS1vbicsXHJcbiAgVG9nZ2xlT2ZmID0gJ21zZnQtdG9nZ2xlLW9mZicsXHJcbiAgRm9ybVBheWxvYWREYXRhID0gJ21zZnQtcGF5bG9hZC1kYXRhJyxcclxuICBGb3JtSWQgPSAnbXNmdC1wYXlsb2FkLWZvcm0taWQnLFxyXG4gIEZvcm1JbnB1dElEcyA9ICdtc2Z0LXBheWxvYWQtaW5wdXQtaWRzJyxcclxufVxyXG5cclxuZXhwb3J0IGVudW0gU0RLTW9kZSB7XHJcbiAgRGVmYXVsdCA9ICdEZWZhdWx0JyxcclxuICBIZWFkTGVzcyA9ICdIZWFkTGVzcycsXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIFN0eWxlVHlwZSB7XHJcbiAgVXJsID0gJ1VybCcsXHJcbiAgVGV4dCA9ICdUZXh0JyxcclxufVxyXG5cclxuZXhwb3J0IGVudW0gUHJlZmVyZW5jZSB7XHJcbiAgT0ZGID0gJzAnLFxyXG4gIE9OID0gJzEnLFxyXG59XHJcblxyXG5leHBvcnQgZW51bSBDb29raWUge1xyXG4gIENvbnNlbnQgPSAnbXNmdC1jb25zZW50JyxcclxuICBDb25zZW50TWV0YWRhdGEgPSAnbXNmdC1jb25zZW50LW1ldGFkYXRhJyxcclxufVxyXG5cclxuZXhwb3J0IGVudW0gUmVnaXN0ZXJlZERpdlR5cGUge1xyXG4gIFNjcmlwdCA9ICdzY3JpcHQnLFxyXG4gIElGcmFtZSA9ICdpZnJhbWUnLFxyXG59XHJcblxyXG5leHBvcnQgZW51bSBOb3RpY2VUeXBlIHtcclxuICBDb250cm9sID0gJ0NvbnRyb2wnLFxyXG4gIFF1ZXN0aW9ucyA9ICdRdWVzdGlvbnMnLFxyXG59XHJcblxyXG5leHBvcnQgZW51bSBFcnJvclN0cmluZ3Mge1xyXG4gIExheW91dEVycm9yID0gJzxiPlRoZXJlIGlzIHNvbWV0aGluZyB3cm9uZyB3aXRoIGxheW91dC4gUGxlYXNlIGNoZWNrIGxvZ3MuPC9iPicsXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIEludGVydmFsVW5pdHMge1xyXG4gIGRheSA9ICdkYXknLFxyXG4gIHdlZWsgPSAnd2VlaycsXHJcbiAgbW9udGggPSAnbW9udGgnLFxyXG4gIHllYXIgPSAneWVhcicsXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIFF1ZXN0aW9uVHlwZSB7XHJcbiAgVGV4dCA9ICdUZXh0JyxcclxuICBFbWFpbCA9ICdFbWFpbCcsXHJcbiAgUmFkaW8gPSAnUmFkaW8nLFxyXG4gIE11bHRpU2VsZWN0ID0gJ011bHRpU2VsZWN0JyxcclxuICBTZWxlY3QgPSAnU2VsZWN0JyxcclxuICBEYXRlID0gJ0RhdGUnLFxyXG4gIFBob25lTnVtYmVyID0gJ1Bob25lTnVtYmVyJyxcclxuICBDcmVkaXRDYXJkID0gJ0NyZWRpdENhcmQnLFxyXG4gIE51bWJlciA9ICdOdW1iZXInLFxyXG4gIE11bHRpTGluZVRleHQgPSAnbXVsdGlMaW5lVGV4dCcsXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIFF1ZXN0aW9uVmFsaWRhdGlvbiB7XHJcbiAgUmVxdWlyZWQgPSAnUmVxdWlyZWQnLFxyXG59XHJcblxyXG5leHBvcnQgZW51bSBRdWVzdGlvbkZpZWxkIHtcclxuICBRdWVzdGlvbiA9ICdxdWVzdGlvbicsXHJcbiAgUGxhY2Vob2xkZXIgPSAncGxhY2Vob2xkZXInLFxyXG4gIE9wdGlvbnMgPSAnb3B0aW9ucycsXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIE1vZGVsS2luZCB7XHJcbiAgV2ViQ29uc2VudCA9ICdNSUNST1NPRlQuV2ViQ29uc2VudCcsXHJcbiAgRFNSU3VibWlzc2lvbiA9ICdNSUNST1NPRlQuRFNSU3VibWlzc2lvbicsXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIFBhY2thZ2VLaW5kIHtcclxuICBXZWJDb25zZW50UGFja2FnZSA9ICdXZWJDb25zZW50UGFja2FnZScsXHJcbiAgRklERVNQYWNrYWdlID0gJ0ZJREVTUGFja2FnZScsXHJcbiAgRFNSU3VibWlzc2lvblBhY2thZ2UgPSAnRFNSU3VibWlzc2lvblBhY2thZ2UnLFxyXG59XHJcblxyXG5leHBvcnQgZW51bSBMYXlvdXQge1xyXG4gIFByZWZlcmVuY2VzID0gJ1ByZWZlcmVuY2VzJyxcclxufVxyXG5cclxuZXhwb3J0IGVudW0gQXBwQ29uZmlndXJhdGlvblR5cGUge1xyXG4gIFB1cnBvc2VDb25maWd1cmF0aW9uID0gJ3B1cnBvc2VDb25maWd1cmF0aW9uJyxcclxufVxyXG4iLCJleHBvcnQgY29uc3QgcmVnaXN0ZXJIZXBsZXJzID0gKCkgPT4ge1xyXG4gIGlmICh3aW5kb3cuSGFuZGxlYmFycykge1xyXG4gICAgd2luZG93LkhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ3RvTG93ZXJDYXNlJywgZnVuY3Rpb24gKHR5cGU6IHN0cmluZykge1xyXG4gICAgICByZXR1cm4gdHlwZS50b0xvd2VyQ2FzZSgpID8/IHR5cGU7XHJcbiAgICB9KTtcclxuXHJcbiAgICB3aW5kb3cuSGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcihcclxuICAgICAgJ2VxdWFscycsXHJcbiAgICAgIGZ1bmN0aW9uIChwYXJhbTE6IHN0cmluZywgcGFyYW0yOiBzdHJpbmcpIHtcclxuICAgICAgICByZXR1cm4gcGFyYW0xLnRvTG93ZXJDYXNlKCkgPT09IHBhcmFtMi50b0xvd2VyQ2FzZSgpID8/IGZhbHNlO1xyXG4gICAgICB9LFxyXG4gICAgKTtcclxuICB9XHJcbn07XHJcbiIsImV4cG9ydCBjb25zdCBraW5kID0gJ19fUEFDS0FHRV9LSU5EX18nO1xyXG5cclxuZXhwb3J0IGNvbnN0IGFsbG93ZWRLaW5kcyA9IFsndHJhY2tlckNvbnNlbnQnLCAnZHNyJywgJ2dlbmVyaWNDb25zZW50J107XHJcbiIsImltcG9ydCB7IGtpbmQgfSBmcm9tICdjb21tb24vc2RrJztcclxuXHJcbi8vIEJlbG93IHJlZ2V4IGlzIHRvIGFsbG93IGFueSB3aGl0ZXNwYWNlIGFzIHdlbGwgbGlrZSBcIjwgZGF0YS1wcm9wID5jb25zZW50SWQ8IFxcIGRhdGEtcHJvcCA+XCJcclxuLyogZXNsaW50LWRpc2FibGUgbm8tdXNlbGVzcy1lc2NhcGUgKi9cclxuY29uc3QgY3VzdG9tVmFyaWFibGVzUmVnZXggPVxyXG4gIC88XFxzKmRhdGEtcHJvcFxccyo+KFxcc3wmbmJzcDspKiguKj8pKFxcc3wmbmJzcDspKjxcXHMqW1xcL1xcXFxdXFxzKmRhdGEtcHJvcFxccyo+L2c7XHJcbi8qIGVzbGludC1lbmFibGUgbm8tdXNlbGVzcy1lc2NhcGUgKi9cclxuXHJcbmV4cG9ydCBjb25zdCByZXBsYWNlRGF0YVByb3BzSW5MYXlvdXRWYWx1ZXMgPSAoXHJcbiAgb3JpZ2luYWxEZXRhaWxzOiBJR2VuZXJpY09iamVjdCxcclxuKSA9PiB7XHJcbiAgY29uc3Qgc3RyaW5naWZpZWRSZXN1bHQgPSByZXBsYWNlRGF0YVByb3BzKEpTT04uc3RyaW5naWZ5KG9yaWdpbmFsRGV0YWlscykpO1xyXG4gIHJldHVybiBKU09OLnBhcnNlKHN0cmluZ2lmaWVkUmVzdWx0KTtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCByZXBsYWNlRGF0YVByb3BzID0gKHN0cjogc3RyaW5nKTogc3RyaW5nID0+IHtcclxuICBjb25zdCBkYXRhUHJvcHMgPSB3aW5kb3cuX19NU0ZUX1NES1traW5kXS5TdG9yZS5nZXR0ZXJzLmRhdGFQcm9wcztcclxuXHJcbiAgcmV0dXJuIHN0ci5yZXBsYWNlQWxsKGN1c3RvbVZhcmlhYmxlc1JlZ2V4LCAoLi4ucmVzdWx0KSA9PiB7XHJcbiAgICBjb25zdCB2YXJpYWJsZU5hbWUgPSByZXN1bHRbMl0/LnRyaW0oKTtcclxuICAgIHJldHVybiBkYXRhUHJvcHNbdmFyaWFibGVOYW1lXVxyXG4gICAgICA/IGRhdGFQcm9wc1t2YXJpYWJsZU5hbWVdLnRvU3RyaW5nKClcclxuICAgICAgOiByZXN1bHRbMF07XHJcbiAgfSk7XHJcbn07XHJcbiIsImNsYXNzIE9iamVjdFV0aWxzIHtcclxuICBwdWJsaWMgc3RhdGljIGlzT2JqZWN0KGl0ZW06IGFueSkge1xyXG4gICAgcmV0dXJuIGl0ZW0gJiYgdHlwZW9mIGl0ZW0gPT09ICdvYmplY3QnICYmICFBcnJheS5pc0FycmF5KGl0ZW0pO1xyXG4gIH1cclxuICBwdWJsaWMgc3RhdGljIG1lcmdlRGVlcCh0YXJnZXQ6IGFueSwgLi4uc291cmNlczogYW55KTogYW55IHtcclxuICAgIGlmICghc291cmNlcy5sZW5ndGgpIHJldHVybiB0YXJnZXQ7XHJcbiAgICBjb25zdCBzb3VyY2UgPSBzb3VyY2VzLnNoaWZ0KCk7XHJcblxyXG4gICAgaWYgKHRoaXMuaXNPYmplY3QodGFyZ2V0KSAmJiB0aGlzLmlzT2JqZWN0KHNvdXJjZSkpIHtcclxuICAgICAgZm9yIChjb25zdCBrZXkgaW4gc291cmNlKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNPYmplY3Qoc291cmNlW2tleV0pKSB7XHJcbiAgICAgICAgICBpZiAoIXRhcmdldFtrZXldKSBPYmplY3QuYXNzaWduKHRhcmdldCwgeyBba2V5XToge30gfSk7XHJcbiAgICAgICAgICB0aGlzLm1lcmdlRGVlcCh0YXJnZXRba2V5XSwgc291cmNlW2tleV0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBPYmplY3QuYXNzaWduKHRhcmdldCwgeyBba2V5XTogc291cmNlW2tleV0gfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcy5tZXJnZURlZXAodGFyZ2V0LCAuLi5zb3VyY2VzKTtcclxuICB9XHJcbn1cclxuZXhwb3J0IGRlZmF1bHQgT2JqZWN0VXRpbHM7XHJcbiIsImV4cG9ydCBlbnVtIFNES01vZHVsZXMge1xyXG4gIFBSRVNFTlRBVElPTiA9ICdwcmVzZW50YXRpb24nLFxyXG4gIFBSRVZJRVcgPSAncHJldmlldycsXHJcbiAgQ09ORklHID0gJ2NvbmZpZycsXHJcbiAgSEFORExFQkFSID0gJ2hhbmRsZWJhcicsXHJcbiAgUFJPWFkgPSAncHJveHknLFxyXG4gIERTUiA9ICdkc3InLFxyXG59XHJcblxyXG5leHBvcnQgZW51bSBTREtNb2R1bGVzUGF0aCB7XHJcbiAgUFJFU0VOVEFUSU9OID0gJyRqc1Jvb3RQYXRoL21zZnQtcHJpdmFjeS9wYWNrYWdlcy8kcGFja2FnZUlkL2pzLyRjb25zZW50U0RLVmVyc2lvbi9wcmVzZW50YXRpb24ubWluLmpzJyxcclxuICBQUkVWSUVXID0gJyRqc1Jvb3RQYXRoL21zZnQtcHJpdmFjeS9wYWNrYWdlcy8kcGFja2FnZUlkL2pzLyRjb25zZW50U0RLVmVyc2lvbi9wcmV2aWV3Lm1pbi5qcycsXHJcbiAgSEFORExFQkFSID0gJyRqc1Jvb3RQYXRoL21zZnQtcHJpdmFjeS9wYWNrYWdlcy8kcGFja2FnZUlkL2pzLyRjb25zZW50U0RLVmVyc2lvbi92ZW5kb3IvaGFuZGxlYmFycy5taW4uanMnLFxyXG4gIFBST1hZID0gJyRqc1Jvb3RQYXRoL21zZnQtcHJpdmFjeS9wYWNrYWdlcy8kcGFja2FnZUlkL2pzLyRjb25zZW50U0RLVmVyc2lvbi9wcm94eS5taW4uanMnLFxyXG4gIERTUiA9ICckanNSb290UGF0aC9tc2Z0LXByaXZhY3kvcGFja2FnZXMvJHBhY2thZ2VJZC9qcy8kY29uc2VudFNES1ZlcnNpb24vZHNyLm1pbi5qcycsXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIFNES01vZHVsZXNTb3VyY2VWYXJpYWJsZSB7XHJcbiAgUFJFU0VOVEFUSU9OID0gJ21zZnQtcHJlc2VudGF0aW9uLmpzJyxcclxuICBIQU5ETEVCQVIgPSAnbXNmdC1oYW5kbGViYXJzLmpzJyxcclxuICBQUk9YWSA9ICdtc2Z0LXByb3h5LmpzJyxcclxuICBEU1IgPSAnZHNyLmpzJyxcclxufVxyXG5cclxuZXhwb3J0IGVudW0gTW9kdWxlU291cmNlVHlwZSB7XHJcbiAgUEFUSCA9ICdwYXRoJyxcclxuICBWQVJJQUJMRSA9ICd2YXJpYWJsZScsXHJcbn1cclxuIiwiaW1wb3J0IHsgSVN0YXRlIH0gZnJvbSAnLi90eXBlcyc7XHJcblxyXG5jbGFzcyBTdGF0ZSB7XHJcbiAgcHVibGljIHN0YXRlOiBJU3RhdGU7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHN0YXRlPzogSVN0YXRlKSB7XHJcbiAgICB0aGlzLnN0YXRlID0gc3RhdGUgfHwge1xyXG4gICAgICBjb25maWc6IHt9LFxyXG4gICAgICBkZWJ1Zzoge1xyXG4gICAgICAgIGxvZ3M6IFtdLFxyXG4gICAgICAgIGV2ZW50czogW10sXHJcbiAgICAgIH0sXHJcbiAgICAgIGN1c3RvbToge30sXHJcbiAgICAgIHVzZXJWYWx1ZXM6IHt9LFxyXG4gICAgfTtcclxuICB9XHJcbn1cclxuZXhwb3J0IGRlZmF1bHQgU3RhdGU7XHJcbiIsIi8qIGVzbGludC1kaXNhYmxlIGNsYXNzLW1ldGhvZHMtdXNlLXRoaXMgKi9cclxuaW1wb3J0IHsgU0RLTW9kdWxlc1NvdXJjZVZhcmlhYmxlIH0gZnJvbSAnY29yZS9kZXBlbmRlbmN5TWFuYWdlci9lbnVtL21vZHVsZXMnO1xyXG5pbXBvcnQgU3RhdGUgZnJvbSAnLi9TdGF0ZSc7XHJcbmltcG9ydCB7IElDb25maWdTdGF0ZSwgSURlYnVnU3RhdGUsIElTdGF0ZSB9IGZyb20gJy4vdHlwZXMnO1xyXG5cclxuaW50ZXJmYWNlIEdldHRlcnMgZXh0ZW5kcyBJU3RvcmUuSUdldHRlciB7XHJcbiAgW3g6IHN0cmluZ106IGFueTtcclxufVxyXG5jbGFzcyBHZXR0ZXJzIGV4dGVuZHMgU3RhdGUge1xyXG4gIGNvbnN0cnVjdG9yKHN0YXRlOiBJU3RhdGUpIHtcclxuICAgIHN1cGVyKHN0YXRlKTtcclxuICB9XHJcbiAgZ2V0IGRlYnVnSW5mbygpOiBJRGVidWdTdGF0ZSB7XHJcbiAgICByZXR1cm4gdGhpcy5zdGF0ZS5kZWJ1ZztcclxuICB9XHJcblxyXG4gIGdldCBjb25maWcoKTogSUNvbmZpZ1N0YXRlIHtcclxuICAgIHJldHVybiB0aGlzLnN0YXRlLmNvbmZpZztcclxuICB9XHJcbiAgZ2V0IHVzZXJDb25zZW50KCk6IElVc2VyQ29uc2VudCB7XHJcbiAgICByZXR1cm4gdGhpcy5zdGF0ZS5jdXN0b20udXNlckNvbnNlbnQ7XHJcbiAgfVxyXG5cclxuICAvLyBUT0RPOiBJbXBsZW1lbnQgYmVsb3cgZ2V0dGVyc1xyXG4gIGdldCBpc0hlYWRsZXNzKCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgZ2V0IGlzUHJldmlld01vZGUoKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdGhpcy5zdGF0ZS5jb25maWcuaW5pdENvbmZpZz8ucHJldmlldyB8fCBmYWxzZTtcclxuICB9XHJcblxyXG4gIGdldCBpc0FjdGlvbkRpc2FibGVkKCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIHRoaXMuc3RhdGUuY29uZmlnLmluaXRDb25maWc/LmRpc2FibGVBY3Rpb25zIHx8IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgZ2V0IGlzTGl2ZVByZXZpZXdNb2RlKCk6IGJvb2xlYW4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgcmV0dXJuIHdpbmRvdy5wYXJlbnQ/Lm5hbWUgPT09ICdDb25zZW50TGl2ZVByZXZpZXcnO1xyXG4gICAgfSBjYXRjaCAoX2Vycikge1xyXG4gICAgICAvLyBJZiB3ZSB0cnkgdG8gYWNjZXNzIG91dGVyIElGcmFtZSB3ZSBnZXQgZXJyb3JcclxuICAgICAgLy8gVW5jYXVnaHQgKGluIHByb21pc2UpIERPTUV4Y2VwdGlvbjogQmxvY2tlZCBhIGZyYW1lIHdpdGggb3JpZ2luIFwiaHR0cHM6Ly9sb2NhbGhvc3Q6MjMzMDlcIiBmcm9tIGFjY2Vzc2luZyBhIGNyb3NzLW9yaWdpbiBmcmFtZS5cclxuICAgICAgLy8gVGhpcyBjYXRjaCBibG9jayBpcyB0byBieXBhc3MgdGhlIGVycm9yXHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldCBwcmVzZW50YXRpb25WYXJpYWJsZSgpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIFNES01vZHVsZXNTb3VyY2VWYXJpYWJsZS5QUkVTRU5UQVRJT047XHJcbiAgfVxyXG5cclxuICBnZXQgaGFuZGxlYmFyVmFyaWFibGUoKTogc3RyaW5nIHtcclxuICAgIHJldHVybiBTREtNb2R1bGVzU291cmNlVmFyaWFibGUuSEFORExFQkFSO1xyXG4gIH1cclxuXHJcbiAgZ2V0IHByb3h5VmFyaWFibGUoKTogc3RyaW5nIHtcclxuICAgIHJldHVybiBTREtNb2R1bGVzU291cmNlVmFyaWFibGUuUFJPWFk7XHJcbiAgfVxyXG5cclxuICBnZXQgZHNyVmFyaWFibGUoKTogc3RyaW5nIHtcclxuICAgIHJldHVybiBTREtNb2R1bGVzU291cmNlVmFyaWFibGUuRFNSO1xyXG4gIH1cclxuXHJcbiAgZ2V0IGRhdGFQcm9wcygpOiBJRGF0YVByb3BzIHtcclxuICAgIHJldHVybiB0aGlzLnN0YXRlLmN1c3RvbS5keW5hbWljVmFsdWVzIHx8IHt9O1xyXG4gIH1cclxuXHJcbiAgZ2V0IGlzR1BDRW5hYmxlZCgpOiBib29sZWFuIHtcclxuICAgIGNvbnN0IGdwY1ZhbHVlID0gd2luZG93Lm5hdmlnYXRvci5nbG9iYWxQcml2YWN5Q29udHJvbD8udG9TdHJpbmcoKTtcclxuICAgIHJldHVybiBncGNWYWx1ZSA/IGdwY1ZhbHVlID09PSAndHJ1ZScgfHwgZ3BjVmFsdWUgPT09ICcxJyA6IGZhbHNlO1xyXG4gIH1cclxufVxyXG5leHBvcnQgZGVmYXVsdCBHZXR0ZXJzO1xyXG4iLCJleHBvcnQgZW51bSBFdmVudHNSZXBsYXlTdHJhdGVneSB7XHJcbiAgUkVQTEFZX0FMTCxcclxuICBSRVBMQVlfTEFURVNULFxyXG4gIFNLSVAsXHJcbn1cclxuIiwiLyogZXNsaW50LWRpc2FibGUgY2xhc3MtbWV0aG9kcy11c2UtdGhpcyAqL1xyXG5pbXBvcnQgeyBJQ2FsbGJhY2sgfSBmcm9tICdjb3JlL2V2ZW50QnVzL3R5cGVzL0lFdmVudCc7XHJcbmltcG9ydCB7IElFdmVudExvZ0luZm8gfSBmcm9tICdjb3JlL2V2ZW50QnVzL3R5cGVzL0lFdmVudHNSZWNvcmRlcic7XHJcbmltcG9ydCB7IElSZXBsYXlTdHJhdGVneSB9IGZyb20gJ2NvcmUvZXZlbnRCdXMvdHlwZXMvSVJlcGxheVN0cmF0ZWd5JztcclxuaW1wb3J0IHsgRXZlbnRzUmVwbGF5U3RyYXRlZ3kgfSBmcm9tICcuLi9lbnVtL0V2ZW50c1JlcGxheSc7XHJcblxyXG5jbGFzcyBSZXBsYXlBbGxFdmVudHMgaW1wbGVtZW50cyBJUmVwbGF5U3RyYXRlZ3kge1xyXG4gIHB1YmxpYyBzdHJhdGVneSA9IEV2ZW50c1JlcGxheVN0cmF0ZWd5LlJFUExBWV9BTEw7XHJcblxyXG4gIHB1YmxpYyBleGVjdXRlKGNhbGxiYWNrOiBJQ2FsbGJhY2ssIGV2ZW50czogSUV2ZW50TG9nSW5mb1tdKTogdm9pZCB7XHJcbiAgICBldmVudHMuZm9yRWFjaCgoeyBwYXlsb2FkIH0pID0+IGNhbGxiYWNrKHBheWxvYWQpKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IG5ldyBSZXBsYXlBbGxFdmVudHMoKTtcclxuIiwiLyogZXNsaW50LWRpc2FibGUgY2xhc3MtbWV0aG9kcy11c2UtdGhpcyAqL1xyXG5pbXBvcnQgeyBJQ2FsbGJhY2sgfSBmcm9tICdjb3JlL2V2ZW50QnVzL3R5cGVzL0lFdmVudCc7XHJcbmltcG9ydCB7IElFdmVudExvZ0luZm8gfSBmcm9tICdjb3JlL2V2ZW50QnVzL3R5cGVzL0lFdmVudHNSZWNvcmRlcic7XHJcbmltcG9ydCB7IElSZXBsYXlTdHJhdGVneSB9IGZyb20gJ2NvcmUvZXZlbnRCdXMvdHlwZXMvSVJlcGxheVN0cmF0ZWd5JztcclxuaW1wb3J0IHsgRXZlbnRzUmVwbGF5U3RyYXRlZ3kgfSBmcm9tICcuLi9lbnVtL0V2ZW50c1JlcGxheSc7XHJcblxyXG5jbGFzcyBSZXBsYXlMYXRlc3RFdmVudCBpbXBsZW1lbnRzIElSZXBsYXlTdHJhdGVneSB7XHJcbiAgcHVibGljIHN0cmF0ZWd5ID0gRXZlbnRzUmVwbGF5U3RyYXRlZ3kuUkVQTEFZX0xBVEVTVDtcclxuXHJcbiAgcHVibGljIGV4ZWN1dGUoY2FsbGJhY2s6IElDYWxsYmFjaywgZXZlbnRzOiBJRXZlbnRMb2dJbmZvW10pOiB2b2lkIHtcclxuICAgIGlmIChldmVudHMubGVuZ3RoKSB7XHJcbiAgICAgIGNhbGxiYWNrKGV2ZW50c1tldmVudHMubGVuZ3RoIC0gMV0ucGF5bG9hZCk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBuZXcgUmVwbGF5TGF0ZXN0RXZlbnQoKTtcclxuIiwiLyogZXNsaW50LWRpc2FibGUgY2xhc3MtbWV0aG9kcy11c2UtdGhpcyAqL1xyXG5pbXBvcnQgeyBJUmVwbGF5U3RyYXRlZ3kgfSBmcm9tICdjb3JlL2V2ZW50QnVzL3R5cGVzL0lSZXBsYXlTdHJhdGVneSc7XHJcbmltcG9ydCB7IEV2ZW50c1JlcGxheVN0cmF0ZWd5IH0gZnJvbSAnLi4vZW51bS9FdmVudHNSZXBsYXknO1xyXG5cclxuY2xhc3MgU2tpcEV2ZW50UmVwbGF5IGltcGxlbWVudHMgSVJlcGxheVN0cmF0ZWd5IHtcclxuICBwdWJsaWMgc3RyYXRlZ3kgPSBFdmVudHNSZXBsYXlTdHJhdGVneS5TS0lQO1xyXG5cclxuICBwdWJsaWMgZXhlY3V0ZSgpOiB2b2lkIHtcclxuICAgIHJldHVybiB2b2lkIDA7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBuZXcgU2tpcEV2ZW50UmVwbGF5KCk7XHJcbiIsImltcG9ydCB7IElSZXBsYXlTdHJhdGVneSB9IGZyb20gJ2NvcmUvZXZlbnRCdXMvdHlwZXMvSVJlcGxheVN0cmF0ZWd5JztcclxuaW1wb3J0IHsgRXZlbnRzUmVwbGF5U3RyYXRlZ3kgfSBmcm9tICcuLi9lbnVtL0V2ZW50c1JlcGxheSc7XHJcbmltcG9ydCBSZXBsYXlBbGxFdmVudHMgZnJvbSAnLi9SZXBsYXlBbGxFdmVudHMnO1xyXG5pbXBvcnQgUmVwbGF5TGF0ZXN0RXZlbnQgZnJvbSAnLi9SZXBsYXlMYXRlc3RFdmVudCc7XHJcbmltcG9ydCBTa2lwRXZlbnRSZXBsYXkgZnJvbSAnLi9Ta2lwRXZlbnRSZXBsYXknO1xyXG5cclxudHlwZSBJRXZlbnRzUmVwbGF5U3RyYXRlZ3kgPSB7XHJcbiAgW3N0cmF0ZWd5IGluIEV2ZW50c1JlcGxheVN0cmF0ZWd5XTogSVJlcGxheVN0cmF0ZWd5O1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQge1xyXG4gIFtFdmVudHNSZXBsYXlTdHJhdGVneS5SRVBMQVlfQUxMXTogUmVwbGF5QWxsRXZlbnRzLFxyXG4gIFtFdmVudHNSZXBsYXlTdHJhdGVneS5SRVBMQVlfTEFURVNUXTogUmVwbGF5TGF0ZXN0RXZlbnQsXHJcbiAgW0V2ZW50c1JlcGxheVN0cmF0ZWd5LlNLSVBdOiBTa2lwRXZlbnRSZXBsYXksXHJcbn0gYXMgSUV2ZW50c1JlcGxheVN0cmF0ZWd5O1xyXG4iLCJpbXBvcnQgeyBJQ2FsbGJhY2sgfSBmcm9tICcuLi90eXBlcy9JRXZlbnQnO1xyXG5pbXBvcnQgeyBJRXZlbnRzTG9nIH0gZnJvbSAnLi4vdHlwZXMvSUV2ZW50c1JlY29yZGVyJztcclxuaW1wb3J0IHsgRXZlbnRzUmVwbGF5U3RyYXRlZ3kgfSBmcm9tICcuL2VudW0vRXZlbnRzUmVwbGF5JztcclxuaW1wb3J0IFJlcGxheVN0cmF0ZWd5IGZyb20gJy4vZXZlbnRzUmVwbGF5U3RyYXRlZ3knO1xyXG5cclxuZXhwb3J0IGNsYXNzIEV2ZW50c1JlY29yZGluZyB7XHJcbiAgcHVibGljIHN0YXRpYyBldmVudHNMb2dzOiBJRXZlbnRzTG9nID0ge307XHJcbiAgcHJpdmF0ZSBzdGF0aWMgREVGQVVMVF9TVFJBVEVHWTogRXZlbnRzUmVwbGF5U3RyYXRlZ3kgPVxyXG4gICAgRXZlbnRzUmVwbGF5U3RyYXRlZ3kuUkVQTEFZX0xBVEVTVDtcclxuXHJcbiAgcHVibGljIHN0YXRpYyByZWNvcmQoZXZlbnQ6IHN0cmluZywgcGF5bG9hZDogSUdlbmVyaWNPYmplY3QpIHtcclxuICAgIHRoaXMuZXZlbnRzTG9nc1tldmVudF0gPSB0aGlzLmV2ZW50c0xvZ3NbZXZlbnRdIHx8IFtdO1xyXG4gICAgdGhpcy5ldmVudHNMb2dzW2V2ZW50XS5wdXNoKHsgcGF5bG9hZCB9KTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgcmVwbGF5KFxyXG4gICAgZXZlbnQ6IHN0cmluZyxcclxuICAgIGNhbGxiYWNrOiBJQ2FsbGJhY2ssXHJcbiAgICBzdHJhdGVneTogRXZlbnRzUmVwbGF5U3RyYXRlZ3kgPSB0aGlzLkRFRkFVTFRfU1RSQVRFR1ksXHJcbiAgKSB7XHJcbiAgICBSZXBsYXlTdHJhdGVneVtzdHJhdGVneV0uZXhlY3V0ZShjYWxsYmFjaywgdGhpcy5ldmVudHNMb2dzW2V2ZW50XSB8fCBbXSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBMb2dnZXIgZnJvbSAnLi4vbG9nZ2VyJztcclxuaW1wb3J0IFN0b3JlIGZyb20gJy4uL3N0b3JlJztcclxuaW1wb3J0IHsgRXZlbnRzUmVjb3JkaW5nIH0gZnJvbSAnLi9ldmVudHNSZWNvcmRlcic7XHJcbmltcG9ydCB7XHJcbiAgSUNhbGxiYWNrLFxyXG4gIElFdmVudERldGFpbHMsXHJcbiAgSUV2ZW50SGFuZGxlckRldGFpbHMsXHJcbiAgSUV2ZW50SGFuZGxlclByb3BlcnRpZXMsXHJcbiAgSUV2ZW50cyxcclxufSBmcm9tICcuL3R5cGVzL0lFdmVudCc7XHJcblxyXG5jbGFzcyBFdmVudEJ1cyB7XHJcbiAgcHJpdmF0ZSBldmVudElkQ291bnRlcjogbnVtYmVyO1xyXG4gIHByaXZhdGUgZXZlbnRzOiBJRXZlbnRzO1xyXG5cclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHRoaXMuZXZlbnRzID0ge307XHJcbiAgICB0aGlzLmV2ZW50SWRDb3VudGVyID0gMDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldHMgZGVmYXVsdCBldmVudCBkZXRhaWxzLlxyXG4gICAqIEByZXR1cm5zIHtJRXZlbnREZXRhaWxzfSBEZWZhdWx0IGV2ZW50IGRldGFpbHNcclxuICAgKi9cclxuICBwcml2YXRlIHN0YXRpYyBnZXREZWZhdWx0RXZlbnREZXRhaWxzKCk6IElFdmVudERldGFpbHMge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgZXhlY3V0aW9uQ291bnQ6IDAsXHJcbiAgICAgIGNhbGxiYWNrczogW10sXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQWRkIGFuIGV2ZW50IGxpc3RlbmVyLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudCBFdmVudCBuYW1lXHJcbiAgICogQHBhcmFtIHtJQ2FsbGJhY2t9IGNhbGxiYWNrIExpc3RlbmVyIGNhbGxiYWNrXHJcbiAgICogQHBhcmFtIHtJRXZlbnRIYW5kbGVyUHJvcGVydGllc30gcHJvcGVydGllcyBBZGRpdGlvbmFsIGNvbmZpZ3VyYXRpb24gcHJvcGVydGllc1xyXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9IEV2ZW50IElEXHJcbiAgICovXHJcbiAgcHVibGljIG9uKFxyXG4gICAgZXZlbnQ6IHN0cmluZyxcclxuICAgIGNhbGxiYWNrOiBJQ2FsbGJhY2ssXHJcbiAgICB7IHN5bmMgPSBmYWxzZSwgcmVwbGF5U3RyYXRlZ3kgfTogSUV2ZW50SGFuZGxlclByb3BlcnRpZXMgPSB7fSxcclxuICApOiBudW1iZXIge1xyXG4gICAgTG9nZ2VyLmluZm8oYENhbGxiYWNrIHJlZ2lzdGVyZWQgZm9yIGV2ZW50IDogJHtldmVudH1gKTtcclxuICAgIHRoaXMuZXZlbnRJZENvdW50ZXIrKztcclxuICAgIGNvbnN0IGV2ZW50RGV0YWlsczogSUV2ZW50SGFuZGxlckRldGFpbHMgPSB7XHJcbiAgICAgIGlkOiB0aGlzLmV2ZW50SWRDb3VudGVyLFxyXG4gICAgICBmbjogY2FsbGJhY2ssXHJcbiAgICAgIHN5bmMsXHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuZXZlbnRzW2V2ZW50XSA9XHJcbiAgICAgIHRoaXMuZXZlbnRzW2V2ZW50XSB8fCBFdmVudEJ1cy5nZXREZWZhdWx0RXZlbnREZXRhaWxzKCk7XHJcbiAgICB0aGlzLmV2ZW50c1tldmVudF0uY2FsbGJhY2tzLnB1c2goZXZlbnREZXRhaWxzKTtcclxuXHJcbiAgICBFdmVudHNSZWNvcmRpbmcucmVwbGF5KGV2ZW50LCBjYWxsYmFjaywgcmVwbGF5U3RyYXRlZ3kpO1xyXG5cclxuICAgIHJldHVybiB0aGlzLmV2ZW50SWRDb3VudGVyO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRXhlY3V0ZSBhbiBldmVudC5cclxuICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnQgRXZlbnQgbmFtZVxyXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiY29yZS90eXBlcy9pbnRlcmZhY2VzXCIpLklHZW5lcmljT2JqZWN0fSBwYXlsb2FkIFBheWxvYWQgZGF0YVxyXG4gICAqL1xyXG4gIHB1YmxpYyB0cmlnZ2VyKGV2ZW50OiBzdHJpbmcsIHBheWxvYWQ6IElHZW5lcmljT2JqZWN0ID0ge30pIHtcclxuICAgIGNvbnN0IGNhbGxiYWNrcyA9IHRoaXMuZXZlbnRzW2V2ZW50XT8uY2FsbGJhY2tzIHx8IFtdO1xyXG5cclxuICAgIC8vIExldCB0aGUgbG9naWMgcnVuIGV2ZW4gaWYgbm8gYWN0aXZlIGxpc3RlbmVycyBzbyB0aGF0IHdlIGNhbiByZWNvcmQgdGhlIGV2ZW50cy5cclxuICAgIExvZ2dlci5pbmZvKFxyXG4gICAgICBgU3RhcnRlZCBleGVjdXRpbmcgJyR7Y2FsbGJhY2tzLmxlbmd0aH0nIGNhbGxiYWNrcyBmb3IgZXZlbnQgJyR7ZXZlbnR9J2AsXHJcbiAgICAgIHBheWxvYWQsXHJcbiAgICApO1xyXG5cclxuICAgIFN0b3JlLnJlZHVjZXJzLnNhdmVEZWJ1Z0luZm8oeyBldmVudCB9KTtcclxuXHJcbiAgICBjYWxsYmFja3MuZm9yRWFjaChhc3luYyBldmVudEhhbmRsZXIgPT4ge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGlmICghZXZlbnRIYW5kbGVyLnN5bmMpIHtcclxuICAgICAgICAgIGF3YWl0IFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZXZlbnRIYW5kbGVyLmZuKHBheWxvYWQpO1xyXG4gICAgICB9IGNhdGNoIChlOiBhbnkpIHtcclxuICAgICAgICBMb2dnZXIuZXJyb3IoXHJcbiAgICAgICAgICBgRXJyb3IgaW4gZXhlY3V0aW5nIGNhbGxiYWNrIGlkIDogJHtldmVudEhhbmRsZXIuaWR9IGZvciBldmVudCAnJHtldmVudH1gLFxyXG4gICAgICAgICAgZSxcclxuICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBFdmVudHNSZWNvcmRpbmcucmVjb3JkKGV2ZW50LCBwYXlsb2FkKTtcclxuXHJcbiAgICBMb2dnZXIuaW5mbyhcclxuICAgICAgYENvbXBsZXRlZCBleGVjdXRpbmcgJyR7Y2FsbGJhY2tzLmxlbmd0aH0nIGNhbGxiYWNrcyBmb3IgZXZlbnQgJyR7ZXZlbnR9J2AsXHJcbiAgICAgIHBheWxvYWQsXHJcbiAgICApO1xyXG5cclxuICAgIGlmICh0aGlzLmV2ZW50c1tldmVudF0pIHtcclxuICAgICAgdGhpcy5ldmVudHNbZXZlbnRdLmV4ZWN1dGlvbkNvdW50Kys7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBEZXRhY2ggYW4gZXZlbnQgbGlzdGVuZXIuXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50IEV2ZW50IG5hbWVcclxuICAgKiBAcGFyYW0ge251bWJlciB8IElDYWxsYmFja30gZXZlbnRJZE9yQ2FsbGJhY2sgRXZlbnQgbGlzdGVuZXIgSUQgb3IgY2FsbGJhY2sgdG8gcmVtb3ZlXHJcbiAgICovXHJcbiAgcHVibGljIG9mZihldmVudDogc3RyaW5nLCBldmVudElkT3JDYWxsYmFjazogbnVtYmVyIHwgSUNhbGxiYWNrKSB7XHJcbiAgICBjb25zdCBpZHggPSB0aGlzLmV2ZW50c1tldmVudF0/LmNhbGxiYWNrcy5maW5kSW5kZXgoXHJcbiAgICAgIGV2ZW50RGV0YWlscyA9PlxyXG4gICAgICAgIGV2ZW50RGV0YWlscy5pZCA9PT0gZXZlbnRJZE9yQ2FsbGJhY2sgfHxcclxuICAgICAgICBldmVudERldGFpbHMuZm4gPT09IGV2ZW50SWRPckNhbGxiYWNrLFxyXG4gICAgKTtcclxuXHJcbiAgICBpZiAodHlwZW9mIGlkeCA9PT0gJ251bWJlcicgJiYgfmlkeCkge1xyXG4gICAgICBMb2dnZXIuaW5mbyhcclxuICAgICAgICBgUmVtb3ZpbmcgZXZlbnQgbGlzdGVuZXIgJyR7dGhpcy5ldmVudHNbZXZlbnRdLmNhbGxiYWNrc1tpZHhdLmlkfScgb2YgJyR7ZXZlbnR9JyBldmVudGAsXHJcbiAgICAgICk7XHJcbiAgICAgIHRoaXMuZXZlbnRzW2V2ZW50XS5jYWxsYmFja3Muc3BsaWNlKGlkeCwgMSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBMb2dnZXIuZXJyb3IoXHJcbiAgICAgICAgYFVuYWJsZSB0byByZW1vdmUgZXZlbnQgbGlzdGVuZXIgZm9yIGV2ZW50ICcke2V2ZW50fScuIE5vIG1hdGNoaW5nIGV2ZW50IGlkIG9yIGNhbGxiYWNrIGZvdW5kLmAsXHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDaGVja3MgaWYgYW55IGV2ZW50IGxpc3RlbmVyIGlzIGF0dGFjaGVkIGluIHRoZSBldmVudCBidXMuXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50IEV2ZW50IG5hbWVcclxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiBhbiBldmVudCBsaXN0ZW5lciBpcyBhdHRhY2hlZCBlbHNlIGZhbHNlXHJcbiAgICovXHJcbiAgcHVibGljIGhhc0xpc3RlbmVyKGV2ZW50OiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgIHJldHVybiB0aGlzLmV2ZW50c1tldmVudF0/LmNhbGxiYWNrcy5sZW5ndGggPiAwO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgbmV3IEV2ZW50QnVzKCk7XHJcbiIsIi8qIGVzbGludC1kaXNhYmxlIGNsYXNzLW1ldGhvZHMtdXNlLXRoaXMgKi9cclxuaW1wb3J0IFN0YXRlIGZyb20gJy4vU3RhdGUnO1xyXG5pbXBvcnQgeyBJU3RhdGUgfSBmcm9tICcuL3R5cGVzJztcclxuaW1wb3J0IEV2ZW50QnVzIGZyb20gJy4uL2V2ZW50QnVzJztcclxuaW1wb3J0IHsgUHVibGljRXZlbnRzIH0gZnJvbSAnLi4vY29uc3RhbnRzL2VudW1zJztcclxuXHJcbmludGVyZmFjZSBSZWR1Y2VycyBleHRlbmRzIElTdG9yZS5JUmVkdWNlciB7XHJcbiAgW3g6IHN0cmluZ106IGFueTtcclxufVxyXG5jbGFzcyBSZWR1Y2VycyBleHRlbmRzIFN0YXRlIHtcclxuICBjb25zdHJ1Y3RvcihzdGF0ZTogSVN0YXRlKSB7XHJcbiAgICBzdXBlcihzdGF0ZSk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc2F2ZURlYnVnSW5mbyh7IGV2ZW50LCBsb2cgfTogeyBldmVudD86IHN0cmluZzsgbG9nPzogc3RyaW5nIH0pIHtcclxuICAgIGlmIChldmVudCkge1xyXG4gICAgICB0aGlzLnN0YXRlLmRlYnVnLmV2ZW50cy5wdXNoKGV2ZW50KTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAobG9nKSB7XHJcbiAgICAgIHRoaXMuc3RhdGUuZGVidWcubG9ncy5wdXNoKGxvZyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc2V0VXNlckNvbnNlbnQoY29uc2VudDogSVVzZXJDb25zZW50KSB7XHJcbiAgICB0aGlzLnN0YXRlLmN1c3RvbS51c2VyQ29uc2VudCA9IGNvbnNlbnQ7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc2V0SW5pdENvbmZpZyhpbml0Q29uZmlnOiBJSW5pdENvbmZpZykge1xyXG4gICAgdGhpcy5zdGF0ZS5jb25maWcuaW5pdENvbmZpZyA9IGluaXRDb25maWc7XHJcblxyXG4gICAgaWYgKGluaXRDb25maWc/LmRhdGFQcm9wcykge1xyXG4gICAgICB0aGlzLnNldERhdGFQcm9wcyhpbml0Q29uZmlnLmRhdGFQcm9wcyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc2V0RGF0YVByb3BzKHZhbHVlczogSURhdGFQcm9wcykge1xyXG4gICAgdGhpcy5zdGF0ZS5jdXN0b20uZHluYW1pY1ZhbHVlcyA9IHtcclxuICAgICAgLi4uKHRoaXMuc3RhdGUuY3VzdG9tLmR5bmFtaWNWYWx1ZXMgfHwge30pLFxyXG4gICAgICAuLi52YWx1ZXMsXHJcbiAgICB9O1xyXG5cclxuICAgIEV2ZW50QnVzLnRyaWdnZXIoXHJcbiAgICAgIFB1YmxpY0V2ZW50cy5EYXRhUHJvcHNVcGRhdGVkLFxyXG4gICAgICB0aGlzLnN0YXRlLmN1c3RvbS5keW5hbWljVmFsdWVzLFxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBhZGRDdXN0b21Vc2VyVmFsdWUoa2V5OiBzdHJpbmcsIHZhbHVlOiBhbnkpOiB2b2lkIHtcclxuICAgIHRoaXMuc3RhdGUudXNlclZhbHVlc1trZXldID0gdmFsdWU7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0Q3VzdG9tVXNlclZhbHVlKGtleTogc3RyaW5nKTogYW55IHtcclxuICAgIHJldHVybiB0aGlzLnN0YXRlLnVzZXJWYWx1ZXNba2V5XTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFJlZHVjZXJzO1xyXG4iLCJpbXBvcnQgT2JqZWN0VXRpbHMgZnJvbSAnLi4vdXRpbHMvT2JqZWN0VXRpbHMnO1xyXG5pbXBvcnQgR2V0dGVycyBmcm9tICcuL0dldHRlcnMnO1xyXG5pbXBvcnQgUmVkdWNlcnMgZnJvbSAnLi9SZWR1Y2Vycyc7XHJcbmltcG9ydCBTdGF0ZSBmcm9tICcuL1N0YXRlJztcclxuXHJcbmNvbnN0IHsgc3RhdGUgfSA9IG5ldyBTdGF0ZSgpO1xyXG5jb25zdCBnZXR0ZXIgPSBuZXcgR2V0dGVycyhzdGF0ZSk7XHJcbmNvbnN0IHJlZHVjZXIgPSBuZXcgUmVkdWNlcnMoc3RhdGUpO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQge1xyXG4gIGdldHRlcnM6IGdldHRlcixcclxuICByZWR1Y2VyczogcmVkdWNlcixcclxuICBhZGRSZWR1Y2VyczogZnVuY3Rpb24gKHJlZHVjZXJzOiBhbnkpIHtcclxuICAgIHRoaXMucmVkdWNlcnMgPSBPYmplY3RVdGlscy5tZXJnZURlZXAodGhpcy5yZWR1Y2VycywgcmVkdWNlcnMpO1xyXG4gIH0sXHJcbiAgYWRkR2V0dGVyczogZnVuY3Rpb24gKGdldHRlcnM6IGFueSkge1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoXHJcbiAgICAgIHRoaXMuZ2V0dGVycyxcclxuICAgICAgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoZ2V0dGVycy5wcm90b3R5cGUpLFxyXG4gICAgKTtcclxuICB9LFxyXG59O1xyXG4iLCJleHBvcnQgZW51bSBMb2dMZXZlbHMge1xyXG4gIElORk8sXHJcbiAgV0FSTixcclxuICBFUlJPUixcclxufVxyXG4iLCJpbXBvcnQgeyBMb2dMZXZlbHMgfSBmcm9tICcuLi9lbnVtJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENvbnNvbGVMb2dnZXIge1xyXG4gIC8qKlxyXG4gICAqIEJyb3dzZXIncyBjb25zb2xlIGxvZ2dlciBwbHVnaW4uXHJcbiAgICogQHBhcmFtIHtMb2dMZXZlbHN9IGxldmVsIExvZyBsZXZlbFxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBtZXNzYWdlIExvZyBtZXNzYWdlXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBsb2cobGV2ZWw6IExvZ0xldmVscywgbWVzc2FnZTogc3RyaW5nKSB7XHJcbiAgICBzd2l0Y2ggKGxldmVsKSB7XHJcbiAgICAgIGNhc2UgTG9nTGV2ZWxzLldBUk46XHJcbiAgICAgICAgY29uc29sZS53YXJuKG1lc3NhZ2UpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIExvZ0xldmVscy5FUlJPUjpcclxuICAgICAgICBjb25zb2xlLmVycm9yKG1lc3NhZ2UpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jykge1xyXG4gICAgICAgICAgY29uc29sZS5sb2cobWVzc2FnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgU3RvcmUgZnJvbSAnLi4vc3RvcmUnO1xyXG5pbXBvcnQgeyBMb2dMZXZlbHMgfSBmcm9tICcuL2VudW0nO1xyXG5pbXBvcnQgQ29uc29sZUxvZ2dlciBmcm9tICcuL3BsdWdpbnMvQ29uc29sZUxvZ2dlcic7XHJcblxyXG4vKipcclxuICogQHR5cGVkZWYge2ltcG9ydChcImNvcmUvdHlwZXMvaW50ZXJmYWNlc1wiKS5JR2VuZXJpY09iamVjdH0gSUdlbmVyaWNPYmplY3RcclxuICovXHJcbmNsYXNzIExvZ2dlciB7XHJcbiAgLyoqXHJcbiAgICogSW5mbyBsb2dzXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IG1lc3NhZ2UgTG9nZ2VyIG1lc3NhZ2VcclxuICAgKiBAcGFyYW0ge0lHZW5lcmljT2JqZWN0fSBkYXRhIEFkZGl0aW9uYWwgZGV0YWlscyB0byBsb2dcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGluZm8obWVzc2FnZTogc3RyaW5nLCBkYXRhPzogSUdlbmVyaWNPYmplY3QpIHtcclxuICAgIExvZ2dlci5sb2coTG9nTGV2ZWxzLklORk8sIG1lc3NhZ2UsIGRhdGEpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogV2FybmluZyBsb2dzXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IG1lc3NhZ2UgTG9nZ2VyIG1lc3NhZ2VcclxuICAgKiBAcGFyYW0ge0lHZW5lcmljT2JqZWN0fSBkYXRhIEFkZGl0aW9uYWwgZGV0YWlscyB0byBsb2dcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIHdhcm4obWVzc2FnZTogc3RyaW5nLCBkYXRhPzogSUdlbmVyaWNPYmplY3QpIHtcclxuICAgIExvZ2dlci5sb2coTG9nTGV2ZWxzLldBUk4sIG1lc3NhZ2UsIGRhdGEpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRXJyb3IgbG9nc1xyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBtZXNzYWdlIExvZ2dlciBtZXNzYWdlXHJcbiAgICogQHBhcmFtIHtJR2VuZXJpY09iamVjdH0gZGF0YSBBZGRpdGlvbmFsIGRldGFpbHMgdG8gbG9nXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBlcnJvcihtZXNzYWdlOiBzdHJpbmcsIGRhdGE/OiBJR2VuZXJpY09iamVjdCkge1xyXG4gICAgTG9nZ2VyLmxvZyhMb2dMZXZlbHMuRVJST1IsIG1lc3NhZ2UsIGRhdGEpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogTG9ncyB0aGUgbWVzc2FnZSB1c2luZyB0aGUgcGx1Z2luIGJhc2VkIGluIGxldmVsLlxyXG4gICAqIEBwYXJhbSB7TG9nTGV2ZWxzfSBsb2dMZXZlbCBMb2cgbGV2ZWxcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gbWVzc2FnZSBMb2dnZXIgbWVzc2FnZVxyXG4gICAqIEBwYXJhbSB7SUdlbmVyaWNPYmplY3R9IGRhdGEgQWRkaXRpb25hbCBkZXRhaWxzIHRvIGxvZ1xyXG4gICAqL1xyXG4gIHByaXZhdGUgc3RhdGljIGxvZyhcclxuICAgIGxvZ0xldmVsOiBMb2dMZXZlbHMsXHJcbiAgICBtZXNzYWdlOiBzdHJpbmcsXHJcbiAgICBkYXRhPzogSUdlbmVyaWNPYmplY3QsXHJcbiAgKSB7XHJcbiAgICBjb25zdCBmb3JtYXR0ZWRNZXNzYWdlID0gTG9nZ2VyLmZvcm1hdExvZ01lc3NhZ2UobG9nTGV2ZWwsIG1lc3NhZ2UsIGRhdGEpO1xyXG5cclxuICAgIFN0b3JlLnJlZHVjZXJzLnNhdmVEZWJ1Z0luZm8oeyBsb2c6IGZvcm1hdHRlZE1lc3NhZ2UgfSk7XHJcbiAgICBDb25zb2xlTG9nZ2VyLmxvZyhsb2dMZXZlbCwgZm9ybWF0dGVkTWVzc2FnZSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBGb3JtYXRzIHRoZSBsb2dnZXIgbWVzc2FnZS5cclxuICAgKiBAcGFyYW0ge0xvZ0xldmVsc30gbG9nTGV2ZWwgTG9nIGxldmVsXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IG1lc3NhZ2UgTG9nZ2VyIG1lc3NhZ2VcclxuICAgKiBAcGFyYW0ge0lHZW5lcmljT2JqZWN0fSBkYXRhIEFkZGl0aW9uYWwgZGV0YWlscyB0byBsb2dcclxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBGb3JtYXR0ZWQgbG9nZ2VyIG1lc3NhZ2VcclxuICAgKi9cclxuICBwcml2YXRlIHN0YXRpYyBmb3JtYXRMb2dNZXNzYWdlKFxyXG4gICAgbG9nTGV2ZWw6IExvZ0xldmVscyxcclxuICAgIG1lc3NhZ2U6IHN0cmluZyxcclxuICAgIGRhdGE/OiBJR2VuZXJpY09iamVjdCxcclxuICApOiBzdHJpbmcge1xyXG4gICAgY29uc3Qgc3RyaW5naWZpZWREYXRhID0gZGF0YSA/IGB8ICR7SlNPTi5zdHJpbmdpZnkoZGF0YSl9YCA6ICcnO1xyXG4gICAgcmV0dXJuIGBbJHtMb2dMZXZlbHNbbG9nTGV2ZWxdfV0gJHttZXNzYWdlfSAke3N0cmluZ2lmaWVkRGF0YX1gO1xyXG4gIH1cclxufVxyXG5leHBvcnQgZGVmYXVsdCBMb2dnZXI7XHJcbiIsImltcG9ydCB7IFByZWZlcmVuY2UgfSBmcm9tICdjb3JlL2NvbnN0YW50cy9lbnVtcyc7XHJcbmltcG9ydCBMb2dnZXIgZnJvbSAnY29yZS9sb2dnZXInO1xyXG5cclxuZXhwb3J0IGNsYXNzIENvbnNlbnRFbmNvZGluZ1NlcnZpY2Uge1xyXG4gIHB1YmxpYyBzdGF0aWMgQ09OU0VOVFZFUlNJT04gPSAnY29uc2VudFZlcnNpb24nO1xyXG4gIHB1YmxpYyBzdGF0aWMgQ09OU0VOVElEID0gJ2NvbnNlbnRJZCc7XHJcbiAgcHVibGljIHN0YXRpYyBBQ0NFUFRBTEwgPSAnYWNjZXB0QWxsJztcclxuICBwdWJsaWMgc3RhdGljIERFQ0xJTkVBTEwgPSAnZGVjbGluZUFsbCc7XHJcbiAgcHVibGljIHN0YXRpYyBDT1VOVFJZID0gJ2NvdW50cnknO1xyXG5cclxuICAvKipcclxuICAgKiBFbmNvZGUgdXNlcidzIGNvbnNlbnQgcHJlZmVyZW5jZVxyXG4gICAqIEBwYXJhbSAge2ltcG9ydChcImNvcmUvdHlwZXMvaW50ZXJmYWNlc1wiKS5JVXNlckNvbnNlbnR9IGNvbnNlbnQgdXNlcidzIGNvbnNlbnQgb2JqZWN0XHJcbiAgICogQHBhcmFtICB7aW1wb3J0KFwiY29yZS90eXBlcy9pbnRlcmZhY2VzXCIpLklDb3JlQ29uc2VudE1vZGVsfSBtb2RlbCBjdXJyZW50IHNlbGVjdGVkIGNvbnNlbnQgbW9kZWxcclxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBlbmNvZGVkIGNvbnNlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGVuY29kZUNvbnNlbnQoXHJcbiAgICBjb25zZW50OiBJVXNlckNvbnNlbnQsXHJcbiAgICBtb2RlbDogSUNvcmVNb2RlbCxcclxuICApOiBzdHJpbmcge1xyXG4gICAgTG9nZ2VyLmluZm8oJ2VuY29kaW5nIGNvbnNlbnQnLCB7IGNvbnNlbnQsIG1vZGVsIH0pO1xyXG4gICAgY29uc3QgeyBwcmVmZXJlbmNlcyB9ID0gY29uc2VudDtcclxuICAgIGNvbnN0IGVuY29kZWRDb25zZW50U3RyaW5nID0gT2JqZWN0LmtleXMocHJlZmVyZW5jZXMpXHJcbiAgICAgIC5tYXAocHVycG9zZSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGAke3B1cnBvc2V9PSR7XHJcbiAgICAgICAgICBwcmVmZXJlbmNlc1twdXJwb3NlXSA9PT0gUHJlZmVyZW5jZS5PTlxyXG4gICAgICAgICAgICA/IFByZWZlcmVuY2UuT05cclxuICAgICAgICAgICAgOiBQcmVmZXJlbmNlLk9GRlxyXG4gICAgICAgIH1gO1xyXG4gICAgICB9KVxyXG4gICAgICAuam9pbignJScpO1xyXG4gICAgTG9nZ2VyLmluZm8oYGVuY29kZWQgY29uc2VudCBzdHJpbmc6ICR7ZW5jb2RlZENvbnNlbnRTdHJpbmd9YCk7XHJcbiAgICByZXR1cm4gZW5jb2RlZENvbnNlbnRTdHJpbmc7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc3RhdGljIGVuY29kZUNvbnNlbnRNZXRhZGF0YShcclxuICAgIGNvbnNlbnQ6IElVc2VyQ29uc2VudCxcclxuICAgIG1vZGVsOiBJQ29yZU1vZGVsLFxyXG4gICAgYmFubmVyUHVycG9zZXM6IElQdXJwb3NlW10sXHJcbiAgICBjb3VudHJ5OiBzdHJpbmcsXHJcbiAgKTogc3RyaW5nIHtcclxuICAgIExvZ2dlci5pbmZvKCdlbmNvZGluZyBjb25zZW50JywgeyBjb25zZW50LCBtb2RlbCB9KTtcclxuICAgIGNvbnN0IHsgcHJlZmVyZW5jZXMgfSA9IGNvbnNlbnQ7XHJcbiAgICBsZXQgZW5jb2RlZENvbnNlbnRTdHJpbmcgPVxyXG4gICAgICBgJHtDb25zZW50RW5jb2RpbmdTZXJ2aWNlLkNPTlNFTlRWRVJTSU9OfT1gICtcclxuICAgICAgKG1vZGVsLnByb3BlcnRpZXMgYXMgSUNvbnNlbnRNb2RlbFByb3BlcnRpZXMpLmNvbnNlbnRWZXJzaW9uLnRvU3RyaW5nKCkgK1xyXG4gICAgICAnJSc7XHJcbiAgICBlbmNvZGVkQ29uc2VudFN0cmluZyArPVxyXG4gICAgICBgJHtDb25zZW50RW5jb2RpbmdTZXJ2aWNlLkNPTlNFTlRJRH09YCArXHJcbiAgICAgIChtb2RlbC5wcm9wZXJ0aWVzIGFzIElDb25zZW50TW9kZWxQcm9wZXJ0aWVzKS5jb25zZW50SWQgK1xyXG4gICAgICAnJSc7XHJcbiAgICBsZXQgYWNjZXB0QWxsID0gdHJ1ZSxcclxuICAgICAgZGVjbGluZUFsbCA9IHRydWU7XHJcbiAgICBiYW5uZXJQdXJwb3Nlcy5mb3JFYWNoKGJhbm5lclB1cnBvc2UgPT4ge1xyXG4gICAgICBpZiAoIWJhbm5lclB1cnBvc2UucHJvcGVydGllcy5pc0Vzc2VudGlhbCkge1xyXG4gICAgICAgIGlmIChwcmVmZXJlbmNlc1tiYW5uZXJQdXJwb3NlLm5hbWVdID09PSBQcmVmZXJlbmNlLk9GRilcclxuICAgICAgICAgIGFjY2VwdEFsbCA9IGZhbHNlO1xyXG4gICAgICAgIGVsc2UgZGVjbGluZUFsbCA9IGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIGVuY29kZWRDb25zZW50U3RyaW5nICs9XHJcbiAgICAgIGAke0NvbnNlbnRFbmNvZGluZ1NlcnZpY2UuQUNDRVBUQUxMfT1gICtcclxuICAgICAgKGFjY2VwdEFsbCA/IFByZWZlcmVuY2UuT04gOiBQcmVmZXJlbmNlLk9GRikgK1xyXG4gICAgICAnJSc7XHJcbiAgICBlbmNvZGVkQ29uc2VudFN0cmluZyArPVxyXG4gICAgICBgJHtDb25zZW50RW5jb2RpbmdTZXJ2aWNlLkRFQ0xJTkVBTEx9PWAgK1xyXG4gICAgICAoZGVjbGluZUFsbCA/IFByZWZlcmVuY2UuT04gOiBQcmVmZXJlbmNlLk9GRikgK1xyXG4gICAgICAnJSc7XHJcbiAgICBlbmNvZGVkQ29uc2VudFN0cmluZyArPVxyXG4gICAgICBgJHtDb25zZW50RW5jb2RpbmdTZXJ2aWNlLkNPVU5UUll9PWAgKyBjb3VudHJ5ICsgJyUnO1xyXG4gICAgTG9nZ2VyLmluZm8oYGVuY29kZWQgY29uc2VudCBtZXRhZGF0YSBzdHJpbmc6ICR7ZW5jb2RlZENvbnNlbnRTdHJpbmd9YCk7XHJcbiAgICByZXR1cm4gZW5jb2RlZENvbnNlbnRTdHJpbmc7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBEZWNvZGUgZW5jb2RlZCBjb25zZW50IHN0cmluZy5cclxuICAgKiBAcGFyYW0gIHtzdHJpbmd9IGVuY29kZWRDb25zZW50U3RyaW5nIGVuY29kZWQgY29uc2VudFxyXG4gICAqIEByZXR1cm5zIHtpbXBvcnQoXCJjb3JlL3R5cGVzL2ludGVyZmFjZXNcIikuSVVzZXJDb25zZW50fSBvYmplY3QgaGF2aW5nIHVzZXIgcHJlZmVyZW5jZSBmb3IgYWxsIHB1cnBvc2VzXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBkZWNvZGVDb25zZW50U3RyaW5nKFxyXG4gICAgZW5jb2RlZENvbnNlbnRTdHJpbmc6IHN0cmluZyxcclxuICApOiBJVXNlckNvbnNlbnQge1xyXG4gICAgTG9nZ2VyLmluZm8oYGRlY29kaW5nIGNvbnNlbnQgc3RyaW5nOiAke2VuY29kZWRDb25zZW50U3RyaW5nfWApO1xyXG4gICAgY29uc3QgcHJlZmVyZW5jZXM6IFN0cmluZ0tleVZhbHVlID0ge307XHJcbiAgICBlbmNvZGVkQ29uc2VudFN0cmluZz8uc3BsaXQoJyUnKT8uZm9yRWFjaChwYWlyU3RyID0+IHtcclxuICAgICAgY29uc3QgcGFpciA9IHBhaXJTdHIuc3BsaXQoJz0nKTtcclxuICAgICAgaWYgKHBhaXIubGVuZ3RoICE9PSAyKSByZXR1cm47XHJcbiAgICAgIGNvbnN0IGtleSA9IHBhaXJbMF07XHJcbiAgICAgIGNvbnN0IHZhbCA9IHBhaXJbMV07XHJcbiAgICAgIGlmIChcclxuICAgICAgICBrZXkgIT09IENvbnNlbnRFbmNvZGluZ1NlcnZpY2UuQ09OU0VOVFZFUlNJT04gJiZcclxuICAgICAgICBrZXkgIT09IENvbnNlbnRFbmNvZGluZ1NlcnZpY2UuQ09OU0VOVElEXHJcbiAgICAgICkge1xyXG4gICAgICAgIHByZWZlcmVuY2VzW2tleV0gPSB2YWw7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgTG9nZ2VyLmluZm8oJ2RlY29kZWQgY29uc2VudCcsIHsgcHJlZmVyZW5jZXMgfSk7XHJcbiAgICByZXR1cm4geyBwcmVmZXJlbmNlcyB9O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IHZlcnNpb24gZnJvbSBlbmNvZGVkIGNvbnNlbnQgbWV0YWRhdGEgc3RyaW5nXHJcbiAgICogQHBhcmFtICB7c3RyaW5nfSBlbmNvZGVkQ29uc2VudFN0cmluZyBlbmNvZGVkIGNvbnNlbnQgbWV0YWRhdGFcclxuICAgKiBAcmV0dXJucyB7bnVtYmVyfSB2ZXJzaW9uXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBnZXRWZXJzaW9uRnJvbU1ldGFkYXRhU3RyaW5nKFxyXG4gICAgZW5jb2RlZENvbnNlbnRTdHJpbmc6IHN0cmluZyxcclxuICApOiBudW1iZXIge1xyXG4gICAgY29uc3QgbWF0Y2ggPSBlbmNvZGVkQ29uc2VudFN0cmluZy5tYXRjaCgvY29uc2VudFZlcnNpb249KFtcXGQuXSspJS8pO1xyXG4gICAgaWYgKG1hdGNoID09IG51bGwpIHtcclxuICAgICAgcmV0dXJuIC0xO1xyXG4gICAgfVxyXG4gICAgY29uc3QgcmVzID0gcGFyc2VJbnQobWF0Y2hbMV0pO1xyXG4gICAgaWYgKGlzTmFOKHJlcykpIHtcclxuICAgICAgcmV0dXJuIC0xO1xyXG4gICAgfVxyXG4gICAgTG9nZ2VyLmluZm8oXHJcbiAgICAgIGBnZXRWZXJzaW9uU3RyaW5nIHN0cjogJHtlbmNvZGVkQ29uc2VudFN0cmluZ30gZm91bmQgY29uc2VudFZlcnNpb246ICR7cmVzfWAsXHJcbiAgICApO1xyXG4gICAgcmV0dXJuIHJlcztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCBtb2RlbCBuYW1lIGZyb20gZW5jb2RlZCBjb25zZW50IG1ldGFkYXRhIHN0cmluZ1xyXG4gICAqIEBwYXJhbSAge3N0cmluZ30gZW5jb2RlZENvbnNlbnRTdHJpbmcgZW5jb2RlZCBjb25zZW50IG1ldGFkYXRhXHJcbiAgICogQHJldHVybnMge3N0cmluZyB8IHVuZGVmaW5lZH0gbmFtZVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgZ2V0TW9kZWxJZEZyb21NZXRhZGF0YVN0cmluZyhcclxuICAgIGVuY29kZWRDb25zZW50U3RyaW5nOiBzdHJpbmcsXHJcbiAgKTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcclxuICAgIGNvbnN0IG1hdGNoID0gZW5jb2RlZENvbnNlbnRTdHJpbmcubWF0Y2goL2NvbnNlbnRJZD0oW14lXSspJS8pO1xyXG4gICAgaWYgKG1hdGNoID09IG51bGwpIHtcclxuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH1cclxuICAgIExvZ2dlci5pbmZvKFxyXG4gICAgICBgZ2V0TW9kZWxJZEZyb21TdHJpbmcgc3RyOiAke2VuY29kZWRDb25zZW50U3RyaW5nfSBmb3VuZCB2ZXJzaW9uOiAke21hdGNoWzFdfWAsXHJcbiAgICApO1xyXG4gICAgcmV0dXJuIG1hdGNoWzFdO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IGNvdW50cnkgZnJvbSBlbmNvZGVkIGNvbnNlbnQgbWV0YWRhdGEgc3RyaW5nXHJcbiAgICogQHBhcmFtICB7c3RyaW5nfSBlbmNvZGVkQ29uc2VudFN0cmluZyBlbmNvZGVkIGNvbnNlbnQgbWV0YWRhdGFcclxuICAgKiBAcmV0dXJucyB7c3RyaW5nIHwgdW5kZWZpbmVkfSBuYW1lXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBnZXRDb3VudHJ5RnJvbU1ldGFkYXRhU3RyaW5nKFxyXG4gICAgZW5jb2RlZENvbnNlbnRTdHJpbmc6IHN0cmluZyxcclxuICApOiBzdHJpbmcgfCB1bmRlZmluZWQge1xyXG4gICAgY29uc3QgbWF0Y2ggPSBlbmNvZGVkQ29uc2VudFN0cmluZy5tYXRjaCgvY291bnRyeT0oW14lXSspLyk7XHJcbiAgICBpZiAobWF0Y2ggPT0gbnVsbCkge1xyXG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG4gICAgTG9nZ2VyLmluZm8oXHJcbiAgICAgIGBnZXRDb3VudHJ5RnJvbU1ldGFkYXRhU3RyaW5nIHN0cjogJHtlbmNvZGVkQ29uc2VudFN0cmluZ30gZm91bmQgY291bnRyeTogJHttYXRjaFsxXX1gLFxyXG4gICAgKTtcclxuICAgIHJldHVybiBtYXRjaFsxXTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgZ2V0QWNjZXB0QWxsRnJvbU1ldGFkYXRhU3RyaW5nKFxyXG4gICAgZW5jb2RlZENvbnNlbnRTdHJpbmc6IHN0cmluZyxcclxuICApOiBib29sZWFuIHtcclxuICAgIGNvbnN0IG1hdGNoID0gZW5jb2RlZENvbnNlbnRTdHJpbmcubWF0Y2goL2FjY2VwdEFsbD0oW14lXSspJS8pO1xyXG4gICAgaWYgKG1hdGNoID09IG51bGwpIHtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgTG9nZ2VyLmluZm8oXHJcbiAgICAgIGBnZXRBY2NlcHRBbGxGcm9tU3RyaW5nIHN0cjogJHtlbmNvZGVkQ29uc2VudFN0cmluZ30gZm91bmQgYWNjZXB0QWxsOiAke21hdGNoWzFdfWAsXHJcbiAgICApO1xyXG4gICAgcmV0dXJuIG1hdGNoWzFdID09PSBQcmVmZXJlbmNlLk9OO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHN0YXRpYyBnZXREZWNsaW5lQWxsRnJvbU1ldGFkYXRhU3RyaW5nKFxyXG4gICAgZW5jb2RlZENvbnNlbnRTdHJpbmc6IHN0cmluZyxcclxuICApOiBib29sZWFuIHtcclxuICAgIGNvbnN0IG1hdGNoID0gZW5jb2RlZENvbnNlbnRTdHJpbmcubWF0Y2goL2RlY2xpbmVBbGw9KFteJV0rKSUvKTtcclxuICAgIGlmIChtYXRjaCA9PSBudWxsKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIExvZ2dlci5pbmZvKFxyXG4gICAgICBgZ2V0RGVjbGluZUFsbEZyb21TdHJpbmcgc3RyOiAke2VuY29kZWRDb25zZW50U3RyaW5nfSBmb3VuZCBkZWNsaW5lQWxsOiAke21hdGNoWzFdfWAsXHJcbiAgICApO1xyXG4gICAgcmV0dXJuIG1hdGNoWzFdID09PSBQcmVmZXJlbmNlLk9OO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgY29uc3QgQ29uc3RhbnRzID0ge1xyXG4gIE9GRjogJzAnLFxyXG4gIE9OOiAnMScsXHJcbiAgQ09PS0lFX05BTUU6ICdBUENDJyxcclxuICBDb25zZW50Q29uZmlnOiAnTWljcm9zb2Z0Q29uc2VudENvbmZpZycsXHJcbiAgUHVycG9zZUNvbnRyb2w6ICdNSUNST1NPRlQuVHJhY2tlckNhdGVnb3J5JyxcclxuICBHZW9Mb2NhdGlvbnM6ICdHZW9Mb2NhdGlvbnMnLFxyXG4gIENvdW50cmllc09yUmVnaW9uczogJ0NvdW50cmllc09yUmVnaW9ucycsXHJcbiAgQ29tcG9uZW50Q29udGVudHM6ICdDb21wb25lbnRDb250ZW50cycsXHJcbn07XHJcbiIsImltcG9ydCB7XHJcbiAgRXJyb3JTdHJpbmdzLFxyXG4gIE1vZGVsS2luZCxcclxuICBOb3RpY2VUeXBlLFxyXG4gIC8vIFF1ZXN0aW9uVmFsaWRhdGlvbixcclxuICBTdHlsZVR5cGUsXHJcbiAgTGF5b3V0LFxyXG59IGZyb20gJ2NvcmUvY29uc3RhbnRzL2VudW1zJztcclxuaW1wb3J0IHsgcmVnaXN0ZXJIZXBsZXJzIH0gZnJvbSAnLi9oYW5kbGViYXJIZWxwZXJzJztcclxuaW1wb3J0IHsga2luZCB9IGZyb20gJ2NvbW1vbi9zZGsnO1xyXG5pbXBvcnQge1xyXG4gIHJlcGxhY2VEYXRhUHJvcHMsXHJcbiAgcmVwbGFjZURhdGFQcm9wc0luTGF5b3V0VmFsdWVzLFxyXG59IGZyb20gJy4vZGF0YVByb3BzSGVscGVycyc7XHJcbmltcG9ydCB7IENvbnNlbnRFbmNvZGluZ1NlcnZpY2UgfSBmcm9tICdjb25zZW50L0NvbnNlbnRFbmNvZGluZ1NlcnZpY2UnO1xyXG5pbXBvcnQgeyBDb25zdGFudHMgfSBmcm9tICdjb3JlL2NvbnN0YW50cy9jb25zdGFudHMnO1xyXG5cclxuY2xhc3MgTGF5b3V0SGFuZGxlciB7XHJcbiAgcHJpdmF0ZSBzdGF0aWMgaW5pdGlhbGl6ZWQgPSBmYWxzZTtcclxuXHJcbiAgcHVibGljIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgTGF5b3V0SGFuZGxlci5yZWdpc3RlclNob3dMYXlvdXRIYW5kbGVycygpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmVnaXN0ZXIgZXZlbnQgaGFuZGxlcnMgdG8gb3Blbi9jbG9zZSBkaWZmZXJlbnQgbGF5b3V0c1xyXG4gICAqL1xyXG4gIHByaXZhdGUgc3RhdGljIHJlZ2lzdGVyU2hvd0xheW91dEhhbmRsZXJzKCkge1xyXG4gICAgd2luZG93Ll9fTVNGVF9TREtba2luZF0uRXZlbnRCdXMub24oXHJcbiAgICAgIHdpbmRvdy5fX01TRlRfU0RLW2tpbmRdLmVudW1zLlB1YmxpY0V2ZW50cy5TaG93Q29uc2VudE5vdGljZSxcclxuICAgICAgTGF5b3V0SGFuZGxlci5zaG93Rmlyc3RQYWdlLFxyXG4gICAgKTtcclxuICAgIHdpbmRvdy5fX01TRlRfU0RLW2tpbmRdLkV2ZW50QnVzLm9uKFxyXG4gICAgICB3aW5kb3cuX19NU0ZUX1NES1traW5kXS5lbnVtcy5QdWJsaWNFdmVudHMuQ2xvc2VDb25zZW50Tm90aWNlLFxyXG4gICAgICBMYXlvdXRIYW5kbGVyLmhpZGVDb25zZW50Tm90aWNlLFxyXG4gICAgKTtcclxuICAgIHdpbmRvdy5fX01TRlRfU0RLW2tpbmRdLkV2ZW50QnVzLm9uKFxyXG4gICAgICB3aW5kb3cuX19NU0ZUX1NES1traW5kXS5lbnVtcy5FdmVudHMuSW5pdCxcclxuICAgICAgTGF5b3V0SGFuZGxlci5zYXZlU3R5bGVzT25Jbml0LFxyXG4gICAgKTtcclxuICAgIHdpbmRvdy5fX01TRlRfU0RLW2tpbmRdLkV2ZW50QnVzLm9uKFxyXG4gICAgICB3aW5kb3cuX19NU0ZUX1NES1traW5kXS5lbnVtcy5QdWJsaWNFdmVudHMuU2hvd0xheW91dCxcclxuICAgICAgTGF5b3V0SGFuZGxlci5zaG93TGF5b3V0LFxyXG4gICAgKTtcclxuICAgIHdpbmRvdy5fX01TRlRfU0RLW2tpbmRdLkV2ZW50QnVzLm9uKFxyXG4gICAgICB3aW5kb3cuX19NU0ZUX1NES1traW5kXS5lbnVtcy5QdWJsaWNFdmVudHMuQ2xvc2VMYXlvdXQsXHJcbiAgICAgIExheW91dEhhbmRsZXIuY2xvc2VMYXlvdXQsXHJcbiAgICApO1xyXG4gICAgd2luZG93Ll9fTVNGVF9TREtba2luZF0uRXZlbnRCdXMub24oXHJcbiAgICAgIHdpbmRvdy5fX01TRlRfU0RLW2tpbmRdLmVudW1zLlB1YmxpY0V2ZW50cy5Db25zZW50Q2hhbmdlZCxcclxuICAgICAgTGF5b3V0SGFuZGxlci5pbml0LFxyXG4gICAgKTtcclxuICAgIHdpbmRvdy5fX01TRlRfU0RLW2tpbmRdLkV2ZW50QnVzLm9uKFxyXG4gICAgICB3aW5kb3cuX19NU0ZUX1NES1traW5kXS5lbnVtcy5FdmVudHMuQ29uZmlnUmVhZHksXHJcbiAgICAgIExheW91dEhhbmRsZXIuaW5pdCxcclxuICAgICk7XHJcbiAgICB3aW5kb3cuX19NU0ZUX1NES1traW5kXS5FdmVudEJ1cy5vbihcclxuICAgICAgd2luZG93Ll9fTVNGVF9TREtba2luZF0uZW51bXMuUHVibGljRXZlbnRzLlNob3dQcmVmZXJlbmNlcyxcclxuICAgICAgTGF5b3V0SGFuZGxlci5zaG93UHJlZmVyZW5jZXMsXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzdGF0aWMgc2hvd1ByZWZlcmVuY2VzKCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgTGF5b3V0SGFuZGxlci5zaG93TGF5b3V0KHsgbGF5b3V0SWQ6IExheW91dC5QcmVmZXJlbmNlcyB9KTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgTGF5b3V0SGFuZGxlci5zaG93Rmlyc3RQYWdlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTaG93IGxheW91dFxyXG4gICAqIEBwYXJhbSAge2ltcG9ydChcImNvcmUvdHlwZXMvaW50ZXJmYWNlc1wiKS5JR2VuZXJpY09iamVjdH0gcGF5bG9hZCBwYXlsb2FkIGRhdGFcclxuICAgKi9cclxuICBwcml2YXRlIHN0YXRpYyBzaG93TGF5b3V0KHsgbGF5b3V0SWQgfTogSUdlbmVyaWNPYmplY3QpOiB2b2lkIHtcclxuICAgIGlmIChcclxuICAgICAgd2luZG93Ll9fTVNGVF9TREtba2luZF0uU3RvcmUuZ2V0dGVycy5jb21wb25lbnRzICYmXHJcbiAgICAgIHdpbmRvdy5fX01TRlRfU0RLW2tpbmRdLlN0b3JlLmdldHRlcnMuY29tcG9uZW50c1tsYXlvdXRJZF1cclxuICAgICkge1xyXG4gICAgICBjb25zdCBjb25zZW50TW9kZWwgPSB3aW5kb3cuX19NU0ZUX1NES1traW5kXS5TdG9yZS5nZXR0ZXJzLmN1cnJlbnRNb2RlbDtcclxuICAgICAgTGF5b3V0SGFuZGxlci5zaG93TGF5b3V0SW5JRnJhbWUoXHJcbiAgICAgICAgd2luZG93Ll9fTVNGVF9TREtba2luZF0uU3RvcmUuZ2V0dGVycy5jb21wb25lbnRzW2xheW91dElkXSxcclxuICAgICAgICBsYXlvdXRJZCxcclxuICAgICAgICBbXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIHR5cGU6IFN0eWxlVHlwZS5UZXh0LFxyXG4gICAgICAgICAgICB2YWx1ZTogY29uc2VudE1vZGVsPy5sYXlvdXQudWkuY3NzPy5bbGF5b3V0SWQudG9Mb3dlckNhc2UoKV0gfHwgJycsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIF0sXHJcbiAgICAgICAgTGF5b3V0SGFuZGxlci5nZXRQYXJlbnRFbGVtZW50KGxheW91dElkKSxcclxuICAgICAgKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihgTGF5b3V0IDogJHtsYXlvdXRJZH0gbm90IGZvdW5kLmApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogSGlkZSBsYXlvdXRcclxuICAgKiBAcGFyYW0gIHtpbXBvcnQoXCJjb3JlL3R5cGVzL2ludGVyZmFjZXNcIikuSUdlbmVyaWNPYmplY3R9IHBheWxvYWQgcGF5bG9hZCBkYXRhXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBzdGF0aWMgY2xvc2VMYXlvdXQoeyBsYXlvdXRJZCB9OiBJR2VuZXJpY09iamVjdCk6IHZvaWQge1xyXG4gICAgTGF5b3V0SGFuZGxlci5jbG9zZUlGcmFtZShsYXlvdXRJZCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTYXZlIHN0eWxlcyBwYXNzZWQgYnkgdXNlciBpbiB3aW5kb3cuX19NU0ZUX1NES1traW5kXS5TdG9yZVxyXG4gICAqIEBwYXJhbSAge2ltcG9ydChcImNvcmUvdHlwZXMvaW50ZXJmYWNlc1wiKS5JSW5pdENvbmZpZ30gY29uZmlnIGluaXQgY29uZmlnXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBzdGF0aWMgc2F2ZVN0eWxlc09uSW5pdChjb25maWc6IGFueSkge1xyXG4gICAgaWYgKGNvbmZpZy5zdHlsZXMpIHtcclxuICAgICAgd2luZG93Ll9fTVNGVF9TREtba2luZF0uTG9nZ2VyLmluZm8oXHJcbiAgICAgICAgJ3VzZXIgcHJvdmlkZWQgc3R5bGVzIHBlcnNpc3RlZCB0byB3aW5kb3cuX19NU0ZUX1NES1traW5kXS5TdG9yZS4nLFxyXG4gICAgICApO1xyXG4gICAgICB3aW5kb3cuX19NU0ZUX1NES1traW5kXS5TdG9yZS5yZWR1Y2Vycy5zZXRTdHlsZXMoY29uZmlnLnN0eWxlcyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHN0YXRpYyB0b1Bhc2NhbENhc2Uoc3RyOiBhbnkpIHtcclxuICAgIGlmICh0eXBlb2Ygc3RyID09PSAnc3RyaW5nJykge1xyXG4gICAgICByZXR1cm4gc3RyWzBdLnRvVXBwZXJDYXNlKCkgKyBzdHIuc2xpY2UoMSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHN0cjtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgc3RhdGljIHZhbGlkYXRpb25BcnJheVRvT2JqZWN0KHZhbGlkYXRpb25zOiBJVmFsaWRhdGlvbltdKSB7XHJcbiAgICByZXR1cm4gdmFsaWRhdGlvbnMucmVkdWNlKChwcmV2aW91cywgY3VycmVudCkgPT4ge1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIC4uLnByZXZpb3VzLFxyXG4gICAgICAgIFtMYXlvdXRIYW5kbGVyLnRvUGFzY2FsQ2FzZShjdXJyZW50LnR5cGUpXTogY3VycmVudC52YWx1ZSxcclxuICAgICAgfTtcclxuICAgIH0sIHt9KTtcclxuICB9XHJcbiAgcHJpdmF0ZSBzdGF0aWMgYXN5bmMgZ2V0TGF5b3V0RGF0YShjb25zZW50TW9kZWw6IElNb2RlbCkge1xyXG4gICAgY29uc3QgZ3JvdXBlZFRyYW5zbGF0aW9ucyA9XHJcbiAgICAgIHdpbmRvdy5fX01TRlRfU0RLW2tpbmRdLlN0b3JlLmdldHRlcnMudHJhbnNsYXRpb25zO1xyXG4gICAgY29uc3QgcHVycG9zZUNvbXBvbmVudHMgPVxyXG4gICAgICB3aW5kb3cuX19NU0ZUX1NES1traW5kXS5TdG9yZS5nZXR0ZXJzLnB1cnBvc2VDb21wb25lbnRzO1xyXG4gICAgbGV0IGRhdGE6IGFueSA9IHt9O1xyXG4gICAgZGF0YVtOb3RpY2VUeXBlLkNvbnRyb2xdID0gW107XHJcbiAgICBkYXRhW0NvbnN0YW50cy5Db21wb25lbnRDb250ZW50c10gPSBbXTtcclxuICAgIGNvbnN0IHByZWZlcmVuY2VzID0gd2luZG93Lk1TRlRQcml2YWN5W2tpbmRdLmdldENvbnNlbnQoKS5wcmVmZXJlbmNlcztcclxuICAgIGNvbnN0IHB1cnBvc2VzTWFwID0gbmV3IE1hcDxzdHJpbmcsIElQdXJwb3NlPigpO1xyXG4gICAgY29uc3QgcXVlc3Rpb25NYXAgPSBuZXcgTWFwPHN0cmluZywgSVF1ZXN0aW9uPigpO1xyXG4gICAgY29uc3QgYWRkZWRQdXJwb3NlcyA9IG5ldyBTZXQ8c3RyaW5nPigpO1xyXG4gICAgaWYgKGNvbnNlbnRNb2RlbC5raW5kID09PSBNb2RlbEtpbmQuV2ViQ29uc2VudCkge1xyXG4gICAgICB3aW5kb3cuX19NU0ZUX1NES1traW5kXS5TdG9yZS5nZXR0ZXJzLmJhbm5lclB1cnBvc2VzLmZvckVhY2gocHVycG9zZSA9PiB7XHJcbiAgICAgICAgcHVycG9zZXNNYXAuc2V0KHB1cnBvc2Uub2JqZWN0SWQsIHB1cnBvc2UpO1xyXG4gICAgICB9KTtcclxuICAgICAgY29uc3QgY29uc2VudE1ldGFkYXRhID1cclxuICAgICAgICB3aW5kb3cuX19NU0ZUX1NES1traW5kXS5TdG9yZS5nZXR0ZXJzLmVuY29kZWRDb25zZW50TWV0YWRhdGE7XHJcbiAgICAgIGRhdGFbQ29uc2VudEVuY29kaW5nU2VydmljZS5BQ0NFUFRBTExdID1cclxuICAgICAgICBDb25zZW50RW5jb2RpbmdTZXJ2aWNlLmdldEFjY2VwdEFsbEZyb21NZXRhZGF0YVN0cmluZyhjb25zZW50TWV0YWRhdGEpO1xyXG4gICAgICBkYXRhW0NvbnNlbnRFbmNvZGluZ1NlcnZpY2UuREVDTElORUFMTF0gPVxyXG4gICAgICAgIENvbnNlbnRFbmNvZGluZ1NlcnZpY2UuZ2V0RGVjbGluZUFsbEZyb21NZXRhZGF0YVN0cmluZyhjb25zZW50TWV0YWRhdGEpO1xyXG4gICAgfSBlbHNlIGlmIChjb25zZW50TW9kZWwua2luZCA9PT0gTW9kZWxLaW5kLkRTUlN1Ym1pc3Npb24pIHtcclxuICAgICAgY29uc2VudE1vZGVsLmNvbnRyb2xzLmZvckVhY2goY29udHJvbCA9PiB7XHJcbiAgICAgICAgKGNvbnRyb2wgYXMgSVF1ZXN0aW9uQ29udHJvbCkuaW5zdGFuY2VzLmZvckVhY2goaW5zdGFuY2UgPT4ge1xyXG4gICAgICAgICAgcXVlc3Rpb25NYXAuc2V0KGluc3RhbmNlLm5hbWUsIHtcclxuICAgICAgICAgICAgLi4uaW5zdGFuY2UsXHJcbiAgICAgICAgICAgIGNvbnRyb2xUeXBlOiBjb250cm9sLm5hbWUsXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBwdXJwb3NlQ29tcG9uZW50cy5mb3JFYWNoKGNvbXBvbmVudCA9PiB7XHJcbiAgICAgIGRhdGFbQ29uc3RhbnRzLkNvbXBvbmVudENvbnRlbnRzXS5wdXNoKHtcclxuICAgICAgICBuYW1lOiBjb21wb25lbnQubmFtZSxcclxuICAgICAgICBjb250ZW50OiBjb21wb25lbnQudmlldy5jb250ZW50LFxyXG4gICAgICAgIGNzczogY29tcG9uZW50LnZpZXcuY3NzLFxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgZ3JvdXBlZFRyYW5zbGF0aW9ucy5mb3JFYWNoKGdyb3VwZWRUcmFuc2xhdGlvbiA9PlxyXG4gICAgICBPYmplY3Qua2V5cyhncm91cGVkVHJhbnNsYXRpb24pLmZvckVhY2gobmFtZXNwYWNlID0+IHtcclxuICAgICAgICBpZiAobmFtZXNwYWNlID09PSAnbW9kZWwnKSB7XHJcbiAgICAgICAgICBjb25zdCBjb250cm9sSW5zdGFuY2VzOiBhbnkgPSBbXTtcclxuICAgICAgICAgIGNvbnN0IGNvbnRyb2xzRGlzcGxheU9yZGVyID0gY29uc2VudE1vZGVsLmNvbnRyb2xzRGlzcGxheU9yZGVyID8/IFtdO1xyXG4gICAgICAgICAgY29uc3QgbW9kZWxUcmFuc2xhdGlvbnMgPSBncm91cGVkVHJhbnNsYXRpb25bbmFtZXNwYWNlXTtcclxuICAgICAgICAgIGRlbGV0ZSBtb2RlbFRyYW5zbGF0aW9ucy50cmFja2VyQ2F0ZWdvcnk7XHJcbiAgICAgICAgICBPYmplY3Qua2V5cyhtb2RlbFRyYW5zbGF0aW9ucykuZm9yRWFjaChmaWVsZCA9PiB7XHJcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG1vZGVsVHJhbnNsYXRpb25zW2ZpZWxkXSkpIHtcclxuICAgICAgICAgICAgICBtb2RlbFRyYW5zbGF0aW9uc1tmaWVsZF0uZm9yRWFjaChcclxuICAgICAgICAgICAgICAgICh0cmFuc2xhdGlvbkluc3RhbmNlOiB7XHJcbiAgICAgICAgICAgICAgICAgIG5hbWU6IHN0cmluZztcclxuICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbnM6IFN0cmluZ0tleUFueVZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICBjb250cm9sVHlwZTogc3RyaW5nO1xyXG4gICAgICAgICAgICAgICAgfSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICBjb25zdCBjb250cm9sSW5zdGFuY2UgPSBxdWVzdGlvbk1hcC5nZXQoXHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNsYXRpb25JbnN0YW5jZS5uYW1lLFxyXG4gICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICBpZiAoY29udHJvbEluc3RhbmNlICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IGNvbnRyb2xzRGlzcGxheU9yZGVyLmZpbmRJbmRleChcclxuICAgICAgICAgICAgICAgICAgICAgIGMgPT4gYyA9PT0gdHJhbnNsYXRpb25JbnN0YW5jZS5uYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNsYXRpb25JbnN0YW5jZS52YWxpZGF0aW9ucyA9XHJcbiAgICAgICAgICAgICAgICAgICAgICBMYXlvdXRIYW5kbGVyLnZhbGlkYXRpb25BcnJheVRvT2JqZWN0KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sSW5zdGFuY2U/LnZhbGlkYXRpb25zIHx8IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc2xhdGlvbkluc3RhbmNlLmNvbnRyb2xUeXBlID1cclxuICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xJbnN0YW5jZT8uY29udHJvbFR5cGU7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbHNEaXNwbGF5T3JkZXIubGVuZ3RoICE9IDBcclxuICAgICAgICAgICAgICAgICAgICAgID8gKGNvbnRyb2xJbnN0YW5jZXNbaW5kZXhdID0gdHJhbnNsYXRpb25JbnN0YW5jZSlcclxuICAgICAgICAgICAgICAgICAgICAgIDogY29udHJvbEluc3RhbmNlcy5wdXNoKHRyYW5zbGF0aW9uSW5zdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgZGF0YSA9IHsgLi4uZGF0YSwgW2ZpZWxkXTogbW9kZWxUcmFuc2xhdGlvbnNbZmllbGRdIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgZGF0YVtOb3RpY2VUeXBlLkNvbnRyb2xdLnB1c2goLi4uY29udHJvbEluc3RhbmNlcyk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChcclxuICAgICAgICAgIHB1cnBvc2VzTWFwLmhhcyhuYW1lc3BhY2UpICYmXHJcbiAgICAgICAgICAhYWRkZWRQdXJwb3Nlcy5oYXMobmFtZXNwYWNlKVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgY29uc3QgcHVycG9zZVRyYW5zbGF0aW9uID0ge1xyXG4gICAgICAgICAgICAuLi5ncm91cGVkVHJhbnNsYXRpb25bbmFtZXNwYWNlXSxcclxuICAgICAgICAgICAgbmFtZTogcHVycG9zZXNNYXAuZ2V0KG5hbWVzcGFjZSk/Lm5hbWUsXHJcbiAgICAgICAgICAgIGlzRXNzZW50aWFsOiBwdXJwb3Nlc01hcC5nZXQobmFtZXNwYWNlKT8ucHJvcGVydGllcz8uaXNFc3NlbnRpYWwsXHJcbiAgICAgICAgICAgIGlzT246IHByZWZlcmVuY2VzW3B1cnBvc2VzTWFwLmdldChuYW1lc3BhY2UpPy5uYW1lIHx8ICcnXSA9PT0gJzEnLFxyXG4gICAgICAgICAgICBjb250cm9sVHlwZTogcHVycG9zZXNNYXAuZ2V0KG5hbWVzcGFjZSk/LnR5cGUsXHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgICAgZGF0YVtOb3RpY2VUeXBlLkNvbnRyb2xdLnB1c2gocHVycG9zZVRyYW5zbGF0aW9uKTtcclxuICAgICAgICAgIGFkZGVkUHVycG9zZXMuYWRkKG5hbWVzcGFjZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KSxcclxuICAgICk7XHJcbiAgICBkYXRhW05vdGljZVR5cGUuQ29udHJvbF0gPSBbXHJcbiAgICAgIC4uLmRhdGFbTm90aWNlVHlwZS5Db250cm9sXS5maWx0ZXIoKGNvbnRyb2w6IGFueSkgPT4gY29udHJvbC5pc0Vzc2VudGlhbCksXHJcbiAgICAgIC4uLmRhdGFbTm90aWNlVHlwZS5Db250cm9sXS5maWx0ZXIoXHJcbiAgICAgICAgKGNvbnRyb2w6IGFueSkgPT4gIWNvbnRyb2wuaXNFc3NlbnRpYWwsXHJcbiAgICAgICksXHJcbiAgICBdO1xyXG4gICAgZGF0YVsnbXNmdC1zY3JpcHQtb3BlbiddID0gJzxzY3JpcHQ+JztcclxuICAgIGRhdGFbJ21zZnQtc2NyaXB0LWNsb3NlJ10gPSAnPC9zY3JpcHQ+JztcclxuICAgIHdpbmRvdy5fX01TRlRfU0RLW2tpbmRdLkxvZ2dlci5pbmZvKCdnZXRMYXlvdXQgZGF0YSBpbnZva2VkJywge1xyXG4gICAgICBjb25zZW50TW9kZWwsXHJcbiAgICAgIGRhdGEsXHJcbiAgICB9KTtcclxuXHJcbiAgICBjb25zdCBsYXlvdXREZXRhaWxzID0ge1xyXG4gICAgICAuLi5kYXRhLFxyXG4gICAgICAuLi53aW5kb3cuX19NU0ZUX1NES1traW5kXS5TdG9yZS5nZXR0ZXJzLmxheW91dERhdGEsXHJcbiAgICAgIC4uLihjb25zZW50TW9kZWwubGF5b3V0Py5wcm9wZXJ0aWVzIHx8IHt9KSxcclxuICAgICAgY29uc2VudE1vZGVsLFxyXG4gICAgICBtb2RlbFByb3BzOiBjb25zZW50TW9kZWwucHJvcGVydGllcyxcclxuICAgICAgLi4uKHdpbmRvdy5fX01TRlRfU0RLW2tpbmRdLlN0b3JlLmdldHRlcnMuZGF0YVByb3BzIHx8IHt9KSxcclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIHJlcGxhY2VEYXRhUHJvcHNJbkxheW91dFZhbHVlcyhsYXlvdXREZXRhaWxzKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFBlcmZvcm0gYWxsIG5lY2Vzc2FyeSBzdGVwcyBsaWtlIHJlcGxhY2luZyBwbGFjZWhvbGRlcnMgaW5cclxuICAgKiBsYXlvdXRzIGR1cmluZyBpbml0LlxyXG4gICAqL1xyXG4gIHByaXZhdGUgc3RhdGljIGFzeW5jIGluaXQoKSB7XHJcbiAgICByZWdpc3RlckhlcGxlcnMoKTtcclxuICAgIGlmIChcclxuICAgICAgd2luZG93Ll9fTVNGVF9TREtba2luZF0uU3RvcmUuZ2V0dGVycy5jdXJyZW50TW9kZWwgPT09IHVuZGVmaW5lZCB8fFxyXG4gICAgICB3aW5kb3cuX19NU0ZUX1NES1traW5kXS5TdG9yZS5nZXR0ZXJzLmxheW91dCA9PT0gdW5kZWZpbmVkXHJcbiAgICApIHtcclxuICAgICAgd2luZG93Ll9fTVNGVF9TREtba2luZF0uTG9nZ2VyLndhcm4oXHJcbiAgICAgICAgJ0Nhbm5vdCBjYWxsIGluaXQgYmVmb3JlIGNvbmZpZyBpcyByZWFkeS4nLFxyXG4gICAgICApO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgY29uc2VudE1vZGVsID0gd2luZG93Ll9fTVNGVF9TREtba2luZF0uU3RvcmUuZ2V0dGVyc1xyXG4gICAgICAuY3VycmVudE1vZGVsIGFzIElNb2RlbDtcclxuICAgIGNvbnN0IGxheW91dCA9IHdpbmRvdy5fX01TRlRfU0RLW2tpbmRdLlN0b3JlLmdldHRlcnMubGF5b3V0IGFzIElMYXlvdXQ7XHJcblxyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IExheW91dEhhbmRsZXIuZ2V0TGF5b3V0RGF0YShjb25zZW50TW9kZWwpO1xyXG4gICAgbGF5b3V0LnBhZ2VzLmZvckVhY2gocGFnZSA9PiB7XHJcbiAgICAgIGxldCBsYXlvdXRTdHJpbmc6IHN0cmluZztcclxuICAgICAgbGV0IGNvbXBvbmVudENzczogc3RyaW5nID0gJyc7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgZGF0YVtDb25zdGFudHMuQ29tcG9uZW50Q29udGVudHNdLmZvckVhY2goXHJcbiAgICAgICAgICAoYzogeyBuYW1lOiBzdHJpbmc7IGNvbnRlbnQ6IHN0cmluZzsgY3NzOiBzdHJpbmcgfSkgPT4ge1xyXG4gICAgICAgICAgICBwYWdlLmNvbnRlbnQgPSBwYWdlLmNvbnRlbnQucmVwbGFjZShcclxuICAgICAgICAgICAgICAne3t7JyArIGMubmFtZSArICd9fX0nLFxyXG4gICAgICAgICAgICAgIGMuY29udGVudCxcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgY29tcG9uZW50Q3NzICs9IGMuY3NzO1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICApO1xyXG4gICAgICAgIC8vIGNvbXBvbmVudCBjc3Mgb24gdG9wIHRvIG1haW50YWluIGhpZ2hlciBwcmlvcml0eSBvZiBsYXlvdXQgY3NzIG92ZXIgY29tcG9uZW50IGNzc1xyXG4gICAgICAgIGNvbnN0IGxheW91dCA9IHdpbmRvdy5IYW5kbGViYXJzLmNvbXBpbGUoXHJcbiAgICAgICAgICBjb21wb25lbnRDc3MgKyBwYWdlLmNzcyArIHBhZ2UuY29udGVudCxcclxuICAgICAgICApO1xyXG4gICAgICAgIGxheW91dFN0cmluZyA9IGxheW91dChkYXRhKTtcclxuICAgICAgfSBjYXRjaCAoZTogYW55KSB7XHJcbiAgICAgICAgd2luZG93Ll9fTVNGVF9TREtba2luZF0uTG9nZ2VyLmVycm9yKGUubWVzc2FnZSwgZSk7XHJcbiAgICAgICAgbGF5b3V0U3RyaW5nID0gRXJyb3JTdHJpbmdzLkxheW91dEVycm9yO1xyXG4gICAgICB9XHJcbiAgICAgIHdpbmRvdy5fX01TRlRfU0RLW2tpbmRdLlN0b3JlLnJlZHVjZXJzLnNldENvbXBvbmVudHMoe1xyXG4gICAgICAgIC4uLndpbmRvdy5fX01TRlRfU0RLW2tpbmRdLlN0b3JlLmdldHRlcnMuY29tcG9uZW50cyxcclxuICAgICAgICBbcGFnZS5uYW1lXTogbGF5b3V0U3RyaW5nLFxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgd2luZG93Ll9fTVNGVF9TREtba2luZF0uTG9nZ2VyLmluZm8oJ0NvbXBvbmVudHMgdXBkYXRlZCcpO1xyXG4gICAgaWYgKCFMYXlvdXRIYW5kbGVyLmluaXRpYWxpemVkKSB7XHJcbiAgICAgIHdpbmRvdy5fX01TRlRfU0RLW2tpbmRdLkV2ZW50QnVzLm9uKFxyXG4gICAgICAgIHdpbmRvdy5fX01TRlRfU0RLW2tpbmRdLmVudW1zLlB1YmxpY0V2ZW50cy5TaG93Rmlyc3RQYWdlLFxyXG4gICAgICAgIExheW91dEhhbmRsZXIuc2hvd0ZpcnN0UGFnZSxcclxuICAgICAgKTtcclxuICAgICAgTGF5b3V0SGFuZGxlci5pbml0aWFsaXplZCA9IHRydWU7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTaG93IENvbnNlbnQgbm90aWNlIGxheW91dFxyXG4gICAqL1xyXG4gIHByaXZhdGUgc3RhdGljIGFzeW5jIHNob3dGaXJzdFBhZ2UoKSB7XHJcbiAgICBpZiAoIUxheW91dEhhbmRsZXIuaW5pdGlhbGl6ZWQpIHtcclxuICAgICAgYXdhaXQgTGF5b3V0SGFuZGxlci5pbml0KCk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBjb25zZW50TW9kZWwgPSB3aW5kb3cuX19NU0ZUX1NES1traW5kXS5TdG9yZS5nZXR0ZXJzLmN1cnJlbnRNb2RlbDtcclxuICAgIGlmIChjb25zZW50TW9kZWwgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICB3aW5kb3cuX19NU0ZUX1NES1traW5kXS5Mb2dnZXIud2FybihcclxuICAgICAgICAnQ2Fubm90IGNhbGwgaW5pdCBiZWZvcmUgY29uc2VudCBtb2RlbCBpcyBzZWxlY3RlZC4nLFxyXG4gICAgICApO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zdCBpbml0Q29tcG9uZW50ID1cclxuICAgICAgd2luZG93Ll9fTVNGVF9TREtba2luZF0uU3RvcmUuZ2V0dGVycy5zdGFydGluZ0xheW91dFBhZ2U7XHJcblxyXG4gICAgaWYgKFxyXG4gICAgICB3aW5kb3cuX19NU0ZUX1NES1traW5kXS5TdG9yZS5nZXR0ZXJzLmNvbXBvbmVudHMgPT09IHVuZGVmaW5lZCB8fFxyXG4gICAgICBpbml0Q29tcG9uZW50ID09PSB1bmRlZmluZWQgfHxcclxuICAgICAgd2luZG93Ll9fTVNGVF9TREtba2luZF0uU3RvcmUuZ2V0dGVycy5jb21wb25lbnRzW2luaXRDb21wb25lbnRdID09PVxyXG4gICAgICAgIHVuZGVmaW5lZFxyXG4gICAgKSB7XHJcbiAgICAgIHdpbmRvdy5fX01TRlRfU0RLW2tpbmRdLkxvZ2dlci5lcnJvcignTm90aWNlIGxheW91dCBub3QgZm91bmQuJyk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IGxheW91dCA9XHJcbiAgICAgIHdpbmRvdy5fX01TRlRfU0RLW2tpbmRdLlN0b3JlLmdldHRlcnMuY29tcG9uZW50c1tpbml0Q29tcG9uZW50XTtcclxuXHJcbiAgICBMYXlvdXRIYW5kbGVyLnNob3dMYXlvdXRJbklGcmFtZShcclxuICAgICAgbGF5b3V0LFxyXG4gICAgICBpbml0Q29tcG9uZW50LFxyXG4gICAgICBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgdHlwZTogU3R5bGVUeXBlLlRleHQsXHJcbiAgICAgICAgICB2YWx1ZTpcclxuICAgICAgICAgICAgY29uc2VudE1vZGVsLmxheW91dC51aS5jc3M/Lltpbml0Q29tcG9uZW50LnRvTG93ZXJDYXNlKCldIHx8ICcnLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIF0sXHJcbiAgICAgIExheW91dEhhbmRsZXIuZ2V0UGFyZW50RWxlbWVudChpbml0Q29tcG9uZW50KSxcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHN0YXRpYyBnZXRQYXJlbnRFbGVtZW50KGxheW91dElkOiBzdHJpbmcpOiBIVE1MRWxlbWVudCB8IG51bGwge1xyXG4gICAgY29uc3QgcGFyZW50TWFwID1cclxuICAgICAgd2luZG93Ll9fTVNGVF9TREtba2luZF0uU3RvcmUuZ2V0dGVycy5jb25maWcuaW5pdENvbmZpZ1xyXG4gICAgICAgID8uY29tcG9uZW50UGFyZW50TWFwIHx8XHJcbiAgICAgIHdpbmRvdy5fX01TRlRfU0RLW2tpbmRdLlN0b3JlLmdldHRlcnMubGF5b3V0UGFyZW50TWFwO1xyXG4gICAgY29uc3QgcGFyZW50RWxlbWVudElkID0gcGFyZW50TWFwPy5bbGF5b3V0SWRdIHx8IHBhcmVudE1hcD8uWycqJ107XHJcbiAgICBpZiAocGFyZW50RWxlbWVudElkKSB7XHJcbiAgICAgIHJldHVybiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChwYXJlbnRFbGVtZW50SWQpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBBZGRzIGxheW91dCB0byBpZnJhbWUgYW5kIGFwcGVuZCBpdCB0byBkb21cclxuICAgKiBAcGFyYW0gIHtzdHJpbmd9IGxheW91dCBsYXlvdXQgdG8gYWRkXHJcbiAgICogQHBhcmFtICB7c3RyaW5nfSBpZnJhbWVJZCBpZnJhbWUgaWRcclxuICAgKiBAcGFyYW0gIHtpbXBvcnQoXCJjb3JlL3R5cGVzL2ludGVyZmFjZXNcIikuSVN0eWxlW119IHN0eWxlcyB1c2VyIHByb3ZpZGVkIHN0eWxlc1xyXG4gICAqIEBwYXJhbSAge0hUTUxFbGVtZW50fG51bGx9IHBhcmVudEVsZW1lbnQgaWYgaWZyYW1lIHNob3VsZCBiZSBhZGRlZCB0byBhIHNwZWNpZmljIGVsZW1lbnQgaW5zdGVhZCBvZiBib2R5XHJcbiAgICovXHJcbiAgcHJpdmF0ZSBzdGF0aWMgc2hvd0xheW91dEluSUZyYW1lKFxyXG4gICAgbGF5b3V0OiBzdHJpbmcsXHJcbiAgICBpZnJhbWVJZDogc3RyaW5nLFxyXG4gICAgc3R5bGVzOiBJU3R5bGVbXSA9IFtdLFxyXG4gICAgcGFyZW50RWxlbWVudD86IEhUTUxFbGVtZW50IHwgbnVsbCxcclxuICApIHtcclxuICAgIGNvbnN0IGlmcmFtZUVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZnJhbWVJZCk7XHJcbiAgICBpZiAoaWZyYW1lRWxlbWVudCkge1xyXG4gICAgICB3aW5kb3cuX19NU0ZUX1NES1traW5kXS5Mb2dnZXIuaW5mbyhcclxuICAgICAgICBgTGF5b3V0OiAke2lmcmFtZUlkfSBpcyBhbHJlYWR5IG9wZW4uYCxcclxuICAgICAgKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGlmIChcclxuICAgICAgICBsYXlvdXQgPT09IEVycm9yU3RyaW5ncy5MYXlvdXRFcnJvciAmJlxyXG4gICAgICAgICghd2luZG93Ll9fTVNGVF9TREtba2luZF0uU3RvcmUuZ2V0dGVycy5pc0xpdmVQcmV2aWV3TW9kZSB8fFxyXG4gICAgICAgICAgIXdpbmRvdy5fX01TRlRfU0RLW2tpbmRdLlN0b3JlLmdldHRlcnMuaXNQcmV2aWV3TW9kZSlcclxuICAgICAgKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IGRhdGEgPSB7XHJcbiAgICAgICAgb3JpZ2luOiB3aW5kb3cub3JpZ2luLFxyXG4gICAgICAgIHJlbmRlckxheW91dFdpdGhvdXRJZnJhbWU6XHJcbiAgICAgICAgICB3aW5kb3cuX19NU0ZUX1NES1traW5kXS5TdG9yZS5nZXR0ZXJzLmNvbmZpZy5pbml0Q29uZmlnXHJcbiAgICAgICAgICAgID8ucmVuZGVyTGF5b3V0V2l0aG91dElmcmFtZSxcclxuICAgICAgICBleGVjdXRpb25Db250ZXh0czpcclxuICAgICAgICAgIHdpbmRvdy5fX01TRlRfU0RLW2tpbmRdLlN0b3JlLmdldHRlcnMuY29uZmlnLmluaXRDb25maWdcclxuICAgICAgICAgICAgPy5leGVjdXRpb25Db250ZXh0cyB8fCBbXSxcclxuICAgICAgICBpc0dQQ0VuYWJsZWQ6XHJcbiAgICAgICAgICB3aW5kb3cuX19NU0ZUX1NES1traW5kXS5TdG9yZS5nZXR0ZXJzLmlzR1BDRW5hYmxlZCAmJlxyXG4gICAgICAgICAgd2luZG93Ll9fTVNGVF9TREtba2luZF0uU3RvcmUuZ2V0dGVycy5zaG91bGRIb25vdXJHUEMsXHJcbiAgICAgIH07XHJcbiAgICAgIGxheW91dCA9XHJcbiAgICAgICAgYDxzY3JpcHQ+dmFyIG1zZnREYXRhID0gJHtKU09OLnN0cmluZ2lmeShkYXRhKX08L3NjcmlwdD5cclxuICAgICAgICA8c2NyaXB0PiR7d2luZG93Ll9fTVNGVF9TREtba2luZF0uU3RvcmUuZ2V0dGVycy5wcm94eUpTfTwvc2NyaXB0PmAgK1xyXG4gICAgICAgIHJlcGxhY2VEYXRhUHJvcHMobGF5b3V0KTtcclxuICAgICAgd2luZG93Ll9fTVNGVF9TREtba2luZF0uVXRpbHMuSUZyYW1lVXRpbHMuY3JlYXRlSUZyYW1lKFxyXG4gICAgICAgIGxheW91dCxcclxuICAgICAgICBpZnJhbWVJZCxcclxuICAgICAgICBwYXJlbnRFbGVtZW50LFxyXG4gICAgICAgIHN0eWxlcyxcclxuICAgICAgKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEhpZGUgY29uc2VudCBub3RpY2UgaWZyYW1lXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBzdGF0aWMgaGlkZUNvbnNlbnROb3RpY2UoKSB7XHJcbiAgICBjb25zdCBjb25zZW50TW9kZWwgPSB3aW5kb3cuX19NU0ZUX1NES1traW5kXS5TdG9yZS5nZXR0ZXJzLmN1cnJlbnRNb2RlbDtcclxuICAgIGlmIChjb25zZW50TW9kZWwgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICB3aW5kb3cuX19NU0ZUX1NES1traW5kXS5Mb2dnZXIud2FybihcclxuICAgICAgICAnQ2Fubm90IGNhbGwgaGlkZUNvbnNlbnROb3RpY2UgYmVmb3JlIGNvbnNlbnQgbW9kZWwgaXMgc2VsZWN0ZWQuJyxcclxuICAgICAgKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc3QgaW5pdENvbXBvbmVudCA9XHJcbiAgICAgIHdpbmRvdy5fX01TRlRfU0RLW2tpbmRdLlN0b3JlLmdldHRlcnMuc3RhcnRpbmdMYXlvdXRQYWdlO1xyXG5cclxuICAgIGluaXRDb21wb25lbnQgJiYgTGF5b3V0SGFuZGxlci5jbG9zZUlGcmFtZShpbml0Q29tcG9uZW50KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNldCBpZnJhbWUgZGlzcGxheSB0byBub25lXHJcbiAgICogQHBhcmFtICB7c3RyaW5nfSBpZnJhbWVJZCBpZCBvZiBpZnJhbWUgZWxlbWVudFxyXG4gICAqL1xyXG4gIHByaXZhdGUgc3RhdGljIGNsb3NlSUZyYW1lKGlmcmFtZUlkOiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IGlmcmFtZUVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZnJhbWVJZCk7XHJcbiAgICBpZnJhbWVFbGVtZW50Py5wYXJlbnRFbGVtZW50Py5yZW1vdmVDaGlsZChpZnJhbWVFbGVtZW50KTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IExheW91dEhhbmRsZXI7XHJcbiIsImltcG9ydCB7IFB1YmxpY0V2ZW50cyB9IGZyb20gJ2NvcmUvY29uc3RhbnRzL2VudW1zJztcclxuaW1wb3J0IExheW91dEhhbmRsZXIgZnJvbSAnLi9MYXlvdXRIYW5kbGVyJztcclxuaW1wb3J0IHsga2luZCB9IGZyb20gJ2NvbW1vbi9zZGsnO1xyXG5cclxud2luZG93Lm9ubWVzc2FnZSA9IGFzeW5jIGUgPT4ge1xyXG4gIGlmIChlLm9yaWdpbiA9PT0gJ251bGwnKSB7XHJcbiAgICBpZiAoXHJcbiAgICAgIHdpbmRvdy5fX01TRlRfU0RLW2tpbmRdLlN0b3JlLmdldHRlcnMuaXNBY3Rpb25EaXNhYmxlZCAmJlxyXG4gICAgICBlLmRhdGEubWV0aG9kID09PSAndHJpZ2dlcidcclxuICAgICkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBsZXQgcmVzcG9uc2UgPSAod2luZG93Lk1TRlRQcml2YWN5W2tpbmRdIGFzIGFueSlbZS5kYXRhLm1ldGhvZF0oXHJcbiAgICAgIC4uLmUuZGF0YS5wYXJhbXMsXHJcbiAgICApO1xyXG4gICAgaWYgKHJlc3BvbnNlIGluc3RhbmNlb2YgUHJvbWlzZSkge1xyXG4gICAgICByZXNwb25zZSA9IGF3YWl0IHJlc3BvbnNlO1xyXG4gICAgfVxyXG4gICAgaWYgKGUuZGF0YS5yZXNwb25zZUlkKSB7XHJcbiAgICAgIGUuc291cmNlPy5wb3N0TWVzc2FnZSh7IC4uLmUuZGF0YSwgcmVzcG9uc2UgfSwgeyB0YXJnZXRPcmlnaW46ICcqJyB9KTtcclxuICAgIH1cclxuICB9XHJcbn07XHJcblxyXG53aW5kb3cuX19NU0ZUX1NES1traW5kXS5FdmVudEJ1cy5vbihcclxuICBQdWJsaWNFdmVudHMuQW5jaG9yVGFnQ2xpY2tlZCxcclxuICAoeyBhdHRyaWJ1dGVzIH0pID0+IHtcclxuICAgIGlmICh3aW5kb3cuX19NU0ZUX1NES1traW5kXS5TdG9yZS5nZXR0ZXJzLmlzUHJldmlld01vZGUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc3QgYVRhZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcclxuICAgIE9iamVjdC5rZXlzKGF0dHJpYnV0ZXMpLmZvckVhY2goYXR0ck5hbWUgPT4ge1xyXG4gICAgICBhVGFnLnNldEF0dHJpYnV0ZShhdHRyTmFtZSwgYXR0cmlidXRlc1thdHRyTmFtZV0pO1xyXG4gICAgfSk7XHJcbiAgICBhVGFnLmNsaWNrKCk7XHJcbiAgfSxcclxuKTtcclxuXHJcbm5ldyBMYXlvdXRIYW5kbGVyKCk7XHJcbiJdLCJuYW1lcyI6WyJSZXBsYXlBbGxFdmVudHMiLCJSZXBsYXlMYXRlc3RFdmVudCIsIlNraXBFdmVudFJlcGxheSIsIkV2ZW50QnVzIl0sIm1hcHBpbmdzIjoiOzs7SUFBQTtJQUNBO0FBQ0E7SUFDQTtJQUNBO0FBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7QUFDQTtJQUNBLElBQUksYUFBYSxHQUFHLFNBQVMsQ0FBQyxFQUFFLENBQUMsRUFBRTtJQUNuQyxJQUFJLGFBQWEsR0FBRyxNQUFNLENBQUMsY0FBYztJQUN6QyxTQUFTLEVBQUUsU0FBUyxFQUFFLEVBQUUsRUFBRSxZQUFZLEtBQUssSUFBSSxVQUFVLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsU0FBUyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUM7SUFDcEYsUUFBUSxVQUFVLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxLQUFLLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxJQUFJLE1BQU0sQ0FBQyxTQUFTLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7SUFDMUcsSUFBSSxPQUFPLGFBQWEsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFDL0IsQ0FBQyxDQUFDO0FBQ0Y7SUFDTyxTQUFTLFNBQVMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFO0lBQ2hDLElBQUksSUFBSSxPQUFPLENBQUMsS0FBSyxVQUFVLElBQUksQ0FBQyxLQUFLLElBQUk7SUFDN0MsUUFBUSxNQUFNLElBQUksU0FBUyxDQUFDLHNCQUFzQixHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsR0FBRywrQkFBK0IsQ0FBQyxDQUFDO0lBQ2xHLElBQUksYUFBYSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUN4QixJQUFJLFNBQVMsRUFBRSxHQUFHLEVBQUUsSUFBSSxDQUFDLFdBQVcsR0FBRyxDQUFDLENBQUMsRUFBRTtJQUMzQyxJQUFJLENBQUMsQ0FBQyxTQUFTLEdBQUcsQ0FBQyxLQUFLLElBQUksR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxTQUFTLEdBQUcsQ0FBQyxDQUFDLFNBQVMsRUFBRSxJQUFJLEVBQUUsRUFBRSxDQUFDLENBQUM7SUFDekYsQ0FBQztBQUNEO0lBQ08sSUFBSSxRQUFRLEdBQUcsV0FBVztJQUNqQyxJQUFJLFFBQVEsR0FBRyxNQUFNLENBQUMsTUFBTSxJQUFJLFNBQVMsUUFBUSxDQUFDLENBQUMsRUFBRTtJQUNyRCxRQUFRLEtBQUssSUFBSSxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsU0FBUyxDQUFDLE1BQU0sRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFO0lBQzdELFlBQVksQ0FBQyxHQUFHLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUM3QixZQUFZLEtBQUssSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLElBQUksTUFBTSxDQUFDLFNBQVMsQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ3pGLFNBQVM7SUFDVCxRQUFRLE9BQU8sQ0FBQyxDQUFDO0lBQ2pCLE1BQUs7SUFDTCxJQUFJLE9BQU8sUUFBUSxDQUFDLEtBQUssQ0FBQyxJQUFJLEVBQUUsU0FBUyxDQUFDLENBQUM7SUFDM0MsRUFBQztBQTRCRDtJQUNPLFNBQVMsU0FBUyxDQUFDLE9BQU8sRUFBRSxVQUFVLEVBQUUsQ0FBQyxFQUFFLFNBQVMsRUFBRTtJQUM3RCxJQUFJLFNBQVMsS0FBSyxDQUFDLEtBQUssRUFBRSxFQUFFLE9BQU8sS0FBSyxZQUFZLENBQUMsR0FBRyxLQUFLLEdBQUcsSUFBSSxDQUFDLENBQUMsVUFBVSxPQUFPLEVBQUUsRUFBRSxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRTtJQUNoSCxJQUFJLE9BQU8sS0FBSyxDQUFDLEtBQUssQ0FBQyxHQUFHLE9BQU8sQ0FBQyxFQUFFLFVBQVUsT0FBTyxFQUFFLE1BQU0sRUFBRTtJQUMvRCxRQUFRLFNBQVMsU0FBUyxDQUFDLEtBQUssRUFBRSxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxPQUFPLENBQUMsRUFBRSxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUU7SUFDbkcsUUFBUSxTQUFTLFFBQVEsQ0FBQyxLQUFLLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxPQUFPLENBQUMsRUFBRSxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUU7SUFDdEcsUUFBUSxTQUFTLElBQUksQ0FBQyxNQUFNLEVBQUUsRUFBRSxNQUFNLENBQUMsSUFBSSxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLEdBQUcsS0FBSyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxFQUFFLFFBQVEsQ0FBQyxDQUFDLEVBQUU7SUFDdEgsUUFBUSxJQUFJLENBQUMsQ0FBQyxTQUFTLEdBQUcsU0FBUyxDQUFDLEtBQUssQ0FBQyxPQUFPLEVBQUUsVUFBVSxJQUFJLEVBQUUsQ0FBQyxFQUFFLElBQUksRUFBRSxDQUFDLENBQUM7SUFDOUUsS0FBSyxDQUFDLENBQUM7SUFDUCxDQUFDO0FBQ0Q7SUFDTyxTQUFTLFdBQVcsQ0FBQyxPQUFPLEVBQUUsSUFBSSxFQUFFO0lBQzNDLElBQUksSUFBSSxDQUFDLEdBQUcsRUFBRSxLQUFLLEVBQUUsQ0FBQyxFQUFFLElBQUksRUFBRSxXQUFXLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUNySCxJQUFJLE9BQU8sQ0FBQyxHQUFHLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxPQUFPLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLFFBQVEsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxPQUFPLE1BQU0sS0FBSyxVQUFVLEtBQUssQ0FBQyxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsR0FBRyxXQUFXLEVBQUUsT0FBTyxJQUFJLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQzdKLElBQUksU0FBUyxJQUFJLENBQUMsQ0FBQyxFQUFFLEVBQUUsT0FBTyxVQUFVLENBQUMsRUFBRSxFQUFFLE9BQU8sSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUU7SUFDdEUsSUFBSSxTQUFTLElBQUksQ0FBQyxFQUFFLEVBQUU7SUFDdEIsUUFBUSxJQUFJLENBQUMsRUFBRSxNQUFNLElBQUksU0FBUyxDQUFDLGlDQUFpQyxDQUFDLENBQUM7SUFDdEUsUUFBUSxPQUFPLENBQUMsRUFBRSxJQUFJO0lBQ3RCLFlBQVksSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsUUFBUSxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxJQUFJLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDekssWUFBWSxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ3BELFlBQVksUUFBUSxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBQ3pCLGdCQUFnQixLQUFLLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxNQUFNO0lBQzlDLGdCQUFnQixLQUFLLENBQUMsRUFBRSxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxPQUFPLEVBQUUsS0FBSyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLENBQUM7SUFDeEUsZ0JBQWdCLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVM7SUFDakUsZ0JBQWdCLEtBQUssQ0FBQyxFQUFFLEVBQUUsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLFNBQVM7SUFDakUsZ0JBQWdCO0lBQ2hCLG9CQUFvQixJQUFJLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsU0FBUyxFQUFFO0lBQ2hJLG9CQUFvQixJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxLQUFLLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxFQUFFO0lBQzFHLG9CQUFvQixJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxNQUFNLEVBQUU7SUFDekYs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
