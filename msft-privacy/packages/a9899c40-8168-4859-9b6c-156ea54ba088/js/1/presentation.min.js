(function () {
    'use strict';

    /******************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */
    /* global Reflect, Promise */

    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };

    function __extends(d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    }

    var __assign = function() {
        __assign = Object.assign || function __assign(t) {
            for (var s, i = 1, n = arguments.length; i < n; i++) {
                s = arguments[i];
                for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
            }
            return t;
        };
        return __assign.apply(this, arguments);
    };

    function __awaiter(thisArg, _arguments, P, generator) {
        function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
        return new (P || (P = Promise))(function (resolve, reject) {
            function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
            function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
            function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
            step((generator = generator.apply(thisArg, _arguments || [])).next());
        });
    }

    function __generator(thisArg, body) {
        var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
        return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
        function verb(n) { return function (v) { return step([n, v]); }; }
        function step(op) {
            if (f) throw new TypeError("Generator is already executing.");
            while (_) try {
                if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
                if (y = 0, t) op = [op[0] & 2, t.value];
                switch (op[0]) {
                    case 0: case 1: t = op; break;
                    case 4: _.label++; return { value: op[1], done: false };
                    case 5: _.label++; y = op[1]; op = [0]; continue;
                    case 7: op = _.ops.pop(); _.trys.pop(); continue;
                    default:
                        if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                        if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                        if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                        if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                        if (t[2]) _.ops.pop();
                        _.trys.pop(); continue;
                }
                op = body.call(thisArg, _);
            } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
            if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
        }
    }

    function __read(o, n) {
        var m = typeof Symbol === "function" && o[Symbol.iterator];
        if (!m) return o;
        var i = m.call(o), r, ar = [], e;
        try {
            while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);
        }
        catch (error) { e = { error: error }; }
        finally {
            try {
                if (r && !r.done && (m = i["return"])) m.call(i);
            }
            finally { if (e) throw e.error; }
        }
        return ar;
    }

    function __spreadArray(to, from, pack) {
        if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {
            if (ar || !(i in from)) {
                if (!ar) ar = Array.prototype.slice.call(from, 0, i);
                ar[i] = from[i];
            }
        }
        return to.concat(ar || Array.prototype.slice.call(from));
    }

    var ConsentModelType;
    (function (ConsentModelType) {
        ConsentModelType["Explicit"] = "Explicit";
        ConsentModelType["Implicit"] = "Implicit";
    })(ConsentModelType || (ConsentModelType = {}));
    var PublicEvents;
    (function (PublicEvents) {
        PublicEvents["ConsentChanged"] = "ConsentChanged";
        PublicEvents["ShowConsentNotice"] = "ShowConsentNotice";
        PublicEvents["ShowFirstPage"] = "ShowFirstPage";
        PublicEvents["CloseConsentNotice"] = "CloseConsentNotice";
        PublicEvents["AcceptAll"] = "AcceptAll";
        PublicEvents["RejectAll"] = "RejectAll";
        PublicEvents["ShowTemplate"] = "ShowTemplate";
        PublicEvents["CloseTemplate"] = "CloseTemplate";
        PublicEvents["UpdateConsent"] = "UpdateConsent";
        PublicEvents["AnchorTagClicked"] = "AnchorTagClicked";
        PublicEvents["FetchConfig"] = "FetchConfig";
        PublicEvents["QuestionsFormSubmitWithoutMetaData"] = "QuestionsFormSubmitWithoutMetaData";
        PublicEvents["QuestionsFormSubmit"] = "QuestionsFormSubmit";
        PublicEvents["ShowPreferences"] = "ShowPreferences";
        PublicEvents["ConsentPreference"] = "MSFTConsentPreference";
        PublicEvents["DataPropsUpdated"] = "DataPropsUpdated";
        PublicEvents["Done"] = "Done";
    })(PublicEvents || (PublicEvents = {}));
    var Events;
    (function (Events) {
        Events["Init"] = "Init";
        Events["CoreConsentModelSelected"] = "CoreConsentModelSelected";
        Events["ConfigReady"] = "ConfigReady";
        Events["ConsentInvalid"] = "ConsentInvalid";
    })(Events || (Events = {}));
    var Attributes;
    (function (Attributes) {
        // Web consent events
        Attributes["ConsentNotice"] = "msft-consent-notice";
        Attributes["AcceptAll"] = "msft-consent-accept-all";
        Attributes["OpenPreference"] = "msft-consent-open-preferences";
        Attributes["ClosePreference"] = "msft-consent-close-preferences";
        Attributes["DeclineAll"] = "msft-consent-decline-all";
        Attributes["SavePreferences"] = "msft-consent-save-preferences";
        Attributes["TrackerCategory"] = "msft-consent-tracker-category";
        // DSR events
        Attributes["QuestionnaireForm"] = "msft-questionnaire-form";
        Attributes["QuestionnaireFormSubmit"] = "msft-questionnaire-form-submit";
        // Generic events
        Attributes["Redirect"] = "msft-redirect";
        Attributes["OpenPage"] = "msft-open-page";
        Attributes["ClosePage"] = "msft-close-page";
        Attributes["TriggerEvent"] = "msft-trigger";
        Attributes["ToggleId"] = "msft-toggle-id";
        Attributes["ToggleOn"] = "msft-toggle-on";
        Attributes["ToggleOff"] = "msft-toggle-off";
        Attributes["FormPayloadData"] = "msft-payload-data";
        Attributes["FormId"] = "msft-payload-form-id";
        Attributes["FormInputIDs"] = "msft-payload-input-ids";
    })(Attributes || (Attributes = {}));
    var SDKMode;
    (function (SDKMode) {
        SDKMode["Default"] = "Default";
        SDKMode["HeadLess"] = "HeadLess";
    })(SDKMode || (SDKMode = {}));
    var StyleType;
    (function (StyleType) {
        StyleType["Url"] = "Url";
        StyleType["Text"] = "Text";
    })(StyleType || (StyleType = {}));
    var Preference;
    (function (Preference) {
        Preference["OFF"] = "0";
        Preference["ON"] = "1";
    })(Preference || (Preference = {}));
    var Cookie;
    (function (Cookie) {
        Cookie["Consent"] = "msft-consent";
        Cookie["ConsentMetadata"] = "msft-consent-metadata";
    })(Cookie || (Cookie = {}));
    var RegisteredDivType;
    (function (RegisteredDivType) {
        RegisteredDivType["Script"] = "script";
        RegisteredDivType["IFrame"] = "iframe";
    })(RegisteredDivType || (RegisteredDivType = {}));
    var NoticeType;
    (function (NoticeType) {
        NoticeType["TrackerCategory"] = "trackerCategory";
        NoticeType["Questions"] = "Questions";
    })(NoticeType || (NoticeType = {}));
    var ControlType;
    (function (ControlType) {
        ControlType["Purpose"] = "Purpose";
    })(ControlType || (ControlType = {}));
    var ErrorStrings;
    (function (ErrorStrings) {
        ErrorStrings["TemplateError"] = "<b>There is something wrong with template. Please check logs.</b>";
    })(ErrorStrings || (ErrorStrings = {}));
    var IntervalUnits;
    (function (IntervalUnits) {
        IntervalUnits["day"] = "day";
        IntervalUnits["week"] = "week";
        IntervalUnits["month"] = "month";
        IntervalUnits["year"] = "year";
    })(IntervalUnits || (IntervalUnits = {}));
    var QuestionType;
    (function (QuestionType) {
        QuestionType["Text"] = "Text";
        QuestionType["Email"] = "Email";
        QuestionType["Radio"] = "Radio";
        QuestionType["MultiSelect"] = "MultiSelect";
        QuestionType["Select"] = "Select";
        QuestionType["Date"] = "Date";
        QuestionType["PhoneNumber"] = "PhoneNumber";
        QuestionType["CreditCard"] = "CreditCard";
        QuestionType["Number"] = "Number";
        QuestionType["MultiLineText"] = "multiLineText";
    })(QuestionType || (QuestionType = {}));
    var QuestionValidation;
    (function (QuestionValidation) {
        QuestionValidation["Required"] = "Required";
    })(QuestionValidation || (QuestionValidation = {}));
    var QuestionField;
    (function (QuestionField) {
        QuestionField["Question"] = "question";
        QuestionField["Placeholder"] = "placeholder";
        QuestionField["Options"] = "options";
    })(QuestionField || (QuestionField = {}));
    var ModelKind;
    (function (ModelKind) {
        ModelKind["WebConsent"] = "MICROSOFT.WebConsent";
        ModelKind["DSRSubmission"] = "MICROSOFT.DSRSubmission";
    })(ModelKind || (ModelKind = {}));
    var PackageKind;
    (function (PackageKind) {
        PackageKind["WebConsentPackage"] = "WebConsentPackage";
        PackageKind["FIDESPackage"] = "FIDESPackage";
        PackageKind["DSRSubmissionPackage"] = "DSRSubmissionPackage";
    })(PackageKind || (PackageKind = {}));
    var Template;
    (function (Template) {
        Template["Preferences"] = "Preferences";
    })(Template || (Template = {}));

    var registerHeplers = function () {
        if (window.Handlebars) {
            window.Handlebars.registerHelper('toLowerCase', function (type) {
                return type.toLowerCase();
            });
            window.Handlebars.registerHelper('equals', function (param1, param2) {
                return param1.toLowerCase() === param2.toLowerCase();
            });
        }
    };

    var kind = 'trackerConsent';

    // Below regex is to allow any whitespace as well like "< data-prop >consentId< \ data-prop >"
    /* eslint-disable no-useless-escape */
    var customVariablesRegex = /<\s*data-prop\s*>(\s|&nbsp;)*(.*?)(\s|&nbsp;)*<\s*[\/\\]\s*data-prop\s*>/g;
    /* eslint-enable no-useless-escape */
    var replaceDataPropsInLayoutValues = function (originalDetails) {
        var stringifiedResult = replaceDataProps(JSON.stringify(originalDetails));
        return JSON.parse(stringifiedResult);
    };
    var replaceDataProps = function (str) {
        var dataProps = window.__MSFT_SDK[kind].Store.getters.dataProps;
        return str.replaceAll(customVariablesRegex, function () {
            var _a;
            var result = [];
            for (var _i = 0; _i < arguments.length; _i++) {
                result[_i] = arguments[_i];
            }
            var variableName = (_a = result[2]) === null || _a === void 0 ? void 0 : _a.trim();
            return dataProps[variableName]
                ? dataProps[variableName].toString()
                : result[0];
        });
    };

    var ObjectUtils = /** @class */ (function () {
        function ObjectUtils() {
        }
        ObjectUtils.isObject = function (item) {
            return item && typeof item === 'object' && !Array.isArray(item);
        };
        ObjectUtils.mergeDeep = function (target) {
            var _a, _b;
            var sources = [];
            for (var _i = 1; _i < arguments.length; _i++) {
                sources[_i - 1] = arguments[_i];
            }
            if (!sources.length)
                return target;
            var source = sources.shift();
            if (this.isObject(target) && this.isObject(source)) {
                for (var key in source) {
                    if (this.isObject(source[key])) {
                        if (!target[key])
                            Object.assign(target, (_a = {}, _a[key] = {}, _a));
                        this.mergeDeep(target[key], source[key]);
                    }
                    else {
                        Object.assign(target, (_b = {}, _b[key] = source[key], _b));
                    }
                }
            }
            return this.mergeDeep.apply(this, __spreadArray([target], __read(sources), false));
        };
        return ObjectUtils;
    }());

    var SDKModules;
    (function (SDKModules) {
        SDKModules["PRESENTATION"] = "presentation";
        SDKModules["PREVIEW"] = "preview";
        SDKModules["CONFIG"] = "config";
        SDKModules["HANDLEBAR"] = "handlebar";
        SDKModules["PROXY"] = "proxy";
        SDKModules["DSR"] = "dsr";
    })(SDKModules || (SDKModules = {}));
    var SDKModulesPath;
    (function (SDKModulesPath) {
        SDKModulesPath["PRESENTATION"] = "$jsRootPath/msft-privacy/packages/$packageId/js/$consentSDKVersion/presentation.min.js";
        SDKModulesPath["PREVIEW"] = "$jsRootPath/msft-privacy/packages/$packageId/js/$consentSDKVersion/preview.min.js";
        SDKModulesPath["HANDLEBAR"] = "$jsRootPath/msft-privacy/packages/$packageId/js/$consentSDKVersion/vendor/handlebars.min.js";
        SDKModulesPath["PROXY"] = "$jsRootPath/msft-privacy/packages/$packageId/js/$consentSDKVersion/proxy.min.js";
        SDKModulesPath["DSR"] = "$jsRootPath/msft-privacy/packages/$packageId/js/$consentSDKVersion/dsr.min.js";
    })(SDKModulesPath || (SDKModulesPath = {}));
    var SDKModulesSourceVariable;
    (function (SDKModulesSourceVariable) {
        SDKModulesSourceVariable["PRESENTATION"] = "msft-presentation.js";
        SDKModulesSourceVariable["HANDLEBAR"] = "msft-handlebars.js";
        SDKModulesSourceVariable["PROXY"] = "msft-proxy.js";
        SDKModulesSourceVariable["DSR"] = "dsr.js";
    })(SDKModulesSourceVariable || (SDKModulesSourceVariable = {}));
    var ModuleSourceType;
    (function (ModuleSourceType) {
        ModuleSourceType["PATH"] = "path";
        ModuleSourceType["VARIABLE"] = "variable";
    })(ModuleSourceType || (ModuleSourceType = {}));

    var State = /** @class */ (function () {
        function State(state) {
            this.state = state || {
                config: {},
                debug: {
                    logs: [],
                    events: [],
                },
                custom: {},
                userValues: {},
            };
        }
        return State;
    }());

    var Getters = /** @class */ (function (_super) {
        __extends(Getters, _super);
        function Getters(state) {
            return _super.call(this, state) || this;
        }
        Object.defineProperty(Getters.prototype, "debugInfo", {
            get: function () {
                return this.state.debug;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(Getters.prototype, "config", {
            get: function () {
                return this.state.config;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(Getters.prototype, "userConsent", {
            get: function () {
                return this.state.custom.userConsent;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(Getters.prototype, "isHeadless", {
            // TODO: Implement below getters
            get: function () {
                return false;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(Getters.prototype, "isPreviewMode", {
            get: function () {
                var _a;
                return ((_a = this.state.config.initConfig) === null || _a === void 0 ? void 0 : _a.preview) || false;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(Getters.prototype, "isActionDisabled", {
            get: function () {
                var _a;
                return ((_a = this.state.config.initConfig) === null || _a === void 0 ? void 0 : _a.disableActions) || false;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(Getters.prototype, "isLivePreviewMode", {
            get: function () {
                var _a;
                try {
                    return ((_a = window.parent) === null || _a === void 0 ? void 0 : _a.name) === 'ConsentLivePreview';
                }
                catch (_err) {
                    // If we try to access outer IFrame we get error
                    // Uncaught (in promise) DOMException: Blocked a frame with origin "https://localhost:23309" from accessing a cross-origin frame.
                    // This catch block is to bypass the error
                    return false;
                }
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(Getters.prototype, "presentationVariable", {
            get: function () {
                return SDKModulesSourceVariable.PRESENTATION;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(Getters.prototype, "handlebarVariable", {
            get: function () {
                return SDKModulesSourceVariable.HANDLEBAR;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(Getters.prototype, "proxyVariable", {
            get: function () {
                return SDKModulesSourceVariable.PROXY;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(Getters.prototype, "dsrVariable", {
            get: function () {
                return SDKModulesSourceVariable.DSR;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(Getters.prototype, "dataProps", {
            get: function () {
                return this.state.custom.dynamicValues || {};
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(Getters.prototype, "isGPCEnabled", {
            get: function () {
                var _a;
                var gpcValue = (_a = window.navigator.globalPrivacyControl) === null || _a === void 0 ? void 0 : _a.toString();
                return gpcValue ? gpcValue === 'true' || gpcValue === '1' : false;
            },
            enumerable: false,
            configurable: true
        });
        return Getters;
    }(State));

    var EventsReplayStrategy;
    (function (EventsReplayStrategy) {
        EventsReplayStrategy[EventsReplayStrategy["REPLAY_ALL"] = 0] = "REPLAY_ALL";
        EventsReplayStrategy[EventsReplayStrategy["REPLAY_LATEST"] = 1] = "REPLAY_LATEST";
        EventsReplayStrategy[EventsReplayStrategy["SKIP"] = 2] = "SKIP";
    })(EventsReplayStrategy || (EventsReplayStrategy = {}));

    var ReplayAllEvents = /** @class */ (function () {
        function ReplayAllEvents() {
            this.strategy = EventsReplayStrategy.REPLAY_ALL;
        }
        ReplayAllEvents.prototype.execute = function (callback, events) {
            events.forEach(function (_a) {
                var payload = _a.payload;
                return callback(payload);
            });
        };
        return ReplayAllEvents;
    }());
    var ReplayAllEvents$1 = new ReplayAllEvents();

    var ReplayLatestEvent = /** @class */ (function () {
        function ReplayLatestEvent() {
            this.strategy = EventsReplayStrategy.REPLAY_LATEST;
        }
        ReplayLatestEvent.prototype.execute = function (callback, events) {
            if (events.length) {
                callback(events[events.length - 1].payload);
            }
        };
        return ReplayLatestEvent;
    }());
    var ReplayLatestEvent$1 = new ReplayLatestEvent();

    var SkipEventReplay = /** @class */ (function () {
        function SkipEventReplay() {
            this.strategy = EventsReplayStrategy.SKIP;
        }
        SkipEventReplay.prototype.execute = function () {
            return void 0;
        };
        return SkipEventReplay;
    }());
    var SkipEventReplay$1 = new SkipEventReplay();

    var _a;
    var ReplayStrategy = (_a = {},
        _a[EventsReplayStrategy.REPLAY_ALL] = ReplayAllEvents$1,
        _a[EventsReplayStrategy.REPLAY_LATEST] = ReplayLatestEvent$1,
        _a[EventsReplayStrategy.SKIP] = SkipEventReplay$1,
        _a);

    var EventsRecording = /** @class */ (function () {
        function EventsRecording() {
        }
        EventsRecording.record = function (event, payload) {
            this.eventsLogs[event] = this.eventsLogs[event] || [];
            this.eventsLogs[event].push({ payload: payload });
        };
        EventsRecording.replay = function (event, callback, strategy) {
            if (strategy === void 0) { strategy = this.DEFAULT_STRATEGY; }
            ReplayStrategy[strategy].execute(callback, this.eventsLogs[event] || []);
        };
        EventsRecording.eventsLogs = {};
        EventsRecording.DEFAULT_STRATEGY = EventsReplayStrategy.REPLAY_LATEST;
        return EventsRecording;
    }());

    var EventBus = /** @class */ (function () {
        function EventBus() {
            this.events = {};
            this.eventIdCounter = 0;
        }
        /**
         * Gets default event details.
         * @returns {IEventDetails} Default event details
         */
        EventBus.getDefaultEventDetails = function () {
            return {
                executionCount: 0,
                callbacks: [],
            };
        };
        /**
         * Add an event listener.
         * @param {string} event Event name
         * @param {ICallback} callback Listener callback
         * @param {IEventHandlerProperties} properties Additional configuration properties
         * @returns {number} Event ID
         */
        EventBus.prototype.on = function (event, callback, _a) {
            var _b = _a === void 0 ? {} : _a, _c = _b.sync, sync = _c === void 0 ? false : _c, replayStrategy = _b.replayStrategy;
            Logger.info("Callback registered for event : ".concat(event));
            this.eventIdCounter++;
            var eventDetails = {
                id: this.eventIdCounter,
                fn: callback,
                sync: sync,
            };
            this.events[event] =
                this.events[event] || EventBus.getDefaultEventDetails();
            this.events[event].callbacks.push(eventDetails);
            EventsRecording.replay(event, callback, replayStrategy);
            return this.eventIdCounter;
        };
        /**
         * Execute an event.
         * @param {string} event Event name
         * @param {import("core/types/interfaces").IGenericObject} payload Payload data
         */
        EventBus.prototype.trigger = function (event, payload) {
            var _this = this;
            var _a;
            if (payload === void 0) { payload = {}; }
            var callbacks = ((_a = this.events[event]) === null || _a === void 0 ? void 0 : _a.callbacks) || [];
            // Let the logic run even if no active listeners so that we can record the events.
            Logger.info("Started executing '".concat(callbacks.length, "' callbacks for event '").concat(event, "'"), payload);
            Store.reducers.saveDebugInfo({ event: event });
            callbacks.forEach(function (eventHandler) { return __awaiter(_this, void 0, void 0, function () {
                var e_1;
                return __generator(this, function (_a) {
                    switch (_a.label) {
                        case 0:
                            _a.trys.push([0, 3, , 4]);
                            if (!!eventHandler.sync) return [3 /*break*/, 2];
                            return [4 /*yield*/, Promise.resolve()];
                        case 1:
                            _a.sent();
                            _a.label = 2;
                        case 2:
                            eventHandler.fn(payload);
                            return [3 /*break*/, 4];
                        case 3:
                            e_1 = _a.sent();
                            Logger.error("Error in executing callback id : ".concat(eventHandler.id, " for event '").concat(event), e_1);
                            return [3 /*break*/, 4];
                        case 4: return [2 /*return*/];
                    }
                });
            }); });
            EventsRecording.record(event, payload);
            Logger.info("Completed executing '".concat(callbacks.length, "' callbacks for event '").concat(event, "'"), payload);
            if (this.events[event]) {
                this.events[event].executionCount++;
            }
        };
        /**
         * Detach an event listener.
         * @param {string} event Event name
         * @param {number | ICallback} eventIdOrCallback Event listener ID or callback to remove
         */
        EventBus.prototype.off = function (event, eventIdOrCallback) {
            var _a;
            var idx = (_a = this.events[event]) === null || _a === void 0 ? void 0 : _a.callbacks.findIndex(function (eventDetails) {
                return eventDetails.id === eventIdOrCallback ||
                    eventDetails.fn === eventIdOrCallback;
            });
            if (typeof idx === 'number' && ~idx) {
                Logger.info("Removing event listener '".concat(this.events[event].callbacks[idx].id, "' of '").concat(event, "' event"));
                this.events[event].callbacks.splice(idx, 1);
            }
            else {
                Logger.error("Unable to remove event listener for event '".concat(event, "'. No matching event id or callback found."));
            }
        };
        /**
         * Checks if any event listener is attached in the event bus.
         * @param {string} event Event name
         * @returns {boolean} True if an event listener is attached else false
         */
        EventBus.prototype.hasListener = function (event) {
            var _a;
            return ((_a = this.events[event]) === null || _a === void 0 ? void 0 : _a.callbacks.length) > 0;
        };
        return EventBus;
    }());
    var EventBus$1 = new EventBus();

    var Reducers = /** @class */ (function (_super) {
        __extends(Reducers, _super);
        function Reducers(state) {
            return _super.call(this, state) || this;
        }
        Reducers.prototype.saveDebugInfo = function (_a) {
            var event = _a.event, log = _a.log;
            if (event) {
                this.state.debug.events.push(event);
            }
            if (log) {
                this.state.debug.logs.push(log);
            }
        };
        Reducers.prototype.setUserConsent = function (consent) {
            this.state.custom.userConsent = consent;
        };
        Reducers.prototype.setInitConfig = function (initConfig) {
            this.state.config.initConfig = initConfig;
            if (initConfig === null || initConfig === void 0 ? void 0 : initConfig.dataProps) {
                this.setDataProps(initConfig.dataProps);
            }
        };
        Reducers.prototype.setDataProps = function (values) {
            this.state.custom.dynamicValues = __assign(__assign({}, (this.state.custom.dynamicValues || {})), values);
            EventBus$1.trigger(PublicEvents.DataPropsUpdated, this.state.custom.dynamicValues);
        };
        Reducers.prototype.addCustomUserValue = function (key, value) {
            this.state.userValues[key] = value;
        };
        Reducers.prototype.getCustomUserValue = function (key) {
            return this.state.userValues[key];
        };
        return Reducers;
    }(State));

    var state = new State().state;
    var getter = new Getters(state);
    var reducer = new Reducers(state);
    var Store = {
        getters: getter,
        reducers: reducer,
        addReducers: function (reducers) {
            this.reducers = ObjectUtils.mergeDeep(this.reducers, reducers);
        },
        addGetters: function (getters) {
            Object.defineProperties(this.getters, Object.getOwnPropertyDescriptors(getters.prototype));
        },
    };

    var LogLevels;
    (function (LogLevels) {
        LogLevels[LogLevels["INFO"] = 0] = "INFO";
        LogLevels[LogLevels["WARN"] = 1] = "WARN";
        LogLevels[LogLevels["ERROR"] = 2] = "ERROR";
    })(LogLevels || (LogLevels = {}));

    var ConsoleLogger = /** @class */ (function () {
        function ConsoleLogger() {
        }
        /**
         * Browser's console logger plugin.
         * @param {LogLevels} level Log level
         * @param {string} message Log message
         */
        ConsoleLogger.log = function (level, message) {
            switch (level) {
                case LogLevels.WARN:
                    console.warn(message);
                    break;
                case LogLevels.ERROR:
                    console.error(message);
                    break;
                default:
                    {
                        console.log(message);
                    }
                    break;
            }
        };
        return ConsoleLogger;
    }());

    /**
     * @typedef {import("core/types/interfaces").IGenericObject} IGenericObject
     */
    var Logger = /** @class */ (function () {
        function Logger() {
        }
        /**
         * Info logs
         * @param {string} message Logger message
         * @param {IGenericObject} data Additional details to log
         */
        Logger.info = function (message, data) {
            Logger.log(LogLevels.INFO, message, data);
        };
        /**
         * Warning logs
         * @param {string} message Logger message
         * @param {IGenericObject} data Additional details to log
         */
        Logger.warn = function (message, data) {
            Logger.log(LogLevels.WARN, message, data);
        };
        /**
         * Error logs
         * @param {string} message Logger message
         * @param {IGenericObject} data Additional details to log
         */
        Logger.error = function (message, data) {
            Logger.log(LogLevels.ERROR, message, data);
        };
        /**
         * Logs the message using the plugin based in level.
         * @param {LogLevels} logLevel Log level
         * @param {string} message Logger message
         * @param {IGenericObject} data Additional details to log
         */
        Logger.log = function (logLevel, message, data) {
            var formattedMessage = Logger.formatLogMessage(logLevel, message, data);
            Store.reducers.saveDebugInfo({ log: formattedMessage });
            ConsoleLogger.log(logLevel, formattedMessage);
        };
        /**
         * Formats the logger message.
         * @param {LogLevels} logLevel Log level
         * @param {string} message Logger message
         * @param {IGenericObject} data Additional details to log
         * @returns {string} Formatted logger message
         */
        Logger.formatLogMessage = function (logLevel, message, data) {
            var stringifiedData = data ? "| ".concat(JSON.stringify(data)) : '';
            return "[".concat(LogLevels[logLevel], "] ").concat(message, " ").concat(stringifiedData);
        };
        return Logger;
    }());

    var ConsentEncodingService = /** @class */ (function () {
        function ConsentEncodingService() {
        }
        /**
         * Encode user's consent preference
         * @param  {import("core/types/interfaces").IUserConsent} consent user's consent object
         * @param  {import("core/types/interfaces").ICoreConsentModel} model current selected consent model
         * @returns {string} encoded consent
         */
        ConsentEncodingService.encodeConsent = function (consent, model) {
            Logger.info('encoding consent', { consent: consent, model: model });
            var preferences = consent.preferences;
            var encodedConsentString = Object.keys(preferences)
                .map(function (category) {
                return "".concat(category, "=").concat(preferences[category] === Preference.ON
                    ? Preference.ON
                    : Preference.OFF);
            })
                .join('%');
            Logger.info("encoded consent string: ".concat(encodedConsentString));
            return encodedConsentString;
        };
        ConsentEncodingService.encodeConsentMetadata = function (consent, model, bannerTrackerCategories, country) {
            Logger.info('encoding consent', { consent: consent, model: model });
            var preferences = consent.preferences;
            var encodedConsentString = "".concat(ConsentEncodingService.CONSENTVERSION, "=") +
                model.properties.consentVersion.toString() +
                '%';
            encodedConsentString +=
                "".concat(ConsentEncodingService.CONSENTID, "=") +
                    model.properties.consentId +
                    '%';
            var acceptAll = true, declineAll = true;
            bannerTrackerCategories.forEach(function (bannerTrackerCategory) {
                if (!bannerTrackerCategory.properties.isEssential) {
                    if (preferences[bannerTrackerCategory.name] === Preference.OFF)
                        acceptAll = false;
                    else
                        declineAll = false;
                }
            });
            encodedConsentString +=
                "".concat(ConsentEncodingService.ACCEPTALL, "=") +
                    (acceptAll ? Preference.ON : Preference.OFF) +
                    '%';
            encodedConsentString +=
                "".concat(ConsentEncodingService.DECLINEALL, "=") +
                    (declineAll ? Preference.ON : Preference.OFF) +
                    '%';
            encodedConsentString +=
                "".concat(ConsentEncodingService.COUNTRY, "=") + country + '%';
            Logger.info("encoded consent metadata string: ".concat(encodedConsentString));
            return encodedConsentString;
        };
        /**
         * Decode encoded consent string.
         * @param  {string} encodedConsentString encoded consent
         * @returns {import("core/types/interfaces").IUserConsent} object having user preference for all tracker categories
         */
        ConsentEncodingService.decodeConsentString = function (encodedConsentString) {
            var _a;
            Logger.info("decoding consent string: ".concat(encodedConsentString));
            var preferences = {};
            (_a = encodedConsentString === null || encodedConsentString === void 0 ? void 0 : encodedConsentString.split('%')) === null || _a === void 0 ? void 0 : _a.forEach(function (pairStr) {
                var pair = pairStr.split('=');
                if (pair.length !== 2)
                    return;
                var key = pair[0];
                var val = pair[1];
                if (key !== ConsentEncodingService.CONSENTVERSION &&
                    key !== ConsentEncodingService.CONSENTID) {
                    preferences[key] = val;
                }
            });
            Logger.info('decoded consent', { preferences: preferences });
            return { preferences: preferences };
        };
        /**
         * Get version from encoded consent metadata string
         * @param  {string} encodedConsentString encoded consent metadata
         * @returns {number} version
         */
        ConsentEncodingService.getVersionFromMetadataString = function (encodedConsentString) {
            var match = encodedConsentString.match(/consentVersion=([\d.]+)%/);
            if (match == null) {
                return -1;
            }
            var res = parseInt(match[1]);
            if (isNaN(res)) {
                return -1;
            }
            Logger.info("getVersionString str: ".concat(encodedConsentString, " found consentVersion: ").concat(res));
            return res;
        };
        /**
         * Get model name from encoded consent metadata string
         * @param  {string} encodedConsentString encoded consent metadata
         * @returns {string | undefined} name
         */
        ConsentEncodingService.getModelIdFromMetadataString = function (encodedConsentString) {
            var match = encodedConsentString.match(/consentId=([^%]+)%/);
            if (match == null) {
                return undefined;
            }
            Logger.info("getModelIdFromString str: ".concat(encodedConsentString, " found version: ").concat(match[1]));
            return match[1];
        };
        /**
         * Get country from encoded consent metadata string
         * @param  {string} encodedConsentString encoded consent metadata
         * @returns {string | undefined} name
         */
        ConsentEncodingService.getCountryFromMetadataString = function (encodedConsentString) {
            var match = encodedConsentString.match(/country=([^%]+)/);
            if (match == null) {
                return undefined;
            }
            Logger.info("getCountryFromMetadataString str: ".concat(encodedConsentString, " found country: ").concat(match[1]));
            return match[1];
        };
        ConsentEncodingService.getAcceptAllFromMetadataString = function (encodedConsentString) {
            var match = encodedConsentString.match(/acceptAll=([^%]+)%/);
            if (match == null) {
                return false;
            }
            Logger.info("getAcceptAllFromString str: ".concat(encodedConsentString, " found acceptAll: ").concat(match[1]));
            return match[1] === Preference.ON;
        };
        ConsentEncodingService.getDeclineAllFromMetadataString = function (encodedConsentString) {
            var match = encodedConsentString.match(/declineAll=([^%]+)%/);
            if (match == null) {
                return false;
            }
            Logger.info("getDeclineAllFromString str: ".concat(encodedConsentString, " found declineAll: ").concat(match[1]));
            return match[1] === Preference.ON;
        };
        ConsentEncodingService.CONSENTVERSION = 'consentVersion';
        ConsentEncodingService.CONSENTID = 'consentId';
        ConsentEncodingService.ACCEPTALL = 'acceptAll';
        ConsentEncodingService.DECLINEALL = 'declineAll';
        ConsentEncodingService.COUNTRY = 'country';
        return ConsentEncodingService;
    }());

    var TemplateHandler = /** @class */ (function () {
        function TemplateHandler() {
            TemplateHandler.registerShowTemplateHandlers();
        }
        /**
         * Register event handlers to open/close different templates
         */
        TemplateHandler.registerShowTemplateHandlers = function () {
            window.__MSFT_SDK[kind].EventBus.on(window.__MSFT_SDK[kind].enums.PublicEvents.ShowConsentNotice, TemplateHandler.showFirstPage);
            window.__MSFT_SDK[kind].EventBus.on(window.__MSFT_SDK[kind].enums.PublicEvents.CloseConsentNotice, TemplateHandler.hideConsentNotice);
            window.__MSFT_SDK[kind].EventBus.on(window.__MSFT_SDK[kind].enums.Events.Init, TemplateHandler.saveStylesOnInit);
            window.__MSFT_SDK[kind].EventBus.on(window.__MSFT_SDK[kind].enums.PublicEvents.ShowTemplate, TemplateHandler.showTemplate);
            window.__MSFT_SDK[kind].EventBus.on(window.__MSFT_SDK[kind].enums.PublicEvents.CloseTemplate, TemplateHandler.closeTemplate);
            window.__MSFT_SDK[kind].EventBus.on(window.__MSFT_SDK[kind].enums.PublicEvents.ConsentChanged, TemplateHandler.init);
            window.__MSFT_SDK[kind].EventBus.on(window.__MSFT_SDK[kind].enums.Events.ConfigReady, TemplateHandler.init);
            window.__MSFT_SDK[kind].EventBus.on(window.__MSFT_SDK[kind].enums.PublicEvents.ShowPreferences, TemplateHandler.showPreferences);
        };
        TemplateHandler.showPreferences = function () {
            try {
                TemplateHandler.showTemplate({ templateId: Template.Preferences });
            }
            catch (e) {
                TemplateHandler.showFirstPage();
            }
        };
        /**
         * Show template
         * @param  {import("core/types/interfaces").IGenericObject} payload payload data
         */
        TemplateHandler.showTemplate = function (_a) {
            var _b;
            var templateId = _a.templateId;
            if (window.__MSFT_SDK[kind].Store.getters.components &&
                window.__MSFT_SDK[kind].Store.getters.components[templateId]) {
                var consentModel = window.__MSFT_SDK[kind].Store.getters.currentModel;
                TemplateHandler.showTemplateInIFrame(window.__MSFT_SDK[kind].Store.getters.components[templateId], templateId, [
                    {
                        type: StyleType.Text,
                        value: ((_b = consentModel === null || consentModel === void 0 ? void 0 : consentModel.layout.ui.css) === null || _b === void 0 ? void 0 : _b[templateId.toLowerCase()]) || '',
                    },
                ], TemplateHandler.getParentElement(templateId));
            }
            else {
                throw new Error("Template : ".concat(templateId, " not found."));
            }
        };
        /**
         * Hide template
         * @param  {import("core/types/interfaces").IGenericObject} payload payload data
         */
        TemplateHandler.closeTemplate = function (_a) {
            var templateId = _a.templateId;
            TemplateHandler.closeIFrame(templateId);
        };
        /**
         * Save styles passed by user in window.__MSFT_SDK[kind].Store
         * @param  {import("core/types/interfaces").IInitConfig} config init config
         */
        TemplateHandler.saveStylesOnInit = function (config) {
            if (config.styles) {
                window.__MSFT_SDK[kind].Logger.info('user provided styles persisted to window.__MSFT_SDK[kind].Store.');
                window.__MSFT_SDK[kind].Store.reducers.setStyles(config.styles);
            }
        };
        TemplateHandler.toPascalCase = function (str) {
            if (typeof str === 'string') {
                return str[0].toUpperCase() + str.slice(1);
            }
            return str;
        };
        TemplateHandler.validationArrayToObject = function (validations) {
            return validations.reduce(function (previous, current) {
                var _a;
                return __assign(__assign({}, previous), (_a = {}, _a[TemplateHandler.toPascalCase(current.type)] = current.value, _a));
            }, {});
        };
        TemplateHandler.getTemplateData = function (consentModel) {
            var _a;
            return __awaiter(this, void 0, void 0, function () {
                var groupedTranslations, data, preferences, trackerCategoriesMap, questionMap, addedTrackerCategories, consentMetadata, layoutDetails;
                return __generator(this, function (_b) {
                    groupedTranslations = window.__MSFT_SDK[kind].Store.getters.translations;
                    data = {};
                    data[NoticeType.TrackerCategory] = [];
                    data[ControlType.Purpose] = [];
                    preferences = window.MSFTPrivacy[kind].getConsent().preferences;
                    trackerCategoriesMap = new Map();
                    questionMap = new Map();
                    addedTrackerCategories = new Set();
                    if (consentModel.kind === ModelKind.WebConsent) {
                        window.__MSFT_SDK[kind].Store.getters.bannerTrackerCategories.forEach(function (category) {
                            trackerCategoriesMap.set(category.objectId, category);
                        });
                        consentMetadata = window.__MSFT_SDK[kind].Store.getters.encodedConsentMetadata;
                        data[ConsentEncodingService.ACCEPTALL] =
                            ConsentEncodingService.getAcceptAllFromMetadataString(consentMetadata);
                        data[ConsentEncodingService.DECLINEALL] =
                            ConsentEncodingService.getDeclineAllFromMetadataString(consentMetadata);
                    }
                    else if (consentModel.kind === ModelKind.DSRSubmission) {
                        consentModel.controls.forEach(function (control) {
                            control.instances.forEach(function (instance) {
                                questionMap.set(instance.name, __assign(__assign({}, instance), { controlType: control.name }));
                            });
                        });
                    }
                    groupedTranslations.forEach(function (groupedTranslation) {
                        return Object.keys(groupedTranslation).forEach(function (namespace) {
                            var _a, _b, _c, _d, _e;
                            if (namespace === 'model') {
                                var controlInstances_1 = [];
                                var controlsDisplayOrder_1 = (_a = consentModel.controlsDisplayOrder) !== null && _a !== void 0 ? _a : [];
                                var modelTranslations_1 = groupedTranslation[namespace];
                                delete modelTranslations_1.trackerCategory;
                                Object.keys(modelTranslations_1).forEach(function (field) {
                                    var _a;
                                    if (Array.isArray(modelTranslations_1[field])) {
                                        modelTranslations_1[field].forEach(function (translationInstance) {
                                            var controlInstance = questionMap.get(translationInstance.name);
                                            if (controlInstance !== undefined) {
                                                var index = controlsDisplayOrder_1.findIndex(function (c) { return c === translationInstance.name; });
                                                translationInstance.validations =
                                                    TemplateHandler.validationArrayToObject((controlInstance === null || controlInstance === void 0 ? void 0 : controlInstance.validations) || []);
                                                translationInstance.controlType =
                                                    controlInstance === null || controlInstance === void 0 ? void 0 : controlInstance.controlType;
                                                controlsDisplayOrder_1.length != 0
                                                    ? (controlInstances_1[index] = translationInstance)
                                                    : controlInstances_1.push(translationInstance);
                                            }
                                        });
                                    }
                                    else {
                                        data = __assign(__assign({}, data), (_a = {}, _a[field] = modelTranslations_1[field], _a));
                                    }
                                });
                                data[ControlType.Purpose] = controlInstances_1;
                            }
                            else if (trackerCategoriesMap.has(namespace) &&
                                !addedTrackerCategories.has(namespace)) {
                                var categoryTranslation = __assign(__assign({}, groupedTranslation[namespace]), { name: (_b = trackerCategoriesMap.get(namespace)) === null || _b === void 0 ? void 0 : _b.name, isEssential: (_d = (_c = trackerCategoriesMap.get(namespace)) === null || _c === void 0 ? void 0 : _c.properties) === null || _d === void 0 ? void 0 : _d.isEssential, isOn: preferences[((_e = trackerCategoriesMap.get(namespace)) === null || _e === void 0 ? void 0 : _e.name) || ''] ===
                                        '1' });
                                data[NoticeType.TrackerCategory].push(categoryTranslation);
                                addedTrackerCategories.add(namespace);
                            }
                        });
                    });
                    data[NoticeType.TrackerCategory] = __spreadArray(__spreadArray([], __read(data[NoticeType.TrackerCategory].filter(function (category) { return category.isEssential; })), false), __read(data[NoticeType.TrackerCategory].filter(function (category) { return !category.isEssential; })), false);
                    data['msft-script-open'] = '<script>';
                    data['msft-script-close'] = '</script>';
                    window.__MSFT_SDK[kind].Logger.info('getTemplate data invoked', {
                        consentModel: consentModel,
                        data: data,
                    });
                    layoutDetails = __assign(__assign(__assign(__assign(__assign({}, data), window.__MSFT_SDK[kind].Store.getters.templateData), (((_a = consentModel.layout) === null || _a === void 0 ? void 0 : _a.properties) || {})), { consentModel: consentModel, modelProps: consentModel.properties }), (window.__MSFT_SDK[kind].Store.getters.dataProps || {}));
                    return [2 /*return*/, replaceDataPropsInLayoutValues(layoutDetails)];
                });
            });
        };
        /**
         * Perform all necessary steps like replacing placeholders in
         * templates during init.
         */
        TemplateHandler.init = function () {
            return __awaiter(this, void 0, void 0, function () {
                var consentModel, template, data;
                return __generator(this, function (_a) {
                    switch (_a.label) {
                        case 0:
                            registerHeplers();
                            if (window.__MSFT_SDK[kind].Store.getters.currentModel === undefined ||
                                window.__MSFT_SDK[kind].Store.getters.template === undefined) {
                                window.__MSFT_SDK[kind].Logger.warn('Cannot call init before config is ready.');
                                return [2 /*return*/];
                            }
                            consentModel = window.__MSFT_SDK[kind].Store.getters
                                .currentModel;
                            template = window.__MSFT_SDK[kind].Store.getters.template;
                            return [4 /*yield*/, TemplateHandler.getTemplateData(consentModel)];
                        case 1:
                            data = _a.sent();
                            template.pages.forEach(function (page) {
                                var _a;
                                var templateString;
                                try {
                                    var template_1 = window.Handlebars.compile(page.css + page.content);
                                    templateString = template_1(data);
                                }
                                catch (e) {
                                    window.__MSFT_SDK[kind].Logger.error(e.message, e);
                                    templateString = ErrorStrings.TemplateError;
                                }
                                window.__MSFT_SDK[kind].Store.reducers.setComponents(__assign(__assign({}, window.__MSFT_SDK[kind].Store.getters.components), (_a = {}, _a[page.name] = templateString, _a)));
                            });
                            window.__MSFT_SDK[kind].Logger.info('Components updated');
                            if (!TemplateHandler.initialized) {
                                window.__MSFT_SDK[kind].EventBus.on(window.__MSFT_SDK[kind].enums.PublicEvents.ShowFirstPage, TemplateHandler.showFirstPage);
                                TemplateHandler.initialized = true;
                            }
                            return [2 /*return*/];
                    }
                });
            });
        };
        /**
         * Show Consent notice template
         */
        TemplateHandler.showFirstPage = function () {
            var _a;
            return __awaiter(this, void 0, void 0, function () {
                var consentModel, initComponent, template;
                return __generator(this, function (_b) {
                    switch (_b.label) {
                        case 0:
                            if (!!TemplateHandler.initialized) return [3 /*break*/, 2];
                            return [4 /*yield*/, TemplateHandler.init()];
                        case 1:
                            _b.sent();
                            _b.label = 2;
                        case 2:
                            consentModel = window.__MSFT_SDK[kind].Store.getters.currentModel;
                            if (consentModel === undefined) {
                                window.__MSFT_SDK[kind].Logger.warn('Cannot call init before consent model is selected.');
                                return [2 /*return*/];
                            }
                            initComponent = window.__MSFT_SDK[kind].Store.getters.startingLayoutPage;
                            if (window.__MSFT_SDK[kind].Store.getters.components === undefined ||
                                initComponent === undefined ||
                                window.__MSFT_SDK[kind].Store.getters.components[initComponent] ===
                                    undefined) {
                                window.__MSFT_SDK[kind].Logger.error('Notice template not found.');
                                return [2 /*return*/];
                            }
                            template = window.__MSFT_SDK[kind].Store.getters.components[initComponent];
                            TemplateHandler.showTemplateInIFrame(template, initComponent, [
                                {
                                    type: StyleType.Text,
                                    value: ((_a = consentModel.layout.ui.css) === null || _a === void 0 ? void 0 : _a[initComponent.toLowerCase()]) || '',
                                },
                            ], TemplateHandler.getParentElement(initComponent));
                            return [2 /*return*/];
                    }
                });
            });
        };
        TemplateHandler.getParentElement = function (templateId) {
            var _a;
            var parentMap = ((_a = window.__MSFT_SDK[kind].Store.getters.config.initConfig) === null || _a === void 0 ? void 0 : _a.componentParentMap) ||
                window.__MSFT_SDK[kind].Store.getters.templateParentMap;
            var parentElementId = (parentMap === null || parentMap === void 0 ? void 0 : parentMap[templateId]) || (parentMap === null || parentMap === void 0 ? void 0 : parentMap['*']);
            if (parentElementId) {
                return document.getElementById(parentElementId);
            }
            return null;
        };
        /**
         * Adds template to iframe and append it to dom
         * @param  {string} template template to add
         * @param  {string} iframeId iframe id
         * @param  {import("core/types/interfaces").IStyle[]} styles user provided styles
         * @param  {HTMLElement|null} parentElement if iframe should be added to a specific element instead of body
         */
        TemplateHandler.showTemplateInIFrame = function (template, iframeId, styles, parentElement) {
            var _a, _b;
            if (styles === void 0) { styles = []; }
            var iframeElement = document.getElementById(iframeId);
            if (iframeElement) {
                window.__MSFT_SDK[kind].Logger.info("Template: ".concat(iframeId, " is already open."));
            }
            else {
                if (template === ErrorStrings.TemplateError &&
                    (!window.__MSFT_SDK[kind].Store.getters.isLivePreviewMode ||
                        !window.__MSFT_SDK[kind].Store.getters.isPreviewMode)) {
                    return;
                }
                var data = {
                    origin: window.origin,
                    renderTemplateWithoutIframe: (_a = window.__MSFT_SDK[kind].Store.getters.config.initConfig) === null || _a === void 0 ? void 0 : _a.renderTemplateWithoutIframe,
                    executionContexts: ((_b = window.__MSFT_SDK[kind].Store.getters.config.initConfig) === null || _b === void 0 ? void 0 : _b.executionContexts) || [],
                    isGPCEnabled: window.__MSFT_SDK[kind].Store.getters.isGPCEnabled &&
                        window.__MSFT_SDK[kind].Store.getters.shouldHonourGPC,
                };
                template =
                    "<script>var msftData = ".concat(JSON.stringify(data), "</script>\n        <script>").concat(window.__MSFT_SDK[kind].Store.getters.proxyJS, "</script>") +
                        replaceDataProps(template);
                window.__MSFT_SDK[kind].Utils.IFrameUtils.createIFrame(template, iframeId, parentElement, styles);
            }
        };
        /**
         * Hide consent notice iframe
         */
        TemplateHandler.hideConsentNotice = function () {
            var consentModel = window.__MSFT_SDK[kind].Store.getters.currentModel;
            if (consentModel === undefined) {
                window.__MSFT_SDK[kind].Logger.warn('Cannot call hideConsentNotice before consent model is selected.');
                return;
            }
            var initComponent = window.__MSFT_SDK[kind].Store.getters.startingLayoutPage;
            initComponent && TemplateHandler.closeIFrame(initComponent);
        };
        /**
         * Set iframe display to none
         * @param  {string} iframeId id of iframe element
         */
        TemplateHandler.closeIFrame = function (iframeId) {
            var _a;
            var iframeElement = document.getElementById(iframeId);
            (_a = iframeElement === null || iframeElement === void 0 ? void 0 : iframeElement.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild(iframeElement);
        };
        TemplateHandler.initialized = false;
        return TemplateHandler;
    }());

    window.onmessage = function (e) { return __awaiter(void 0, void 0, void 0, function () {
        var response;
        var _a;
        var _b;
        return __generator(this, function (_c) {
            switch (_c.label) {
                case 0:
                    if (!(e.origin === 'null')) return [3 /*break*/, 3];
                    if (window.__MSFT_SDK[kind].Store.getters.isActionDisabled &&
                        e.data.method === 'trigger') {
                        return [2 /*return*/];
                    }
                    response = (_a = window.MSFTPrivacy[kind])[e.data.method].apply(_a, __spreadArray([], __read(e.data.params), false));
                    if (!(response instanceof Promise)) return [3 /*break*/, 2];
                    return [4 /*yield*/, response];
                case 1:
                    response = _c.sent();
                    _c.label = 2;
                case 2:
                    if (e.data.responseId) {
                        (_b = e.source) === null || _b === void 0 ? void 0 : _b.postMessage(__assign(__assign({}, e.data), { response: response }), { targetOrigin: '*' });
                    }
                    _c.label = 3;
                case 3: return [2 /*return*/];
            }
        });
    }); };
    window.__MSFT_SDK[kind].EventBus.on(PublicEvents.AnchorTagClicked, function (_a) {
        var attributes = _a.attributes;
        var aTag = document.createElement('a');
        Object.keys(attributes).forEach(function (attrName) {
            aTag.setAttribute(attrName, attributes[attrName]);
        });
        aTag.click();
    });
    new TemplateHandler();

}());
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJlc2VudGF0aW9uLm1pbi5qcyIsInNvdXJjZXMiOlsiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3RzbGliL3RzbGliLmVzNi5qcyIsIi4uLy4uLy4uLy4uLy4uL1NESy9zcmMvY29yZS9jb25zdGFudHMvZW51bXMudHMiLCIuLi8uLi8uLi8uLi8uLi9TREsvc3JjL3ByZXNlbnRhdGlvbi9oYW5kbGViYXJIZWxwZXJzLnRzIiwiLi4vLi4vLi4vLi4vLi4vU0RLL3NyYy9jb21tb24vc2RrLnRzIiwiLi4vLi4vLi4vLi4vLi4vU0RLL3NyYy9wcmVzZW50YXRpb24vZGF0YVByb3BzSGVscGVycy50cyIsIi4uLy4uLy4uLy4uLy4uL1NESy9zcmMvY29yZS91dGlscy9PYmplY3RVdGlscy50cyIsIi4uLy4uLy4uLy4uLy4uL1NESy9zcmMvY29yZS9kZXBlbmRlbmN5TWFuYWdlci9lbnVtL21vZHVsZXMudHMiLCIuLi8uLi8uLi8uLi8uLi9TREsvc3JjL2NvcmUvc3RvcmUvU3RhdGUudHMiLCIuLi8uLi8uLi8uLi8uLi9TREsvc3JjL2NvcmUvc3RvcmUvR2V0dGVycy50cyIsIi4uLy4uLy4uLy4uLy4uL1NESy9zcmMvY29yZS9ldmVudEJ1cy9ldmVudHNSZWNvcmRlci9lbnVtL0V2ZW50c1JlcGxheS50cyIsIi4uLy4uLy4uLy4uLy4uL1NESy9zcmMvY29yZS9ldmVudEJ1cy9ldmVudHNSZWNvcmRlci9ldmVudHNSZXBsYXlTdHJhdGVneS9SZXBsYXlBbGxFdmVudHMudHMiLCIuLi8uLi8uLi8uLi8uLi9TREsvc3JjL2NvcmUvZXZlbnRCdXMvZXZlbnRzUmVjb3JkZXIvZXZlbnRzUmVwbGF5U3RyYXRlZ3kvUmVwbGF5TGF0ZXN0RXZlbnQudHMiLCIuLi8uLi8uLi8uLi8uLi9TREsvc3JjL2NvcmUvZXZlbnRCdXMvZXZlbnRzUmVjb3JkZXIvZXZlbnRzUmVwbGF5U3RyYXRlZ3kvU2tpcEV2ZW50UmVwbGF5LnRzIiwiLi4vLi4vLi4vLi4vLi4vU0RLL3NyYy9jb3JlL2V2ZW50QnVzL2V2ZW50c1JlY29yZGVyL2V2ZW50c1JlcGxheVN0cmF0ZWd5L2luZGV4LnRzIiwiLi4vLi4vLi4vLi4vLi4vU0RLL3NyYy9jb3JlL2V2ZW50QnVzL2V2ZW50c1JlY29yZGVyL2luZGV4LnRzIiwiLi4vLi4vLi4vLi4vLi4vU0RLL3NyYy9jb3JlL2V2ZW50QnVzL2luZGV4LnRzIiwiLi4vLi4vLi4vLi4vLi4vU0RLL3NyYy9jb3JlL3N0b3JlL1JlZHVjZXJzLnRzIiwiLi4vLi4vLi4vLi4vLi4vU0RLL3NyYy9jb3JlL3N0b3JlL2luZGV4LnRzIiwiLi4vLi4vLi4vLi4vLi4vU0RLL3NyYy9jb3JlL2xvZ2dlci9lbnVtLnRzIiwiLi4vLi4vLi4vLi4vLi4vU0RLL3NyYy9jb3JlL2xvZ2dlci9wbHVnaW5zL0NvbnNvbGVMb2dnZXIudHMiLCIuLi8uLi8uLi8uLi8uLi9TREsvc3JjL2NvcmUvbG9nZ2VyL2luZGV4LnRzIiwiLi4vLi4vLi4vLi4vLi4vU0RLL3NyYy9jb25zZW50L0NvbnNlbnRFbmNvZGluZ1NlcnZpY2UudHMiLCIuLi8uLi8uLi8uLi8uLi9TREsvc3JjL3ByZXNlbnRhdGlvbi9UZW1wbGF0ZUhhbmRsZXIudHMiLCIuLi8uLi8uLi8uLi8uLi9TREsvc3JjL3ByZXNlbnRhdGlvbi9pbmRleC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLlxyXG5cclxuUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55XHJcbnB1cnBvc2Ugd2l0aCBvciB3aXRob3V0IGZlZSBpcyBoZXJlYnkgZ3JhbnRlZC5cclxuXHJcblRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEhcclxuUkVHQVJEIFRPIFRISVMgU09GVFdBUkUgSU5DTFVESU5HIEFMTCBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZXHJcbkFORCBGSVRORVNTLiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SIEJFIExJQUJMRSBGT1IgQU5ZIFNQRUNJQUwsIERJUkVDVCxcclxuSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NXHJcbkxPU1MgT0YgVVNFLCBEQVRBIE9SIFBST0ZJVFMsIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBORUdMSUdFTkNFIE9SXHJcbk9USEVSIFRPUlRJT1VTIEFDVElPTiwgQVJJU0lORyBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBVU0UgT1JcclxuUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS5cclxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cclxuLyogZ2xvYmFsIFJlZmxlY3QsIFByb21pc2UgKi9cclxuXHJcbnZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24oZCwgYikge1xyXG4gICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19leHRlbmRzKGQsIGIpIHtcclxuICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXHJcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xyXG4gICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG59XHJcblxyXG5leHBvcnQgdmFyIF9fYXNzaWduID0gZnVuY3Rpb24oKSB7XHJcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gX19hc3NpZ24odCkge1xyXG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpIHRbcF0gPSBzW3BdO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdDtcclxuICAgIH1cclxuICAgIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19yZXN0KHMsIGUpIHtcclxuICAgIHZhciB0ID0ge307XHJcbiAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkgJiYgZS5pbmRleE9mKHApIDwgMClcclxuICAgICAgICB0W3BdID0gc1twXTtcclxuICAgIGlmIChzICE9IG51bGwgJiYgdHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPT09IFwiZnVuY3Rpb25cIilcclxuICAgICAgICBmb3IgKHZhciBpID0gMCwgcCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocyk7IGkgPCBwLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChlLmluZGV4T2YocFtpXSkgPCAwICYmIE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChzLCBwW2ldKSlcclxuICAgICAgICAgICAgICAgIHRbcFtpXV0gPSBzW3BbaV1dO1xyXG4gICAgICAgIH1cclxuICAgIHJldHVybiB0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xyXG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xyXG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcGFyYW0ocGFyYW1JbmRleCwgZGVjb3JhdG9yKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwga2V5KSB7IGRlY29yYXRvcih0YXJnZXQsIGtleSwgcGFyYW1JbmRleCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpIHtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0ZXIodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XHJcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cclxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxyXG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19nZW5lcmF0b3IodGhpc0FyZywgYm9keSkge1xyXG4gICAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZztcclxuICAgIHJldHVybiBnID0geyBuZXh0OiB2ZXJiKDApLCBcInRocm93XCI6IHZlcmIoMSksIFwicmV0dXJuXCI6IHZlcmIoMikgfSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKG9wKSB7XHJcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xyXG4gICAgICAgIHdoaWxlIChfKSB0cnkge1xyXG4gICAgICAgICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSBvcFswXSAmIDIgPyB5W1wicmV0dXJuXCJdIDogb3BbMF0gPyB5W1widGhyb3dcIl0gfHwgKCh0ID0geVtcInJldHVyblwiXSkgJiYgdC5jYWxsKHkpLCAwKSA6IHkubmV4dCkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7XHJcbiAgICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcclxuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9XHJcbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCB2YXIgX19jcmVhdGVCaW5kaW5nID0gT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xyXG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcclxuICAgIHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihtLCBrKTtcclxuICAgIGlmICghZGVzYyB8fCAoXCJnZXRcIiBpbiBkZXNjID8gIW0uX19lc01vZHVsZSA6IGRlc2Mud3JpdGFibGUgfHwgZGVzYy5jb25maWd1cmFibGUpKSB7XHJcbiAgICAgICAgZGVzYyA9IHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIG1ba107IH0gfTtcclxuICAgIH1cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBrMiwgZGVzYyk7XHJcbn0pIDogKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XHJcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xyXG4gICAgb1trMl0gPSBtW2tdO1xyXG59KTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2V4cG9ydFN0YXIobSwgbykge1xyXG4gICAgZm9yICh2YXIgcCBpbiBtKSBpZiAocCAhPT0gXCJkZWZhdWx0XCIgJiYgIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvLCBwKSkgX19jcmVhdGVCaW5kaW5nKG8sIG0sIHApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX192YWx1ZXMobykge1xyXG4gICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDtcclxuICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pO1xyXG4gICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSBcIm51bWJlclwiKSByZXR1cm4ge1xyXG4gICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDtcclxuICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9O1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyBcIk9iamVjdCBpcyBub3QgaXRlcmFibGUuXCIgOiBcIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3JlYWQobywgbikge1xyXG4gICAgdmFyIG0gPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdO1xyXG4gICAgaWYgKCFtKSByZXR1cm4gbztcclxuICAgIHZhciBpID0gbS5jYWxsKG8pLCByLCBhciA9IFtdLCBlO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICB3aGlsZSAoKG4gPT09IHZvaWQgMCB8fCBuLS0gPiAwKSAmJiAhKHIgPSBpLm5leHQoKSkuZG9uZSkgYXIucHVzaChyLnZhbHVlKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlcnJvcikgeyBlID0geyBlcnJvcjogZXJyb3IgfTsgfVxyXG4gICAgZmluYWxseSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKHIgJiYgIXIuZG9uZSAmJiAobSA9IGlbXCJyZXR1cm5cIl0pKSBtLmNhbGwoaSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZpbmFsbHkgeyBpZiAoZSkgdGhyb3cgZS5lcnJvcjsgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFyO1xyXG59XHJcblxyXG4vKiogQGRlcHJlY2F0ZWQgKi9cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkKCkge1xyXG4gICAgZm9yICh2YXIgYXIgPSBbXSwgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgYXIgPSBhci5jb25jYXQoX19yZWFkKGFyZ3VtZW50c1tpXSkpO1xyXG4gICAgcmV0dXJuIGFyO1xyXG59XHJcblxyXG4vKiogQGRlcHJlY2F0ZWQgKi9cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkQXJyYXlzKCkge1xyXG4gICAgZm9yICh2YXIgcyA9IDAsIGkgPSAwLCBpbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpbDsgaSsrKSBzICs9IGFyZ3VtZW50c1tpXS5sZW5ndGg7XHJcbiAgICBmb3IgKHZhciByID0gQXJyYXkocyksIGsgPSAwLCBpID0gMDsgaSA8IGlsOyBpKyspXHJcbiAgICAgICAgZm9yICh2YXIgYSA9IGFyZ3VtZW50c1tpXSwgaiA9IDAsIGpsID0gYS5sZW5ndGg7IGogPCBqbDsgaisrLCBrKyspXHJcbiAgICAgICAgICAgIHJba10gPSBhW2pdO1xyXG4gICAgcmV0dXJuIHI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZEFycmF5KHRvLCBmcm9tLCBwYWNrKSB7XHJcbiAgICBpZiAocGFjayB8fCBhcmd1bWVudHMubGVuZ3RoID09PSAyKSBmb3IgKHZhciBpID0gMCwgbCA9IGZyb20ubGVuZ3RoLCBhcjsgaSA8IGw7IGkrKykge1xyXG4gICAgICAgIGlmIChhciB8fCAhKGkgaW4gZnJvbSkpIHtcclxuICAgICAgICAgICAgaWYgKCFhcikgYXIgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tLCAwLCBpKTtcclxuICAgICAgICAgICAgYXJbaV0gPSBmcm9tW2ldO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB0by5jb25jYXQoYXIgfHwgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZnJvbSkpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdCh2KSB7XHJcbiAgICByZXR1cm4gdGhpcyBpbnN0YW5jZW9mIF9fYXdhaXQgPyAodGhpcy52ID0gdiwgdGhpcykgOiBuZXcgX19hd2FpdCh2KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNHZW5lcmF0b3IodGhpc0FyZywgX2FyZ3VtZW50cywgZ2VuZXJhdG9yKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIGcgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSksIGksIHEgPSBbXTtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyBpZiAoZ1tuXSkgaVtuXSA9IGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoYSwgYikgeyBxLnB1c2goW24sIHYsIGEsIGJdKSA+IDEgfHwgcmVzdW1lKG4sIHYpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gcmVzdW1lKG4sIHYpIHsgdHJ5IHsgc3RlcChnW25dKHYpKTsgfSBjYXRjaCAoZSkgeyBzZXR0bGUocVswXVszXSwgZSk7IH0gfVxyXG4gICAgZnVuY3Rpb24gc3RlcChyKSB7IHIudmFsdWUgaW5zdGFuY2VvZiBfX2F3YWl0ID8gUHJvbWlzZS5yZXNvbHZlKHIudmFsdWUudikudGhlbihmdWxmaWxsLCByZWplY3QpIDogc2V0dGxlKHFbMF1bMl0sIHIpOyB9XHJcbiAgICBmdW5jdGlvbiBmdWxmaWxsKHZhbHVlKSB7IHJlc3VtZShcIm5leHRcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiByZWplY3QodmFsdWUpIHsgcmVzdW1lKFwidGhyb3dcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUoZiwgdikgeyBpZiAoZih2KSwgcS5zaGlmdCgpLCBxLmxlbmd0aCkgcmVzdW1lKHFbMF1bMF0sIHFbMF1bMV0pOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jRGVsZWdhdG9yKG8pIHtcclxuICAgIHZhciBpLCBwO1xyXG4gICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiLCBmdW5jdGlvbiAoZSkgeyB0aHJvdyBlOyB9KSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobiwgZikgeyBpW25dID0gb1tuXSA/IGZ1bmN0aW9uICh2KSB7IHJldHVybiAocCA9ICFwKSA/IHsgdmFsdWU6IF9fYXdhaXQob1tuXSh2KSksIGRvbmU6IG4gPT09IFwicmV0dXJuXCIgfSA6IGYgPyBmKHYpIDogdjsgfSA6IGY7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNWYWx1ZXMobykge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBtID0gb1tTeW1ib2wuYXN5bmNJdGVyYXRvcl0sIGk7XHJcbiAgICByZXR1cm4gbSA/IG0uY2FsbChvKSA6IChvID0gdHlwZW9mIF9fdmFsdWVzID09PSBcImZ1bmN0aW9uXCIgPyBfX3ZhbHVlcyhvKSA6IG9bU3ltYm9sLml0ZXJhdG9yXSgpLCBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaSk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaVtuXSA9IG9bbl0gJiYgZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgdiA9IG9bbl0odiksIHNldHRsZShyZXNvbHZlLCByZWplY3QsIHYuZG9uZSwgdi52YWx1ZSk7IH0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCBkLCB2KSB7IFByb21pc2UucmVzb2x2ZSh2KS50aGVuKGZ1bmN0aW9uKHYpIHsgcmVzb2x2ZSh7IHZhbHVlOiB2LCBkb25lOiBkIH0pOyB9LCByZWplY3QpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ha2VUZW1wbGF0ZU9iamVjdChjb29rZWQsIHJhdykge1xyXG4gICAgaWYgKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkoY29va2VkLCBcInJhd1wiLCB7IHZhbHVlOiByYXcgfSk7IH0gZWxzZSB7IGNvb2tlZC5yYXcgPSByYXc7IH1cclxuICAgIHJldHVybiBjb29rZWQ7XHJcbn07XHJcblxyXG52YXIgX19zZXRNb2R1bGVEZWZhdWx0ID0gT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCB2KSB7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgXCJkZWZhdWx0XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHYgfSk7XHJcbn0pIDogZnVuY3Rpb24obywgdikge1xyXG4gICAgb1tcImRlZmF1bHRcIl0gPSB2O1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0U3Rhcihtb2QpIHtcclxuICAgIGlmIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpIHJldHVybiBtb2Q7XHJcbiAgICB2YXIgcmVzdWx0ID0ge307XHJcbiAgICBpZiAobW9kICE9IG51bGwpIGZvciAodmFyIGsgaW4gbW9kKSBpZiAoayAhPT0gXCJkZWZhdWx0XCIgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vZCwgaykpIF9fY3JlYXRlQmluZGluZyhyZXN1bHQsIG1vZCwgayk7XHJcbiAgICBfX3NldE1vZHVsZURlZmF1bHQocmVzdWx0LCBtb2QpO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0RGVmYXVsdChtb2QpIHtcclxuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgZGVmYXVsdDogbW9kIH07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHJlY2VpdmVyLCBzdGF0ZSwga2luZCwgZikge1xyXG4gICAgaWYgKGtpbmQgPT09IFwiYVwiICYmICFmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBhY2Nlc3NvciB3YXMgZGVmaW5lZCB3aXRob3V0IGEgZ2V0dGVyXCIpO1xyXG4gICAgaWYgKHR5cGVvZiBzdGF0ZSA9PT0gXCJmdW5jdGlvblwiID8gcmVjZWl2ZXIgIT09IHN0YXRlIHx8ICFmIDogIXN0YXRlLmhhcyhyZWNlaXZlcikpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgcmVhZCBwcml2YXRlIG1lbWJlciBmcm9tIGFuIG9iamVjdCB3aG9zZSBjbGFzcyBkaWQgbm90IGRlY2xhcmUgaXRcIik7XHJcbiAgICByZXR1cm4ga2luZCA9PT0gXCJtXCIgPyBmIDoga2luZCA9PT0gXCJhXCIgPyBmLmNhbGwocmVjZWl2ZXIpIDogZiA/IGYudmFsdWUgOiBzdGF0ZS5nZXQocmVjZWl2ZXIpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19jbGFzc1ByaXZhdGVGaWVsZFNldChyZWNlaXZlciwgc3RhdGUsIHZhbHVlLCBraW5kLCBmKSB7XHJcbiAgICBpZiAoa2luZCA9PT0gXCJtXCIpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIG1ldGhvZCBpcyBub3Qgd3JpdGFibGVcIik7XHJcbiAgICBpZiAoa2luZCA9PT0gXCJhXCIgJiYgIWYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIGFjY2Vzc29yIHdhcyBkZWZpbmVkIHdpdGhvdXQgYSBzZXR0ZXJcIik7XHJcbiAgICBpZiAodHlwZW9mIHN0YXRlID09PSBcImZ1bmN0aW9uXCIgPyByZWNlaXZlciAhPT0gc3RhdGUgfHwgIWYgOiAhc3RhdGUuaGFzKHJlY2VpdmVyKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCB3cml0ZSBwcml2YXRlIG1lbWJlciB0byBhbiBvYmplY3Qgd2hvc2UgY2xhc3MgZGlkIG5vdCBkZWNsYXJlIGl0XCIpO1xyXG4gICAgcmV0dXJuIChraW5kID09PSBcImFcIiA/IGYuY2FsbChyZWNlaXZlciwgdmFsdWUpIDogZiA/IGYudmFsdWUgPSB2YWx1ZSA6IHN0YXRlLnNldChyZWNlaXZlciwgdmFsdWUpKSwgdmFsdWU7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2NsYXNzUHJpdmF0ZUZpZWxkSW4oc3RhdGUsIHJlY2VpdmVyKSB7XHJcbiAgICBpZiAocmVjZWl2ZXIgPT09IG51bGwgfHwgKHR5cGVvZiByZWNlaXZlciAhPT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgcmVjZWl2ZXIgIT09IFwiZnVuY3Rpb25cIikpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgdXNlICdpbicgb3BlcmF0b3Igb24gbm9uLW9iamVjdFwiKTtcclxuICAgIHJldHVybiB0eXBlb2Ygc3RhdGUgPT09IFwiZnVuY3Rpb25cIiA/IHJlY2VpdmVyID09PSBzdGF0ZSA6IHN0YXRlLmhhcyhyZWNlaXZlcik7XHJcbn1cclxuIiwiZXhwb3J0IGVudW0gQ29uc2VudE1vZGVsVHlwZSB7XHJcbiAgRXhwbGljaXQgPSAnRXhwbGljaXQnLFxyXG4gIEltcGxpY2l0ID0gJ0ltcGxpY2l0JyxcclxufVxyXG5cclxuZXhwb3J0IGVudW0gUHVibGljRXZlbnRzIHtcclxuICBDb25zZW50Q2hhbmdlZCA9ICdDb25zZW50Q2hhbmdlZCcsXHJcbiAgU2hvd0NvbnNlbnROb3RpY2UgPSAnU2hvd0NvbnNlbnROb3RpY2UnLFxyXG4gIFNob3dGaXJzdFBhZ2UgPSAnU2hvd0ZpcnN0UGFnZScsXHJcbiAgQ2xvc2VDb25zZW50Tm90aWNlID0gJ0Nsb3NlQ29uc2VudE5vdGljZScsXHJcbiAgQWNjZXB0QWxsID0gJ0FjY2VwdEFsbCcsXHJcbiAgUmVqZWN0QWxsID0gJ1JlamVjdEFsbCcsXHJcbiAgU2hvd1RlbXBsYXRlID0gJ1Nob3dUZW1wbGF0ZScsXHJcbiAgQ2xvc2VUZW1wbGF0ZSA9ICdDbG9zZVRlbXBsYXRlJyxcclxuICBVcGRhdGVDb25zZW50ID0gJ1VwZGF0ZUNvbnNlbnQnLFxyXG4gIEFuY2hvclRhZ0NsaWNrZWQgPSAnQW5jaG9yVGFnQ2xpY2tlZCcsXHJcbiAgRmV0Y2hDb25maWcgPSAnRmV0Y2hDb25maWcnLFxyXG4gIFF1ZXN0aW9uc0Zvcm1TdWJtaXRXaXRob3V0TWV0YURhdGEgPSAnUXVlc3Rpb25zRm9ybVN1Ym1pdFdpdGhvdXRNZXRhRGF0YScsXHJcbiAgUXVlc3Rpb25zRm9ybVN1Ym1pdCA9ICdRdWVzdGlvbnNGb3JtU3VibWl0JyxcclxuICBTaG93UHJlZmVyZW5jZXMgPSAnU2hvd1ByZWZlcmVuY2VzJyxcclxuICBDb25zZW50UHJlZmVyZW5jZSA9ICdNU0ZUQ29uc2VudFByZWZlcmVuY2UnLFxyXG4gIERhdGFQcm9wc1VwZGF0ZWQgPSAnRGF0YVByb3BzVXBkYXRlZCcsXHJcbiAgRG9uZSA9ICdEb25lJyxcclxufVxyXG5cclxuZXhwb3J0IGVudW0gRXZlbnRzIHtcclxuICBJbml0ID0gJ0luaXQnLFxyXG4gIENvcmVDb25zZW50TW9kZWxTZWxlY3RlZCA9ICdDb3JlQ29uc2VudE1vZGVsU2VsZWN0ZWQnLFxyXG4gIENvbmZpZ1JlYWR5ID0gJ0NvbmZpZ1JlYWR5JyxcclxuICBDb25zZW50SW52YWxpZCA9ICdDb25zZW50SW52YWxpZCcsXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIEF0dHJpYnV0ZXMge1xyXG4gIC8vIFdlYiBjb25zZW50IGV2ZW50c1xyXG4gIENvbnNlbnROb3RpY2UgPSAnbXNmdC1jb25zZW50LW5vdGljZScsXHJcbiAgQWNjZXB0QWxsID0gJ21zZnQtY29uc2VudC1hY2NlcHQtYWxsJyxcclxuICBPcGVuUHJlZmVyZW5jZSA9ICdtc2Z0LWNvbnNlbnQtb3Blbi1wcmVmZXJlbmNlcycsXHJcbiAgQ2xvc2VQcmVmZXJlbmNlID0gJ21zZnQtY29uc2VudC1jbG9zZS1wcmVmZXJlbmNlcycsXHJcbiAgRGVjbGluZUFsbCA9ICdtc2Z0LWNvbnNlbnQtZGVjbGluZS1hbGwnLFxyXG4gIFNhdmVQcmVmZXJlbmNlcyA9ICdtc2Z0LWNvbnNlbnQtc2F2ZS1wcmVmZXJlbmNlcycsXHJcbiAgVHJhY2tlckNhdGVnb3J5ID0gJ21zZnQtY29uc2VudC10cmFja2VyLWNhdGVnb3J5JyxcclxuXHJcbiAgLy8gRFNSIGV2ZW50c1xyXG4gIFF1ZXN0aW9ubmFpcmVGb3JtID0gJ21zZnQtcXVlc3Rpb25uYWlyZS1mb3JtJyxcclxuICBRdWVzdGlvbm5haXJlRm9ybVN1Ym1pdCA9ICdtc2Z0LXF1ZXN0aW9ubmFpcmUtZm9ybS1zdWJtaXQnLFxyXG5cclxuICAvLyBHZW5lcmljIGV2ZW50c1xyXG4gIFJlZGlyZWN0ID0gJ21zZnQtcmVkaXJlY3QnLFxyXG4gIE9wZW5QYWdlID0gJ21zZnQtb3Blbi1wYWdlJyxcclxuICBDbG9zZVBhZ2UgPSAnbXNmdC1jbG9zZS1wYWdlJyxcclxuICBUcmlnZ2VyRXZlbnQgPSAnbXNmdC10cmlnZ2VyJyxcclxuICBUb2dnbGVJZCA9ICdtc2Z0LXRvZ2dsZS1pZCcsXHJcbiAgVG9nZ2xlT24gPSAnbXNmdC10b2dnbGUtb24nLFxyXG4gIFRvZ2dsZU9mZiA9ICdtc2Z0LXRvZ2dsZS1vZmYnLFxyXG4gIEZvcm1QYXlsb2FkRGF0YSA9ICdtc2Z0LXBheWxvYWQtZGF0YScsXHJcbiAgRm9ybUlkID0gJ21zZnQtcGF5bG9hZC1mb3JtLWlkJyxcclxuICBGb3JtSW5wdXRJRHMgPSAnbXNmdC1wYXlsb2FkLWlucHV0LWlkcycsXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIFNES01vZGUge1xyXG4gIERlZmF1bHQgPSAnRGVmYXVsdCcsXHJcbiAgSGVhZExlc3MgPSAnSGVhZExlc3MnLFxyXG59XHJcblxyXG5leHBvcnQgZW51bSBTdHlsZVR5cGUge1xyXG4gIFVybCA9ICdVcmwnLFxyXG4gIFRleHQgPSAnVGV4dCcsXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIFByZWZlcmVuY2Uge1xyXG4gIE9GRiA9ICcwJyxcclxuICBPTiA9ICcxJyxcclxufVxyXG5cclxuZXhwb3J0IGVudW0gQ29va2llIHtcclxuICBDb25zZW50ID0gJ21zZnQtY29uc2VudCcsXHJcbiAgQ29uc2VudE1ldGFkYXRhID0gJ21zZnQtY29uc2VudC1tZXRhZGF0YScsXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIFJlZ2lzdGVyZWREaXZUeXBlIHtcclxuICBTY3JpcHQgPSAnc2NyaXB0JyxcclxuICBJRnJhbWUgPSAnaWZyYW1lJyxcclxufVxyXG5cclxuZXhwb3J0IGVudW0gTm90aWNlVHlwZSB7XHJcbiAgVHJhY2tlckNhdGVnb3J5ID0gJ3RyYWNrZXJDYXRlZ29yeScsXHJcbiAgUXVlc3Rpb25zID0gJ1F1ZXN0aW9ucycsXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIENvbnRyb2xUeXBlIHtcclxuICBQdXJwb3NlID0gJ1B1cnBvc2UnLFxyXG59XHJcblxyXG5leHBvcnQgZW51bSBFcnJvclN0cmluZ3Mge1xyXG4gIFRlbXBsYXRlRXJyb3IgPSAnPGI+VGhlcmUgaXMgc29tZXRoaW5nIHdyb25nIHdpdGggdGVtcGxhdGUuIFBsZWFzZSBjaGVjayBsb2dzLjwvYj4nLFxyXG59XHJcblxyXG5leHBvcnQgZW51bSBJbnRlcnZhbFVuaXRzIHtcclxuICBkYXkgPSAnZGF5JyxcclxuICB3ZWVrID0gJ3dlZWsnLFxyXG4gIG1vbnRoID0gJ21vbnRoJyxcclxuICB5ZWFyID0gJ3llYXInLFxyXG59XHJcblxyXG5leHBvcnQgZW51bSBRdWVzdGlvblR5cGUge1xyXG4gIFRleHQgPSAnVGV4dCcsXHJcbiAgRW1haWwgPSAnRW1haWwnLFxyXG4gIFJhZGlvID0gJ1JhZGlvJyxcclxuICBNdWx0aVNlbGVjdCA9ICdNdWx0aVNlbGVjdCcsXHJcbiAgU2VsZWN0ID0gJ1NlbGVjdCcsXHJcbiAgRGF0ZSA9ICdEYXRlJyxcclxuICBQaG9uZU51bWJlciA9ICdQaG9uZU51bWJlcicsXHJcbiAgQ3JlZGl0Q2FyZCA9ICdDcmVkaXRDYXJkJyxcclxuICBOdW1iZXIgPSAnTnVtYmVyJyxcclxuICBNdWx0aUxpbmVUZXh0ID0gJ211bHRpTGluZVRleHQnLFxyXG59XHJcblxyXG5leHBvcnQgZW51bSBRdWVzdGlvblZhbGlkYXRpb24ge1xyXG4gIFJlcXVpcmVkID0gJ1JlcXVpcmVkJyxcclxufVxyXG5cclxuZXhwb3J0IGVudW0gUXVlc3Rpb25GaWVsZCB7XHJcbiAgUXVlc3Rpb24gPSAncXVlc3Rpb24nLFxyXG4gIFBsYWNlaG9sZGVyID0gJ3BsYWNlaG9sZGVyJyxcclxuICBPcHRpb25zID0gJ29wdGlvbnMnLFxyXG59XHJcblxyXG5leHBvcnQgZW51bSBNb2RlbEtpbmQge1xyXG4gIFdlYkNvbnNlbnQgPSAnTUlDUk9TT0ZULldlYkNvbnNlbnQnLFxyXG4gIERTUlN1Ym1pc3Npb24gPSAnTUlDUk9TT0ZULkRTUlN1Ym1pc3Npb24nLFxyXG59XHJcblxyXG5leHBvcnQgZW51bSBQYWNrYWdlS2luZCB7XHJcbiAgV2ViQ29uc2VudFBhY2thZ2UgPSAnV2ViQ29uc2VudFBhY2thZ2UnLFxyXG4gIEZJREVTUGFja2FnZSA9ICdGSURFU1BhY2thZ2UnLFxyXG4gIERTUlN1Ym1pc3Npb25QYWNrYWdlID0gJ0RTUlN1Ym1pc3Npb25QYWNrYWdlJyxcclxufVxyXG5cclxuZXhwb3J0IGVudW0gVGVtcGxhdGUge1xyXG4gIFByZWZlcmVuY2VzID0gJ1ByZWZlcmVuY2VzJyxcclxufVxyXG4iLCJleHBvcnQgY29uc3QgcmVnaXN0ZXJIZXBsZXJzID0gKCkgPT4ge1xyXG4gIGlmICh3aW5kb3cuSGFuZGxlYmFycykge1xyXG4gICAgd2luZG93LkhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ3RvTG93ZXJDYXNlJywgZnVuY3Rpb24gKHR5cGU6IHN0cmluZykge1xyXG4gICAgICByZXR1cm4gdHlwZS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgd2luZG93LkhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoXHJcbiAgICAgICdlcXVhbHMnLFxyXG4gICAgICBmdW5jdGlvbiAocGFyYW0xOiBzdHJpbmcsIHBhcmFtMjogc3RyaW5nKSB7XHJcbiAgICAgICAgcmV0dXJuIHBhcmFtMS50b0xvd2VyQ2FzZSgpID09PSBwYXJhbTIudG9Mb3dlckNhc2UoKTtcclxuICAgICAgfSxcclxuICAgICk7XHJcbiAgfVxyXG59O1xyXG4iLCJleHBvcnQgY29uc3Qga2luZCA9ICdfX1BBQ0tBR0VfS0lORF9fJztcclxuXHJcbmV4cG9ydCBjb25zdCBhbGxvd2VkS2luZHMgPSBbJ3RyYWNrZXJDb25zZW50JywgJ2RzcicsICdnZW5lcmljQ29uc2VudCddO1xyXG4iLCJpbXBvcnQgeyBraW5kIH0gZnJvbSAnY29tbW9uL3Nkayc7XHJcblxyXG4vLyBCZWxvdyByZWdleCBpcyB0byBhbGxvdyBhbnkgd2hpdGVzcGFjZSBhcyB3ZWxsIGxpa2UgXCI8IGRhdGEtcHJvcCA+Y29uc2VudElkPCBcXCBkYXRhLXByb3AgPlwiXHJcbi8qIGVzbGludC1kaXNhYmxlIG5vLXVzZWxlc3MtZXNjYXBlICovXHJcbmNvbnN0IGN1c3RvbVZhcmlhYmxlc1JlZ2V4ID1cclxuICAvPFxccypkYXRhLXByb3BcXHMqPihcXHN8Jm5ic3A7KSooLio/KShcXHN8Jm5ic3A7KSo8XFxzKltcXC9cXFxcXVxccypkYXRhLXByb3BcXHMqPi9nO1xyXG4vKiBlc2xpbnQtZW5hYmxlIG5vLXVzZWxlc3MtZXNjYXBlICovXHJcblxyXG5leHBvcnQgY29uc3QgcmVwbGFjZURhdGFQcm9wc0luTGF5b3V0VmFsdWVzID0gKFxyXG4gIG9yaWdpbmFsRGV0YWlsczogSUdlbmVyaWNPYmplY3QsXHJcbikgPT4ge1xyXG4gIGNvbnN0IHN0cmluZ2lmaWVkUmVzdWx0ID0gcmVwbGFjZURhdGFQcm9wcyhKU09OLnN0cmluZ2lmeShvcmlnaW5hbERldGFpbHMpKTtcclxuICByZXR1cm4gSlNPTi5wYXJzZShzdHJpbmdpZmllZFJlc3VsdCk7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgcmVwbGFjZURhdGFQcm9wcyA9IChzdHI6IHN0cmluZyk6IHN0cmluZyA9PiB7XHJcbiAgY29uc3QgZGF0YVByb3BzID0gd2luZG93Ll9fTVNGVF9TREtba2luZF0uU3RvcmUuZ2V0dGVycy5kYXRhUHJvcHM7XHJcblxyXG4gIHJldHVybiBzdHIucmVwbGFjZUFsbChjdXN0b21WYXJpYWJsZXNSZWdleCwgKC4uLnJlc3VsdCkgPT4ge1xyXG4gICAgY29uc3QgdmFyaWFibGVOYW1lID0gcmVzdWx0WzJdPy50cmltKCk7XHJcbiAgICByZXR1cm4gZGF0YVByb3BzW3ZhcmlhYmxlTmFtZV1cclxuICAgICAgPyBkYXRhUHJvcHNbdmFyaWFibGVOYW1lXS50b1N0cmluZygpXHJcbiAgICAgIDogcmVzdWx0WzBdO1xyXG4gIH0pO1xyXG59O1xyXG4iLCJjbGFzcyBPYmplY3RVdGlscyB7XHJcbiAgcHVibGljIHN0YXRpYyBpc09iamVjdChpdGVtOiBhbnkpIHtcclxuICAgIHJldHVybiBpdGVtICYmIHR5cGVvZiBpdGVtID09PSAnb2JqZWN0JyAmJiAhQXJyYXkuaXNBcnJheShpdGVtKTtcclxuICB9XHJcbiAgcHVibGljIHN0YXRpYyBtZXJnZURlZXAodGFyZ2V0OiBhbnksIC4uLnNvdXJjZXM6IGFueSk6IGFueSB7XHJcbiAgICBpZiAoIXNvdXJjZXMubGVuZ3RoKSByZXR1cm4gdGFyZ2V0O1xyXG4gICAgY29uc3Qgc291cmNlID0gc291cmNlcy5zaGlmdCgpO1xyXG5cclxuICAgIGlmICh0aGlzLmlzT2JqZWN0KHRhcmdldCkgJiYgdGhpcy5pc09iamVjdChzb3VyY2UpKSB7XHJcbiAgICAgIGZvciAoY29uc3Qga2V5IGluIHNvdXJjZSkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzT2JqZWN0KHNvdXJjZVtrZXldKSkge1xyXG4gICAgICAgICAgaWYgKCF0YXJnZXRba2V5XSkgT2JqZWN0LmFzc2lnbih0YXJnZXQsIHsgW2tleV06IHt9IH0pO1xyXG4gICAgICAgICAgdGhpcy5tZXJnZURlZXAodGFyZ2V0W2tleV0sIHNvdXJjZVtrZXldKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgT2JqZWN0LmFzc2lnbih0YXJnZXQsIHsgW2tleV06IHNvdXJjZVtrZXldIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRoaXMubWVyZ2VEZWVwKHRhcmdldCwgLi4uc291cmNlcyk7XHJcbiAgfVxyXG59XHJcbmV4cG9ydCBkZWZhdWx0IE9iamVjdFV0aWxzO1xyXG4iLCJleHBvcnQgZW51bSBTREtNb2R1bGVzIHtcclxuICBQUkVTRU5UQVRJT04gPSAncHJlc2VudGF0aW9uJyxcclxuICBQUkVWSUVXID0gJ3ByZXZpZXcnLFxyXG4gIENPTkZJRyA9ICdjb25maWcnLFxyXG4gIEhBTkRMRUJBUiA9ICdoYW5kbGViYXInLFxyXG4gIFBST1hZID0gJ3Byb3h5JyxcclxuICBEU1IgPSAnZHNyJyxcclxufVxyXG5cclxuZXhwb3J0IGVudW0gU0RLTW9kdWxlc1BhdGgge1xyXG4gIFBSRVNFTlRBVElPTiA9ICckanNSb290UGF0aC9tc2Z0LXByaXZhY3kvcGFja2FnZXMvJHBhY2thZ2VJZC9qcy8kY29uc2VudFNES1ZlcnNpb24vcHJlc2VudGF0aW9uLm1pbi5qcycsXHJcbiAgUFJFVklFVyA9ICckanNSb290UGF0aC9tc2Z0LXByaXZhY3kvcGFja2FnZXMvJHBhY2thZ2VJZC9qcy8kY29uc2VudFNES1ZlcnNpb24vcHJldmlldy5taW4uanMnLFxyXG4gIEhBTkRMRUJBUiA9ICckanNSb290UGF0aC9tc2Z0LXByaXZhY3kvcGFja2FnZXMvJHBhY2thZ2VJZC9qcy8kY29uc2VudFNES1ZlcnNpb24vdmVuZG9yL2hhbmRsZWJhcnMubWluLmpzJyxcclxuICBQUk9YWSA9ICckanNSb290UGF0aC9tc2Z0LXByaXZhY3kvcGFja2FnZXMvJHBhY2thZ2VJZC9qcy8kY29uc2VudFNES1ZlcnNpb24vcHJveHkubWluLmpzJyxcclxuICBEU1IgPSAnJGpzUm9vdFBhdGgvbXNmdC1wcml2YWN5L3BhY2thZ2VzLyRwYWNrYWdlSWQvanMvJGNvbnNlbnRTREtWZXJzaW9uL2Rzci5taW4uanMnLFxyXG59XHJcblxyXG5leHBvcnQgZW51bSBTREtNb2R1bGVzU291cmNlVmFyaWFibGUge1xyXG4gIFBSRVNFTlRBVElPTiA9ICdtc2Z0LXByZXNlbnRhdGlvbi5qcycsXHJcbiAgSEFORExFQkFSID0gJ21zZnQtaGFuZGxlYmFycy5qcycsXHJcbiAgUFJPWFkgPSAnbXNmdC1wcm94eS5qcycsXHJcbiAgRFNSID0gJ2Rzci5qcycsXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIE1vZHVsZVNvdXJjZVR5cGUge1xyXG4gIFBBVEggPSAncGF0aCcsXHJcbiAgVkFSSUFCTEUgPSAndmFyaWFibGUnLFxyXG59XHJcbiIsImltcG9ydCB7IElTdGF0ZSB9IGZyb20gJy4vdHlwZXMnO1xyXG5cclxuY2xhc3MgU3RhdGUge1xyXG4gIHB1YmxpYyBzdGF0ZTogSVN0YXRlO1xyXG5cclxuICBjb25zdHJ1Y3RvcihzdGF0ZT86IElTdGF0ZSkge1xyXG4gICAgdGhpcy5zdGF0ZSA9IHN0YXRlIHx8IHtcclxuICAgICAgY29uZmlnOiB7fSxcclxuICAgICAgZGVidWc6IHtcclxuICAgICAgICBsb2dzOiBbXSxcclxuICAgICAgICBldmVudHM6IFtdLFxyXG4gICAgICB9LFxyXG4gICAgICBjdXN0b206IHt9LFxyXG4gICAgICB1c2VyVmFsdWVzOiB7fSxcclxuICAgIH07XHJcbiAgfVxyXG59XHJcbmV4cG9ydCBkZWZhdWx0IFN0YXRlO1xyXG4iLCIvKiBlc2xpbnQtZGlzYWJsZSBjbGFzcy1tZXRob2RzLXVzZS10aGlzICovXHJcbmltcG9ydCB7IFNES01vZHVsZXNTb3VyY2VWYXJpYWJsZSB9IGZyb20gJ2NvcmUvZGVwZW5kZW5jeU1hbmFnZXIvZW51bS9tb2R1bGVzJztcclxuaW1wb3J0IFN0YXRlIGZyb20gJy4vU3RhdGUnO1xyXG5pbXBvcnQgeyBJQ29uZmlnU3RhdGUsIElEZWJ1Z1N0YXRlLCBJU3RhdGUgfSBmcm9tICcuL3R5cGVzJztcclxuXHJcbmludGVyZmFjZSBHZXR0ZXJzIGV4dGVuZHMgSVN0b3JlLklHZXR0ZXIge1xyXG4gIFt4OiBzdHJpbmddOiBhbnk7XHJcbn1cclxuY2xhc3MgR2V0dGVycyBleHRlbmRzIFN0YXRlIHtcclxuICBjb25zdHJ1Y3RvcihzdGF0ZTogSVN0YXRlKSB7XHJcbiAgICBzdXBlcihzdGF0ZSk7XHJcbiAgfVxyXG4gIGdldCBkZWJ1Z0luZm8oKTogSURlYnVnU3RhdGUge1xyXG4gICAgcmV0dXJuIHRoaXMuc3RhdGUuZGVidWc7XHJcbiAgfVxyXG5cclxuICBnZXQgY29uZmlnKCk6IElDb25maWdTdGF0ZSB7XHJcbiAgICByZXR1cm4gdGhpcy5zdGF0ZS5jb25maWc7XHJcbiAgfVxyXG4gIGdldCB1c2VyQ29uc2VudCgpOiBJVXNlckNvbnNlbnQge1xyXG4gICAgcmV0dXJuIHRoaXMuc3RhdGUuY3VzdG9tLnVzZXJDb25zZW50O1xyXG4gIH1cclxuXHJcbiAgLy8gVE9ETzogSW1wbGVtZW50IGJlbG93IGdldHRlcnNcclxuICBnZXQgaXNIZWFkbGVzcygpOiBib29sZWFuIHtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcblxyXG4gIGdldCBpc1ByZXZpZXdNb2RlKCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIHRoaXMuc3RhdGUuY29uZmlnLmluaXRDb25maWc/LnByZXZpZXcgfHwgZmFsc2U7XHJcbiAgfVxyXG5cclxuICBnZXQgaXNBY3Rpb25EaXNhYmxlZCgpOiBib29sZWFuIHtcclxuICAgIHJldHVybiB0aGlzLnN0YXRlLmNvbmZpZy5pbml0Q29uZmlnPy5kaXNhYmxlQWN0aW9ucyB8fCBmYWxzZTtcclxuICB9XHJcblxyXG4gIGdldCBpc0xpdmVQcmV2aWV3TW9kZSgpOiBib29sZWFuIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIHJldHVybiB3aW5kb3cucGFyZW50Py5uYW1lID09PSAnQ29uc2VudExpdmVQcmV2aWV3JztcclxuICAgIH0gY2F0Y2ggKF9lcnIpIHtcclxuICAgICAgLy8gSWYgd2UgdHJ5IHRvIGFjY2VzcyBvdXRlciBJRnJhbWUgd2UgZ2V0IGVycm9yXHJcbiAgICAgIC8vIFVuY2F1Z2h0IChpbiBwcm9taXNlKSBET01FeGNlcHRpb246IEJsb2NrZWQgYSBmcmFtZSB3aXRoIG9yaWdpbiBcImh0dHBzOi8vbG9jYWxob3N0OjIzMzA5XCIgZnJvbSBhY2Nlc3NpbmcgYSBjcm9zcy1vcmlnaW4gZnJhbWUuXHJcbiAgICAgIC8vIFRoaXMgY2F0Y2ggYmxvY2sgaXMgdG8gYnlwYXNzIHRoZSBlcnJvclxyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXQgcHJlc2VudGF0aW9uVmFyaWFibGUoKTogc3RyaW5nIHtcclxuICAgIHJldHVybiBTREtNb2R1bGVzU291cmNlVmFyaWFibGUuUFJFU0VOVEFUSU9OO1xyXG4gIH1cclxuXHJcbiAgZ2V0IGhhbmRsZWJhclZhcmlhYmxlKCk6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gU0RLTW9kdWxlc1NvdXJjZVZhcmlhYmxlLkhBTkRMRUJBUjtcclxuICB9XHJcblxyXG4gIGdldCBwcm94eVZhcmlhYmxlKCk6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gU0RLTW9kdWxlc1NvdXJjZVZhcmlhYmxlLlBST1hZO1xyXG4gIH1cclxuXHJcbiAgZ2V0IGRzclZhcmlhYmxlKCk6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gU0RLTW9kdWxlc1NvdXJjZVZhcmlhYmxlLkRTUjtcclxuICB9XHJcblxyXG4gIGdldCBkYXRhUHJvcHMoKTogSURhdGFQcm9wcyB7XHJcbiAgICByZXR1cm4gdGhpcy5zdGF0ZS5jdXN0b20uZHluYW1pY1ZhbHVlcyB8fCB7fTtcclxuICB9XHJcblxyXG4gIGdldCBpc0dQQ0VuYWJsZWQoKTogYm9vbGVhbiB7XHJcbiAgICBjb25zdCBncGNWYWx1ZSA9IHdpbmRvdy5uYXZpZ2F0b3IuZ2xvYmFsUHJpdmFjeUNvbnRyb2w/LnRvU3RyaW5nKCk7XHJcbiAgICByZXR1cm4gZ3BjVmFsdWUgPyBncGNWYWx1ZSA9PT0gJ3RydWUnIHx8IGdwY1ZhbHVlID09PSAnMScgOiBmYWxzZTtcclxuICB9XHJcbn1cclxuZXhwb3J0IGRlZmF1bHQgR2V0dGVycztcclxuIiwiZXhwb3J0IGVudW0gRXZlbnRzUmVwbGF5U3RyYXRlZ3kge1xyXG4gIFJFUExBWV9BTEwsXHJcbiAgUkVQTEFZX0xBVEVTVCxcclxuICBTS0lQLFxyXG59XHJcbiIsIi8qIGVzbGludC1kaXNhYmxlIGNsYXNzLW1ldGhvZHMtdXNlLXRoaXMgKi9cclxuaW1wb3J0IHsgSUNhbGxiYWNrIH0gZnJvbSAnY29yZS9ldmVudEJ1cy90eXBlcy9JRXZlbnQnO1xyXG5pbXBvcnQgeyBJRXZlbnRMb2dJbmZvIH0gZnJvbSAnY29yZS9ldmVudEJ1cy90eXBlcy9JRXZlbnRzUmVjb3JkZXInO1xyXG5pbXBvcnQgeyBJUmVwbGF5U3RyYXRlZ3kgfSBmcm9tICdjb3JlL2V2ZW50QnVzL3R5cGVzL0lSZXBsYXlTdHJhdGVneSc7XHJcbmltcG9ydCB7IEV2ZW50c1JlcGxheVN0cmF0ZWd5IH0gZnJvbSAnLi4vZW51bS9FdmVudHNSZXBsYXknO1xyXG5cclxuY2xhc3MgUmVwbGF5QWxsRXZlbnRzIGltcGxlbWVudHMgSVJlcGxheVN0cmF0ZWd5IHtcclxuICBwdWJsaWMgc3RyYXRlZ3kgPSBFdmVudHNSZXBsYXlTdHJhdGVneS5SRVBMQVlfQUxMO1xyXG5cclxuICBwdWJsaWMgZXhlY3V0ZShjYWxsYmFjazogSUNhbGxiYWNrLCBldmVudHM6IElFdmVudExvZ0luZm9bXSk6IHZvaWQge1xyXG4gICAgZXZlbnRzLmZvckVhY2goKHsgcGF5bG9hZCB9KSA9PiBjYWxsYmFjayhwYXlsb2FkKSk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBuZXcgUmVwbGF5QWxsRXZlbnRzKCk7XHJcbiIsIi8qIGVzbGludC1kaXNhYmxlIGNsYXNzLW1ldGhvZHMtdXNlLXRoaXMgKi9cclxuaW1wb3J0IHsgSUNhbGxiYWNrIH0gZnJvbSAnY29yZS9ldmVudEJ1cy90eXBlcy9JRXZlbnQnO1xyXG5pbXBvcnQgeyBJRXZlbnRMb2dJbmZvIH0gZnJvbSAnY29yZS9ldmVudEJ1cy90eXBlcy9JRXZlbnRzUmVjb3JkZXInO1xyXG5pbXBvcnQgeyBJUmVwbGF5U3RyYXRlZ3kgfSBmcm9tICdjb3JlL2V2ZW50QnVzL3R5cGVzL0lSZXBsYXlTdHJhdGVneSc7XHJcbmltcG9ydCB7IEV2ZW50c1JlcGxheVN0cmF0ZWd5IH0gZnJvbSAnLi4vZW51bS9FdmVudHNSZXBsYXknO1xyXG5cclxuY2xhc3MgUmVwbGF5TGF0ZXN0RXZlbnQgaW1wbGVtZW50cyBJUmVwbGF5U3RyYXRlZ3kge1xyXG4gIHB1YmxpYyBzdHJhdGVneSA9IEV2ZW50c1JlcGxheVN0cmF0ZWd5LlJFUExBWV9MQVRFU1Q7XHJcblxyXG4gIHB1YmxpYyBleGVjdXRlKGNhbGxiYWNrOiBJQ2FsbGJhY2ssIGV2ZW50czogSUV2ZW50TG9nSW5mb1tdKTogdm9pZCB7XHJcbiAgICBpZiAoZXZlbnRzLmxlbmd0aCkge1xyXG4gICAgICBjYWxsYmFjayhldmVudHNbZXZlbnRzLmxlbmd0aCAtIDFdLnBheWxvYWQpO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgbmV3IFJlcGxheUxhdGVzdEV2ZW50KCk7XHJcbiIsIi8qIGVzbGludC1kaXNhYmxlIGNsYXNzLW1ldGhvZHMtdXNlLXRoaXMgKi9cclxuaW1wb3J0IHsgSVJlcGxheVN0cmF0ZWd5IH0gZnJvbSAnY29yZS9ldmVudEJ1cy90eXBlcy9JUmVwbGF5U3RyYXRlZ3knO1xyXG5pbXBvcnQgeyBFdmVudHNSZXBsYXlTdHJhdGVneSB9IGZyb20gJy4uL2VudW0vRXZlbnRzUmVwbGF5JztcclxuXHJcbmNsYXNzIFNraXBFdmVudFJlcGxheSBpbXBsZW1lbnRzIElSZXBsYXlTdHJhdGVneSB7XHJcbiAgcHVibGljIHN0cmF0ZWd5ID0gRXZlbnRzUmVwbGF5U3RyYXRlZ3kuU0tJUDtcclxuXHJcbiAgcHVibGljIGV4ZWN1dGUoKTogdm9pZCB7XHJcbiAgICByZXR1cm4gdm9pZCAwO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgbmV3IFNraXBFdmVudFJlcGxheSgpO1xyXG4iLCJpbXBvcnQgeyBJUmVwbGF5U3RyYXRlZ3kgfSBmcm9tICdjb3JlL2V2ZW50QnVzL3R5cGVzL0lSZXBsYXlTdHJhdGVneSc7XHJcbmltcG9ydCB7IEV2ZW50c1JlcGxheVN0cmF0ZWd5IH0gZnJvbSAnLi4vZW51bS9FdmVudHNSZXBsYXknO1xyXG5pbXBvcnQgUmVwbGF5QWxsRXZlbnRzIGZyb20gJy4vUmVwbGF5QWxsRXZlbnRzJztcclxuaW1wb3J0IFJlcGxheUxhdGVzdEV2ZW50IGZyb20gJy4vUmVwbGF5TGF0ZXN0RXZlbnQnO1xyXG5pbXBvcnQgU2tpcEV2ZW50UmVwbGF5IGZyb20gJy4vU2tpcEV2ZW50UmVwbGF5JztcclxuXHJcbnR5cGUgSUV2ZW50c1JlcGxheVN0cmF0ZWd5ID0ge1xyXG4gIFtzdHJhdGVneSBpbiBFdmVudHNSZXBsYXlTdHJhdGVneV06IElSZXBsYXlTdHJhdGVneTtcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuICBbRXZlbnRzUmVwbGF5U3RyYXRlZ3kuUkVQTEFZX0FMTF06IFJlcGxheUFsbEV2ZW50cyxcclxuICBbRXZlbnRzUmVwbGF5U3RyYXRlZ3kuUkVQTEFZX0xBVEVTVF06IFJlcGxheUxhdGVzdEV2ZW50LFxyXG4gIFtFdmVudHNSZXBsYXlTdHJhdGVneS5TS0lQXTogU2tpcEV2ZW50UmVwbGF5LFxyXG59IGFzIElFdmVudHNSZXBsYXlTdHJhdGVneTtcclxuIiwiaW1wb3J0IHsgSUNhbGxiYWNrIH0gZnJvbSAnLi4vdHlwZXMvSUV2ZW50JztcclxuaW1wb3J0IHsgSUV2ZW50c0xvZyB9IGZyb20gJy4uL3R5cGVzL0lFdmVudHNSZWNvcmRlcic7XHJcbmltcG9ydCB7IEV2ZW50c1JlcGxheVN0cmF0ZWd5IH0gZnJvbSAnLi9lbnVtL0V2ZW50c1JlcGxheSc7XHJcbmltcG9ydCBSZXBsYXlTdHJhdGVneSBmcm9tICcuL2V2ZW50c1JlcGxheVN0cmF0ZWd5JztcclxuXHJcbmV4cG9ydCBjbGFzcyBFdmVudHNSZWNvcmRpbmcge1xyXG4gIHB1YmxpYyBzdGF0aWMgZXZlbnRzTG9nczogSUV2ZW50c0xvZyA9IHt9O1xyXG4gIHByaXZhdGUgc3RhdGljIERFRkFVTFRfU1RSQVRFR1k6IEV2ZW50c1JlcGxheVN0cmF0ZWd5ID1cclxuICAgIEV2ZW50c1JlcGxheVN0cmF0ZWd5LlJFUExBWV9MQVRFU1Q7XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgcmVjb3JkKGV2ZW50OiBzdHJpbmcsIHBheWxvYWQ6IElHZW5lcmljT2JqZWN0KSB7XHJcbiAgICB0aGlzLmV2ZW50c0xvZ3NbZXZlbnRdID0gdGhpcy5ldmVudHNMb2dzW2V2ZW50XSB8fCBbXTtcclxuICAgIHRoaXMuZXZlbnRzTG9nc1tldmVudF0ucHVzaCh7IHBheWxvYWQgfSk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc3RhdGljIHJlcGxheShcclxuICAgIGV2ZW50OiBzdHJpbmcsXHJcbiAgICBjYWxsYmFjazogSUNhbGxiYWNrLFxyXG4gICAgc3RyYXRlZ3k6IEV2ZW50c1JlcGxheVN0cmF0ZWd5ID0gdGhpcy5ERUZBVUxUX1NUUkFURUdZLFxyXG4gICkge1xyXG4gICAgUmVwbGF5U3RyYXRlZ3lbc3RyYXRlZ3ldLmV4ZWN1dGUoY2FsbGJhY2ssIHRoaXMuZXZlbnRzTG9nc1tldmVudF0gfHwgW10pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgTG9nZ2VyIGZyb20gJy4uL2xvZ2dlcic7XHJcbmltcG9ydCBTdG9yZSBmcm9tICcuLi9zdG9yZSc7XHJcbmltcG9ydCB7IEV2ZW50c1JlY29yZGluZyB9IGZyb20gJy4vZXZlbnRzUmVjb3JkZXInO1xyXG5pbXBvcnQge1xyXG4gIElDYWxsYmFjayxcclxuICBJRXZlbnREZXRhaWxzLFxyXG4gIElFdmVudEhhbmRsZXJEZXRhaWxzLFxyXG4gIElFdmVudEhhbmRsZXJQcm9wZXJ0aWVzLFxyXG4gIElFdmVudHMsXHJcbn0gZnJvbSAnLi90eXBlcy9JRXZlbnQnO1xyXG5cclxuY2xhc3MgRXZlbnRCdXMge1xyXG4gIHByaXZhdGUgZXZlbnRJZENvdW50ZXI6IG51bWJlcjtcclxuICBwcml2YXRlIGV2ZW50czogSUV2ZW50cztcclxuXHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICB0aGlzLmV2ZW50cyA9IHt9O1xyXG4gICAgdGhpcy5ldmVudElkQ291bnRlciA9IDA7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZXRzIGRlZmF1bHQgZXZlbnQgZGV0YWlscy5cclxuICAgKiBAcmV0dXJucyB7SUV2ZW50RGV0YWlsc30gRGVmYXVsdCBldmVudCBkZXRhaWxzXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBzdGF0aWMgZ2V0RGVmYXVsdEV2ZW50RGV0YWlscygpOiBJRXZlbnREZXRhaWxzIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIGV4ZWN1dGlvbkNvdW50OiAwLFxyXG4gICAgICBjYWxsYmFja3M6IFtdLFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEFkZCBhbiBldmVudCBsaXN0ZW5lci5cclxuICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnQgRXZlbnQgbmFtZVxyXG4gICAqIEBwYXJhbSB7SUNhbGxiYWNrfSBjYWxsYmFjayBMaXN0ZW5lciBjYWxsYmFja1xyXG4gICAqIEBwYXJhbSB7SUV2ZW50SGFuZGxlclByb3BlcnRpZXN9IHByb3BlcnRpZXMgQWRkaXRpb25hbCBjb25maWd1cmF0aW9uIHByb3BlcnRpZXNcclxuICAgKiBAcmV0dXJucyB7bnVtYmVyfSBFdmVudCBJRFxyXG4gICAqL1xyXG4gIHB1YmxpYyBvbihcclxuICAgIGV2ZW50OiBzdHJpbmcsXHJcbiAgICBjYWxsYmFjazogSUNhbGxiYWNrLFxyXG4gICAgeyBzeW5jID0gZmFsc2UsIHJlcGxheVN0cmF0ZWd5IH06IElFdmVudEhhbmRsZXJQcm9wZXJ0aWVzID0ge30sXHJcbiAgKTogbnVtYmVyIHtcclxuICAgIExvZ2dlci5pbmZvKGBDYWxsYmFjayByZWdpc3RlcmVkIGZvciBldmVudCA6ICR7ZXZlbnR9YCk7XHJcbiAgICB0aGlzLmV2ZW50SWRDb3VudGVyKys7XHJcbiAgICBjb25zdCBldmVudERldGFpbHM6IElFdmVudEhhbmRsZXJEZXRhaWxzID0ge1xyXG4gICAgICBpZDogdGhpcy5ldmVudElkQ291bnRlcixcclxuICAgICAgZm46IGNhbGxiYWNrLFxyXG4gICAgICBzeW5jLFxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmV2ZW50c1tldmVudF0gPVxyXG4gICAgICB0aGlzLmV2ZW50c1tldmVudF0gfHwgRXZlbnRCdXMuZ2V0RGVmYXVsdEV2ZW50RGV0YWlscygpO1xyXG4gICAgdGhpcy5ldmVudHNbZXZlbnRdLmNhbGxiYWNrcy5wdXNoKGV2ZW50RGV0YWlscyk7XHJcblxyXG4gICAgRXZlbnRzUmVjb3JkaW5nLnJlcGxheShldmVudCwgY2FsbGJhY2ssIHJlcGxheVN0cmF0ZWd5KTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5ldmVudElkQ291bnRlcjtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEV4ZWN1dGUgYW4gZXZlbnQuXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50IEV2ZW50IG5hbWVcclxuICAgKiBAcGFyYW0ge2ltcG9ydChcImNvcmUvdHlwZXMvaW50ZXJmYWNlc1wiKS5JR2VuZXJpY09iamVjdH0gcGF5bG9hZCBQYXlsb2FkIGRhdGFcclxuICAgKi9cclxuICBwdWJsaWMgdHJpZ2dlcihldmVudDogc3RyaW5nLCBwYXlsb2FkOiBJR2VuZXJpY09iamVjdCA9IHt9KSB7XHJcbiAgICBjb25zdCBjYWxsYmFja3MgPSB0aGlzLmV2ZW50c1tldmVudF0/LmNhbGxiYWNrcyB8fCBbXTtcclxuXHJcbiAgICAvLyBMZXQgdGhlIGxvZ2ljIHJ1biBldmVuIGlmIG5vIGFjdGl2ZSBsaXN0ZW5lcnMgc28gdGhhdCB3ZSBjYW4gcmVjb3JkIHRoZSBldmVudHMuXHJcbiAgICBMb2dnZXIuaW5mbyhcclxuICAgICAgYFN0YXJ0ZWQgZXhlY3V0aW5nICcke2NhbGxiYWNrcy5sZW5ndGh9JyBjYWxsYmFja3MgZm9yIGV2ZW50ICcke2V2ZW50fSdgLFxyXG4gICAgICBwYXlsb2FkLFxyXG4gICAgKTtcclxuXHJcbiAgICBTdG9yZS5yZWR1Y2Vycy5zYXZlRGVidWdJbmZvKHsgZXZlbnQgfSk7XHJcblxyXG4gICAgY2FsbGJhY2tzLmZvckVhY2goYXN5bmMgZXZlbnRIYW5kbGVyID0+IHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBpZiAoIWV2ZW50SGFuZGxlci5zeW5jKSB7XHJcbiAgICAgICAgICBhd2FpdCBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGV2ZW50SGFuZGxlci5mbihwYXlsb2FkKTtcclxuICAgICAgfSBjYXRjaCAoZTogYW55KSB7XHJcbiAgICAgICAgTG9nZ2VyLmVycm9yKFxyXG4gICAgICAgICAgYEVycm9yIGluIGV4ZWN1dGluZyBjYWxsYmFjayBpZCA6ICR7ZXZlbnRIYW5kbGVyLmlkfSBmb3IgZXZlbnQgJyR7ZXZlbnR9YCxcclxuICAgICAgICAgIGUsXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgRXZlbnRzUmVjb3JkaW5nLnJlY29yZChldmVudCwgcGF5bG9hZCk7XHJcblxyXG4gICAgTG9nZ2VyLmluZm8oXHJcbiAgICAgIGBDb21wbGV0ZWQgZXhlY3V0aW5nICcke2NhbGxiYWNrcy5sZW5ndGh9JyBjYWxsYmFja3MgZm9yIGV2ZW50ICcke2V2ZW50fSdgLFxyXG4gICAgICBwYXlsb2FkLFxyXG4gICAgKTtcclxuXHJcbiAgICBpZiAodGhpcy5ldmVudHNbZXZlbnRdKSB7XHJcbiAgICAgIHRoaXMuZXZlbnRzW2V2ZW50XS5leGVjdXRpb25Db3VudCsrO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRGV0YWNoIGFuIGV2ZW50IGxpc3RlbmVyLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudCBFdmVudCBuYW1lXHJcbiAgICogQHBhcmFtIHtudW1iZXIgfCBJQ2FsbGJhY2t9IGV2ZW50SWRPckNhbGxiYWNrIEV2ZW50IGxpc3RlbmVyIElEIG9yIGNhbGxiYWNrIHRvIHJlbW92ZVxyXG4gICAqL1xyXG4gIHB1YmxpYyBvZmYoZXZlbnQ6IHN0cmluZywgZXZlbnRJZE9yQ2FsbGJhY2s6IG51bWJlciB8IElDYWxsYmFjaykge1xyXG4gICAgY29uc3QgaWR4ID0gdGhpcy5ldmVudHNbZXZlbnRdPy5jYWxsYmFja3MuZmluZEluZGV4KFxyXG4gICAgICBldmVudERldGFpbHMgPT5cclxuICAgICAgICBldmVudERldGFpbHMuaWQgPT09IGV2ZW50SWRPckNhbGxiYWNrIHx8XHJcbiAgICAgICAgZXZlbnREZXRhaWxzLmZuID09PSBldmVudElkT3JDYWxsYmFjayxcclxuICAgICk7XHJcblxyXG4gICAgaWYgKHR5cGVvZiBpZHggPT09ICdudW1iZXInICYmIH5pZHgpIHtcclxuICAgICAgTG9nZ2VyLmluZm8oXHJcbiAgICAgICAgYFJlbW92aW5nIGV2ZW50IGxpc3RlbmVyICcke3RoaXMuZXZlbnRzW2V2ZW50XS5jYWxsYmFja3NbaWR4XS5pZH0nIG9mICcke2V2ZW50fScgZXZlbnRgLFxyXG4gICAgICApO1xyXG4gICAgICB0aGlzLmV2ZW50c1tldmVudF0uY2FsbGJhY2tzLnNwbGljZShpZHgsIDEpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgTG9nZ2VyLmVycm9yKFxyXG4gICAgICAgIGBVbmFibGUgdG8gcmVtb3ZlIGV2ZW50IGxpc3RlbmVyIGZvciBldmVudCAnJHtldmVudH0nLiBObyBtYXRjaGluZyBldmVudCBpZCBvciBjYWxsYmFjayBmb3VuZC5gLFxyXG4gICAgICApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ2hlY2tzIGlmIGFueSBldmVudCBsaXN0ZW5lciBpcyBhdHRhY2hlZCBpbiB0aGUgZXZlbnQgYnVzLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudCBFdmVudCBuYW1lXHJcbiAgICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgYW4gZXZlbnQgbGlzdGVuZXIgaXMgYXR0YWNoZWQgZWxzZSBmYWxzZVxyXG4gICAqL1xyXG4gIHB1YmxpYyBoYXNMaXN0ZW5lcihldmVudDogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdGhpcy5ldmVudHNbZXZlbnRdPy5jYWxsYmFja3MubGVuZ3RoID4gMDtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IG5ldyBFdmVudEJ1cygpO1xyXG4iLCIvKiBlc2xpbnQtZGlzYWJsZSBjbGFzcy1tZXRob2RzLXVzZS10aGlzICovXHJcbmltcG9ydCBTdGF0ZSBmcm9tICcuL1N0YXRlJztcclxuaW1wb3J0IHsgSVN0YXRlIH0gZnJvbSAnLi90eXBlcyc7XHJcbmltcG9ydCBFdmVudEJ1cyBmcm9tICcuLi9ldmVudEJ1cyc7XHJcbmltcG9ydCB7IFB1YmxpY0V2ZW50cyB9IGZyb20gJy4uL2NvbnN0YW50cy9lbnVtcyc7XHJcblxyXG5pbnRlcmZhY2UgUmVkdWNlcnMgZXh0ZW5kcyBJU3RvcmUuSVJlZHVjZXIge1xyXG4gIFt4OiBzdHJpbmddOiBhbnk7XHJcbn1cclxuY2xhc3MgUmVkdWNlcnMgZXh0ZW5kcyBTdGF0ZSB7XHJcbiAgY29uc3RydWN0b3Ioc3RhdGU6IElTdGF0ZSkge1xyXG4gICAgc3VwZXIoc3RhdGUpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHNhdmVEZWJ1Z0luZm8oeyBldmVudCwgbG9nIH06IHsgZXZlbnQ/OiBzdHJpbmc7IGxvZz86IHN0cmluZyB9KSB7XHJcbiAgICBpZiAoZXZlbnQpIHtcclxuICAgICAgdGhpcy5zdGF0ZS5kZWJ1Zy5ldmVudHMucHVzaChldmVudCk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGxvZykge1xyXG4gICAgICB0aGlzLnN0YXRlLmRlYnVnLmxvZ3MucHVzaChsb2cpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIHNldFVzZXJDb25zZW50KGNvbnNlbnQ6IElVc2VyQ29uc2VudCkge1xyXG4gICAgdGhpcy5zdGF0ZS5jdXN0b20udXNlckNvbnNlbnQgPSBjb25zZW50O1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHNldEluaXRDb25maWcoaW5pdENvbmZpZzogSUluaXRDb25maWcpIHtcclxuICAgIHRoaXMuc3RhdGUuY29uZmlnLmluaXRDb25maWcgPSBpbml0Q29uZmlnO1xyXG5cclxuICAgIGlmIChpbml0Q29uZmlnPy5kYXRhUHJvcHMpIHtcclxuICAgICAgdGhpcy5zZXREYXRhUHJvcHMoaW5pdENvbmZpZy5kYXRhUHJvcHMpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIHNldERhdGFQcm9wcyh2YWx1ZXM6IElEYXRhUHJvcHMpIHtcclxuICAgIHRoaXMuc3RhdGUuY3VzdG9tLmR5bmFtaWNWYWx1ZXMgPSB7XHJcbiAgICAgIC4uLih0aGlzLnN0YXRlLmN1c3RvbS5keW5hbWljVmFsdWVzIHx8IHt9KSxcclxuICAgICAgLi4udmFsdWVzLFxyXG4gICAgfTtcclxuXHJcbiAgICBFdmVudEJ1cy50cmlnZ2VyKFxyXG4gICAgICBQdWJsaWNFdmVudHMuRGF0YVByb3BzVXBkYXRlZCxcclxuICAgICAgdGhpcy5zdGF0ZS5jdXN0b20uZHluYW1pY1ZhbHVlcyxcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgYWRkQ3VzdG9tVXNlclZhbHVlKGtleTogc3RyaW5nLCB2YWx1ZTogYW55KTogdm9pZCB7XHJcbiAgICB0aGlzLnN0YXRlLnVzZXJWYWx1ZXNba2V5XSA9IHZhbHVlO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldEN1c3RvbVVzZXJWYWx1ZShrZXk6IHN0cmluZyk6IGFueSB7XHJcbiAgICByZXR1cm4gdGhpcy5zdGF0ZS51c2VyVmFsdWVzW2tleV07XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBSZWR1Y2VycztcclxuIiwiaW1wb3J0IE9iamVjdFV0aWxzIGZyb20gJy4uL3V0aWxzL09iamVjdFV0aWxzJztcclxuaW1wb3J0IEdldHRlcnMgZnJvbSAnLi9HZXR0ZXJzJztcclxuaW1wb3J0IFJlZHVjZXJzIGZyb20gJy4vUmVkdWNlcnMnO1xyXG5pbXBvcnQgU3RhdGUgZnJvbSAnLi9TdGF0ZSc7XHJcblxyXG5jb25zdCB7IHN0YXRlIH0gPSBuZXcgU3RhdGUoKTtcclxuY29uc3QgZ2V0dGVyID0gbmV3IEdldHRlcnMoc3RhdGUpO1xyXG5jb25zdCByZWR1Y2VyID0gbmV3IFJlZHVjZXJzKHN0YXRlKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuICBnZXR0ZXJzOiBnZXR0ZXIsXHJcbiAgcmVkdWNlcnM6IHJlZHVjZXIsXHJcbiAgYWRkUmVkdWNlcnM6IGZ1bmN0aW9uIChyZWR1Y2VyczogYW55KSB7XHJcbiAgICB0aGlzLnJlZHVjZXJzID0gT2JqZWN0VXRpbHMubWVyZ2VEZWVwKHRoaXMucmVkdWNlcnMsIHJlZHVjZXJzKTtcclxuICB9LFxyXG4gIGFkZEdldHRlcnM6IGZ1bmN0aW9uIChnZXR0ZXJzOiBhbnkpIHtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFxyXG4gICAgICB0aGlzLmdldHRlcnMsXHJcbiAgICAgIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKGdldHRlcnMucHJvdG90eXBlKSxcclxuICAgICk7XHJcbiAgfSxcclxufTtcclxuIiwiZXhwb3J0IGVudW0gTG9nTGV2ZWxzIHtcclxuICBJTkZPLFxyXG4gIFdBUk4sXHJcbiAgRVJST1IsXHJcbn1cclxuIiwiaW1wb3J0IHsgTG9nTGV2ZWxzIH0gZnJvbSAnLi4vZW51bSc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDb25zb2xlTG9nZ2VyIHtcclxuICAvKipcclxuICAgKiBCcm93c2VyJ3MgY29uc29sZSBsb2dnZXIgcGx1Z2luLlxyXG4gICAqIEBwYXJhbSB7TG9nTGV2ZWxzfSBsZXZlbCBMb2cgbGV2ZWxcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gbWVzc2FnZSBMb2cgbWVzc2FnZVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgbG9nKGxldmVsOiBMb2dMZXZlbHMsIG1lc3NhZ2U6IHN0cmluZykge1xyXG4gICAgc3dpdGNoIChsZXZlbCkge1xyXG4gICAgICBjYXNlIExvZ0xldmVscy5XQVJOOlxyXG4gICAgICAgIGNvbnNvbGUud2FybihtZXNzYWdlKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBMb2dMZXZlbHMuRVJST1I6XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihtZXNzYWdlKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcpIHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKG1lc3NhZ2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBicmVhaztcclxuICAgIH1cclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFN0b3JlIGZyb20gJy4uL3N0b3JlJztcclxuaW1wb3J0IHsgTG9nTGV2ZWxzIH0gZnJvbSAnLi9lbnVtJztcclxuaW1wb3J0IENvbnNvbGVMb2dnZXIgZnJvbSAnLi9wbHVnaW5zL0NvbnNvbGVMb2dnZXInO1xyXG5cclxuLyoqXHJcbiAqIEB0eXBlZGVmIHtpbXBvcnQoXCJjb3JlL3R5cGVzL2ludGVyZmFjZXNcIikuSUdlbmVyaWNPYmplY3R9IElHZW5lcmljT2JqZWN0XHJcbiAqL1xyXG5jbGFzcyBMb2dnZXIge1xyXG4gIC8qKlxyXG4gICAqIEluZm8gbG9nc1xyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBtZXNzYWdlIExvZ2dlciBtZXNzYWdlXHJcbiAgICogQHBhcmFtIHtJR2VuZXJpY09iamVjdH0gZGF0YSBBZGRpdGlvbmFsIGRldGFpbHMgdG8gbG9nXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBpbmZvKG1lc3NhZ2U6IHN0cmluZywgZGF0YT86IElHZW5lcmljT2JqZWN0KSB7XHJcbiAgICBMb2dnZXIubG9nKExvZ0xldmVscy5JTkZPLCBtZXNzYWdlLCBkYXRhKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFdhcm5pbmcgbG9nc1xyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBtZXNzYWdlIExvZ2dlciBtZXNzYWdlXHJcbiAgICogQHBhcmFtIHtJR2VuZXJpY09iamVjdH0gZGF0YSBBZGRpdGlvbmFsIGRldGFpbHMgdG8gbG9nXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyB3YXJuKG1lc3NhZ2U6IHN0cmluZywgZGF0YT86IElHZW5lcmljT2JqZWN0KSB7XHJcbiAgICBMb2dnZXIubG9nKExvZ0xldmVscy5XQVJOLCBtZXNzYWdlLCBkYXRhKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEVycm9yIGxvZ3NcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gbWVzc2FnZSBMb2dnZXIgbWVzc2FnZVxyXG4gICAqIEBwYXJhbSB7SUdlbmVyaWNPYmplY3R9IGRhdGEgQWRkaXRpb25hbCBkZXRhaWxzIHRvIGxvZ1xyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgZXJyb3IobWVzc2FnZTogc3RyaW5nLCBkYXRhPzogSUdlbmVyaWNPYmplY3QpIHtcclxuICAgIExvZ2dlci5sb2coTG9nTGV2ZWxzLkVSUk9SLCBtZXNzYWdlLCBkYXRhKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIExvZ3MgdGhlIG1lc3NhZ2UgdXNpbmcgdGhlIHBsdWdpbiBiYXNlZCBpbiBsZXZlbC5cclxuICAgKiBAcGFyYW0ge0xvZ0xldmVsc30gbG9nTGV2ZWwgTG9nIGxldmVsXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IG1lc3NhZ2UgTG9nZ2VyIG1lc3NhZ2VcclxuICAgKiBAcGFyYW0ge0lHZW5lcmljT2JqZWN0fSBkYXRhIEFkZGl0aW9uYWwgZGV0YWlscyB0byBsb2dcclxuICAgKi9cclxuICBwcml2YXRlIHN0YXRpYyBsb2coXHJcbiAgICBsb2dMZXZlbDogTG9nTGV2ZWxzLFxyXG4gICAgbWVzc2FnZTogc3RyaW5nLFxyXG4gICAgZGF0YT86IElHZW5lcmljT2JqZWN0LFxyXG4gICkge1xyXG4gICAgY29uc3QgZm9ybWF0dGVkTWVzc2FnZSA9IExvZ2dlci5mb3JtYXRMb2dNZXNzYWdlKGxvZ0xldmVsLCBtZXNzYWdlLCBkYXRhKTtcclxuXHJcbiAgICBTdG9yZS5yZWR1Y2Vycy5zYXZlRGVidWdJbmZvKHsgbG9nOiBmb3JtYXR0ZWRNZXNzYWdlIH0pO1xyXG4gICAgQ29uc29sZUxvZ2dlci5sb2cobG9nTGV2ZWwsIGZvcm1hdHRlZE1lc3NhZ2UpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRm9ybWF0cyB0aGUgbG9nZ2VyIG1lc3NhZ2UuXHJcbiAgICogQHBhcmFtIHtMb2dMZXZlbHN9IGxvZ0xldmVsIExvZyBsZXZlbFxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBtZXNzYWdlIExvZ2dlciBtZXNzYWdlXHJcbiAgICogQHBhcmFtIHtJR2VuZXJpY09iamVjdH0gZGF0YSBBZGRpdGlvbmFsIGRldGFpbHMgdG8gbG9nXHJcbiAgICogQHJldHVybnMge3N0cmluZ30gRm9ybWF0dGVkIGxvZ2dlciBtZXNzYWdlXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBzdGF0aWMgZm9ybWF0TG9nTWVzc2FnZShcclxuICAgIGxvZ0xldmVsOiBMb2dMZXZlbHMsXHJcbiAgICBtZXNzYWdlOiBzdHJpbmcsXHJcbiAgICBkYXRhPzogSUdlbmVyaWNPYmplY3QsXHJcbiAgKTogc3RyaW5nIHtcclxuICAgIGNvbnN0IHN0cmluZ2lmaWVkRGF0YSA9IGRhdGEgPyBgfCAke0pTT04uc3RyaW5naWZ5KGRhdGEpfWAgOiAnJztcclxuICAgIHJldHVybiBgWyR7TG9nTGV2ZWxzW2xvZ0xldmVsXX1dICR7bWVzc2FnZX0gJHtzdHJpbmdpZmllZERhdGF9YDtcclxuICB9XHJcbn1cclxuZXhwb3J0IGRlZmF1bHQgTG9nZ2VyO1xyXG4iLCJpbXBvcnQgeyBQcmVmZXJlbmNlIH0gZnJvbSAnY29yZS9jb25zdGFudHMvZW51bXMnO1xyXG5pbXBvcnQgTG9nZ2VyIGZyb20gJ2NvcmUvbG9nZ2VyJztcclxuXHJcbmV4cG9ydCBjbGFzcyBDb25zZW50RW5jb2RpbmdTZXJ2aWNlIHtcclxuICBwdWJsaWMgc3RhdGljIENPTlNFTlRWRVJTSU9OID0gJ2NvbnNlbnRWZXJzaW9uJztcclxuICBwdWJsaWMgc3RhdGljIENPTlNFTlRJRCA9ICdjb25zZW50SWQnO1xyXG4gIHB1YmxpYyBzdGF0aWMgQUNDRVBUQUxMID0gJ2FjY2VwdEFsbCc7XHJcbiAgcHVibGljIHN0YXRpYyBERUNMSU5FQUxMID0gJ2RlY2xpbmVBbGwnO1xyXG4gIHB1YmxpYyBzdGF0aWMgQ09VTlRSWSA9ICdjb3VudHJ5JztcclxuXHJcbiAgLyoqXHJcbiAgICogRW5jb2RlIHVzZXIncyBjb25zZW50IHByZWZlcmVuY2VcclxuICAgKiBAcGFyYW0gIHtpbXBvcnQoXCJjb3JlL3R5cGVzL2ludGVyZmFjZXNcIikuSVVzZXJDb25zZW50fSBjb25zZW50IHVzZXIncyBjb25zZW50IG9iamVjdFxyXG4gICAqIEBwYXJhbSAge2ltcG9ydChcImNvcmUvdHlwZXMvaW50ZXJmYWNlc1wiKS5JQ29yZUNvbnNlbnRNb2RlbH0gbW9kZWwgY3VycmVudCBzZWxlY3RlZCBjb25zZW50IG1vZGVsXHJcbiAgICogQHJldHVybnMge3N0cmluZ30gZW5jb2RlZCBjb25zZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBlbmNvZGVDb25zZW50KFxyXG4gICAgY29uc2VudDogSVVzZXJDb25zZW50LFxyXG4gICAgbW9kZWw6IElDb3JlTW9kZWwsXHJcbiAgKTogc3RyaW5nIHtcclxuICAgIExvZ2dlci5pbmZvKCdlbmNvZGluZyBjb25zZW50JywgeyBjb25zZW50LCBtb2RlbCB9KTtcclxuICAgIGNvbnN0IHsgcHJlZmVyZW5jZXMgfSA9IGNvbnNlbnQ7XHJcbiAgICBjb25zdCBlbmNvZGVkQ29uc2VudFN0cmluZyA9IE9iamVjdC5rZXlzKHByZWZlcmVuY2VzKVxyXG4gICAgICAubWFwKGNhdGVnb3J5ID0+IHtcclxuICAgICAgICByZXR1cm4gYCR7Y2F0ZWdvcnl9PSR7XHJcbiAgICAgICAgICBwcmVmZXJlbmNlc1tjYXRlZ29yeV0gPT09IFByZWZlcmVuY2UuT05cclxuICAgICAgICAgICAgPyBQcmVmZXJlbmNlLk9OXHJcbiAgICAgICAgICAgIDogUHJlZmVyZW5jZS5PRkZcclxuICAgICAgICB9YDtcclxuICAgICAgfSlcclxuICAgICAgLmpvaW4oJyUnKTtcclxuICAgIExvZ2dlci5pbmZvKGBlbmNvZGVkIGNvbnNlbnQgc3RyaW5nOiAke2VuY29kZWRDb25zZW50U3RyaW5nfWApO1xyXG4gICAgcmV0dXJuIGVuY29kZWRDb25zZW50U3RyaW5nO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHN0YXRpYyBlbmNvZGVDb25zZW50TWV0YWRhdGEoXHJcbiAgICBjb25zZW50OiBJVXNlckNvbnNlbnQsXHJcbiAgICBtb2RlbDogSUNvcmVNb2RlbCxcclxuICAgIGJhbm5lclRyYWNrZXJDYXRlZ29yaWVzOiBJVHJhY2tlckNhdGVnb3J5W10sXHJcbiAgICBjb3VudHJ5OiBzdHJpbmcsXHJcbiAgKTogc3RyaW5nIHtcclxuICAgIExvZ2dlci5pbmZvKCdlbmNvZGluZyBjb25zZW50JywgeyBjb25zZW50LCBtb2RlbCB9KTtcclxuICAgIGNvbnN0IHsgcHJlZmVyZW5jZXMgfSA9IGNvbnNlbnQ7XHJcbiAgICBsZXQgZW5jb2RlZENvbnNlbnRTdHJpbmcgPVxyXG4gICAgICBgJHtDb25zZW50RW5jb2RpbmdTZXJ2aWNlLkNPTlNFTlRWRVJTSU9OfT1gICtcclxuICAgICAgKG1vZGVsLnByb3BlcnRpZXMgYXMgSUNvbnNlbnRNb2RlbFByb3BlcnRpZXMpLmNvbnNlbnRWZXJzaW9uLnRvU3RyaW5nKCkgK1xyXG4gICAgICAnJSc7XHJcbiAgICBlbmNvZGVkQ29uc2VudFN0cmluZyArPVxyXG4gICAgICBgJHtDb25zZW50RW5jb2RpbmdTZXJ2aWNlLkNPTlNFTlRJRH09YCArXHJcbiAgICAgIChtb2RlbC5wcm9wZXJ0aWVzIGFzIElDb25zZW50TW9kZWxQcm9wZXJ0aWVzKS5jb25zZW50SWQgK1xyXG4gICAgICAnJSc7XHJcbiAgICBsZXQgYWNjZXB0QWxsID0gdHJ1ZSxcclxuICAgICAgZGVjbGluZUFsbCA9IHRydWU7XHJcbiAgICBiYW5uZXJUcmFja2VyQ2F0ZWdvcmllcy5mb3JFYWNoKGJhbm5lclRyYWNrZXJDYXRlZ29yeSA9PiB7XHJcbiAgICAgIGlmICghYmFubmVyVHJhY2tlckNhdGVnb3J5LnByb3BlcnRpZXMuaXNFc3NlbnRpYWwpIHtcclxuICAgICAgICBpZiAocHJlZmVyZW5jZXNbYmFubmVyVHJhY2tlckNhdGVnb3J5Lm5hbWVdID09PSBQcmVmZXJlbmNlLk9GRilcclxuICAgICAgICAgIGFjY2VwdEFsbCA9IGZhbHNlO1xyXG4gICAgICAgIGVsc2UgZGVjbGluZUFsbCA9IGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIGVuY29kZWRDb25zZW50U3RyaW5nICs9XHJcbiAgICAgIGAke0NvbnNlbnRFbmNvZGluZ1NlcnZpY2UuQUNDRVBUQUxMfT1gICtcclxuICAgICAgKGFjY2VwdEFsbCA/IFByZWZlcmVuY2UuT04gOiBQcmVmZXJlbmNlLk9GRikgK1xyXG4gICAgICAnJSc7XHJcbiAgICBlbmNvZGVkQ29uc2VudFN0cmluZyArPVxyXG4gICAgICBgJHtDb25zZW50RW5jb2RpbmdTZXJ2aWNlLkRFQ0xJTkVBTEx9PWAgK1xyXG4gICAgICAoZGVjbGluZUFsbCA/IFByZWZlcmVuY2UuT04gOiBQcmVmZXJlbmNlLk9GRikgK1xyXG4gICAgICAnJSc7XHJcbiAgICBlbmNvZGVkQ29uc2VudFN0cmluZyArPVxyXG4gICAgICBgJHtDb25zZW50RW5jb2RpbmdTZXJ2aWNlLkNPVU5UUll9PWAgKyBjb3VudHJ5ICsgJyUnO1xyXG4gICAgTG9nZ2VyLmluZm8oYGVuY29kZWQgY29uc2VudCBtZXRhZGF0YSBzdHJpbmc6ICR7ZW5jb2RlZENvbnNlbnRTdHJpbmd9YCk7XHJcbiAgICByZXR1cm4gZW5jb2RlZENvbnNlbnRTdHJpbmc7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBEZWNvZGUgZW5jb2RlZCBjb25zZW50IHN0cmluZy5cclxuICAgKiBAcGFyYW0gIHtzdHJpbmd9IGVuY29kZWRDb25zZW50U3RyaW5nIGVuY29kZWQgY29uc2VudFxyXG4gICAqIEByZXR1cm5zIHtpbXBvcnQoXCJjb3JlL3R5cGVzL2ludGVyZmFjZXNcIikuSVVzZXJDb25zZW50fSBvYmplY3QgaGF2aW5nIHVzZXIgcHJlZmVyZW5jZSBmb3IgYWxsIHRyYWNrZXIgY2F0ZWdvcmllc1xyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgZGVjb2RlQ29uc2VudFN0cmluZyhcclxuICAgIGVuY29kZWRDb25zZW50U3RyaW5nOiBzdHJpbmcsXHJcbiAgKTogSVVzZXJDb25zZW50IHtcclxuICAgIExvZ2dlci5pbmZvKGBkZWNvZGluZyBjb25zZW50IHN0cmluZzogJHtlbmNvZGVkQ29uc2VudFN0cmluZ31gKTtcclxuICAgIGNvbnN0IHByZWZlcmVuY2VzOiBTdHJpbmdLZXlWYWx1ZSA9IHt9O1xyXG4gICAgZW5jb2RlZENvbnNlbnRTdHJpbmc/LnNwbGl0KCclJyk/LmZvckVhY2gocGFpclN0ciA9PiB7XHJcbiAgICAgIGNvbnN0IHBhaXIgPSBwYWlyU3RyLnNwbGl0KCc9Jyk7XHJcbiAgICAgIGlmIChwYWlyLmxlbmd0aCAhPT0gMikgcmV0dXJuO1xyXG4gICAgICBjb25zdCBrZXkgPSBwYWlyWzBdO1xyXG4gICAgICBjb25zdCB2YWwgPSBwYWlyWzFdO1xyXG4gICAgICBpZiAoXHJcbiAgICAgICAga2V5ICE9PSBDb25zZW50RW5jb2RpbmdTZXJ2aWNlLkNPTlNFTlRWRVJTSU9OICYmXHJcbiAgICAgICAga2V5ICE9PSBDb25zZW50RW5jb2RpbmdTZXJ2aWNlLkNPTlNFTlRJRFxyXG4gICAgICApIHtcclxuICAgICAgICBwcmVmZXJlbmNlc1trZXldID0gdmFsO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIExvZ2dlci5pbmZvKCdkZWNvZGVkIGNvbnNlbnQnLCB7IHByZWZlcmVuY2VzIH0pO1xyXG4gICAgcmV0dXJuIHsgcHJlZmVyZW5jZXMgfTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCB2ZXJzaW9uIGZyb20gZW5jb2RlZCBjb25zZW50IG1ldGFkYXRhIHN0cmluZ1xyXG4gICAqIEBwYXJhbSAge3N0cmluZ30gZW5jb2RlZENvbnNlbnRTdHJpbmcgZW5jb2RlZCBjb25zZW50IG1ldGFkYXRhXHJcbiAgICogQHJldHVybnMge251bWJlcn0gdmVyc2lvblxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgZ2V0VmVyc2lvbkZyb21NZXRhZGF0YVN0cmluZyhcclxuICAgIGVuY29kZWRDb25zZW50U3RyaW5nOiBzdHJpbmcsXHJcbiAgKTogbnVtYmVyIHtcclxuICAgIGNvbnN0IG1hdGNoID0gZW5jb2RlZENvbnNlbnRTdHJpbmcubWF0Y2goL2NvbnNlbnRWZXJzaW9uPShbXFxkLl0rKSUvKTtcclxuICAgIGlmIChtYXRjaCA9PSBudWxsKSB7XHJcbiAgICAgIHJldHVybiAtMTtcclxuICAgIH1cclxuICAgIGNvbnN0IHJlcyA9IHBhcnNlSW50KG1hdGNoWzFdKTtcclxuICAgIGlmIChpc05hTihyZXMpKSB7XHJcbiAgICAgIHJldHVybiAtMTtcclxuICAgIH1cclxuICAgIExvZ2dlci5pbmZvKFxyXG4gICAgICBgZ2V0VmVyc2lvblN0cmluZyBzdHI6ICR7ZW5jb2RlZENvbnNlbnRTdHJpbmd9IGZvdW5kIGNvbnNlbnRWZXJzaW9uOiAke3Jlc31gLFxyXG4gICAgKTtcclxuICAgIHJldHVybiByZXM7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZXQgbW9kZWwgbmFtZSBmcm9tIGVuY29kZWQgY29uc2VudCBtZXRhZGF0YSBzdHJpbmdcclxuICAgKiBAcGFyYW0gIHtzdHJpbmd9IGVuY29kZWRDb25zZW50U3RyaW5nIGVuY29kZWQgY29uc2VudCBtZXRhZGF0YVxyXG4gICAqIEByZXR1cm5zIHtzdHJpbmcgfCB1bmRlZmluZWR9IG5hbWVcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGdldE1vZGVsSWRGcm9tTWV0YWRhdGFTdHJpbmcoXHJcbiAgICBlbmNvZGVkQ29uc2VudFN0cmluZzogc3RyaW5nLFxyXG4gICk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XHJcbiAgICBjb25zdCBtYXRjaCA9IGVuY29kZWRDb25zZW50U3RyaW5nLm1hdGNoKC9jb25zZW50SWQ9KFteJV0rKSUvKTtcclxuICAgIGlmIChtYXRjaCA9PSBudWxsKSB7XHJcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcbiAgICBMb2dnZXIuaW5mbyhcclxuICAgICAgYGdldE1vZGVsSWRGcm9tU3RyaW5nIHN0cjogJHtlbmNvZGVkQ29uc2VudFN0cmluZ30gZm91bmQgdmVyc2lvbjogJHttYXRjaFsxXX1gLFxyXG4gICAgKTtcclxuICAgIHJldHVybiBtYXRjaFsxXTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCBjb3VudHJ5IGZyb20gZW5jb2RlZCBjb25zZW50IG1ldGFkYXRhIHN0cmluZ1xyXG4gICAqIEBwYXJhbSAge3N0cmluZ30gZW5jb2RlZENvbnNlbnRTdHJpbmcgZW5jb2RlZCBjb25zZW50IG1ldGFkYXRhXHJcbiAgICogQHJldHVybnMge3N0cmluZyB8IHVuZGVmaW5lZH0gbmFtZVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgZ2V0Q291bnRyeUZyb21NZXRhZGF0YVN0cmluZyhcclxuICAgIGVuY29kZWRDb25zZW50U3RyaW5nOiBzdHJpbmcsXHJcbiAgKTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcclxuICAgIGNvbnN0IG1hdGNoID0gZW5jb2RlZENvbnNlbnRTdHJpbmcubWF0Y2goL2NvdW50cnk9KFteJV0rKS8pO1xyXG4gICAgaWYgKG1hdGNoID09IG51bGwpIHtcclxuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH1cclxuICAgIExvZ2dlci5pbmZvKFxyXG4gICAgICBgZ2V0Q291bnRyeUZyb21NZXRhZGF0YVN0cmluZyBzdHI6ICR7ZW5jb2RlZENvbnNlbnRTdHJpbmd9IGZvdW5kIGNvdW50cnk6ICR7bWF0Y2hbMV19YCxcclxuICAgICk7XHJcbiAgICByZXR1cm4gbWF0Y2hbMV07XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc3RhdGljIGdldEFjY2VwdEFsbEZyb21NZXRhZGF0YVN0cmluZyhcclxuICAgIGVuY29kZWRDb25zZW50U3RyaW5nOiBzdHJpbmcsXHJcbiAgKTogYm9vbGVhbiB7XHJcbiAgICBjb25zdCBtYXRjaCA9IGVuY29kZWRDb25zZW50U3RyaW5nLm1hdGNoKC9hY2NlcHRBbGw9KFteJV0rKSUvKTtcclxuICAgIGlmIChtYXRjaCA9PSBudWxsKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIExvZ2dlci5pbmZvKFxyXG4gICAgICBgZ2V0QWNjZXB0QWxsRnJvbVN0cmluZyBzdHI6ICR7ZW5jb2RlZENvbnNlbnRTdHJpbmd9IGZvdW5kIGFjY2VwdEFsbDogJHttYXRjaFsxXX1gLFxyXG4gICAgKTtcclxuICAgIHJldHVybiBtYXRjaFsxXSA9PT0gUHJlZmVyZW5jZS5PTjtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgZ2V0RGVjbGluZUFsbEZyb21NZXRhZGF0YVN0cmluZyhcclxuICAgIGVuY29kZWRDb25zZW50U3RyaW5nOiBzdHJpbmcsXHJcbiAgKTogYm9vbGVhbiB7XHJcbiAgICBjb25zdCBtYXRjaCA9IGVuY29kZWRDb25zZW50U3RyaW5nLm1hdGNoKC9kZWNsaW5lQWxsPShbXiVdKyklLyk7XHJcbiAgICBpZiAobWF0Y2ggPT0gbnVsbCkge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBMb2dnZXIuaW5mbyhcclxuICAgICAgYGdldERlY2xpbmVBbGxGcm9tU3RyaW5nIHN0cjogJHtlbmNvZGVkQ29uc2VudFN0cmluZ30gZm91bmQgZGVjbGluZUFsbDogJHttYXRjaFsxXX1gLFxyXG4gICAgKTtcclxuICAgIHJldHVybiBtYXRjaFsxXSA9PT0gUHJlZmVyZW5jZS5PTjtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHtcclxuICBDb250cm9sVHlwZSxcclxuICBFcnJvclN0cmluZ3MsXHJcbiAgTW9kZWxLaW5kLFxyXG4gIE5vdGljZVR5cGUsXHJcbiAgLy8gUXVlc3Rpb25WYWxpZGF0aW9uLFxyXG4gIFN0eWxlVHlwZSxcclxuICBUZW1wbGF0ZSxcclxufSBmcm9tICdjb3JlL2NvbnN0YW50cy9lbnVtcyc7XHJcbmltcG9ydCB7IHJlZ2lzdGVySGVwbGVycyB9IGZyb20gJy4vaGFuZGxlYmFySGVscGVycyc7XHJcbmltcG9ydCB7IGtpbmQgfSBmcm9tICdjb21tb24vc2RrJztcclxuaW1wb3J0IHtcclxuICByZXBsYWNlRGF0YVByb3BzLFxyXG4gIHJlcGxhY2VEYXRhUHJvcHNJbkxheW91dFZhbHVlcyxcclxufSBmcm9tICcuL2RhdGFQcm9wc0hlbHBlcnMnO1xyXG5pbXBvcnQgeyBDb25zZW50RW5jb2RpbmdTZXJ2aWNlIH0gZnJvbSAnY29uc2VudC9Db25zZW50RW5jb2RpbmdTZXJ2aWNlJztcclxuXHJcbmNsYXNzIFRlbXBsYXRlSGFuZGxlciB7XHJcbiAgcHJpdmF0ZSBzdGF0aWMgaW5pdGlhbGl6ZWQgPSBmYWxzZTtcclxuXHJcbiAgcHVibGljIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgVGVtcGxhdGVIYW5kbGVyLnJlZ2lzdGVyU2hvd1RlbXBsYXRlSGFuZGxlcnMoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJlZ2lzdGVyIGV2ZW50IGhhbmRsZXJzIHRvIG9wZW4vY2xvc2UgZGlmZmVyZW50IHRlbXBsYXRlc1xyXG4gICAqL1xyXG4gIHByaXZhdGUgc3RhdGljIHJlZ2lzdGVyU2hvd1RlbXBsYXRlSGFuZGxlcnMoKSB7XHJcbiAgICB3aW5kb3cuX19NU0ZUX1NES1traW5kXS5FdmVudEJ1cy5vbihcclxuICAgICAgd2luZG93Ll9fTVNGVF9TREtba2luZF0uZW51bXMuUHVibGljRXZlbnRzLlNob3dDb25zZW50Tm90aWNlLFxyXG4gICAgICBUZW1wbGF0ZUhhbmRsZXIuc2hvd0ZpcnN0UGFnZSxcclxuICAgICk7XHJcbiAgICB3aW5kb3cuX19NU0ZUX1NES1traW5kXS5FdmVudEJ1cy5vbihcclxuICAgICAgd2luZG93Ll9fTVNGVF9TREtba2luZF0uZW51bXMuUHVibGljRXZlbnRzLkNsb3NlQ29uc2VudE5vdGljZSxcclxuICAgICAgVGVtcGxhdGVIYW5kbGVyLmhpZGVDb25zZW50Tm90aWNlLFxyXG4gICAgKTtcclxuICAgIHdpbmRvdy5fX01TRlRfU0RLW2tpbmRdLkV2ZW50QnVzLm9uKFxyXG4gICAgICB3aW5kb3cuX19NU0ZUX1NES1traW5kXS5lbnVtcy5FdmVudHMuSW5pdCxcclxuICAgICAgVGVtcGxhdGVIYW5kbGVyLnNhdmVTdHlsZXNPbkluaXQsXHJcbiAgICApO1xyXG4gICAgd2luZG93Ll9fTVNGVF9TREtba2luZF0uRXZlbnRCdXMub24oXHJcbiAgICAgIHdpbmRvdy5fX01TRlRfU0RLW2tpbmRdLmVudW1zLlB1YmxpY0V2ZW50cy5TaG93VGVtcGxhdGUsXHJcbiAgICAgIFRlbXBsYXRlSGFuZGxlci5zaG93VGVtcGxhdGUsXHJcbiAgICApO1xyXG4gICAgd2luZG93Ll9fTVNGVF9TREtba2luZF0uRXZlbnRCdXMub24oXHJcbiAgICAgIHdpbmRvdy5fX01TRlRfU0RLW2tpbmRdLmVudW1zLlB1YmxpY0V2ZW50cy5DbG9zZVRlbXBsYXRlLFxyXG4gICAgICBUZW1wbGF0ZUhhbmRsZXIuY2xvc2VUZW1wbGF0ZSxcclxuICAgICk7XHJcbiAgICB3aW5kb3cuX19NU0ZUX1NES1traW5kXS5FdmVudEJ1cy5vbihcclxuICAgICAgd2luZG93Ll9fTVNGVF9TREtba2luZF0uZW51bXMuUHVibGljRXZlbnRzLkNvbnNlbnRDaGFuZ2VkLFxyXG4gICAgICBUZW1wbGF0ZUhhbmRsZXIuaW5pdCxcclxuICAgICk7XHJcbiAgICB3aW5kb3cuX19NU0ZUX1NES1traW5kXS5FdmVudEJ1cy5vbihcclxuICAgICAgd2luZG93Ll9fTVNGVF9TREtba2luZF0uZW51bXMuRXZlbnRzLkNvbmZpZ1JlYWR5LFxyXG4gICAgICBUZW1wbGF0ZUhhbmRsZXIuaW5pdCxcclxuICAgICk7XHJcbiAgICB3aW5kb3cuX19NU0ZUX1NES1traW5kXS5FdmVudEJ1cy5vbihcclxuICAgICAgd2luZG93Ll9fTVNGVF9TREtba2luZF0uZW51bXMuUHVibGljRXZlbnRzLlNob3dQcmVmZXJlbmNlcyxcclxuICAgICAgVGVtcGxhdGVIYW5kbGVyLnNob3dQcmVmZXJlbmNlcyxcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHN0YXRpYyBzaG93UHJlZmVyZW5jZXMoKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBUZW1wbGF0ZUhhbmRsZXIuc2hvd1RlbXBsYXRlKHsgdGVtcGxhdGVJZDogVGVtcGxhdGUuUHJlZmVyZW5jZXMgfSk7XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIFRlbXBsYXRlSGFuZGxlci5zaG93Rmlyc3RQYWdlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTaG93IHRlbXBsYXRlXHJcbiAgICogQHBhcmFtICB7aW1wb3J0KFwiY29yZS90eXBlcy9pbnRlcmZhY2VzXCIpLklHZW5lcmljT2JqZWN0fSBwYXlsb2FkIHBheWxvYWQgZGF0YVxyXG4gICAqL1xyXG4gIHByaXZhdGUgc3RhdGljIHNob3dUZW1wbGF0ZSh7IHRlbXBsYXRlSWQgfTogSUdlbmVyaWNPYmplY3QpOiB2b2lkIHtcclxuICAgIGlmIChcclxuICAgICAgd2luZG93Ll9fTVNGVF9TREtba2luZF0uU3RvcmUuZ2V0dGVycy5jb21wb25lbnRzICYmXHJcbiAgICAgIHdpbmRvdy5fX01TRlRfU0RLW2tpbmRdLlN0b3JlLmdldHRlcnMuY29tcG9uZW50c1t0ZW1wbGF0ZUlkXVxyXG4gICAgKSB7XHJcbiAgICAgIGNvbnN0IGNvbnNlbnRNb2RlbCA9IHdpbmRvdy5fX01TRlRfU0RLW2tpbmRdLlN0b3JlLmdldHRlcnMuY3VycmVudE1vZGVsO1xyXG4gICAgICBUZW1wbGF0ZUhhbmRsZXIuc2hvd1RlbXBsYXRlSW5JRnJhbWUoXHJcbiAgICAgICAgd2luZG93Ll9fTVNGVF9TREtba2luZF0uU3RvcmUuZ2V0dGVycy5jb21wb25lbnRzW3RlbXBsYXRlSWRdLFxyXG4gICAgICAgIHRlbXBsYXRlSWQsXHJcbiAgICAgICAgW1xyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICB0eXBlOiBTdHlsZVR5cGUuVGV4dCxcclxuICAgICAgICAgICAgdmFsdWU6XHJcbiAgICAgICAgICAgICAgY29uc2VudE1vZGVsPy5sYXlvdXQudWkuY3NzPy5bdGVtcGxhdGVJZC50b0xvd2VyQ2FzZSgpXSB8fCAnJyxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgXSxcclxuICAgICAgICBUZW1wbGF0ZUhhbmRsZXIuZ2V0UGFyZW50RWxlbWVudCh0ZW1wbGF0ZUlkKSxcclxuICAgICAgKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihgVGVtcGxhdGUgOiAke3RlbXBsYXRlSWR9IG5vdCBmb3VuZC5gKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEhpZGUgdGVtcGxhdGVcclxuICAgKiBAcGFyYW0gIHtpbXBvcnQoXCJjb3JlL3R5cGVzL2ludGVyZmFjZXNcIikuSUdlbmVyaWNPYmplY3R9IHBheWxvYWQgcGF5bG9hZCBkYXRhXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBzdGF0aWMgY2xvc2VUZW1wbGF0ZSh7IHRlbXBsYXRlSWQgfTogSUdlbmVyaWNPYmplY3QpOiB2b2lkIHtcclxuICAgIFRlbXBsYXRlSGFuZGxlci5jbG9zZUlGcmFtZSh0ZW1wbGF0ZUlkKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNhdmUgc3R5bGVzIHBhc3NlZCBieSB1c2VyIGluIHdpbmRvdy5fX01TRlRfU0RLW2tpbmRdLlN0b3JlXHJcbiAgICogQHBhcmFtICB7aW1wb3J0KFwiY29yZS90eXBlcy9pbnRlcmZhY2VzXCIpLklJbml0Q29uZmlnfSBjb25maWcgaW5pdCBjb25maWdcclxuICAgKi9cclxuICBwcml2YXRlIHN0YXRpYyBzYXZlU3R5bGVzT25Jbml0KGNvbmZpZzogYW55KSB7XHJcbiAgICBpZiAoY29uZmlnLnN0eWxlcykge1xyXG4gICAgICB3aW5kb3cuX19NU0ZUX1NES1traW5kXS5Mb2dnZXIuaW5mbyhcclxuICAgICAgICAndXNlciBwcm92aWRlZCBzdHlsZXMgcGVyc2lzdGVkIHRvIHdpbmRvdy5fX01TRlRfU0RLW2tpbmRdLlN0b3JlLicsXHJcbiAgICAgICk7XHJcbiAgICAgIHdpbmRvdy5fX01TRlRfU0RLW2tpbmRdLlN0b3JlLnJlZHVjZXJzLnNldFN0eWxlcyhjb25maWcuc3R5bGVzKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgc3RhdGljIHRvUGFzY2FsQ2FzZShzdHI6IGFueSkge1xyXG4gICAgaWYgKHR5cGVvZiBzdHIgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgIHJldHVybiBzdHJbMF0udG9VcHBlckNhc2UoKSArIHN0ci5zbGljZSgxKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gc3RyO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzdGF0aWMgdmFsaWRhdGlvbkFycmF5VG9PYmplY3QodmFsaWRhdGlvbnM6IElWYWxpZGF0aW9uW10pIHtcclxuICAgIHJldHVybiB2YWxpZGF0aW9ucy5yZWR1Y2UoKHByZXZpb3VzLCBjdXJyZW50KSA9PiB7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgLi4ucHJldmlvdXMsXHJcbiAgICAgICAgW1RlbXBsYXRlSGFuZGxlci50b1Bhc2NhbENhc2UoY3VycmVudC50eXBlKV06IGN1cnJlbnQudmFsdWUsXHJcbiAgICAgIH07XHJcbiAgICB9LCB7fSk7XHJcbiAgfVxyXG4gIHByaXZhdGUgc3RhdGljIGFzeW5jIGdldFRlbXBsYXRlRGF0YShjb25zZW50TW9kZWw6IElNb2RlbCkge1xyXG4gICAgY29uc3QgZ3JvdXBlZFRyYW5zbGF0aW9ucyA9XHJcbiAgICAgIHdpbmRvdy5fX01TRlRfU0RLW2tpbmRdLlN0b3JlLmdldHRlcnMudHJhbnNsYXRpb25zO1xyXG4gICAgbGV0IGRhdGE6IGFueSA9IHt9O1xyXG4gICAgZGF0YVtOb3RpY2VUeXBlLlRyYWNrZXJDYXRlZ29yeV0gPSBbXTtcclxuICAgIGRhdGFbQ29udHJvbFR5cGUuUHVycG9zZV0gPSBbXTtcclxuICAgIGNvbnN0IHByZWZlcmVuY2VzID0gd2luZG93Lk1TRlRQcml2YWN5W2tpbmRdLmdldENvbnNlbnQoKS5wcmVmZXJlbmNlcztcclxuICAgIGNvbnN0IHRyYWNrZXJDYXRlZ29yaWVzTWFwID0gbmV3IE1hcDxzdHJpbmcsIElUcmFja2VyQ2F0ZWdvcnk+KCk7XHJcbiAgICBjb25zdCBxdWVzdGlvbk1hcCA9IG5ldyBNYXA8c3RyaW5nLCBJUXVlc3Rpb24+KCk7XHJcbiAgICBjb25zdCBhZGRlZFRyYWNrZXJDYXRlZ29yaWVzID0gbmV3IFNldDxzdHJpbmc+KCk7XHJcbiAgICBpZiAoY29uc2VudE1vZGVsLmtpbmQgPT09IE1vZGVsS2luZC5XZWJDb25zZW50KSB7XHJcbiAgICAgIHdpbmRvdy5fX01TRlRfU0RLW2tpbmRdLlN0b3JlLmdldHRlcnMuYmFubmVyVHJhY2tlckNhdGVnb3JpZXMuZm9yRWFjaChcclxuICAgICAgICBjYXRlZ29yeSA9PiB7XHJcbiAgICAgICAgICB0cmFja2VyQ2F0ZWdvcmllc01hcC5zZXQoY2F0ZWdvcnkub2JqZWN0SWQsIGNhdGVnb3J5KTtcclxuICAgICAgICB9LFxyXG4gICAgICApO1xyXG4gICAgICBjb25zdCBjb25zZW50TWV0YWRhdGEgPVxyXG4gICAgICAgIHdpbmRvdy5fX01TRlRfU0RLW2tpbmRdLlN0b3JlLmdldHRlcnMuZW5jb2RlZENvbnNlbnRNZXRhZGF0YTtcclxuICAgICAgZGF0YVtDb25zZW50RW5jb2RpbmdTZXJ2aWNlLkFDQ0VQVEFMTF0gPVxyXG4gICAgICAgIENvbnNlbnRFbmNvZGluZ1NlcnZpY2UuZ2V0QWNjZXB0QWxsRnJvbU1ldGFkYXRhU3RyaW5nKGNvbnNlbnRNZXRhZGF0YSk7XHJcbiAgICAgIGRhdGFbQ29uc2VudEVuY29kaW5nU2VydmljZS5ERUNMSU5FQUxMXSA9XHJcbiAgICAgICAgQ29uc2VudEVuY29kaW5nU2VydmljZS5nZXREZWNsaW5lQWxsRnJvbU1ldGFkYXRhU3RyaW5nKGNvbnNlbnRNZXRhZGF0YSk7XHJcbiAgICB9IGVsc2UgaWYgKGNvbnNlbnRNb2RlbC5raW5kID09PSBNb2RlbEtpbmQuRFNSU3VibWlzc2lvbikge1xyXG4gICAgICBjb25zZW50TW9kZWwuY29udHJvbHMuZm9yRWFjaChjb250cm9sID0+IHtcclxuICAgICAgICAoY29udHJvbCBhcyBJUXVlc3Rpb25Db250cm9sKS5pbnN0YW5jZXMuZm9yRWFjaChpbnN0YW5jZSA9PiB7XHJcbiAgICAgICAgICBxdWVzdGlvbk1hcC5zZXQoaW5zdGFuY2UubmFtZSwge1xyXG4gICAgICAgICAgICAuLi5pbnN0YW5jZSxcclxuICAgICAgICAgICAgY29udHJvbFR5cGU6IGNvbnRyb2wubmFtZSxcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBncm91cGVkVHJhbnNsYXRpb25zLmZvckVhY2goZ3JvdXBlZFRyYW5zbGF0aW9uID0+XHJcbiAgICAgIE9iamVjdC5rZXlzKGdyb3VwZWRUcmFuc2xhdGlvbikuZm9yRWFjaChuYW1lc3BhY2UgPT4ge1xyXG4gICAgICAgIGlmIChuYW1lc3BhY2UgPT09ICdtb2RlbCcpIHtcclxuICAgICAgICAgIGNvbnN0IGNvbnRyb2xJbnN0YW5jZXM6IGFueSA9IFtdO1xyXG4gICAgICAgICAgY29uc3QgY29udHJvbHNEaXNwbGF5T3JkZXIgPSBjb25zZW50TW9kZWwuY29udHJvbHNEaXNwbGF5T3JkZXIgPz8gW107XHJcbiAgICAgICAgICBjb25zdCBtb2RlbFRyYW5zbGF0aW9ucyA9IGdyb3VwZWRUcmFuc2xhdGlvbltuYW1lc3BhY2VdO1xyXG4gICAgICAgICAgZGVsZXRlIG1vZGVsVHJhbnNsYXRpb25zLnRyYWNrZXJDYXRlZ29yeTtcclxuICAgICAgICAgIE9iamVjdC5rZXlzKG1vZGVsVHJhbnNsYXRpb25zKS5mb3JFYWNoKGZpZWxkID0+IHtcclxuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobW9kZWxUcmFuc2xhdGlvbnNbZmllbGRdKSkge1xyXG4gICAgICAgICAgICAgIG1vZGVsVHJhbnNsYXRpb25zW2ZpZWxkXS5mb3JFYWNoKFxyXG4gICAgICAgICAgICAgICAgKHRyYW5zbGF0aW9uSW5zdGFuY2U6IHtcclxuICAgICAgICAgICAgICAgICAgbmFtZTogc3RyaW5nO1xyXG4gICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uczogU3RyaW5nS2V5QW55VmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgIGNvbnRyb2xUeXBlOiBzdHJpbmc7XHJcbiAgICAgICAgICAgICAgICB9KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRyb2xJbnN0YW5jZSA9IHF1ZXN0aW9uTWFwLmdldChcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc2xhdGlvbkluc3RhbmNlLm5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgIGlmIChjb250cm9sSW5zdGFuY2UgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gY29udHJvbHNEaXNwbGF5T3JkZXIuZmluZEluZGV4KFxyXG4gICAgICAgICAgICAgICAgICAgICAgYyA9PiBjID09PSB0cmFuc2xhdGlvbkluc3RhbmNlLm5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc2xhdGlvbkluc3RhbmNlLnZhbGlkYXRpb25zID1cclxuICAgICAgICAgICAgICAgICAgICAgIFRlbXBsYXRlSGFuZGxlci52YWxpZGF0aW9uQXJyYXlUb09iamVjdChcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbEluc3RhbmNlPy52YWxpZGF0aW9ucyB8fCBbXSxcclxuICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNsYXRpb25JbnN0YW5jZS5jb250cm9sVHlwZSA9XHJcbiAgICAgICAgICAgICAgICAgICAgICBjb250cm9sSW5zdGFuY2U/LmNvbnRyb2xUeXBlO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xzRGlzcGxheU9yZGVyLmxlbmd0aCAhPSAwXHJcbiAgICAgICAgICAgICAgICAgICAgICA/IChjb250cm9sSW5zdGFuY2VzW2luZGV4XSA9IHRyYW5zbGF0aW9uSW5zdGFuY2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICA6IGNvbnRyb2xJbnN0YW5jZXMucHVzaCh0cmFuc2xhdGlvbkluc3RhbmNlKTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIGRhdGEgPSB7IC4uLmRhdGEsIFtmaWVsZF06IG1vZGVsVHJhbnNsYXRpb25zW2ZpZWxkXSB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICBkYXRhW0NvbnRyb2xUeXBlLlB1cnBvc2VdID0gY29udHJvbEluc3RhbmNlcztcclxuICAgICAgICB9IGVsc2UgaWYgKFxyXG4gICAgICAgICAgdHJhY2tlckNhdGVnb3JpZXNNYXAuaGFzKG5hbWVzcGFjZSkgJiZcclxuICAgICAgICAgICFhZGRlZFRyYWNrZXJDYXRlZ29yaWVzLmhhcyhuYW1lc3BhY2UpXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICBjb25zdCBjYXRlZ29yeVRyYW5zbGF0aW9uID0ge1xyXG4gICAgICAgICAgICAuLi5ncm91cGVkVHJhbnNsYXRpb25bbmFtZXNwYWNlXSxcclxuICAgICAgICAgICAgbmFtZTogdHJhY2tlckNhdGVnb3JpZXNNYXAuZ2V0KG5hbWVzcGFjZSk/Lm5hbWUsXHJcbiAgICAgICAgICAgIGlzRXNzZW50aWFsOlxyXG4gICAgICAgICAgICAgIHRyYWNrZXJDYXRlZ29yaWVzTWFwLmdldChuYW1lc3BhY2UpPy5wcm9wZXJ0aWVzPy5pc0Vzc2VudGlhbCxcclxuICAgICAgICAgICAgaXNPbjpcclxuICAgICAgICAgICAgICBwcmVmZXJlbmNlc1t0cmFja2VyQ2F0ZWdvcmllc01hcC5nZXQobmFtZXNwYWNlKT8ubmFtZSB8fCAnJ10gPT09XHJcbiAgICAgICAgICAgICAgJzEnLFxyXG4gICAgICAgICAgfTtcclxuICAgICAgICAgIGRhdGFbTm90aWNlVHlwZS5UcmFja2VyQ2F0ZWdvcnldLnB1c2goY2F0ZWdvcnlUcmFuc2xhdGlvbik7XHJcbiAgICAgICAgICBhZGRlZFRyYWNrZXJDYXRlZ29yaWVzLmFkZChuYW1lc3BhY2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSksXHJcbiAgICApO1xyXG4gICAgZGF0YVtOb3RpY2VUeXBlLlRyYWNrZXJDYXRlZ29yeV0gPSBbXHJcbiAgICAgIC4uLmRhdGFbTm90aWNlVHlwZS5UcmFja2VyQ2F0ZWdvcnldLmZpbHRlcihcclxuICAgICAgICAoY2F0ZWdvcnk6IGFueSkgPT4gY2F0ZWdvcnkuaXNFc3NlbnRpYWwsXHJcbiAgICAgICksXHJcbiAgICAgIC4uLmRhdGFbTm90aWNlVHlwZS5UcmFja2VyQ2F0ZWdvcnldLmZpbHRlcihcclxuICAgICAgICAoY2F0ZWdvcnk6IGFueSkgPT4gIWNhdGVnb3J5LmlzRXNzZW50aWFsLFxyXG4gICAgICApLFxyXG4gICAgXTtcclxuICAgIGRhdGFbJ21zZnQtc2NyaXB0LW9wZW4nXSA9ICc8c2NyaXB0Pic7XHJcbiAgICBkYXRhWydtc2Z0LXNjcmlwdC1jbG9zZSddID0gJzwvc2NyaXB0Pic7XHJcbiAgICB3aW5kb3cuX19NU0ZUX1NES1traW5kXS5Mb2dnZXIuaW5mbygnZ2V0VGVtcGxhdGUgZGF0YSBpbnZva2VkJywge1xyXG4gICAgICBjb25zZW50TW9kZWwsXHJcbiAgICAgIGRhdGEsXHJcbiAgICB9KTtcclxuXHJcbiAgICBjb25zdCBsYXlvdXREZXRhaWxzID0ge1xyXG4gICAgICAuLi5kYXRhLFxyXG4gICAgICAuLi53aW5kb3cuX19NU0ZUX1NES1traW5kXS5TdG9yZS5nZXR0ZXJzLnRlbXBsYXRlRGF0YSxcclxuICAgICAgLi4uKGNvbnNlbnRNb2RlbC5sYXlvdXQ/LnByb3BlcnRpZXMgfHwge30pLFxyXG4gICAgICBjb25zZW50TW9kZWwsXHJcbiAgICAgIG1vZGVsUHJvcHM6IGNvbnNlbnRNb2RlbC5wcm9wZXJ0aWVzLFxyXG4gICAgICAuLi4od2luZG93Ll9fTVNGVF9TREtba2luZF0uU3RvcmUuZ2V0dGVycy5kYXRhUHJvcHMgfHwge30pLFxyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gcmVwbGFjZURhdGFQcm9wc0luTGF5b3V0VmFsdWVzKGxheW91dERldGFpbHMpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUGVyZm9ybSBhbGwgbmVjZXNzYXJ5IHN0ZXBzIGxpa2UgcmVwbGFjaW5nIHBsYWNlaG9sZGVycyBpblxyXG4gICAqIHRlbXBsYXRlcyBkdXJpbmcgaW5pdC5cclxuICAgKi9cclxuICBwcml2YXRlIHN0YXRpYyBhc3luYyBpbml0KCkge1xyXG4gICAgcmVnaXN0ZXJIZXBsZXJzKCk7XHJcbiAgICBpZiAoXHJcbiAgICAgIHdpbmRvdy5fX01TRlRfU0RLW2tpbmRdLlN0b3JlLmdldHRlcnMuY3VycmVudE1vZGVsID09PSB1bmRlZmluZWQgfHxcclxuICAgICAgd2luZG93Ll9fTVNGVF9TREtba2luZF0uU3RvcmUuZ2V0dGVycy50ZW1wbGF0ZSA9PT0gdW5kZWZpbmVkXHJcbiAgICApIHtcclxuICAgICAgd2luZG93Ll9fTVNGVF9TREtba2luZF0uTG9nZ2VyLndhcm4oXHJcbiAgICAgICAgJ0Nhbm5vdCBjYWxsIGluaXQgYmVmb3JlIGNvbmZpZyBpcyByZWFkeS4nLFxyXG4gICAgICApO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgY29uc2VudE1vZGVsID0gd2luZG93Ll9fTVNGVF9TREtba2luZF0uU3RvcmUuZ2V0dGVyc1xyXG4gICAgICAuY3VycmVudE1vZGVsIGFzIElNb2RlbDtcclxuICAgIGNvbnN0IHRlbXBsYXRlID0gd2luZG93Ll9fTVNGVF9TREtba2luZF0uU3RvcmUuZ2V0dGVycy50ZW1wbGF0ZSBhcyBJTGF5b3V0O1xyXG5cclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBUZW1wbGF0ZUhhbmRsZXIuZ2V0VGVtcGxhdGVEYXRhKGNvbnNlbnRNb2RlbCk7XHJcbiAgICB0ZW1wbGF0ZS5wYWdlcy5mb3JFYWNoKHBhZ2UgPT4ge1xyXG4gICAgICBsZXQgdGVtcGxhdGVTdHJpbmc6IHN0cmluZztcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBjb25zdCB0ZW1wbGF0ZSA9IHdpbmRvdy5IYW5kbGViYXJzLmNvbXBpbGUocGFnZS5jc3MgKyBwYWdlLmNvbnRlbnQpO1xyXG4gICAgICAgIHRlbXBsYXRlU3RyaW5nID0gdGVtcGxhdGUoZGF0YSk7XHJcbiAgICAgIH0gY2F0Y2ggKGU6IGFueSkge1xyXG4gICAgICAgIHdpbmRvdy5fX01TRlRfU0RLW2tpbmRdLkxvZ2dlci5lcnJvcihlLm1lc3NhZ2UsIGUpO1xyXG4gICAgICAgIHRlbXBsYXRlU3RyaW5nID0gRXJyb3JTdHJpbmdzLlRlbXBsYXRlRXJyb3I7XHJcbiAgICAgIH1cclxuICAgICAgd2luZG93Ll9fTVNGVF9TREtba2luZF0uU3RvcmUucmVkdWNlcnMuc2V0Q29tcG9uZW50cyh7XHJcbiAgICAgICAgLi4ud2luZG93Ll9fTVNGVF9TREtba2luZF0uU3RvcmUuZ2V0dGVycy5jb21wb25lbnRzLFxyXG4gICAgICAgIFtwYWdlLm5hbWVdOiB0ZW1wbGF0ZVN0cmluZyxcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICAgIHdpbmRvdy5fX01TRlRfU0RLW2tpbmRdLkxvZ2dlci5pbmZvKCdDb21wb25lbnRzIHVwZGF0ZWQnKTtcclxuICAgIGlmICghVGVtcGxhdGVIYW5kbGVyLmluaXRpYWxpemVkKSB7XHJcbiAgICAgIHdpbmRvdy5fX01TRlRfU0RLW2tpbmRdLkV2ZW50QnVzLm9uKFxyXG4gICAgICAgIHdpbmRvdy5fX01TRlRfU0RLW2tpbmRdLmVudW1zLlB1YmxpY0V2ZW50cy5TaG93Rmlyc3RQYWdlLFxyXG4gICAgICAgIFRlbXBsYXRlSGFuZGxlci5zaG93Rmlyc3RQYWdlLFxyXG4gICAgICApO1xyXG4gICAgICBUZW1wbGF0ZUhhbmRsZXIuaW5pdGlhbGl6ZWQgPSB0cnVlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU2hvdyBDb25zZW50IG5vdGljZSB0ZW1wbGF0ZVxyXG4gICAqL1xyXG4gIHByaXZhdGUgc3RhdGljIGFzeW5jIHNob3dGaXJzdFBhZ2UoKSB7XHJcbiAgICBpZiAoIVRlbXBsYXRlSGFuZGxlci5pbml0aWFsaXplZCkge1xyXG4gICAgICBhd2FpdCBUZW1wbGF0ZUhhbmRsZXIuaW5pdCgpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgY29uc2VudE1vZGVsID0gd2luZG93Ll9fTVNGVF9TREtba2luZF0uU3RvcmUuZ2V0dGVycy5jdXJyZW50TW9kZWw7XHJcbiAgICBpZiAoY29uc2VudE1vZGVsID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgd2luZG93Ll9fTVNGVF9TREtba2luZF0uTG9nZ2VyLndhcm4oXHJcbiAgICAgICAgJ0Nhbm5vdCBjYWxsIGluaXQgYmVmb3JlIGNvbnNlbnQgbW9kZWwgaXMgc2VsZWN0ZWQuJyxcclxuICAgICAgKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc3QgaW5pdENvbXBvbmVudCA9XHJcbiAgICAgIHdpbmRvdy5fX01TRlRfU0RLW2tpbmRdLlN0b3JlLmdldHRlcnMuc3RhcnRpbmdMYXlvdXRQYWdlO1xyXG5cclxuICAgIGlmIChcclxuICAgICAgd2luZG93Ll9fTVNGVF9TREtba2luZF0uU3RvcmUuZ2V0dGVycy5jb21wb25lbnRzID09PSB1bmRlZmluZWQgfHxcclxuICAgICAgaW5pdENvbXBvbmVudCA9PT0gdW5kZWZpbmVkIHx8XHJcbiAgICAgIHdpbmRvdy5fX01TRlRfU0RLW2tpbmRdLlN0b3JlLmdldHRlcnMuY29tcG9uZW50c1tpbml0Q29tcG9uZW50XSA9PT1cclxuICAgICAgICB1bmRlZmluZWRcclxuICAgICkge1xyXG4gICAgICB3aW5kb3cuX19NU0ZUX1NES1traW5kXS5Mb2dnZXIuZXJyb3IoJ05vdGljZSB0ZW1wbGF0ZSBub3QgZm91bmQuJyk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IHRlbXBsYXRlID1cclxuICAgICAgd2luZG93Ll9fTVNGVF9TREtba2luZF0uU3RvcmUuZ2V0dGVycy5jb21wb25lbnRzW2luaXRDb21wb25lbnRdO1xyXG5cclxuICAgIFRlbXBsYXRlSGFuZGxlci5zaG93VGVtcGxhdGVJbklGcmFtZShcclxuICAgICAgdGVtcGxhdGUsXHJcbiAgICAgIGluaXRDb21wb25lbnQsXHJcbiAgICAgIFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICB0eXBlOiBTdHlsZVR5cGUuVGV4dCxcclxuICAgICAgICAgIHZhbHVlOlxyXG4gICAgICAgICAgICBjb25zZW50TW9kZWwubGF5b3V0LnVpLmNzcz8uW2luaXRDb21wb25lbnQudG9Mb3dlckNhc2UoKV0gfHwgJycsXHJcbiAgICAgICAgfSxcclxuICAgICAgXSxcclxuICAgICAgVGVtcGxhdGVIYW5kbGVyLmdldFBhcmVudEVsZW1lbnQoaW5pdENvbXBvbmVudCksXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzdGF0aWMgZ2V0UGFyZW50RWxlbWVudCh0ZW1wbGF0ZUlkOiBzdHJpbmcpOiBIVE1MRWxlbWVudCB8IG51bGwge1xyXG4gICAgY29uc3QgcGFyZW50TWFwID1cclxuICAgICAgd2luZG93Ll9fTVNGVF9TREtba2luZF0uU3RvcmUuZ2V0dGVycy5jb25maWcuaW5pdENvbmZpZ1xyXG4gICAgICAgID8uY29tcG9uZW50UGFyZW50TWFwIHx8XHJcbiAgICAgIHdpbmRvdy5fX01TRlRfU0RLW2tpbmRdLlN0b3JlLmdldHRlcnMudGVtcGxhdGVQYXJlbnRNYXA7XHJcbiAgICBjb25zdCBwYXJlbnRFbGVtZW50SWQgPSBwYXJlbnRNYXA/Llt0ZW1wbGF0ZUlkXSB8fCBwYXJlbnRNYXA/LlsnKiddO1xyXG4gICAgaWYgKHBhcmVudEVsZW1lbnRJZCkge1xyXG4gICAgICByZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocGFyZW50RWxlbWVudElkKTtcclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQWRkcyB0ZW1wbGF0ZSB0byBpZnJhbWUgYW5kIGFwcGVuZCBpdCB0byBkb21cclxuICAgKiBAcGFyYW0gIHtzdHJpbmd9IHRlbXBsYXRlIHRlbXBsYXRlIHRvIGFkZFxyXG4gICAqIEBwYXJhbSAge3N0cmluZ30gaWZyYW1lSWQgaWZyYW1lIGlkXHJcbiAgICogQHBhcmFtICB7aW1wb3J0KFwiY29yZS90eXBlcy9pbnRlcmZhY2VzXCIpLklTdHlsZVtdfSBzdHlsZXMgdXNlciBwcm92aWRlZCBzdHlsZXNcclxuICAgKiBAcGFyYW0gIHtIVE1MRWxlbWVudHxudWxsfSBwYXJlbnRFbGVtZW50IGlmIGlmcmFtZSBzaG91bGQgYmUgYWRkZWQgdG8gYSBzcGVjaWZpYyBlbGVtZW50IGluc3RlYWQgb2YgYm9keVxyXG4gICAqL1xyXG4gIHByaXZhdGUgc3RhdGljIHNob3dUZW1wbGF0ZUluSUZyYW1lKFxyXG4gICAgdGVtcGxhdGU6IHN0cmluZyxcclxuICAgIGlmcmFtZUlkOiBzdHJpbmcsXHJcbiAgICBzdHlsZXM6IElTdHlsZVtdID0gW10sXHJcbiAgICBwYXJlbnRFbGVtZW50PzogSFRNTEVsZW1lbnQgfCBudWxsLFxyXG4gICkge1xyXG4gICAgY29uc3QgaWZyYW1lRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlmcmFtZUlkKTtcclxuICAgIGlmIChpZnJhbWVFbGVtZW50KSB7XHJcbiAgICAgIHdpbmRvdy5fX01TRlRfU0RLW2tpbmRdLkxvZ2dlci5pbmZvKFxyXG4gICAgICAgIGBUZW1wbGF0ZTogJHtpZnJhbWVJZH0gaXMgYWxyZWFkeSBvcGVuLmAsXHJcbiAgICAgICk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpZiAoXHJcbiAgICAgICAgdGVtcGxhdGUgPT09IEVycm9yU3RyaW5ncy5UZW1wbGF0ZUVycm9yICYmXHJcbiAgICAgICAgKCF3aW5kb3cuX19NU0ZUX1NES1traW5kXS5TdG9yZS5nZXR0ZXJzLmlzTGl2ZVByZXZpZXdNb2RlIHx8XHJcbiAgICAgICAgICAhd2luZG93Ll9fTVNGVF9TREtba2luZF0uU3RvcmUuZ2V0dGVycy5pc1ByZXZpZXdNb2RlKVxyXG4gICAgICApIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgZGF0YSA9IHtcclxuICAgICAgICBvcmlnaW46IHdpbmRvdy5vcmlnaW4sXHJcbiAgICAgICAgcmVuZGVyVGVtcGxhdGVXaXRob3V0SWZyYW1lOlxyXG4gICAgICAgICAgd2luZG93Ll9fTVNGVF9TREtba2luZF0uU3RvcmUuZ2V0dGVycy5jb25maWcuaW5pdENvbmZpZ1xyXG4gICAgICAgICAgICA/LnJlbmRlclRlbXBsYXRlV2l0aG91dElmcmFtZSxcclxuICAgICAgICBleGVjdXRpb25Db250ZXh0czpcclxuICAgICAgICAgIHdpbmRvdy5fX01TRlRfU0RLW2tpbmRdLlN0b3JlLmdldHRlcnMuY29uZmlnLmluaXRDb25maWdcclxuICAgICAgICAgICAgPy5leGVjdXRpb25Db250ZXh0cyB8fCBbXSxcclxuICAgICAgICBpc0dQQ0VuYWJsZWQ6XHJcbiAgICAgICAgICB3aW5kb3cuX19NU0ZUX1NES1traW5kXS5TdG9yZS5nZXR0ZXJzLmlzR1BDRW5hYmxlZCAmJlxyXG4gICAgICAgICAgd2luZG93Ll9fTVNGVF9TREtba2luZF0uU3RvcmUuZ2V0dGVycy5zaG91bGRIb25vdXJHUEMsXHJcbiAgICAgIH07XHJcbiAgICAgIHRlbXBsYXRlID1cclxuICAgICAgICBgPHNjcmlwdD52YXIgbXNmdERhdGEgPSAke0pTT04uc3RyaW5naWZ5KGRhdGEpfTwvc2NyaXB0PlxyXG4gICAgICAgIDxzY3JpcHQ+JHt3aW5kb3cuX19NU0ZUX1NES1traW5kXS5TdG9yZS5nZXR0ZXJzLnByb3h5SlN9PC9zY3JpcHQ+YCArXHJcbiAgICAgICAgcmVwbGFjZURhdGFQcm9wcyh0ZW1wbGF0ZSk7XHJcbiAgICAgIHdpbmRvdy5fX01TRlRfU0RLW2tpbmRdLlV0aWxzLklGcmFtZVV0aWxzLmNyZWF0ZUlGcmFtZShcclxuICAgICAgICB0ZW1wbGF0ZSxcclxuICAgICAgICBpZnJhbWVJZCxcclxuICAgICAgICBwYXJlbnRFbGVtZW50LFxyXG4gICAgICAgIHN0eWxlcyxcclxuICAgICAgKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEhpZGUgY29uc2VudCBub3RpY2UgaWZyYW1lXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBzdGF0aWMgaGlkZUNvbnNlbnROb3RpY2UoKSB7XHJcbiAgICBjb25zdCBjb25zZW50TW9kZWwgPSB3aW5kb3cuX19NU0ZUX1NES1traW5kXS5TdG9yZS5nZXR0ZXJzLmN1cnJlbnRNb2RlbDtcclxuICAgIGlmIChjb25zZW50TW9kZWwgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICB3aW5kb3cuX19NU0ZUX1NES1traW5kXS5Mb2dnZXIud2FybihcclxuICAgICAgICAnQ2Fubm90IGNhbGwgaGlkZUNvbnNlbnROb3RpY2UgYmVmb3JlIGNvbnNlbnQgbW9kZWwgaXMgc2VsZWN0ZWQuJyxcclxuICAgICAgKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc3QgaW5pdENvbXBvbmVudCA9XHJcbiAgICAgIHdpbmRvdy5fX01TRlRfU0RLW2tpbmRdLlN0b3JlLmdldHRlcnMuc3RhcnRpbmdMYXlvdXRQYWdlO1xyXG5cclxuICAgIGluaXRDb21wb25lbnQgJiYgVGVtcGxhdGVIYW5kbGVyLmNsb3NlSUZyYW1lKGluaXRDb21wb25lbnQpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU2V0IGlmcmFtZSBkaXNwbGF5IHRvIG5vbmVcclxuICAgKiBAcGFyYW0gIHtzdHJpbmd9IGlmcmFtZUlkIGlkIG9mIGlmcmFtZSBlbGVtZW50XHJcbiAgICovXHJcbiAgcHJpdmF0ZSBzdGF0aWMgY2xvc2VJRnJhbWUoaWZyYW1lSWQ6IHN0cmluZykge1xyXG4gICAgY29uc3QgaWZyYW1lRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlmcmFtZUlkKTtcclxuICAgIGlmcmFtZUVsZW1lbnQ/LnBhcmVudEVsZW1lbnQ/LnJlbW92ZUNoaWxkKGlmcmFtZUVsZW1lbnQpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgVGVtcGxhdGVIYW5kbGVyO1xyXG4iLCJpbXBvcnQgeyBQdWJsaWNFdmVudHMgfSBmcm9tICdjb3JlL2NvbnN0YW50cy9lbnVtcyc7XHJcbmltcG9ydCBUZW1wbGF0ZUhhbmRsZXIgZnJvbSAnLi9UZW1wbGF0ZUhhbmRsZXInO1xyXG5pbXBvcnQgeyBraW5kIH0gZnJvbSAnY29tbW9uL3Nkayc7XHJcblxyXG53aW5kb3cub25tZXNzYWdlID0gYXN5bmMgZSA9PiB7XHJcbiAgaWYgKGUub3JpZ2luID09PSAnbnVsbCcpIHtcclxuICAgIGlmIChcclxuICAgICAgd2luZG93Ll9fTVNGVF9TREtba2luZF0uU3RvcmUuZ2V0dGVycy5pc0FjdGlvbkRpc2FibGVkICYmXHJcbiAgICAgIGUuZGF0YS5tZXRob2QgPT09ICd0cmlnZ2VyJ1xyXG4gICAgKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGxldCByZXNwb25zZSA9ICh3aW5kb3cuTVNGVFByaXZhY3lba2luZF0gYXMgYW55KVtlLmRhdGEubWV0aG9kXShcclxuICAgICAgLi4uZS5kYXRhLnBhcmFtcyxcclxuICAgICk7XHJcbiAgICBpZiAocmVzcG9uc2UgaW5zdGFuY2VvZiBQcm9taXNlKSB7XHJcbiAgICAgIHJlc3BvbnNlID0gYXdhaXQgcmVzcG9uc2U7XHJcbiAgICB9XHJcbiAgICBpZiAoZS5kYXRhLnJlc3BvbnNlSWQpIHtcclxuICAgICAgZS5zb3VyY2U/LnBvc3RNZXNzYWdlKHsgLi4uZS5kYXRhLCByZXNwb25zZSB9LCB7IHRhcmdldE9yaWdpbjogJyonIH0pO1xyXG4gICAgfVxyXG4gIH1cclxufTtcclxuXHJcbndpbmRvdy5fX01TRlRfU0RLW2tpbmRdLkV2ZW50QnVzLm9uKFxyXG4gIFB1YmxpY0V2ZW50cy5BbmNob3JUYWdDbGlja2VkLFxyXG4gICh7IGF0dHJpYnV0ZXMgfSkgPT4ge1xyXG4gICAgY29uc3QgYVRhZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcclxuICAgIE9iamVjdC5rZXlzKGF0dHJpYnV0ZXMpLmZvckVhY2goYXR0ck5hbWUgPT4ge1xyXG4gICAgICBhVGFnLnNldEF0dHJpYnV0ZShhdHRyTmFtZSwgYXR0cmlidXRlc1thdHRyTmFtZV0pO1xyXG4gICAgfSk7XHJcbiAgICBhVGFnLmNsaWNrKCk7XHJcbiAgfSxcclxuKTtcclxuXHJcbm5ldyBUZW1wbGF0ZUhhbmRsZXIoKTtcclxuIl0sIm5hbWVzIjpbIlJlcGxheUFsbEV2ZW50cyIsIlJlcGxheUxhdGVzdEV2ZW50IiwiU2tpcEV2ZW50UmVwbGF5IiwiRXZlbnRCdXMiXSwibWFwcGluZ3MiOiI7OztJQUFBO0lBQ0E7QUFDQTtJQUNBO0lBQ0E7QUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtBQUNBO0lBQ0EsSUFBSSxhQUFhLEdBQUcsU0FBUyxDQUFDLEVBQUUsQ0FBQyxFQUFFO0lBQ25DLElBQUksYUFBYSxHQUFHLE1BQU0sQ0FBQyxjQUFjO0lBQ3pDLFNBQVMsRUFBRSxTQUFTLEVBQUUsRUFBRSxFQUFFLFlBQVksS0FBSyxJQUFJLFVBQVUsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxTQUFTLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQztJQUNwRixRQUFRLFVBQVUsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLEtBQUssSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLElBQUksTUFBTSxDQUFDLFNBQVMsQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztJQUMxRyxJQUFJLE9BQU8sYUFBYSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUMvQixDQUFDLENBQUM7QUFDRjtJQUNPLFNBQVMsU0FBUyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUU7SUFDaEMsSUFBSSxJQUFJLE9BQU8sQ0FBQyxLQUFLLFVBQVUsSUFBSSxDQUFDLEtBQUssSUFBSTtJQUM3QyxRQUFRLE1BQU0sSUFBSSxTQUFTLENBQUMsc0JBQXNCLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFHLCtCQUErQixDQUFDLENBQUM7SUFDbEcsSUFBSSxhQUFhLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBQ3hCLElBQUksU0FBUyxFQUFFLEdBQUcsRUFBRSxJQUFJLENBQUMsV0FBVyxHQUFHLENBQUMsQ0FBQyxFQUFFO0lBQzNDLElBQUksQ0FBQyxDQUFDLFNBQVMsR0FBRyxDQUFDLEtBQUssSUFBSSxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDLFNBQVMsR0FBRyxDQUFDLENBQUMsU0FBUyxFQUFFLElBQUksRUFBRSxFQUFFLENBQUMsQ0FBQztJQUN6RixDQUFDO0FBQ0Q7SUFDTyxJQUFJLFFBQVEsR0FBRyxXQUFXO0lBQ2pDLElBQUksUUFBUSxHQUFHLE1BQU0sQ0FBQyxNQUFNLElBQUksU0FBUyxRQUFRLENBQUMsQ0FBQyxFQUFFO0lBQ3JELFFBQVEsS0FBSyxJQUFJLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxTQUFTLENBQUMsTUFBTSxFQUFFLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUU7SUFDN0QsWUFBWSxDQUFDLEdBQUcsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQzdCLFlBQVksS0FBSyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUUsSUFBSSxNQUFNLENBQUMsU0FBUyxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDekYsU0FBUztJQUNULFFBQVEsT0FBTyxDQUFDLENBQUM7SUFDakIsTUFBSztJQUNMLElBQUksT0FBTyxRQUFRLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxTQUFTLENBQUMsQ0FBQztJQUMzQyxFQUFDO0FBNEJEO0lBQ08sU0FBUyxTQUFTLENBQUMsT0FBTyxFQUFFLFVBQVUsRUFBRSxDQUFDLEVBQUUsU0FBUyxFQUFFO0lBQzdELElBQUksU0FBUyxLQUFLLENBQUMsS0FBSyxFQUFFLEVBQUUsT0FBTyxLQUFLLFlBQVksQ0FBQyxHQUFHLEtBQUssR0FBRyxJQUFJLENBQUMsQ0FBQyxVQUFVLE9BQU8sRUFBRSxFQUFFLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFO0lBQ2hILElBQUksT0FBTyxLQUFLLENBQUMsS0FBSyxDQUFDLEdBQUcsT0FBTyxDQUFDLEVBQUUsVUFBVSxPQUFPLEVBQUUsTUFBTSxFQUFFO0lBQy9ELFFBQVEsU0FBUyxTQUFTLENBQUMsS0FBSyxFQUFFLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLE9BQU8sQ0FBQyxFQUFFLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRTtJQUNuRyxRQUFRLFNBQVMsUUFBUSxDQUFDLEtBQUssRUFBRSxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLE9BQU8sQ0FBQyxFQUFFLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRTtJQUN0RyxRQUFRLFNBQVMsSUFBSSxDQUFDLE1BQU0sRUFBRSxFQUFFLE1BQU0sQ0FBQyxJQUFJLEdBQUcsT0FBTyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsR0FBRyxLQUFLLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLEVBQUUsUUFBUSxDQUFDLENBQUMsRUFBRTtJQUN0SCxRQUFRLElBQUksQ0FBQyxDQUFDLFNBQVMsR0FBRyxTQUFTLENBQUMsS0FBSyxDQUFDLE9BQU8sRUFBRSxVQUFVLElBQUksRUFBRSxDQUFDLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQztJQUM5RSxLQUFLLENBQUMsQ0FBQztJQUNQLENBQUM7QUFDRDtJQUNPLFNBQVMsV0FBVyxDQUFDLE9BQU8sRUFBRSxJQUFJLEVBQUU7SUFDM0MsSUFBSSxJQUFJLENBQUMsR0FBRyxFQUFFLEtBQUssRUFBRSxDQUFDLEVBQUUsSUFBSSxFQUFFLFdBQVcsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQ3JILElBQUksT0FBTyxDQUFDLEdBQUcsRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLE9BQU8sRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsUUFBUSxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLE9BQU8sTUFBTSxLQUFLLFVBQVUsS0FBSyxDQUFDLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxHQUFHLFdBQVcsRUFBRSxPQUFPLElBQUksQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUM7SUFDN0osSUFBSSxTQUFTLElBQUksQ0FBQyxDQUFDLEVBQUUsRUFBRSxPQUFPLFVBQVUsQ0FBQyxFQUFFLEVBQUUsT0FBTyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRTtJQUN0RSxJQUFJLFNBQVMsSUFBSSxDQUFDLEVBQUUsRUFBRTtJQUN0QixRQUFRLElBQUksQ0FBQyxFQUFFLE1BQU0sSUFBSSxTQUFTLENBQUMsaUNBQWlDLENBQUMsQ0FBQztJQUN0RSxRQUFRLE9BQU8sQ0FBQyxFQUFFLElBQUk7SUFDdEIsWUFBWSxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxRQUFRLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksRUFBRSxPQUFPLENBQUMsQ0FBQztJQUN6SyxZQUFZLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDcEQsWUFBWSxRQUFRLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFDekIsZ0JBQWdCLEtBQUssQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLE1BQU07SUFDOUMsZ0JBQWdCLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLE9BQU8sRUFBRSxLQUFLLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsQ0FBQztJQUN4RSxnQkFBZ0IsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUztJQUNqRSxnQkFBZ0IsS0FBSyxDQUFDLEVBQUUsRUFBRSxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsU0FBUztJQUNqRSxnQkFBZ0I7SUFDaEIsb0JBQW9CLElBQUksRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxTQUFTLEVBQUU7SUFDaEksb0JBQW9CLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEtBQUssR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLEVBQUU7SUFDMUcsb0JBQW9CLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLE1BQU0sRUFBRTtJQUN6RixvQkFBb0IsSUFB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
