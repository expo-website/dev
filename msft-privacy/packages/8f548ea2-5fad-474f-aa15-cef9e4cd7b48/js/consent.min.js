/* eslint-disable */

!function(){"use strict";var x=function(e,t){return(x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function K(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}x(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var L=function(){return(L=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function s(e,c,s,a){return new(s=s||Promise)(function(n,t){function r(e){try{i(a.next(e))}catch(e){t(e)}}function o(e){try{i(a.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,o)}i((a=a.apply(e,c||[])).next())})}function a(r,o){var i,c,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(n){return function(e){var t=[n,e];if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,c&&(s=2&t[0]?c.return:t[0]?c.throw||((s=c.return)&&s.call(c),0):c.next)&&!(s=s.call(c,t[1])).done)return s;switch(c=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,c=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=o.call(r,a)}catch(e){t=[6,e],c=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}}function l(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),c=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)c.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return c}function f(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||((r=r||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}V.isObject=function(e){return e&&"object"==typeof e&&!Array.isArray(e)},V.mergeDeep=function(e){for(var t,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(!n.length)return e;var o=n.shift();if(this.isObject(e)&&this.isObject(o))for(var i in o)this.isObject(o[i])?(e[i]||Object.assign(e,((t={})[i]={},t)),this.mergeDeep(e[i],o[i])):Object.assign(e,((t={})[i]=o[i],t));return this.mergeDeep.apply(this,f([e],l(n),!1))};var t,N,B,i,$=V;function V(){}(e=t=t||{}).PRESENTATION="presentation",e.PREVIEW="preview",e.CONFIG="config",e.HANDLEBAR="handlebar",e.PROXY="proxy",e.DSR="dsr",(e=N=N||{}).PRESENTATION="$jsRootPath/msft-privacy/packages/$packageId/js/presentation.min.js",e.PREVIEW="$jsRootPath/msft-privacy/packages/$packageId/js/preview.min.js",e.HANDLEBAR="$jsRootPath/msft-privacy/packages/$packageId/js/vendor/handlebars.min.js",e.PROXY="$jsRootPath/msft-privacy/packages/$packageId/js/proxy.min.js",e.DSR="$jsRootPath/msft-privacy/packages/$packageId/js/dsr.min.js",(e=B=B||{}).PRESENTATION="msft-presentation.js",e.HANDLEBAR="msft-handlebars.js",e.PROXY="msft-proxy.js",e.DSR="dsr.js",(e=i=i||{}).PATH="path",e.VARIABLE="variable";var H,e=function(e){this.state=e||{config:{},debug:{logs:[],events:[]},custom:{}}},n=(K(r,H=e),Object.defineProperty(r.prototype,"debugInfo",{get:function(){return this.state.debug},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"config",{get:function(){return this.state.config},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"userConsent",{get:function(){return this.state.custom.userConsent},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isHeadless",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isPreviewMode",{get:function(){var e;return(null==(e=this.state.config.initConfig)?void 0:e.preview)||!1},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isActionDisabled",{get:function(){var e;return(null==(e=this.state.config.initConfig)?void 0:e.disableActions)||!1},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isLivePreviewMode",{get:function(){var e;try{return"ConsentLivePreview"===(null==(e=window.parent)?void 0:e.name)}catch(e){return!1}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"presentationVariable",{get:function(){return B.PRESENTATION},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"handlebarVariable",{get:function(){return B.HANDLEBAR},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"proxyVariable",{get:function(){return B.PROXY},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"dsrVariable",{get:function(){return B.DSR},enumerable:!1,configurable:!0}),r);function r(e){return H.call(this,e)||this}K(U,W=e),U.prototype.saveDebugInfo=function(e){var t=e.event,e=e.log;t&&this.state.debug.events.push(t),e&&this.state.debug.logs.push(e)},U.prototype.setUserConsent=function(e){this.state.custom.userConsent=e},U.prototype.setInitConfig=function(e){this.state.config.initConfig=e};var W,o=U;function U(e){return W.call(this,e)||this}var Y,e=(new e).state,c={getters:new n(e),reducers:new o(e),addReducers:function(e){this.reducers=$.mergeDeep(this.reducers,e)},addGetters:function(e){Object.defineProperties(this.getters,Object.getOwnPropertyDescriptors(e.prototype))}},G=((n=Y=Y||{})[n.INFO=0]="INFO",n[n.WARN=1]="WARN",n[n.ERROR=2]="ERROR",z.log=function(e,t){switch(e){case Y.WARN:console.warn(t);break;case Y.ERROR:console.error(t)}},z);function z(){}Q.info=function(e,t){Q.log(Y.INFO,e,t)},Q.warn=function(e,t){Q.log(Y.WARN,e,t)},Q.error=function(e,t){Q.log(Y.ERROR,e,t)},Q.log=function(e,t,n){t=Q.formatLogMessage(e,t,n);c.reducers.saveDebugInfo({log:t}),G.log(e,t)},Q.formatLogMessage=function(e,t,n){n=n?"| ".concat(JSON.stringify(n)):"";return"[".concat(Y[e],"] ").concat(t," ").concat(n)};var X,u=Q;function Q(){}function q(){this.strategy=X.REPLAY_ALL}(o=X=X||{})[o.REPLAY_ALL=0]="REPLAY_ALL",o[o.REPLAY_LATEST=1]="REPLAY_LATEST",o[o.SKIP=2]="SKIP",q.prototype.execute=function(t,e){e.forEach(function(e){e=e.payload;return t(e)})};e=new q;function J(){this.strategy=X.REPLAY_LATEST}J.prototype.execute=function(e,t){t.length&&e(t[t.length-1].payload)};n=new J;function Z(){this.strategy=X.SKIP}Z.prototype.execute=function(){};var o=new Z,ee=((p={})[X.REPLAY_ALL]=e,p[X.REPLAY_LATEST]=n,p[X.SKIP]=o,p),te=(ne.record=function(e,t){this.eventsLogs[e]=this.eventsLogs[e]||[],this.eventsLogs[e].push({payload:t})},ne.replay=function(e,t,n){void 0===n&&(n=this.DEFAULT_STRATEGY),ee[n].execute(t,this.eventsLogs[e]||[])},ne.eventsLogs={},ne.DEFAULT_STRATEGY=X.REPLAY_LATEST,ne);function ne(){}function re(){this.events={},this.eventIdCounter=0}re.getDefaultEventDetails=function(){return{executionCount:0,callbacks:[]}},re.prototype.on=function(e,t,n){var n=void 0===n?{}:n,r=n.sync,r=void 0!==r&&r,n=n.replayStrategy,r=(u.info("Callback registered for event : ".concat(e)),this.eventIdCounter++,{id:this.eventIdCounter,fn:t,sync:r});return this.events[e]=this.events[e]||re.getDefaultEventDetails(),this.events[e].callbacks.push(r),te.replay(e,t,n),this.eventIdCounter},re.prototype.trigger=function(e,r){var t=this,n=(void 0===r&&(r={}),(null==(n=this.events[e])?void 0:n.callbacks)||[]);u.info("Started executing '".concat(n.length,"' callbacks for event '").concat(e,"'"),r),c.reducers.saveDebugInfo({event:e}),n.forEach(function(n){return s(t,void 0,void 0,function(){var t;return a(this,function(e){switch(e.label){case 0:return e.trys.push([0,3,,4]),n.sync?[3,2]:[4,Promise.resolve()];case 1:e.sent(),e.label=2;case 2:return n.fn(r),[3,4];case 3:return t=e.sent(),u.error("Error in executing callback id : ".concat(n.id),t),[3,4];case 4:return[2]}})})}),te.record(e,r),u.info("Completed executing '".concat(n.length,"' callbacks for event '").concat(e,"'"),r),this.events[e]&&this.events[e].executionCount++},re.prototype.off=function(e,t){var n=null==(n=this.events[e])?void 0:n.callbacks.findIndex(function(e){return e.id===t||e.fn===t});"number"==typeof n&&~n?(u.info("Removing event listener '".concat(this.events[e].callbacks[n].id,"' of '").concat(e,"' event")),this.events[e].callbacks.splice(n,1)):u.error("Unable to remove event listener for event '".concat(e,"'. No matching event id or callback found."))},re.prototype.hasListener=function(e){return 0<(null==(e=this.events[e])?void 0:e.callbacks.length)};var oe,ie,ce,se,ae,ue,le,fe,de,pe,ge,ve,he,ye,Se,me,be,we=new re,n=((e=oe=oe||{}).Explicit="Explicit",e.Implicit="Implicit",(n=ie=ie||{}).ConsentChanged="ConsentChanged",n.ShowConsentNotice="ShowConsentNotice",n.ShowFirstPage="ShowFirstPage",n.CloseConsentNotice="CloseConsentNotice",n.AcceptAll="AcceptAll",n.RejectAll="RejectAll",n.ShowTemplate="ShowTemplate",n.CloseTemplate="CloseTemplate",n.UpdateConsent="UpdateConsent",n.AnchorTagClicked="AnchorTagClicked",n.FetchConfig="FetchConfig",n.QuestionsFormSubmitWithoutMetaData="QuestionsFormSubmitWithoutMetaData",n.QuestionsFormSubmit="QuestionsFormSubmit",n.ShowPreferences="ShowPreferences",n.ConsentPreference="MSFTConsentPreference",(o=ce=ce||{}).Init="Init",o.CoreConsentModelSelected="CoreConsentModelSelected",o.ConfigReady="ConfigReady",(p=se=se||{}).Default="Default",p.HeadLess="HeadLess",(e=ae=ae||{}).Url="Url",e.Text="Text",(n=ue=ue||{}).OFF="0",n.ON="1",(le=le||{}).Consent="msft-consent",(o=fe=fe||{}).Script="script",o.IFrame="iframe",(p=de=de||{}).TrackerCategory="trackerCategory",p.Questions="Questions",(pe=pe||{}).TemplateError="<b>There is something wrong with template. Please check logs.</b>",(e=ge=ge||{}).day="day",e.week="week",e.month="month",e.year="year",(n=ve=ve||{}).Text="Text",n.Email="Email",n.Radio="Radio",n.MultiSelect="MultiSelect",n.Select="Select",n.Date="Date",n.PhoneNumber="PhoneNumber",n.CreditCard="CreditCard",n.Number="Number",n.MultiLineText="multiLineText",(he=he||{}).Required="Required",(o=ye=ye||{}).Question="question",o.Placeholder="placeholder",o.Options="options",(p=Se=Se||{}).WebConsent="WebConsent",p.DSRSubmission="DSRSubmission",(e=me=me||{}).WebConsentPackage="WebConsentPackage",e.FIDESPackage="FIDESPackage",e.DSRSubmissionPackage="DSRSubmissionPackage",(be=be||{}).Preferences="Preferences",Object.freeze({__proto__:null,get ConsentModelType(){return oe},get PublicEvents(){return ie},get Events(){return ce},get SDKMode(){return se},get StyleType(){return ae},get Preference(){return ue},get Cookie(){return le},get RegisteredDivType(){return fe},get NoticeType(){return de},get ErrorStrings(){return pe},get IntervalUnits(){return ge},get QuestionType(){return ve},get QuestionValidation(){return he},get QuestionField(){return ye},get ModelKind(){return Se},get PackageKind(){return me},get Template(){return be}})),_e=(Ce.initConsent=function(e){c.reducers.setInitConfig(e),we.trigger(ce.Init,e)},Ce);function Ce(){}Te.init=function(e){_e.initConsent(e)},Te.on=function(e,t,n){n=(void 0===n?{}:n).sync,n=void 0!==n&&n;if(!(e in ce))return we.on(e,t,{sync:n});u.error("Cannot subscribe to internal event '".concat(e,"'."))},Te.trigger=function(e,t){e in ce?u.error("Cannot trigger internal event '".concat(e,"'.")):we.trigger(e,t)},Te.off=function(e,t){e in ce?u.error("Cannot detach listener for internal event '".concat(e,"'.")):we.off(e,t)};o=Te;function Te(){}var d="webConsent",p=(g.createIFrame=function(e,t,n,r){var o,i=null==(o=c.getters.config.initConfig)?void 0:o.renderTemplateWithoutIframe;document.body?g.appendElement(i?g.getDivElement(e,t,null==n):g.getIframeObject(e,t,null==n,r),n):window.addEventListener("DOMContentLoaded",function(){g.appendElement(i?g.getDivElement(e,t,null==n):g.getIframeObject(e,t,null==n,r),n)})},g.getIframeObject=function(e,t,n,r){e='<html><head><style>.msft-iframe-body{background-color: rgb(204 204 204 / 60%);}</style></head><body class="msft-iframe-body">'.concat(e).concat(g.getAllStylesAsText(r),"</body></html>"),r=document.createElement("iframe");return r.setAttribute("style","height:100%;width:100%;border:0;position:".concat(n?"fixed":"relative",";top:0;left:0;z-index:5000;")),r.className="msft-model-container",r.setAttribute("sandbox","allow-scripts allow-forms"),r.id=t,r.srcdoc=e,r},g.getDivElement=function(e,n,t){for(var r=document.createElement("style"),o=(r.appendChild(document.createTextNode(".msft-iframe-body{background-color: rgb(204 204 204 / 60%);height:100%;width:100%}")),document.createElement("div")),e=(o.innerHTML=e,o.className="msft-iframe-body",document.createElement("div")),i=(e.setAttribute("style","height:100%;width:100%;border:0;position:".concat(t?"fixed":"relative",";top:0;left:0;z-index:5000;")),e.className="msft-model-container",e.id=n,e.appendChild(r),e.appendChild(o),e.getElementsByTagName("script")),c=[],s=0;s<i.length;s++){var a,u=document.createElement("script");i[s].src?u.src=i[s].src:(a=document.createTextNode(i[s].innerHTML),u.appendChild(a)),c.push(u)}return setTimeout(function(){c.forEach(function(e){var t;null!=(t=document.getElementById(n))&&t.appendChild(e)})}),e},g.appendElement=function(e,t){(t||document.body).appendChild(e)},g.appendStyles=function(e){var n="";return null!=e&&e.forEach(function(e){var t;e.type==ae.Text?((t=document.createElement("style")).appendChild(document.createTextNode(e.value)),n+=t.outerHTML):e.type==ae.Url&&((t=document.createElement("link")).rel="stylesheet",t.href=e.value,n+=t.outerHTML)}),n},g.getAllStylesAsText=function(e){var t="",n=f(f([],l(document.getElementsByTagName("style")),!1),l(document.getElementsByTagName("link")),!1);return t+=this.appendStyles(e),n.forEach(function(e){return t+=e.outerHTML}),t+=this.appendStyles(window.__MSFT_SDK[d].Store.getters.styles)},g);function g(){}Me.addPublicApis=function(e){this.PublicApis=e},Me.exposeApis=function(){var e=Object.getOwnPropertyNames(window.MSFTPrivacy[d]).filter(function(e){return"function"==typeof e}),t=Object.getOwnPropertyNames(this.PublicApis);e.forEach(function(e){t.includes(e)&&u.warn("Already existing Public Api with the same name '".concat(e,"'"))}),Object.defineProperties(window.MSFTPrivacy[d],Object.getOwnPropertyDescriptors(this.PublicApis))};e=Me;function Me(){}var Ee={OFF:"0",ON:"1",COOKIE_NAME:"APCC",ConsentConfig:"MicrosoftConsentConfig",TrackerCategoryControl:"TrackerCategory",GeoLocations:"GeoLocations",CountriesOrRegions:"CountriesOrRegions"},Pe=Object.freeze({__proto__:null,Constants:Ee}),Oe=(De.topologicalSort=function(e){var n=this,r=this.getAdjacencyList(e),o={};return Object.keys(r).reduce(function(e,t){return e.concat(n.dfs(t,r,o))},[])},De.dfs=function(e,n,r,o){var t,i=this;if((o=void 0===o?{}:o)[e])throw new Error("Circular dependency found!");return r[e]?[]:(o[e]=!0,t=(null==(t=n[e])?void 0:t.reduce(function(e,t){return e.concat(i.dfs(t,n,r,o))},[]))||[],r[e]=!0,o[e]=!1,t.concat(e))},De.getAdjacencyList=function(e){var n={};return e.forEach(function(e){var e=l(e,2),t=e[0],e=e[1];n[t]=n[t]||[],(t=n[t]).push.apply(t,f([],l(e),!1))}),n},De);function De(){}var ke={Translation:function(e,t){var n;u.info("fetch translation callback invoked",{noticeName:e,translation:t}),window.__MSFT_SDK[d].Store.reducers.setTranslations(f(f([],l(window.__MSFT_SDK[d].Store.getters.translations||[]),!1),[((n={})[e]=t.translations,n)],!1))},Model:function(e){u.info("fetch model callback invoked",{val:e}),window.__MSFT_SDK[d].Store.reducers.setCurrentModel(e)},Template:function(e){u.info("fetch template callback invoked",{val:e}),window.__MSFT_SDK[d].Store.reducers.setTemplate(e)}},Fe=function(){var e;return{fields:{packageId:null==(e=window.__MSFT_SDK[d].config)?void 0:e.id,modelId:(null==(e=c.getters.selectedCoreModel)?void 0:e.id)||"",lcid:c.getters.lcid,sdkRootPath:(null==(e=c.getters.config.initConfig)?void 0:e.assetsPath)||(null==(e=c.getters.packageConfigurations)?void 0:e.assetsPath)||"",jsRootPath:(null==(e=c.getters.config.initConfig)?void 0:e.jsPath)||(null==(e=c.getters.config.initConfig)?void 0:e.assetsPath)||(null==(e=c.getters.packageConfigurations)?void 0:e.assetsPath)||"",modelVersion:(null==(e=c.getters.selectedCoreModel)?void 0:e.version.toString())||"0",packageVersion:"latest"},modules:f([{module:t.CONFIG,source:{type:i.VARIABLE,value:"config.js"},dependency:[],callback:function(){window.__MSFT_SDK[d].EventBus.trigger(window.__MSFT_SDK[d].enums.Events.ConfigReady)},condition:function(){return!(c.getters.isPreviewMode||c.getters.isLivePreviewMode)},configs:f(f([],l((null==(e=c.getters.selectedCoreModel)?void 0:e.kind)===Se.WebConsent?window.__MSFT_SDK[d].Store.getters.bannerTrackerCategories.map(function(t){return{source:{type:i.PATH,value:"$sdkRootPath/msft-privacy/packages/$packageId/$packageVersion/models/$modelId/translations/".concat(t.objectId,"/$lcid.json")},callback:function(e){return ke.Translation(t.objectId,e)}}}):[]),!1),[{source:{type:i.PATH,value:"$sdkRootPath/msft-privacy/packages/$packageId/$packageVersion/models/$modelId/translations/model/$lcid.json"},callback:function(e){return ke.Translation("model",e)}},{source:{type:i.PATH,value:"$sdkRootPath/msft-privacy/packages/$packageId/$packageVersion/models/$modelId/model.json"},callback:ke.Model},{source:{type:i.PATH,value:"$sdkRootPath/msft-privacy/packages/$packageId/$packageVersion/models/$modelId/templates/".concat(null==(e=c.getters.selectedCoreModel)?void 0:e.layout.id,"/template.json")},callback:ke.Template}],!1)},{module:t.PRESENTATION,source:c.getters.isPreviewMode?{type:i.VARIABLE,value:c.getters.presentationVariable}:{type:i.PATH,value:N.PRESENTATION},condition:function(){return!c.getters.isHeadless},dependency:f([t.HANDLEBAR,t.CONFIG,t.PROXY],l((null==(e=c.getters.selectedCoreModel)?void 0:e.kind)===Se.DSRSubmission?[t.DSR]:[]),!1)},{module:t.HANDLEBAR,source:c.getters.isPreviewMode?{type:i.VARIABLE,value:c.getters.handlebarVariable}:{type:i.PATH,value:N.HANDLEBAR},condition:function(){return!c.getters.isHeadless},dependency:[]},{module:t.PREVIEW,source:{type:i.PATH,value:N.PREVIEW},condition:function(){return c.getters.isLivePreviewMode},dependency:[]},{module:t.PROXY,source:c.getters.isPreviewMode?{type:i.VARIABLE,value:c.getters.proxyVariable}:{type:i.PATH,value:N.PROXY},callback:function(e){window.__MSFT_SDK[d].Store.reducers.setProxyJS(e)},dependency:[]}],l((null==(e=c.getters.selectedCoreModel)?void 0:e.kind)===Se.DSRSubmission?[{module:t.DSR,source:c.getters.isPreviewMode?{type:i.VARIABLE,value:c.getters.dsrVariable}:{type:i.PATH,value:N.DSR},dependency:[]}]:[]),!1)}},Ae=(Ie.deferred=function(){var n={};return n.promise=new Promise(function(e,t){n.resolve=e,n.reject=t}),n},Ie);function Ie(){}Re.addScriptToDOM=function(e){var t=Ae.deferred(),n=document.createElement("script");return n.type="text/javascript",n.appendChild(document.createTextNode(e)),n.onload=function(){return t.resolve()},n.onerror=function(){return t.reject()},document.body?document.body.appendChild(n):window.addEventListener("DOMContentLoaded",function(){document.body.appendChild(n)}),t.promise};var je=Re;function Re(){}Ke.fetch=function(o){return s(this,void 0,void 0,function(){var t,n,r;return a(this,function(e){return t=Ae.deferred(),n=t.promise,r=t.resolve,we.trigger(ie.FetchConfig,{path:o,callback:function(e){r(e.data)}}),[2,n]})})};var xe=Ke;function Ke(){}Ne.fetch=function(t){return s(this,void 0,void 0,function(){return a(this,function(e){try{return[2,this.exponentialRetry(function(){return fetch(t).then(function(e){if(e.ok)return e;throw new Error(e.statusText)})})]}catch(e){u.error("Unable to fetch asset '".concat(t,"'"))}return[2]})})},Ne.exponentialRetry=function(i,c){return void 0===c&&(c=0),s(this,void 0,void 0,function(){var t,n,r,o=this;return a(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,i()];case 1:return[2,e.sent()];case 2:if(t=e.sent(),(n=c+1)<this.MAX_RETRY_COUNT)return r=Ae.deferred(),setTimeout(function(){o.exponentialRetry(i,n).then(function(){return r.resolve()}).catch(function(){return r.reject()})},this.EXPONENTIAL_DELAY_FACTOR_IN_MS*n),[2,r.promise];throw t;case 3:return[2]}})})},Ne.MAX_RETRY_COUNT=3,Ne.EXPONENTIAL_DELAY_FACTOR_IN_MS=250;var Le=Ne;function Ne(){}Be.fetchWrapper=function(n){var r;return s(this,void 0,void 0,function(){var t;return a(this,function(e){switch(e.label){case 0:return null!=(r=window.__MSFT_SDK[d])&&r.EventBus.hasListener(ie.FetchConfig)?[4,xe.fetch(n)]:[3,2];case 1:return[2,e.sent()];case 2:return[4,Le.fetch(n)];case 3:return[4,null==(t=e.sent())?void 0:t.text()];case 4:return[2,null!=(r=e.sent())?r:""]}})})};var v=Be;function Be(e,t){this.source=e,this.value="",this.callback=t}K(He,$e=v),He.prototype.fetch=function(){return s(this,void 0,void 0,function(){var t;return a(this,function(e){switch(e.label){case 0:return(u.info("Fetching js module",this.source),this.source.type!==i.VARIABLE)?[3,1]:(this.value=window[this.source.value],[3,3]);case 1:return t=this,[4,He.fetchWrapper(this.source.value)];case 2:t.value=e.sent(),e.label=3;case 3:return[2]}})})},He.prototype.addToDOM=function(){return je.addScriptToDOM(this.value)},He.prototype.execute=function(){return this.callback?(this.callback(this.value),Promise.resolve()):this.addToDOM()};var $e,Ve=He;function He(e,t){return $e.call(this,e,t)||this}K(Ye,We=v),Ye.prototype.fetch=function(){var o;return s(this,void 0,void 0,function(){var t,n,r;return a(this,function(e){switch(e.label){case 0:return(u.info("Fetching json module",this.source),this.source.type!==i.VARIABLE)?[3,1]:(this.value=window[this.source.value],[3,4]);case 1:return e.trys.push([1,3,,4]),t=this,r=(n=JSON).parse,[4,Ye.fetchWrapper(this.source.value)];case 2:return t.value=r.apply(n,[e.sent()]),[3,4];case 3:return e.sent(),u.error("Error in fetching : ".concat(null==(o=this.source)?void 0:o.value)),[3,4];case 4:return[2]}})})},Ye.prototype.execute=function(){return this.callback&&this.value?(this.callback(this.value),Promise.resolve()):Promise.reject(new Error("Callback not provided"))};var We,Ue=Ye;function Ye(e,t){return We.call(this,e,t)||this}ze.resolveDependencies=function(){return s(this,void 0,void 0,function(){var t,n,r;return a(this,function(e){switch(e.label){case 0:return r=this.getModuleMapAndDependency(),t=r.moduleMap,r=r.moduleDependency,n=this.fetchAllAssets(t),r=Oe.topologicalSort(r),u.info("dependencies execution sequence",r),[4,Promise.all(n)];case 1:return e.sent(),r.forEach(function(e){t[e]&&t[e].forEach(function(e){return e.execute()})}),[2]}})})},ze.fetchAllAssets=function(e){var t=[];return Object.values(e).forEach(function(e){e.forEach(function(e){t.push(e.fetch())})}),t},ze.getModuleMapAndDependency=function(){var c=this,s={},a=[],e=Fe(),u=e.fields;return e.modules.forEach(function(e){var t=e.module,n=e.source,r=e.configs,o=e.condition,i=e.dependency,e=e.callback;o&&!o()||(s[t]=f([],l(c.getModuleTypeInstances({source:n,callback:e,fields:u})),!1),a.push([t,i||[]]),r&&(s["".concat(t,".configs")]=r.reduce(function(e,t){return e.concat(c.getModuleTypeInstances(L(L({},t),{fields:u})))},[]),a.push([t,["".concat(t,".configs")]])))}),{moduleMap:s,moduleDependency:a}},ze.getModuleTypeInstances=function(e){var t=e.source,n=e.callback,e=e.fields;if(void 0===t)return[];var r=[],o=t.value.split(".").pop();return t.type===i.PATH?this.resolvePathFields({path:t.value,fields:e}).forEach(function(e){ze.addModuleResolver({value:e,type:i.PATH},r,o,n)}):ze.addModuleResolver(t,r,o,n),r},ze.addModuleResolver=function(e,t,n,r){switch(n){case"js":t.push(new Ve(e,r));break;case"json":r?t.push(new Ue(e,r)):u.error("No callback provided for json asset with ".concat(e.type," '").concat(e.value,"'. Skipping it."));break;default:u.error("Cannot resolve dependency. Unknown extension identified for ".concat(e.type," '").concat(e.value,"'"))}},ze.resolvePathFields=function(e){var t=e.path,o=e.fields,e=f([],l(t.matchAll(/\$(\w+)/g)),!1),i=[t];return e.forEach(function(n){var e=o[n[1]],e=Array.isArray(e)?e:[e],r=[];e.forEach(function(t){i.forEach(function(e){r.push(e.replace(n[0],t))})}),i=r}),i};var Ge=ze;function ze(){}function Xe(e){return e&&e.Math==Math&&e}function h(e){try{return!!e()}catch(e){return!0}}function Qe(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}function qe(e){return Ft(kt(e),8,-1)}function Je(e){return null==e}function Ze(e){if(Rt(e))throw xt("Can't call method on "+e);return e}function et(e){return Kt(Lt(e))}function tt(e,t){return arguments.length<2?(n=Vt[e],Ht(n)?n:void 0):Vt[e]&&Vt[e][t];var n}function nt(e){try{return Qt(e)}catch(e){return"Object"}}function rt(e,t){return e=e[t],tn(e)?void 0:en(e)}function ot(t,n){try{an(sn,t,{value:n,configurable:!0,writable:!0})}catch(e){sn[t]=n}return n}function it(e){return fn(ln(e))}function ct(e){return"Symbol("+(void 0===e?"":e)+")_"+yn(++vn+hn,36)}function y(e){var t;return mn(Cn,e)&&(wn||"string"==typeof Cn[e])||(t="Symbol."+e,wn&&mn(Tn,e)?Cn[e]=Tn[e]:Cn[e]=(_n&&Mn?Mn:En)(t)),Cn[e]}function st(e){return e=jn(e,"string"),Rn(e)?e:e+""}function at(e){return Kn?xn.createElement(e):{}}function ut(e){if(Gn(e))return e;throw Xn(zn(e)+" is not an object")}function lt(e){return ur[e]||(ur[e]=ar(e))}function ft(e,t,n,r){var o=(r=r||{}).enumerable,i=void 0!==r.name?r.name:t;if(Pr(n)&&Dr(n,i,r),r.global)o?e[t]=n:kr(t,n);else{try{r.unsafe?e[t]&&(o=!0):delete e[t]}catch(e){}o?e[t]=n:Or.f(e,t,{value:n,enumerable:!1,configurable:!r.nonConfigurable,writable:!r.nonWritable})}return e}function dt(e){return(e=+e)!=e||0==e?0:Ir(e)}function pt(e){return 0<e?Lr(Kr(e),9007199254740991):0}function gt(s){return function(e,t,n){var r,o=Br(e),i=Vr(o),c=$r(n,i);if(s&&t!=t){for(;c<i;)if((r=o[c++])!=r)return!0}else for(;c<i;c++)if((s||c in o)&&o[c]===t)return s||c||0;return!s&&-1}}function vt(e,t){var n,r=Wr(e),o=0,i=[];for(n in r)!Hr(Yr,n)&&Hr(r,n)&&Gr(i,n);for(;t.length>o;)!Hr(r,n=t[o++])||~Ur(i,n)||Gr(i,n);return i}function ht(e,t){return(e=ao[so(e)])==lo||e!=uo&&(io(t)?oo(t):!!t)}function yt(e,t){var n,r,o,i=e.target,c=e.global,s=e.stat,a=c?fo:s?fo[i]||ho(i,{}):(fo[i]||{}).prototype;if(a)for(n in t){if(r=t[n],o=e.dontCallGetSet?(o=po(a,n))&&o.value:a[n],!So(c?n:i+(s?".":"#")+n,e.forced)&&void 0!==o){if(typeof r==typeof o)continue;yo(r,o)}(e.sham||o&&o.sham)&&go(r,"sham",!0),vo(a,n,r,e)}}function St(e){if("Symbol"===To(e))throw TypeError("Cannot convert a Symbol value to a string");return Mo(e)}function mt(){var e=Eo(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}var bt,wt,_t,Ct,v="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},v=Xe("object"==typeof globalThis&&globalThis)||Xe("object"==typeof window&&window)||Xe("object"==typeof self&&self)||Xe("object"==typeof v&&v)||function(){return this}()||Function("return this")(),S={},Tt=!h(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),Mt=!h(function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}),Et=Function.prototype.call,Pt=Mt?Et.bind(Et):function(){return Et.apply(Et,arguments)},m={},b={}.propertyIsEnumerable,Ot=Object.getOwnPropertyDescriptor,w=Ot&&!b.call({1:2},1),w=(m.f=w?function(e){e=Ot(this,e);return!!e&&e.enumerable}:b,Mt),b=Function.prototype,Dt=b.call,b=w&&b.bind.bind(Dt,Dt),w=w?b:function(e){return function(){return Dt.apply(e,arguments)}},b=w,kt=b({}.toString),Ft=b("".slice),b=h,At=qe,It=Object,jt=w("".split),b=b(function(){return!It("z").propertyIsEnumerable(0)})?function(e){return"String"==At(e)?jt(e,""):It(e)}:It,Rt=Je,xt=TypeError,Kt=b,Lt=Ze,b="object"==typeof document&&document.all,b={all:b,IS_HTMLDDA:void 0===b&&void 0!==b},Nt=b.all,_=b.IS_HTMLDDA?function(e){return"function"==typeof e||e===Nt}:function(e){return"function"==typeof e},Bt=_,$t=b.all,b=b.IS_HTMLDDA?function(e){return"object"==typeof e?null!==e:Bt(e)||e===$t}:function(e){return"object"==typeof e?null!==e:Bt(e)},Vt=v,Ht=_,Wt=w({}.isPrototypeOf),C=tt("navigator","userAgent")||"",T=v.process,M=v.Deno,T=T&&T.versions||M&&M.version,M=T&&T.v8,Ut=(P=!(P=M?0<(E=M.split("."))[0]&&E[0]<4?1:+(E[0]+E[1]):P)&&C&&(!(E=C.match(/Edge\/(\d+)/))||74<=E[1])&&(E=C.match(/Chrome\/(\d+)/))?+E[1]:P,P),T=h,M=!!Object.getOwnPropertySymbols&&!T(function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&Ut&&Ut<41}),C=M&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Yt=tt,Gt=_,zt=Wt,Xt=Object,E=C?function(e){return"symbol"==typeof e}:function(e){var t=Yt("Symbol");return Gt(t)&&zt(t.prototype,Xt(e))},Qt=String,qt=_,Jt=nt,Zt=TypeError,en=function(e){if(qt(e))return e;throw Zt(Jt(e)+" is not a function")},tn=Je,nn=Pt,rn=_,on=b,cn=TypeError,P={exports:{}},sn=v,an=Object.defineProperty,T=ot,O="__core-js_shared__",T=v[O]||T(O,{}),un=T,ln=((P.exports=function(e,t){return un[e]||(un[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.26.1",mode:"global",copyright:"? 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.26.1/LICENSE",source:"https://github.com/zloirock/core-js"}),Ze),fn=Object,dn=it,pn=w({}.hasOwnProperty),O=Object.hasOwn||function(e,t){return pn(dn(e),t)},gn=w,vn=0,hn=Math.random(),yn=gn(1..toString),gn=v,Sn=P.exports,mn=O,bn=ct,wn=M,_n=C,Cn=Sn("wks"),Tn=gn.Symbol,Mn=Tn&&Tn.for,En=_n?Tn:Tn&&Tn.withoutSetter||bn,Pn=Pt,On=b,Dn=E,kn=rt,Fn=function(e,t){var n,r;if("string"===t&&rn(n=e.toString)&&!on(r=nn(n,e)))return r;if(rn(n=e.valueOf)&&!on(r=nn(n,e)))return r;if("string"!==t&&rn(n=e.toString)&&!on(r=nn(n,e)))return r;throw cn("Can't convert object to primitive value")},An=TypeError,In=y("toPrimitive"),jn=function(e,t){if(!On(e)||Dn(e))return e;var n=kn(e,In);if(n){if(n=Pn(n,e,t=void 0===t?"default":t),!On(n)||Dn(n))return n;throw An("Can't convert object to primitive value")}return Fn(e,t=void 0===t?"number":t)},Rn=E,M=b,xn=v.document,Kn=M(xn)&&M(xn.createElement),Ln=at,C=!Tt&&!h(function(){return 7!=Object.defineProperty(Ln("div"),"a",{get:function(){return 7}}).a}),Nn=Pt,Bn=m,$n=Qe,Vn=et,Hn=st,Wn=O,Un=C,Yn=Object.getOwnPropertyDescriptor,Sn=(S.f=Tt?Yn:function(e,t){if(e=Vn(e),t=Hn(t),Un)try{return Yn(e,t)}catch(e){}if(Wn(e,t))return $n(!Nn(Bn.f,e,t),e[t])},{}),gn=Tt&&h(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype}),Gn=b,zn=String,Xn=TypeError,Qn=C,qn=ut,Jn=st,Zn=TypeError,er=Object.defineProperty,tr=Object.getOwnPropertyDescriptor,nr="enumerable",rr="configurable",or="writable",bn=(Sn.f=Tt?gn?function(e,t,n){var r;return qn(e),t=Jn(t),qn(n),"function"==typeof e&&"prototype"===t&&"value"in n&&or in n&&!n[or]&&((r=tr(e,t))&&r[or]&&(e[t]=n.value,n={configurable:(rr in n?n:r)[rr],enumerable:(nr in n?n:r)[nr],writable:!1})),er(e,t,n)}:er:function(e,t,n){if(qn(e),t=Jn(t),qn(n),Qn)try{return er(e,t,n)}catch(e){}if("get"in n||"set"in n)throw Zn("Accessors not supported");return"value"in n&&(e[t]=n.value),e},Tt),ir=Sn,cr=Qe,E=bn?function(e,t,n){return ir.f(e,t,cr(1,n))}:function(e,t,n){return e[t]=n,e},M={exports:{}},m=Tt,C=O,bn=Function.prototype,D=m&&Object.getOwnPropertyDescriptor,C=C(bn,"name"),C={EXISTS:C,PROPER:C&&"something"===function(){}.name,CONFIGURABLE:C&&(!m||D(bn,"name").configurable)},m=_,D=T,sr=w(Function.toString),bn=(m(D.inspectSource)||(D.inspectSource=function(e){return sr(e)}),D.inspectSource),m=_,D=v.WeakMap,m=m(D)&&/native code/.test(String(D)),D=P.exports,ar=ct,ur=D("keys"),D={},lr=b,fr=E,dr=O,k=lt,pr=D,gr="Object already initialized",vr=v.TypeError,F=v.WeakMap,hr=m||T.state?((_t=T.state||(T.state=new F)).get=_t.get,_t.has=_t.has,_t.set=_t.set,bt=function(e,t){if(_t.has(e))throw vr(gr);return t.facade=e,_t.set(e,t),t},wt=function(e){return _t.get(e)||{}},function(e){return _t.has(e)}):(pr[Ct=k("state")]=!0,bt=function(e,t){if(dr(e,Ct))throw vr(gr);return t.facade=e,fr(e,Ct,t),t},wt=function(e){return dr(e,Ct)?e[Ct]:{}},function(e){return dr(e,Ct)}),m={set:bt,get:wt,has:hr,enforce:function(e){return hr(e)?wt(e):bt(e,{})},getterFor:function(t){return function(e){if(lr(e)&&(e=wt(e)).type===t)return e;throw vr("Incompatible receiver, "+t+" required")}}},T=h,yr=_,Sr=O,mr=Tt,br=C.CONFIGURABLE,wr=bn,_r=m.enforce,Cr=m.get,Tr=Object.defineProperty,Mr=mr&&!T(function(){return 8!==Tr(function(){},"length",{value:8}).length}),Er=String(String).split("String"),F=M.exports=function(e,t,n){"Symbol("===String(t).slice(0,7)&&(t="["+String(t).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(t="get "+t),n&&n.setter&&(t="set "+t),(!Sr(e,"name")||br&&e.name!==t)&&(mr?Tr(e,"name",{value:t,configurable:!0}):e.name=t),Mr&&n&&Sr(n,"arity")&&e.length!==n.arity&&Tr(e,"length",{value:n.arity});try{n&&Sr(n,"constructor")&&n.constructor?mr&&Tr(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}n=_r(e);return Sr(n,"source")||(n.source=Er.join("string"==typeof t?t:"")),e},Pr=(Function.prototype.toString=F(function(){return yr(this)&&Cr(this).source||wr(this)},"toString"),_),Or=Sn,Dr=M.exports,kr=ot,pr={},Fr=Math.ceil,Ar=Math.floor,Ir=Math.trunc||function(e){e=+e;return(0<e?Ar:Fr)(e)},jr=dt,Rr=Math.max,xr=Math.min,Kr=dt,Lr=Math.min,Nr=pt,Br=et,$r=function(e,t){e=jr(e);return e<0?Rr(e+t,0):xr(e,t)},Vr=function(e){return Nr(e.length)},k={includes:gt(!0),indexOf:gt(!1)},C=w,Hr=O,Wr=et,Ur=k.indexOf,Yr=D,Gr=C([].push),T=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],zr=vt,Xr=T.concat("length","prototype"),F=(pr.f=Object.getOwnPropertyNames||function(e){return zr(e,Xr)},{}),M=(F.f=Object.getOwnPropertySymbols,tt),Qr=pr,qr=F,Jr=ut,Zr=w([].concat),k=M("Reflect","ownKeys")||function(e){var t=Qr.f(Jr(e)),n=qr.f;return n?Zr(t,n(e)):t},eo=O,to=k,no=S,ro=Sn,oo=h,io=_,co=/#|\.prototype\./,so=ht.normalize=function(e){return String(e).replace(co,".").toLowerCase()},ao=ht.data={},uo=ht.NATIVE="N",lo=ht.POLYFILL="P",fo=v,po=S.f,go=E,vo=ft,ho=ot,yo=function(e,t,n){for(var r=to(t),o=ro.f,i=no.f,c=0;c<r.length;c++){var s=r[c];eo(e,s)||n&&eo(n,s)||o(e,s,i(t,s))}},So=ht,C={},pr=(C[y("toStringTag")]="z","[object z]"===String(C)),F=pr,mo=_,bo=qe,wo=y("toStringTag"),_o=Object,Co="Arguments"==bo(function(){return arguments}()),M=F?bo:function(e){var t;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(t=function(e,t){try{return e[t]}catch(e){}}(e=_o(e),wo))?t:Co?bo(e):"Object"==(t=bo(e))&&mo(e.callee)?"Arguments":t},To=M,Mo=String,Eo=ut,k=h,Po=v.RegExp,S=k(function(){var e=Po("a","y");return e.lastIndex=2,null!=e.exec("abcd")}),C=S||k(function(){return!Po("a","y").sticky}),F={BROKEN_CARET:S||k(function(){var e=Po("^r","gy");return e.lastIndex=2,null!=e.exec("str")}),MISSED_STICKY:C,UNSUPPORTED_Y:S},k={},Oo=vt,Do=T,C=Object.keys||function(e){return Oo(e,Do)},ko=Sn,Fo=ut,Ao=et,Io=C;k.f=Tt&&!gn?Object.defineProperties:function(e,t){Fo(e);for(var n,r=Ao(t),o=Io(t),i=o.length,c=0;c<i;)ko.f(e,n=o[c++],r[n]);return e};function jo(){}function Ro(e){e.write(ei("")),e.close();var t=e.parentWindow.Object;return e=null,t}function xo(e){if("Function"===wi(e))return _i(e)}function Ko(o){return function(e,t){var n,e=Ai(Ii(e)),t=Fi(t),r=e.length;return t<0||r<=t?o?"":void 0:(n=Ri(e,t))<55296||56319<n||t+1===r||(r=Ri(e,t+1))<56320||57343<r?o?ji(e,t):n:o?xi(e,t,t+2):r-56320+(n-55296<<10)+65536}}function Lo(e,t,n){return t+(n?Ki(e,t).length:1)}function No(i,c,s,a,u,e){var l=s+i.length,f=a.length,t=Wi;return void 0!==u&&(u=Li(u),t=Hi),$i(e,t,function(e,t){var n;switch(Bi(t,0)){case"$":return"$";case"&":return i;case"`":return Vi(c,0,s);case"'":return Vi(c,l);case"<":n=u[Vi(t,1,-1)];break;default:var r,o=+t;if(0==o)return e;if(f<o)return 0!==(r=Ni(o/10))&&r<=f?void 0===a[r-1]?Bi(t,1):a[r-1]+Bi(t,1):e;n=a[o-1]}return void 0===n?"":n})}function Bo(e,t){var n=e.exec;if(Gi(n))return null!==(n=Ui(n,e,t))&&Yi(n),n;if("RegExp"===zi(e))return Ui(Xi,e,t);throw Qi("RegExp#exec called on incompatible receiver")}function $o(e){var t;return Sc(e)&&(void 0!==(t=e[bc])?!!t:"RegExp"==mc(e))}function Vo(e){var t=e.flags;return void 0!==t||"flags"in Mc||_c(e,"flags")||!Cc(Mc,e)?t:wc(Tc,e)}function Ho(e,t,n){return n>e.length?-1:""===t?n:Kc(e,t,n)}function Wo(e,t){return $c(Bc[e].prototype[t])}var Uo,S=tt("document","documentElement"),Yo=ut,Go=k,zo=T,C=D,Xo=S,Qo=at,qo="prototype",Jo="script",Zo=lt("IE_PROTO"),ei=function(e){return"<"+Jo+">"+e+"</"+Jo+">"},ti=function(){try{Uo=new ActiveXObject("htmlfile")}catch(e){}ti="undefined"==typeof document||document.domain&&Uo?Ro(Uo):(e=Qo("iframe"),t="java"+Jo+":",e.style.display="none",Xo.appendChild(e),e.src=String(t),(t=e.contentWindow.document).open(),t.write(ei("document.F=Object")),t.close(),t.F);for(var e,t,n=zo.length;n--;)delete ti[qo][zo[n]];return ti()},Tt=(C[Zo]=!0,Object.create||function(e,t){var n;return null!==e?(jo[qo]=Yo(e),n=new jo,jo[qo]=null,n[Zo]=e):n=ti(),void 0===t?n:Go.f(n,t)}),gn=h,ni=v.RegExp,k=gn(function(){var e=ni(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}),T=h,ri=v.RegExp,D=T(function(){var e=ri("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}),oi=Pt,S=w,ii=St,ci=mt,C=F,gn=P.exports,si=Tt,ai=m.get,T=k,F=D,ui=gn("native-string-replace",String.prototype.replace),li=RegExp.prototype.exec,fi=li,di=S("".charAt),pi=S("".indexOf),gi=S("".replace),vi=S("".slice),hi=(P=/b*/g,oi(li,k=/a/,"a"),oi(li,P,"a"),0!==k.lastIndex||0!==P.lastIndex),yi=C.BROKEN_CARET,Si=void 0!==/()??/.exec("")[1],D=fi=hi||Si||yi||T||F?function(e){var t,n,r,o,i,c,s=this,a=ai(s),e=ii(e),u=a.raw;if(u)return u.lastIndex=s.lastIndex,f=oi(fi,u,e),s.lastIndex=u.lastIndex,f;var l=a.groups,u=yi&&s.sticky,f=oi(ci,s),a=s.source,d=0,p=e;if(u&&(f=gi(f,"y",""),-1===pi(f,"g")&&(f+="g"),p=vi(e,s.lastIndex),0<s.lastIndex&&(!s.multiline||s.multiline&&"\n"!==di(e,s.lastIndex-1))&&(a="(?: "+a+")",p=" "+p,d++),t=new RegExp("^(?:"+a+")",f)),Si&&(t=new RegExp("^"+a+"$(?!\\s)",f)),hi&&(n=s.lastIndex),r=oi(li,u?t:s,p),u?r?(r.input=vi(r.input,d),r[0]=vi(r[0],d),r.index=s.lastIndex,s.lastIndex+=r[0].length):s.lastIndex=0:hi&&r&&(s.lastIndex=s.global?r.index+r[0].length:n),Si&&r&&1<r.length&&oi(ui,r[0],t,function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(r[o]=void 0)}),r&&l)for(r.groups=i=si(null),o=0;o<l.length;o++)i[(c=l[o])[0]]=r[c[1]];return r}:fi,gn=(yt({target:"RegExp",proto:!0,forced:/./.exec!==D},{exec:D}),Mt),S=Function.prototype,mi=S.apply,bi=S.call,k="object"==typeof Reflect&&Reflect.apply||(gn?bi.bind(mi):function(){return bi.apply(mi,arguments)}),wi=qe,_i=w,Ci=xo,Ti=ft,Mi=D,Ei=h,Pi=y,Oi=E,Di=Pi("species"),ki=RegExp.prototype,P=w,Fi=dt,Ai=St,Ii=Ze,ji=P("".charAt),Ri=P("".charCodeAt),xi=P("".slice),Ki={codeAt:Ko(!1),charAt:Ko(!0)}.charAt,C=w,Li=it,Ni=Math.floor,Bi=C("".charAt),$i=C("".replace),Vi=C("".slice),Hi=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,Wi=/\$([$&'`]|\d{1,2})/g,Ui=Pt,Yi=ut,Gi=_,zi=qe,Xi=D,Qi=TypeError,qi=k,Ji=Pt,T=w,F=function(n,e,t,r){var c,o=Pi(n),s=!Ei(function(){var e={};return e[o]=function(){return 7},7!=""[n](e)}),i=s&&!Ei(function(){var e=!1,t=/a/;return"split"===n&&((t={constructor:{}}).constructor[Di]=function(){return t},t.flags="",t[o]=/./[o]),t.exec=function(){return e=!0,null},t[o](""),!e});s&&i&&!t||(c=Ci(/./[o]),i=e(o,""[n],function(e,t,n,r,o){var e=Ci(e),i=t.exec;return i===Mi||i===ki.exec?s&&!o?{done:!0,value:c(t,n,r)}:{done:!0,value:e(n,t,r)}:{done:!1}}),Ti(String.prototype,n,i[0]),Ti(ki,o,i[1])),r&&Oi(ki[o],"sham",!0)},Mt=h,Zi=ut,ec=_,tc=Je,nc=dt,rc=pt,oc=St,ic=Ze,cc=Lo,sc=rt,ac=No,uc=Bo,lc=y("replace"),fc=Math.max,dc=Math.min,pc=T([].concat),gc=T([].push),vc=T("".indexOf),hc=T("".slice),S="$0"==="a".replace(/./,"$0"),yc=!!/./[lc]&&""===/./[lc]("a","$0"),Sc=(F("replace",function(e,m,b){var w=yc?"$":"$0";return[function(e,t){var n=ic(this),r=tc(e)?void 0:sc(e,lc);return r?Ji(r,e,n,t):Ji(m,oc(n),e,t)},function(e,t){var n=Zi(this),r=oc(e);if("string"==typeof t&&-1===vc(t,w)&&-1===vc(t,"$<")){e=b(m,n,r,t);if(e.done)return e.value}for(var o,i=ec(t),c=(i||(t=oc(t)),n.global),s=(c&&(o=n.unicode,n.lastIndex=0),[]);null!==(d=uc(n,r))&&(gc(s,d),c);)""===oc(d[0])&&(n.lastIndex=cc(r,rc(n.lastIndex),o));for(var a,u="",l=0,f=0;f<s.length;f++){for(var d,p=oc((d=s[f])[0]),g=fc(dc(nc(d.index),r.length),0),v=[],h=1;h<d.length;h++)gc(v,void 0===(a=d[h])?a:String(a));var y=d.groups,S=i?(S=pc([p],v,g,r),void 0!==y&&gc(S,y),oc(qi(t,void 0,S))):ac(p,r,g,v,y,t);l<=g&&(u+=hc(r,l,g)+S,l=g+p.length)}return u+hc(r,l)}]},!!Mt(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})||!S||yc),b),mc=qe,bc=y("match"),wc=Pt,_c=O,Cc=Wt,Tc=mt,Mc=RegExp.prototype,gn=yt,Ec=Pt,E=w,Pc=Ze,Oc=_,Dc=Je,kc=$o,Fc=St,Ac=rt,Ic=Vo,jc=No,Rc=y("replace"),xc=TypeError,Kc=E("".indexOf),Lc=(E("".replace),E("".slice)),Nc=Math.max,Bc=(gn({target:"String",proto:!0},{replaceAll:function(e,t){var n,r,o,i,c,s,a,u=Pc(this),l=0,f=0,d="";if(!Dc(e)){if(kc(e)&&(n=Fc(Pc(Ic(e))),!~Kc(n,"g")))throw xc("`.replaceAll` does not allow non-global regexes");if(n=Ac(e,Rc))return Ec(n,e,u,t)}for(r=Fc(u),o=Fc(e),(i=Oc(t))||(t=Fc(t)),c=o.length,s=Nc(1,c),l=Ho(r,o,0);-1!==l;)a=i?Fc(t(o,l,r)):jc(o,r,l,[],void 0,t),d+=Lc(r,f,l)+a,f=l+c,l=Ho(r,o,l+s);return f<r.length&&(d+=Lc(r,f)),d}}),v),$c=w;Wo("String","replaceAll");var Vc=M;pr||ft(Object.prototype,"toString",pr?{}.toString:function(){return"[object "+Vc(this)+"]"},{unsafe:!0});var Hc,P=!h(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),Wc=O,Uc=_,Yc=it,C=P,Gc=lt("IE_PROTO"),zc=Object,Xc=zc.prototype,D=h,k=_,T=b,F=C?zc.getPrototypeOf:function(e){e=Yc(e);if(Wc(e,Gc))return e[Gc];var t=e.constructor;return Uc(t)&&e instanceof t?t.prototype:e instanceof zc?Xc:null},Mt=ft,Qc=y("iterator"),S=!1;[].keys&&("next"in(Wt=[].keys())?(E=F(F(Wt)))!==Object.prototype&&(Hc=E):S=!0);function qc(){return this}function Jc(){}function Zc(e){if(!us(e))return!1;try{return ps(Jc,ds,e),!0}catch(e){return!1}}function es(e){if(!us(e))return!1;switch(ls(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return hs||!!vs(gs,fs(e))}catch(e){return!0}}k((Hc=!T(Hc)||D(function(){var e={};return Hc[Qc].call(e)!==e})?{}:Hc)[Qc])||Mt(Hc,Qc,function(){return this});var gn={IteratorPrototype:Hc,BUGGY_SAFARI_ITERATORS:S},ts=Sn.f,ns=O,rs=y("toStringTag"),os=gn.IteratorPrototype,is=Tt,cs=Qe,ss=function(e,t,n){(e=e&&!n?e.prototype:e)&&!ns(e,rs)&&ts(e,rs,{configurable:!0,value:t})},as={},v=w,pr=h,us=_,ls=M,fs=bn,ds=[],ps=tt("Reflect","construct"),gs=/^\s*(?:class|function)\b/,vs=v(gs.exec),hs=!gs.exec(Jc);es.sham=!0;function ys(e){var t=ks(this),e=Ds(e),n=Rs(t,RegExp),r=Ds(Is(t)),n=new n(n===RegExp?t.source:t,r),o=!!~Hs(r,"g"),r=!!~Hs(r,"u");return n.lastIndex=Os(t.lastIndex),new Ys(n,e,o,r)}var Ss=!ps||pr(function(){var e;return Zc(Zc.call)||!Zc(Object)||!Zc(function(){e=!0})||e})?es:Zc,ms=nt,bs=TypeError,ws=ut,_s=function(e){if(Ss(e))return e;throw bs(ms(e)+" is not a constructor")},Cs=Je,Ts=y("species"),P=yt,Ms=Pt,b=xo,C=function(e,t,n,r){t+=" Iterator";return e.prototype=is(os,{next:cs(+!r,n)}),ss(e,t,!1),as[t]=qc,e},Es=function(e,t){return{value:e,done:t}},Ps=Ze,Os=pt,Ds=St,ks=ut,Fs=Je,As=$o,Is=Vo,js=rt,F=ft,Wt=h,Rs=function(e,t){var e=ws(e).constructor;return void 0===e||Cs(e=ws(e)[Ts])?t:_s(e)},xs=Lo,Ks=Bo,E=m,Ls=y("matchAll"),k="RegExp String",Ns=k+" Iterator",Bs=E.set,$s=E.getterFor(Ns),T=RegExp.prototype,Vs=TypeError,Hs=b("".indexOf),Ws=b("".matchAll),Us=!!Ws&&!Wt(function(){Ws("a",/./)}),Ys=C(function(e,t,n,r){Bs(this,{type:Ns,regexp:e,string:t,global:n,unicode:r,done:!1})},k,function(){var e=$s(this);if(e.done)return Es(void 0,!0);var t=e.regexp,n=e.string,r=Ks(t,n);return null===r?(e.done=!0,Es(void 0,!0)):(e.global?""===Ds(r[0])&&(t.lastIndex=xs(n,Os(t.lastIndex),e.unicode)):e.done=!0,Es(r,!1))});P({target:"String",proto:!0,forced:Us},{matchAll:function(e){var t,n=Ps(this);if(Fs(e)){if(Us)return Ws(n,e)}else{if(As(e)&&(t=Ds(Ps(Is(e))),!~Hs(t,"g")))throw Vs("`.matchAll` does not allow non-global regexes");if(Us)return Ws(n,e);if(t=js(e,Ls))return Ms(t,e,n)}return t=Ds(n),new RegExp(e,"g")[Ls](t)}}),Ls in T||F(T,Ls,ys);Wo("String","matchAll");var Gs="webConsent",zs=(window.__MSFT_SDK=window.__MSFT_SDK||{},window.__MSFT_SDK[Gs]={EventBus:we,Logger:u,Store:c,Utils:{IFrameUtils:p,ObjectUtils:$},enums:n,constants:Pe,Helpers:e,config:(null==(D=window.__MSFT_SDK[Gs])?void 0:D.config)||null,websiteConfiguration:(null==(Mt=window.__MSFT_SDK[Gs])?void 0:Mt.websiteConfiguration)||{},initConsent:_e.initConsent,debug:function(){return{events:window.__MSFT_SDK[Gs].Store.getters.debugInfo.events,logs:window.__MSFT_SDK[Gs].Store.getters.debugInfo.logs,state:window.__MSFT_SDK[Gs].Store.getters.state}}},window.MSFTPrivacy=window.MSFTPrivacy||{},window.MSFTPrivacy[Gs]=o,we.on(ce.CoreConsentModelSelected,function(){Ge.resolveDependencies()}),Xs.ConvertToMilliseconds=function(e){switch(e.unit){case ge.day:return 864e5*e.value;case ge.week:return 864e5*e.value*7;case ge.month:return 864e5*e.value*30;case ge.year:return 864e5*e.value*365;default:return u.error("Invalid unit for interval : ".concat(e.unit)),e.value}},Xs);function Xs(){}qs.encodeConsent=function(e,t){u.info("encoding consent",{consent:e,model:t});var n=e.preferences,e="".concat(qs.CONSENTVERSION,"=")+t.properties.consentVersion.toString()+"%",e=(e+="".concat(qs.CONSENTID,"=")+t.properties.consentId+"%")+Object.keys(n).map(function(e){return"".concat(e,"=").concat(n[e]===ue.ON?ue.ON:ue.OFF)}).join("%");return u.info("encoded consent string: ".concat(e)),e},qs.decodeConsentString=function(e){u.info("decoding consent string: ".concat(e));var n={};return e.split("%").forEach(function(e){var t,e=e.split("=");2===e.length&&(t=e[0],e=e[1],t!==qs.CONSENTVERSION&&t!==qs.CONSENTID&&(n[t]=e))}),u.info("decoded consent",{preferences:n}),{preferences:n}},qs.getVersionFromString=function(e){var t=e.match(/consentVersion=([\d.]+)%/);if(null==t)return-1;t=parseInt(t[1]);return isNaN(t)?-1:(u.info("getVersionString str: ".concat(e," found consentVersion: ").concat(t)),t)},qs.getModelIdFromString=function(e){var t=e.match(/consentId=([^%]+)%/);if(null!=t)return u.info("getModelIdFromString str: ".concat(e," found version: ").concat(t[1])),t[1]},qs.CONSENTVERSION="consentVersion",qs.CONSENTID="consentId";var Qs=qs;function qs(){}Zs.getUserCountryOrRegion=function(){return s(this,void 0,void 0,function(){var t,n;return a(this,function(e){switch(e.label){case 0:t=window.__MSFT_SDK[d].Store.getters.packageConfigurations.geoTrackingURL,e.label=1;case 1:return e.trys.push([1,3,,4]),[4,fetch(t).then(function(e){return(null==(e=e.headers.get("country"))?void 0:e.toLowerCase())||null})];case 2:return[2,e.sent()];case 3:return n=e.sent(),console.error("Got exception while fetching geo location. Switching to alternate way.",n),[2,""];case 4:return[2]}})})};var Js=Zs;function Zs(){}var S=function(e){this.state=e||{config:{sdkConfig:window.__MSFT_SDK[d].config,websiteConfiguration:window.__MSFT_SDK[d].websiteConfiguration},custom:{lcid:"",proxyJS:"",languageBlockList:[],lcidList:[],templateData:{}}}},ea=(ta.get=function(){return document.cookie},ta.getItem=function(t){return u.info("get cookie key: ".concat(t)),document.cookie.split("; ").find(function(e){return e.startsWith("".concat(t,"="))})||""},ta.set=function(e){u.info("set cookie: ".concat(e)),document.cookie=e},ta.setItem=function(e,t,n){var r;u.info("set cookie key: ".concat(e," value: ").concat(t," ttl: ").concat(n)),n&&((r=new Date).setTime(r.getTime()+n),r=r.toUTCString()),document.cookie="".concat(e,"=").concat(t).concat(r?"; expires=".concat(r):"","; path=/")},ta);function ta(){}K(A,na=S),Object.defineProperty(A.prototype,"currentModel",{get:function(){return this.state.config.currentModel},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"selectedCoreModel",{get:function(){return this.state.config.selectedCoreModel},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"applicableTrackerCategories",{get:function(){var e;return this.websiteConfiguration.trackerCategories&&this.websiteConfiguration.trackerCategories.length?this.websiteConfiguration.trackerCategories:null==(e=null==(e=this.sdkConfig)?void 0:e.properties)?void 0:e.trackerCategories},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"bannerTrackerCategories",{get:function(){var n=this,e=(null==(e=(this.currentModel||this.selectedCoreModel).controls.find(function(e){return e.name===Ee.TrackerCategoryControl}))?void 0:e.instances)||[],r=[];return e.forEach(function(t){var e=null==(e=n.applicableTrackerCategories)?void 0:e.find(function(e){return e.objectId===t.objectId});e&&r.push(L(L({},t),e))}),r},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"models",{get:function(){return this.state.config.sdkConfig.models},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"template",{get:function(){return this.state.config.template},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"startingLayoutPage",{get:function(){var t=null==(e=null==(e=null==(e=window.__MSFT_SDK[d].Store.getters)?void 0:e.config)?void 0:e.initConfig)?void 0:e.startingLayoutPage,e=null==(e=null==(e=this.state.config.template)?void 0:e.pages)?void 0:e.some(function(e){return e.name===t});return t&&e?t:(null==(e=this.state.config.template)?void 0:e.initPage)||""},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"translations",{get:function(){return this.state.config.translations||[]},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"styles",{get:function(){return this.state.custom.styles||[]},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"timezone",{get:function(){return window.Intl.DateTimeFormat().resolvedOptions().timeZone},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"languages",{get:function(){var n=this,e=navigator.languages,r=[];return e.forEach(function(e){if(!n.state.custom.languageBlockList.includes(e))for(var t=0;t<n.state.custom.lcidList.length;t++)if(e.startsWith(n.state.custom.lcidList[t])){r.includes(n.state.custom.lcidList[t])||r.push(n.state.custom.lcidList[t]);break}}),r},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"encodedConsent",{get:function(){return ea.getItem(window.__MSFT_SDK[d].enums.Cookie.Consent)},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"templateParentMap",{get:function(){var e;return(null==(e=this.state.config.template)?void 0:e.componentParentMap)||{}},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"extendedTrackers",{get:function(){return this.state.config.sdkConfig.extendedTrackers},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"defaultModel",{get:function(){var e;return null==(e=this.state.config.sdkConfig)?void 0:e.properties.defaultConsentModel},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"lcid",{get:function(){return this.state.custom.lcid},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"components",{get:function(){return this.state.config.components||{}},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"proxyJS",{get:function(){return this.state.custom.proxyJS},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"templateData",{get:function(){return this.state.custom.templateData},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"sdkConfig",{get:function(){return this.state.config.sdkConfig},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"packageConfigurations",{get:function(){var e;return(null==(e=this.state.config.sdkConfig)?void 0:e.configurations)||{}},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"websiteConfiguration",{get:function(){return this.state.config.websiteConfiguration||{}},enumerable:!1,configurable:!0});var na,ra=A;function A(e){var t=na.call(this,e)||this;return t.state.custom=L(L({},e.custom),{languageBlockList:["ca-Es-VALENCIA","kok"],lcidList:["af","am","ar","az","bg","bn","bs","ca","cs","cy","da","de","el","en-GB","en","es-MX","es","et","eu","fa","fil","fi","fr-CA","fr","ga","gd","gl","gu","he","hi","hr","hu","id","is","it","ja","ka","kk","km","kn","ko","lb","lo","lt","lv","mi","mk","ml","mr","ms","mt","nl","ne","nb","nn","or","pa","pl","pt-BR","pt","qu","ro","ru","sk","sl","sq","sr","sv","ta","te","th","tr","tt","ug","uk","ur","vi","zh-CN","zh-TW","zh"]}),t}K(I,oa=S),I.prototype.setCurrentModel=function(e){this.state.config.currentModel=e},I.prototype.setSelectedCoreModel=function(e){this.state.config.selectedCoreModel=e},I.prototype.setTemplate=function(e){this.state.config.template=e},I.prototype.setTranslations=function(e){this.state.config.translations=e},I.prototype.setStyles=function(e){this.state.custom.styles=e},I.prototype.setEncodedConsentString=function(e,t,n){ea.setItem(e,t,n)},I.prototype.setLcid=function(e){this.state.custom.lcid=e},I.prototype.setComponents=function(e){this.state.config.components=e},I.prototype.setProxyJS=function(e){this.state.custom.proxyJS=e},I.prototype.setQuestions=function(e){this.state.config.questions=e},I.prototype.setTemplateData=function(e){this.state.custom.templateData=e},I.prototype.setSDKconfig=function(e){this.state.config.sdkConfig=e};var oa,Sn=I;function I(e){return oa.call(this,e)||this}var O=(new S).state,ia={getters:new ra(O),reducers:new Sn(O)};function j(){window.__MSFT_SDK[d].Store.addReducers(ia.reducers),window.__MSFT_SDK[d].Store.addGetters(ra),j.registerEvents()}j.registerEvents=function(){window.__MSFT_SDK[d].EventBus.on(window.__MSFT_SDK[d].enums.Events.Init,j.onInit)},j.matchLocation=function(e,t){if(!t||!Array.isArray(t))return!1;for(var n=0;n<t.length;n++){var r=t[n].toLowerCase();if("all"===r||r===e)return!0}return 0===t.length},j.selectConsentModel=function(i){return s(this,void 0,void 0,function(){var t,n,r,o;return a(this,function(e){switch(e.label){case 0:return(t=i.countryOrRegion,r=i.coreModels,n=i.LCID,r=r||window.__MSFT_SDK[d].Store.getters.models,u.info("selecting consent model",{models:r,countryCode:t,timezone:window.__MSFT_SDK[d].Store.getters.timezone}),Array.isArray(r)&&0!==r.length)?(o=r.find(function(e){return e.name===window.__MSFT_SDK[d].Store.getters.defaultModel})||r[0],[4,j.selectModelByGeoLocation(r,null==t?void 0:t.toLowerCase())]):(window.__MSFT_SDK[d].Logger.info("Models not found."),[2]);case 1:return o=e.sent()||o,window.__MSFT_SDK[d].Store.reducers.setSelectedCoreModel(o),j.selectLanguageCode(o.translations,o.properties.defaultLCID,n),window.__MSFT_SDK[d].EventBus.trigger(ce.CoreConsentModelSelected),window.__MSFT_SDK[d].Logger.info("Consent model selected."),[2]}})})},j.selectModelByGeoLocation=function(i,c){return s(this,void 0,void 0,function(){var t,n,r,o;return a(this,function(e){switch(e.label){case 0:return(t=window.__MSFT_SDK[d].Store.getters.timezone,!window.__MSFT_SDK[d].Store.getters.isPreviewMode&&window.__MSFT_SDK[d].Store.getters.packageConfigurations.isGeoTrackingEnabled)?[4,Js.getUserCountryOrRegion()]:[3,2];case 1:return r=e.sent(),[3,3];case 2:r="",e.label=3;case 3:return n=r,o=c||n,[2,i.find(function(e){return Boolean(o?j.matchModelByCountryOrRegion(e,o):j.matchModelByTimezoneArea(e,t))})]}})})},j.matchModelByTimezoneArea=function(t,n){var r;return s(this,void 0,void 0,function(){return a(this,function(e){return[2,j.matchLocation(n,(null==(r=t.attributes.find(function(e){return e.key===Ee.GeoLocations}))?void 0:r.value)||[])]})})},j.matchModelByCountryOrRegion=function(e,t){return j.matchLocation(t,(null==(t=e.attributes.find(function(e){return e.key===Ee.CountriesOrRegions}))?void 0:t.value)||[])},j.selectLanguageCode=function(e,t,n){for(var r=t,o=n?[n]:window.__MSFT_SDK[d].Store.getters.languages,i=0;i<o.length;i++)if(e.includes(o[i])){r=o[i];break}u.info("selected language code",{lcid:r}),window.__MSFT_SDK[d].Store.reducers.setLcid(r)},j.onInit=function(t){return s(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return[4,j.fetchCoreConfig(t)];case 1:return e.sent(),[4,j.selectConsentModel(t)];case 2:return e.sent(),j.updateConfigIfPresent(t),[2]}})})},j.updateConfigIfPresent=function(e){var t=e.translations,n=e.templates,e=e.models;e&&(e=e.find(function(e){return e.id===(null==(e=window.__MSFT_SDK[d].Store.getters.selectedCoreModel)?void 0:e.id)}))&&window.__MSFT_SDK[d].Store.reducers.setCurrentModel(e),t&&window.__MSFT_SDK[d].Store.reducers.setTranslations(t[window.__MSFT_SDK[d].Store.getters.lcid]),n&&(e=n.find(function(e){return e.id===(null==(e=window.__MSFT_SDK[d].Store.getters.selectedCoreModel)?void 0:e.layout.id)})||n[0],window.__MSFT_SDK[d].Store.reducers.setTemplate(e),window.__MSFT_SDK[d].EventBus.trigger(window.__MSFT_SDK[d].enums.Events.ConfigReady))},j.fetchCoreConfig=function(o){return s(this,void 0,void 0,function(){var t,n,r;return a(this,function(e){switch(e.label){case 0:return(r=window.__MSFT_SDK[d].Store.getters.sdkConfig,o.preview)?[2]:null!=r&&null!=r.models?[3,2]:(r=Ae.deferred(),t=r.promise,n=r.resolve,[4,xe.fetch("/msft-privacy/packages/".concat(window.__MSFT_SDK[d].config.id,"/latest/core-config.js"))]);case 1:return r=e.sent(),je.addScriptToDOM(r),setTimeout(function(){var e;window.__MSFT_SDK[d].Store.reducers.setSDKconfig(null==(e=window.__MSFT_SDK[d])?void 0:e.config),n()}),[2,t];case 2:return[2]}})})},j();sa.getTrackerCategories=function(){if(void 0!==window.__MSFT_SDK[d].Store.getters.currentModel)return window.__MSFT_SDK[d].Store.getters.bannerTrackerCategories;throw new Error("Consent Model not selected.")},sa.getWebsiteConfiguration=function(){return window.__MSFT_SDK[d].Store.getters.websiteConfiguration},sa.getPackageConfiguration=function(){return window.__MSFT_SDK[d].Store.getters.sdkConfig},sa.getDefaultConsent=function(t){var n={preferences:{}};return window.__MSFT_SDK[d].Store.getters.bannerTrackerCategories.forEach(function(e){n.preferences[e.name]=e.isEssential||t===window.__MSFT_SDK[d].enums.ConsentModelType.Implicit?window.__MSFT_SDK[d].enums.Preference.ON:window.__MSFT_SDK[d].enums.Preference.OFF}),u.info("evaluating default consent",{consentModelType:t,consent:n}),n};var ca=sa;function sa(){}R.registerEvents=function(){window.__MSFT_SDK[d].EventBus.on(window.__MSFT_SDK[d].enums.Events.ConfigReady,R.showNoticeIfConsentInvalid),window.__MSFT_SDK[d].EventBus.on(window.__MSFT_SDK[d].enums.PublicEvents.AcceptAll,R.acceptAllCategories),window.__MSFT_SDK[d].EventBus.on(window.__MSFT_SDK[d].enums.PublicEvents.RejectAll,R.rejectAllNonEssentialCategories),window.__MSFT_SDK[d].EventBus.on(window.__MSFT_SDK[d].enums.PublicEvents.UpdateConsent,R.setConsent)},R.getConsent=function(){return window.__MSFT_SDK[d].Store.getters.userConsent||ca.getDefaultConsent(window.__MSFT_SDK[d].enums.ConsentModelType.Explicit)},R.getConsentFor=function(e){return R.getConsent().preferences[e]},R.setConsent=function(e){u.info("set consent",{payload:e});var t,e=e.consent,n=window.__MSFT_SDK[d].Store.getters.currentModel,r=window.__MSFT_SDK[d].Store.getters.selectedCoreModel;void 0===n||void 0===r?window.__MSFT_SDK[d].Logger.warn("Cannot set user consent before consent model is ready."):(r=Qs.encodeConsent(e,r),window.__MSFT_SDK[d].Store.reducers.setEncodedConsentString(window.__MSFT_SDK[d].enums.Cookie.Consent,r,zs.ConvertToMilliseconds(n.properties.expiry)),window.__MSFT_SDK[d].Store.reducers.setUserConsent(e),window.__MSFT_SDK[d].Logger.info("Consent updated."),window.__MSFT_SDK[d].EventBus.trigger(window.__MSFT_SDK[d].enums.PublicEvents.ConsentChanged),t=e.preferences,r=Object.keys(t).filter(function(e){return t[e]==ue.ON}).join(","),window.dataLayer=window.dataLayer||[],n={event:window.__MSFT_SDK[d].enums.PublicEvents.ConsentPreference,categories:r},window.dataLayer.push(n))},R.isConsentValid=function(){if(null!=(e=window.__MSFT_SDK[d].Store.getters.config.initConfig)&&e.preview)return!1;var e=window.__MSFT_SDK[d].Store.getters.encodedConsent;if(void 0===e)return!1;if(void 0===window.__MSFT_SDK[d].Store.getters.selectedCoreModel)return window.__MSFT_SDK[d].Logger.warn("Consent model not selected, can't validate consent."),!0;var t=window.__MSFT_SDK[d].Store.getters.selectedCoreModel.properties,n=t.consentVersion,t=t.consentId;return Qs.getVersionFromString(e)===n&&Qs.getModelIdFromString(e)===t},R.showNoticeIfConsentInvalid=function(){var t,e,n,r;(null==(e=window.__MSFT_SDK[d].Store.getters.selectedCoreModel)?void 0:e.kind)===Se.WebConsent&&(t=(null==(e=null==(e=window.__MSFT_SDK[d].Store.getters.selectedCoreModel)?void 0:e.properties)?void 0:e.consentType)||oe.Explicit,e=R.isConsentValid(),u.info("consent valid: ".concat(e)),e||t!==oe.Explicit||window.__MSFT_SDK[d].EventBus.trigger(window.__MSFT_SDK[d].enums.PublicEvents.ShowFirstPage),n=e?Qs.decodeConsentString(window.__MSFT_SDK[d].Store.getters.encodedConsent).preferences:{},r={preferences:{}},window.__MSFT_SDK[d].Store.getters.bannerTrackerCategories.forEach(function(e){e.isEssential?r.preferences[e.name]=window.__MSFT_SDK[d].enums.Preference.ON:r.preferences[e.name]=n[e.name]||R.getDefaultPreference(t)}),window.__MSFT_SDK[d].Store.reducers.setUserConsent(r),window.__MSFT_SDK[d].EventBus.trigger(window.__MSFT_SDK[d].enums.PublicEvents.ConsentChanged))},R.getDefaultPreference=function(e){return e===oe.Explicit?ue.OFF:ue.ON},R.acceptAllCategories=function(){var t={preferences:{}};window.__MSFT_SDK[d].Store.getters.bannerTrackerCategories.forEach(function(e){t.preferences[e.name]=window.__MSFT_SDK[d].enums.Preference.ON}),R.setConsent({consent:t}),window.__MSFT_SDK[d].EventBus.trigger(window.__MSFT_SDK[d].enums.PublicEvents.CloseConsentNotice)},R.rejectAllNonEssentialCategories=function(){var t={preferences:{}};window.__MSFT_SDK[d].Store.getters.bannerTrackerCategories.forEach(function(e){t.preferences[e.name]=e.isEssential?window.__MSFT_SDK[d].enums.Preference.ON:window.__MSFT_SDK[d].enums.Preference.OFF}),R.setConsent({consent:t}),window.__MSFT_SDK[d].EventBus.trigger(window.__MSFT_SDK[d].enums.PublicEvents.CloseConsentNotice)};var aa=R;function R(){R.registerEvents()}function ua(){}new aa,ua.getConsent=function(){return aa.getConsent()},ua.getTrackerCategories=function(){return ca.getTrackerCategories()},ua.getWebsiteConfiguration=function(){return ca.getWebsiteConfiguration()},ua.getPackageConfiguration=function(){return ca.getPackageConfiguration()},ua.getConsentModels=function(){return window.__MSFT_SDK[d].Store.getters.models.map(function(e){var t=e.name,n=e.version,e=e.id;return{id:e,name:t,version:n,selected:(null==(t=window.__MSFT_SDK[d].Store.getters.currentModel)?void 0:t.id)===e}})},window.__MSFT_SDK[d].Helpers.addPublicApis(ua),window.__MSFT_SDK[d].Helpers.exposeApis()}();
