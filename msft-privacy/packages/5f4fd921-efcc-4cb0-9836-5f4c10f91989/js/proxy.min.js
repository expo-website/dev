(function () {
    'use strict';

    var formDataToJsonObject = function (formData) {
        var object = {};
        formData.forEach(function (value, key) {
            if (!Reflect.has(object, key)) {
                object[key] = value;
                return;
            }
            if (!Array.isArray(object[key])) {
                object[key] = [object[key]];
            }
            object[key].push(value);
        });
        return object;
    };
    var getStaticData = function (jsonStr) {
        try {
            return JSON.parse(jsonStr);
        }
        catch (e) {
            return null;
        }
    };
    var getJsonUsingFormId = function (formId) {
        try {
            var form = document.getElementById(formId);
            if (!form) {
                return null;
            }
            var formData = new FormData(form);
            return formDataToJsonObject(formData);
        }
        catch (e) {
            return null;
        }
    };
    var getJsonUsingInputIds = function (inputIds) {
        try {
            var inputIdsArray = inputIds.split(',');
            var object_1 = {};
            inputIdsArray.forEach(function (id) {
                var input = document.getElementById(id);
                if (input) {
                    object_1[id] = input.value;
                }
            });
            return object_1;
        }
        catch (e) {
            return null;
        }
    };
    var msftCallbackFunction = function (event) {
        event.preventDefault();
        var formData = new FormData(event.target);
        var object = formDataToJsonObject(formData);
        window.MSFTConsent.trigger('QuestionsFormSubmitWithoutMetaData', {
            data: object,
        });
    };

    var handlers = [
        {
            //handler for accept all button
            selector: '[msft-consent-accept-all]',
            handler: function (elm) {
                elm.addEventListener('click', function () {
                    window.MSFTConsent.trigger('AcceptAll');
                    window.MSFTConsent.trigger('CloseConsentNotice');
                });
            },
        },
        //handler for open preferences button
        {
            selector: '[msft-consent-open-preferences]',
            handler: function (elm) {
                elm.addEventListener('click', function () {
                    window.MSFTConsent.trigger('ShowTemplate', {
                        templateId: 'Preferences',
                    });
                    window.MSFTConsent.trigger('CloseConsentNotice');
                });
            },
        },
        //handler for decline all button
        {
            selector: '[msft-consent-decline-all]',
            handler: function (elm) {
                elm.addEventListener('click', function () {
                    window.MSFTConsent.trigger('RejectAll');
                    window.MSFTConsent.trigger('CloseConsentNotice');
                });
            },
        },
        //handler for save preferences button
        {
            selector: '[msft-consent-save-preferences]',
            handler: function (elm) {
                elm.addEventListener('click', function () {
                    var trackerCategoriesSelectors = document.querySelectorAll('[msft-consent-tracker-category]');
                    var currentPreferences = { preferences: {} };
                    trackerCategoriesSelectors.forEach(function (category) {
                        currentPreferences.preferences[category.getElementsByTagName('input')[0].id] = category.getElementsByTagName('input')[0].checked ? '1' : '0';
                    });
                    window.MSFTConsent.trigger('UpdateConsent', {
                        consent: currentPreferences,
                    });
                    window.MSFTConsent.trigger('CloseTemplate', {
                        templateId: 'Preferences',
                    });
                    window.MSFTConsent.trigger('CloseConsentNotice');
                });
            },
        },
        //handler for close preferences button
        {
            selector: '[msft-consent-close-preferences]',
            handler: function (elm) {
                elm.addEventListener('click', function () {
                    window.MSFTConsent.trigger('CloseTemplate', {
                        templateId: 'Preferences',
                    });
                    window.MSFTConsent.trigger('ShowConsentNotice');
                });
            },
        },
        //handler for form submit
        {
            selector: '[msft-questionnaire-form]',
            handler: function (elm) {
                elm.addEventListener('submit', msftCallbackFunction);
            },
        },
        //handler for open page
        {
            selector: '[msft-consent-open-page]',
            handler: function (elm) {
                var templateId = elm.getAttribute('msft-consent-open-page');
                if (templateId === null)
                    return;
                elm.addEventListener('click', function () {
                    window.MSFTConsent.trigger('ShowTemplate', {
                        templateId: templateId,
                    });
                });
            },
        },
        //handler for close page
        {
            selector: '[msft-consent-close-page]',
            handler: function (elm) {
                var templateId = elm.getAttribute('msft-consent-close-page');
                if (templateId === null)
                    return;
                elm.addEventListener('click', function () {
                    window.MSFTConsent.trigger('CloseTemplate', {
                        templateId: templateId,
                    });
                });
            },
        },
        //handler for trigger event
        {
            selector: '[msft-consent-trigger-event]',
            handler: function (elm) {
                var eventName = elm.getAttribute('msft-consent-trigger-event');
                if (eventName === null)
                    return;
                var staticData = elm.getAttribute('msft-payload-data');
                var formId = elm.getAttribute('msft-payload-form-id');
                var inputIds = elm.getAttribute('msft-payload-input-ids');
                var payload = null;
                if (staticData !== null) {
                    payload = getStaticData(staticData);
                }
                else if (formId !== null) {
                    payload = getJsonUsingFormId(formId);
                }
                else if (inputIds !== null) {
                    payload = getJsonUsingInputIds(inputIds);
                }
                elm.addEventListener('click', function () {
                    window.MSFTConsent.trigger(eventName, payload);
                });
            },
        },
    ];
    window['disableQuestionFormSubmit'] = function () {
        document.querySelectorAll('[msft-questionnaire-form-submit]').forEach(function (elm) {
            elm.setAttribute('disabled', '');
        });
    };
    window['enableQuestionFormSubmit'] = function () {
        document.querySelectorAll('[msft-questionnaire-form-submit]').forEach(function (elm) {
            elm.removeAttribute('disabled');
        });
    };
    var registerHandlers = function () {
        var _a, _b;
        var executionContexts = ((_b = (_a = window.msftData) === null || _a === void 0 ? void 0 : _a.executionContexts) === null || _b === void 0 ? void 0 : _b.length)
            ? window.msftData.executionContexts
            : [];
        // register all handlers
        handlers.forEach(function (_a) {
            var selector = _a.selector, handler = _a.handler;
            document.querySelectorAll(selector).forEach(function (elm) {
                if (executionContexts.length > 0) {
                    var attributes_1 = elm.getAttributeNames();
                    if (executionContexts.some(function (ctx) { return attributes_1.includes("".concat(ctx, "-disabled")); })) {
                        return;
                    }
                }
                handler(elm);
            });
        });
        //remove all hidden elements
        executionContexts.forEach(function (ctx) {
            document.querySelectorAll("[".concat(ctx, "-hidden]")).forEach(function (elm) {
                elm.remove();
            });
        });
    };
    if (document.readyState !== 'loading') {
        registerHandlers();
    }
    else {
        document.addEventListener('DOMContentLoaded', function () {
            registerHandlers();
        });
    }

    var _a;
    var addProxyMethods = function () {
        Promise.resolve().then(function () { return anchorClickHandler; });
        Promise.resolve().then(function () { return proxy; }).then(function (_a) {
            var callMethod = _a.callMethod, sendMessage = _a.sendMessage;
            window.MSFTConsent = {};
            var methodsWithReturnType = ['getConsent', 'getTrackerCategories'];
            var methodsWithoutReturnType = ['trigger', 'showChangeSettingsModal'];
            methodsWithoutReturnType.forEach(function (methodName) {
                window.MSFTConsent[methodName] = function () {
                    var args = [];
                    for (var _i = 0; _i < arguments.length; _i++) {
                        args[_i] = arguments[_i];
                    }
                    sendMessage(methodName, args);
                };
            });
            methodsWithReturnType.forEach(function (methodName) {
                window.MSFTConsent[methodName] = function () {
                    var args = [];
                    for (var _i = 0; _i < arguments.length; _i++) {
                        args[_i] = arguments[_i];
                    }
                    return callMethod(methodName, args);
                };
            });
        });
    };
    if (!((_a = window.msftData) === null || _a === void 0 ? void 0 : _a.renderTemplateWithoutIframe)) {
        addProxyMethods();
    }

    var ConsentModelType;
    (function (ConsentModelType) {
        ConsentModelType["Explicit"] = "Explicit";
        ConsentModelType["Implicit"] = "Implicit";
    })(ConsentModelType || (ConsentModelType = {}));
    var PublicEvents;
    (function (PublicEvents) {
        PublicEvents["ConsentChanged"] = "ConsentChanged";
        PublicEvents["ShowConsentNotice"] = "ShowConsentNotice";
        PublicEvents["ShowFirstPage"] = "ShowFirstPage";
        PublicEvents["CloseConsentNotice"] = "CloseConsentNotice";
        PublicEvents["AcceptAll"] = "AcceptAll";
        PublicEvents["RejectAll"] = "RejectAll";
        PublicEvents["ShowTemplate"] = "ShowTemplate";
        PublicEvents["CloseTemplate"] = "CloseTemplate";
        PublicEvents["UpdateConsent"] = "UpdateConsent";
        PublicEvents["AnchorTagClicked"] = "AnchorTagClicked";
        PublicEvents["FetchConfig"] = "FetchConfig";
        PublicEvents["QuestionsFormSubmitWithoutMetaData"] = "QuestionsFormSubmitWithoutMetaData";
        PublicEvents["QuestionsFormSubmit"] = "QuestionsFormSubmit";
        PublicEvents["ShowPreferences"] = "ShowPreferences";
        PublicEvents["ConsentPreference"] = "MSFTConsentPreference";
    })(PublicEvents || (PublicEvents = {}));
    var Events;
    (function (Events) {
        Events["Init"] = "Init";
        Events["CoreConsentModelSelected"] = "CoreConsentModelSelected";
        Events["ConfigReady"] = "ConfigReady";
    })(Events || (Events = {}));
    var SDKMode;
    (function (SDKMode) {
        SDKMode["Default"] = "Default";
        SDKMode["HeadLess"] = "HeadLess";
    })(SDKMode || (SDKMode = {}));
    var StyleType;
    (function (StyleType) {
        StyleType["Url"] = "Url";
        StyleType["Text"] = "Text";
    })(StyleType || (StyleType = {}));
    var Preference;
    (function (Preference) {
        Preference["OFF"] = "0";
        Preference["ON"] = "1";
    })(Preference || (Preference = {}));
    var Cookie;
    (function (Cookie) {
        Cookie["Consent"] = "msft-consent";
    })(Cookie || (Cookie = {}));
    var RegisteredDivType;
    (function (RegisteredDivType) {
        RegisteredDivType["Script"] = "script";
        RegisteredDivType["IFrame"] = "iframe";
    })(RegisteredDivType || (RegisteredDivType = {}));
    var NoticeType;
    (function (NoticeType) {
        NoticeType["TrackerCategory"] = "trackerCategory";
        NoticeType["Questions"] = "Questions";
    })(NoticeType || (NoticeType = {}));
    var ErrorStrings;
    (function (ErrorStrings) {
        ErrorStrings["TemplateError"] = "<b>There is something wrong with template. Please check logs.</b>";
    })(ErrorStrings || (ErrorStrings = {}));
    var IntervalUnits;
    (function (IntervalUnits) {
        IntervalUnits["day"] = "day";
        IntervalUnits["week"] = "week";
        IntervalUnits["month"] = "month";
        IntervalUnits["year"] = "year";
    })(IntervalUnits || (IntervalUnits = {}));
    var QuestionType;
    (function (QuestionType) {
        QuestionType["Text"] = "Text";
        QuestionType["Email"] = "Email";
        QuestionType["Radio"] = "Radio";
        QuestionType["MultiSelect"] = "MultiSelect";
        QuestionType["Select"] = "Select";
        QuestionType["Date"] = "Date";
        QuestionType["PhoneNumber"] = "PhoneNumber";
        QuestionType["CreditCard"] = "CreditCard";
        QuestionType["Number"] = "Number";
        QuestionType["MultiLineText"] = "multiLineText";
    })(QuestionType || (QuestionType = {}));
    var QuestionValidation;
    (function (QuestionValidation) {
        QuestionValidation["Required"] = "Required";
    })(QuestionValidation || (QuestionValidation = {}));
    var QuestionField;
    (function (QuestionField) {
        QuestionField["Question"] = "question";
        QuestionField["Placeholder"] = "placeholder";
        QuestionField["Options"] = "options";
    })(QuestionField || (QuestionField = {}));
    var ModelKind;
    (function (ModelKind) {
        ModelKind["WebConsentModel"] = "WebConsentModel";
        ModelKind["QuestionModel"] = "DSRSubmissionModel";
    })(ModelKind || (ModelKind = {}));
    var PackageKind;
    (function (PackageKind) {
        PackageKind["WebConsentPackage"] = "WebConsentPackage";
        PackageKind["FIDESPackage"] = "FIDESPackage";
        PackageKind["DSRSubmissionPackage"] = "DSRSubmissionPackage";
    })(PackageKind || (PackageKind = {}));
    var Template;
    (function (Template) {
        Template["Preferences"] = "Preferences";
    })(Template || (Template = {}));

    var onclickHandler = function (e) {
        if (e.target &&
            e.target.nodeName.toLowerCase() === 'a') {
            var attributes = {};
            var attributeNames = e.target.getAttributeNames();
            e.preventDefault();
            e.stopPropagation();
            for (var i = 0; i < attributeNames.length; i++) {
                var attrName = attributeNames[i];
                attributes[attrName] =
                    e.target.getAttribute(attrName) || '';
            }
            window.MSFTConsent.trigger(PublicEvents.AnchorTagClicked, { attributes: attributes });
        }
    };
    // Options for the observer (which mutations to observe)
    var config = { childList: true, subtree: true };
    // Callback function to execute when mutations are observed
    var callback = function (mutationList) {
        mutationList.forEach(function (mutationRecord) {
            mutationRecord.addedNodes.forEach(function (addedNode) {
                if (addedNode.nodeName.toLowerCase() === 'a') {
                    addedNode.addEventListener('click', { handleEvent: onclickHandler });
                }
            });
        });
    };
    // Create an observer instance linked to the callback function
    var observer = new MutationObserver(callback);
    // Start observing the target node for configured mutations
    observer.observe(document.documentElement, config);

    var anchorClickHandler = /*#__PURE__*/Object.freeze({
        __proto__: null
    });

    var AsyncUtils = /** @class */ (function () {
        function AsyncUtils() {
        }
        AsyncUtils.deferred = function () {
            var defer = {};
            defer.promise = new Promise(function (res, rej) {
                defer.resolve = res;
                defer.reject = rej;
            });
            return defer;
        };
        return AsyncUtils;
    }());
    var AsyncUtils$1 = AsyncUtils;

    var promiseMap = {};
    var sendMessage = function (method, args, responseId) {
        if (parent) {
            parent.postMessage({ method: method, params: Object.values(args), responseId: responseId }, msftData.origin);
        }
    };
    var callMethod = function (method, args) {
        var responseId = "".concat(method, "-").concat(new Date().getTime());
        var deferred = AsyncUtils$1.deferred();
        promiseMap[responseId] = deferred;
        sendMessage(method, args, responseId);
        return deferred.promise;
    };
    window.onmessage = function (e) {
        var _a;
        if (e.origin === msftData.origin && ((_a = e === null || e === void 0 ? void 0 : e.data) === null || _a === void 0 ? void 0 : _a.responseId)) {
            e.data.error
                ? promiseMap[e.data.responseId].reject(e.data.error)
                : promiseMap[e.data.responseId].resolve(e.data.response);
        }
    };

    var proxy = /*#__PURE__*/Object.freeze({
        __proto__: null,
        sendMessage: sendMessage,
        callMethod: callMethod
    });

}());
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJveHkubWluLmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9TREsvc3JjL3Byb3h5L2hlbHBlcnMudHMiLCIuLi8uLi8uLi8uLi8uLi9TREsvc3JjL3Byb3h5L2F0dHJpYnV0ZUhhbmRsZXJzLnRzIiwiLi4vLi4vLi4vLi4vLi4vU0RLL3NyYy9wcm94eS9pbmRleC50cyIsIi4uLy4uLy4uLy4uLy4uL1NESy9zcmMvY29yZS9jb25zdGFudHMvZW51bXMudHMiLCIuLi8uLi8uLi8uLi8uLi9TREsvc3JjL3Byb3h5L2FuY2hvckNsaWNrSGFuZGxlci50cyIsIi4uLy4uLy4uLy4uLy4uL1NESy9zcmMvY29yZS91dGlscy9Bc3luY1V0aWxzLnRzIiwiLi4vLi4vLi4vLi4vLi4vU0RLL3NyYy9wcm94eS9wcm94eS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgZm9ybURhdGFUb0pzb25PYmplY3QgPSAoZm9ybURhdGE6IEZvcm1EYXRhKSA9PiB7XHJcbiAgY29uc3Qgb2JqZWN0OiBhbnkgPSB7fTtcclxuICBmb3JtRGF0YS5mb3JFYWNoKCh2YWx1ZSwga2V5KSA9PiB7XHJcbiAgICBpZiAoIVJlZmxlY3QuaGFzKG9iamVjdCwga2V5KSkge1xyXG4gICAgICBvYmplY3Rba2V5XSA9IHZhbHVlO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkob2JqZWN0W2tleV0pKSB7XHJcbiAgICAgIG9iamVjdFtrZXldID0gW29iamVjdFtrZXldXTtcclxuICAgIH1cclxuICAgIG9iamVjdFtrZXldLnB1c2godmFsdWUpO1xyXG4gIH0pO1xyXG4gIHJldHVybiBvYmplY3Q7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgZ2V0U3RhdGljRGF0YSA9IChqc29uU3RyOiBzdHJpbmcpID0+IHtcclxuICB0cnkge1xyXG4gICAgcmV0dXJuIEpTT04ucGFyc2UoanNvblN0cik7XHJcbiAgfSBjYXRjaCAoZSkge1xyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGdldEpzb25Vc2luZ0Zvcm1JZCA9IChmb3JtSWQ6IHN0cmluZykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBmb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZm9ybUlkKTtcclxuICAgIGlmICghZm9ybSkge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKGZvcm0gYXMgSFRNTEZvcm1FbGVtZW50KTtcclxuICAgIHJldHVybiBmb3JtRGF0YVRvSnNvbk9iamVjdChmb3JtRGF0YSk7XHJcbiAgfSBjYXRjaCAoZSkge1xyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGdldEpzb25Vc2luZ0lucHV0SWRzID0gKGlucHV0SWRzOiBzdHJpbmcpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgaW5wdXRJZHNBcnJheSA9IGlucHV0SWRzLnNwbGl0KCcsJyk7XHJcbiAgICBjb25zdCBvYmplY3Q6IGFueSA9IHt9O1xyXG4gICAgaW5wdXRJZHNBcnJheS5mb3JFYWNoKGlkID0+IHtcclxuICAgICAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7XHJcbiAgICAgIGlmIChpbnB1dCkge1xyXG4gICAgICAgIG9iamVjdFtpZF0gPSAoaW5wdXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWU7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIG9iamVjdDtcclxuICB9IGNhdGNoIChlKSB7XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgbXNmdENhbGxiYWNrRnVuY3Rpb24gPSAoZXZlbnQ6IGFueSkgPT4ge1xyXG4gIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoZXZlbnQudGFyZ2V0KTtcclxuICBjb25zdCBvYmplY3Q6IGFueSA9IGZvcm1EYXRhVG9Kc29uT2JqZWN0KGZvcm1EYXRhKTtcclxuICB3aW5kb3cuTVNGVENvbnNlbnQudHJpZ2dlcignUXVlc3Rpb25zRm9ybVN1Ym1pdFdpdGhvdXRNZXRhRGF0YScsIHtcclxuICAgIGRhdGE6IG9iamVjdCxcclxuICB9KTtcclxufTtcclxuIiwiaW1wb3J0IHtcclxuICBnZXRKc29uVXNpbmdGb3JtSWQsXHJcbiAgZ2V0SnNvblVzaW5nSW5wdXRJZHMsXHJcbiAgZ2V0U3RhdGljRGF0YSxcclxuICBtc2Z0Q2FsbGJhY2tGdW5jdGlvbixcclxufSBmcm9tICcuL2hlbHBlcnMnO1xyXG5cclxuY29uc3QgaGFuZGxlcnMgPSBbXHJcbiAge1xyXG4gICAgLy9oYW5kbGVyIGZvciBhY2NlcHQgYWxsIGJ1dHRvblxyXG4gICAgc2VsZWN0b3I6ICdbbXNmdC1jb25zZW50LWFjY2VwdC1hbGxdJyxcclxuICAgIGhhbmRsZXI6IChlbG06IEVsZW1lbnQpID0+IHtcclxuICAgICAgZWxtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgIHdpbmRvdy5NU0ZUQ29uc2VudC50cmlnZ2VyKCdBY2NlcHRBbGwnKTtcclxuICAgICAgICB3aW5kb3cuTVNGVENvbnNlbnQudHJpZ2dlcignQ2xvc2VDb25zZW50Tm90aWNlJyk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSxcclxuICB9LFxyXG4gIC8vaGFuZGxlciBmb3Igb3BlbiBwcmVmZXJlbmNlcyBidXR0b25cclxuICB7XHJcbiAgICBzZWxlY3RvcjogJ1ttc2Z0LWNvbnNlbnQtb3Blbi1wcmVmZXJlbmNlc10nLFxyXG4gICAgaGFuZGxlcjogKGVsbTogRWxlbWVudCkgPT4ge1xyXG4gICAgICBlbG0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgd2luZG93Lk1TRlRDb25zZW50LnRyaWdnZXIoJ1Nob3dUZW1wbGF0ZScsIHtcclxuICAgICAgICAgIHRlbXBsYXRlSWQ6ICdQcmVmZXJlbmNlcycsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgd2luZG93Lk1TRlRDb25zZW50LnRyaWdnZXIoJ0Nsb3NlQ29uc2VudE5vdGljZScpO1xyXG4gICAgICB9KTtcclxuICAgIH0sXHJcbiAgfSxcclxuICAvL2hhbmRsZXIgZm9yIGRlY2xpbmUgYWxsIGJ1dHRvblxyXG4gIHtcclxuICAgIHNlbGVjdG9yOiAnW21zZnQtY29uc2VudC1kZWNsaW5lLWFsbF0nLFxyXG4gICAgaGFuZGxlcjogKGVsbTogRWxlbWVudCkgPT4ge1xyXG4gICAgICBlbG0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgd2luZG93Lk1TRlRDb25zZW50LnRyaWdnZXIoJ1JlamVjdEFsbCcpO1xyXG4gICAgICAgIHdpbmRvdy5NU0ZUQ29uc2VudC50cmlnZ2VyKCdDbG9zZUNvbnNlbnROb3RpY2UnKTtcclxuICAgICAgfSk7XHJcbiAgICB9LFxyXG4gIH0sXHJcbiAgLy9oYW5kbGVyIGZvciBzYXZlIHByZWZlcmVuY2VzIGJ1dHRvblxyXG4gIHtcclxuICAgIHNlbGVjdG9yOiAnW21zZnQtY29uc2VudC1zYXZlLXByZWZlcmVuY2VzXScsXHJcbiAgICBoYW5kbGVyOiAoZWxtOiBFbGVtZW50KSA9PiB7XHJcbiAgICAgIGVsbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICBjb25zdCB0cmFja2VyQ2F0ZWdvcmllc1NlbGVjdG9ycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXHJcbiAgICAgICAgICAnW21zZnQtY29uc2VudC10cmFja2VyLWNhdGVnb3J5XScsXHJcbiAgICAgICAgKTtcclxuICAgICAgICBjb25zdCBjdXJyZW50UHJlZmVyZW5jZXM6IGFueSA9IHsgcHJlZmVyZW5jZXM6IHt9IH07XHJcbiAgICAgICAgdHJhY2tlckNhdGVnb3JpZXNTZWxlY3RvcnMuZm9yRWFjaChmdW5jdGlvbiAoY2F0ZWdvcnkpIHtcclxuICAgICAgICAgIGN1cnJlbnRQcmVmZXJlbmNlcy5wcmVmZXJlbmNlc1tcclxuICAgICAgICAgICAgY2F0ZWdvcnkuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2lucHV0JylbMF0uaWRcclxuICAgICAgICAgIF0gPSBjYXRlZ29yeS5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaW5wdXQnKVswXS5jaGVja2VkID8gJzEnIDogJzAnO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHdpbmRvdy5NU0ZUQ29uc2VudC50cmlnZ2VyKCdVcGRhdGVDb25zZW50Jywge1xyXG4gICAgICAgICAgY29uc2VudDogY3VycmVudFByZWZlcmVuY2VzLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHdpbmRvdy5NU0ZUQ29uc2VudC50cmlnZ2VyKCdDbG9zZVRlbXBsYXRlJywge1xyXG4gICAgICAgICAgdGVtcGxhdGVJZDogJ1ByZWZlcmVuY2VzJyxcclxuICAgICAgICB9KTtcclxuICAgICAgICB3aW5kb3cuTVNGVENvbnNlbnQudHJpZ2dlcignQ2xvc2VDb25zZW50Tm90aWNlJyk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSxcclxuICB9LFxyXG4gIC8vaGFuZGxlciBmb3IgY2xvc2UgcHJlZmVyZW5jZXMgYnV0dG9uXHJcbiAge1xyXG4gICAgc2VsZWN0b3I6ICdbbXNmdC1jb25zZW50LWNsb3NlLXByZWZlcmVuY2VzXScsXHJcbiAgICBoYW5kbGVyOiAoZWxtOiBFbGVtZW50KSA9PiB7XHJcbiAgICAgIGVsbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICB3aW5kb3cuTVNGVENvbnNlbnQudHJpZ2dlcignQ2xvc2VUZW1wbGF0ZScsIHtcclxuICAgICAgICAgIHRlbXBsYXRlSWQ6ICdQcmVmZXJlbmNlcycsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgd2luZG93Lk1TRlRDb25zZW50LnRyaWdnZXIoJ1Nob3dDb25zZW50Tm90aWNlJyk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSxcclxuICB9LFxyXG4gIC8vaGFuZGxlciBmb3IgZm9ybSBzdWJtaXRcclxuICB7XHJcbiAgICBzZWxlY3RvcjogJ1ttc2Z0LXF1ZXN0aW9ubmFpcmUtZm9ybV0nLFxyXG4gICAgaGFuZGxlcjogKGVsbTogRWxlbWVudCkgPT4ge1xyXG4gICAgICBlbG0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgbXNmdENhbGxiYWNrRnVuY3Rpb24pO1xyXG4gICAgfSxcclxuICB9LFxyXG4gIC8vaGFuZGxlciBmb3Igb3BlbiBwYWdlXHJcbiAge1xyXG4gICAgc2VsZWN0b3I6ICdbbXNmdC1jb25zZW50LW9wZW4tcGFnZV0nLFxyXG4gICAgaGFuZGxlcjogKGVsbTogRWxlbWVudCkgPT4ge1xyXG4gICAgICBjb25zdCB0ZW1wbGF0ZUlkID0gZWxtLmdldEF0dHJpYnV0ZSgnbXNmdC1jb25zZW50LW9wZW4tcGFnZScpO1xyXG4gICAgICBpZiAodGVtcGxhdGVJZCA9PT0gbnVsbCkgcmV0dXJuO1xyXG4gICAgICBlbG0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgd2luZG93Lk1TRlRDb25zZW50LnRyaWdnZXIoJ1Nob3dUZW1wbGF0ZScsIHtcclxuICAgICAgICAgIHRlbXBsYXRlSWQsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSxcclxuICB9LFxyXG4gIC8vaGFuZGxlciBmb3IgY2xvc2UgcGFnZVxyXG4gIHtcclxuICAgIHNlbGVjdG9yOiAnW21zZnQtY29uc2VudC1jbG9zZS1wYWdlXScsXHJcbiAgICBoYW5kbGVyOiAoZWxtOiBFbGVtZW50KSA9PiB7XHJcbiAgICAgIGNvbnN0IHRlbXBsYXRlSWQgPSBlbG0uZ2V0QXR0cmlidXRlKCdtc2Z0LWNvbnNlbnQtY2xvc2UtcGFnZScpO1xyXG4gICAgICBpZiAodGVtcGxhdGVJZCA9PT0gbnVsbCkgcmV0dXJuO1xyXG4gICAgICBlbG0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgd2luZG93Lk1TRlRDb25zZW50LnRyaWdnZXIoJ0Nsb3NlVGVtcGxhdGUnLCB7XHJcbiAgICAgICAgICB0ZW1wbGF0ZUlkLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICAgIH0sXHJcbiAgfSxcclxuICAvL2hhbmRsZXIgZm9yIHRyaWdnZXIgZXZlbnRcclxuICB7XHJcbiAgICBzZWxlY3RvcjogJ1ttc2Z0LWNvbnNlbnQtdHJpZ2dlci1ldmVudF0nLFxyXG4gICAgaGFuZGxlcjogKGVsbTogRWxlbWVudCkgPT4ge1xyXG4gICAgICBjb25zdCBldmVudE5hbWUgPSBlbG0uZ2V0QXR0cmlidXRlKCdtc2Z0LWNvbnNlbnQtdHJpZ2dlci1ldmVudCcpO1xyXG4gICAgICBpZiAoZXZlbnROYW1lID09PSBudWxsKSByZXR1cm47XHJcbiAgICAgIGNvbnN0IHN0YXRpY0RhdGEgPSBlbG0uZ2V0QXR0cmlidXRlKCdtc2Z0LXBheWxvYWQtZGF0YScpO1xyXG4gICAgICBjb25zdCBmb3JtSWQgPSBlbG0uZ2V0QXR0cmlidXRlKCdtc2Z0LXBheWxvYWQtZm9ybS1pZCcpO1xyXG4gICAgICBjb25zdCBpbnB1dElkcyA9IGVsbS5nZXRBdHRyaWJ1dGUoJ21zZnQtcGF5bG9hZC1pbnB1dC1pZHMnKTtcclxuICAgICAgbGV0IHBheWxvYWQ6IGFueSA9IG51bGw7XHJcbiAgICAgIGlmIChzdGF0aWNEYXRhICE9PSBudWxsKSB7XHJcbiAgICAgICAgcGF5bG9hZCA9IGdldFN0YXRpY0RhdGEoc3RhdGljRGF0YSk7XHJcbiAgICAgIH0gZWxzZSBpZiAoZm9ybUlkICE9PSBudWxsKSB7XHJcbiAgICAgICAgcGF5bG9hZCA9IGdldEpzb25Vc2luZ0Zvcm1JZChmb3JtSWQpO1xyXG4gICAgICB9IGVsc2UgaWYgKGlucHV0SWRzICE9PSBudWxsKSB7XHJcbiAgICAgICAgcGF5bG9hZCA9IGdldEpzb25Vc2luZ0lucHV0SWRzKGlucHV0SWRzKTtcclxuICAgICAgfVxyXG4gICAgICBlbG0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgd2luZG93Lk1TRlRDb25zZW50LnRyaWdnZXIoZXZlbnROYW1lLCBwYXlsb2FkKTtcclxuICAgICAgfSk7XHJcbiAgICB9LFxyXG4gIH0sXHJcbl07XHJcblxyXG4od2luZG93IGFzIGFueSlbJ2Rpc2FibGVRdWVzdGlvbkZvcm1TdWJtaXQnXSA9ICgpID0+IHtcclxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbbXNmdC1xdWVzdGlvbm5haXJlLWZvcm0tc3VibWl0XScpLmZvckVhY2goZWxtID0+IHtcclxuICAgIGVsbS5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgJycpO1xyXG4gIH0pO1xyXG59O1xyXG5cclxuKHdpbmRvdyBhcyBhbnkpWydlbmFibGVRdWVzdGlvbkZvcm1TdWJtaXQnXSA9ICgpID0+IHtcclxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbbXNmdC1xdWVzdGlvbm5haXJlLWZvcm0tc3VibWl0XScpLmZvckVhY2goZWxtID0+IHtcclxuICAgIGVsbS5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJyk7XHJcbiAgfSk7XHJcbn07XHJcblxyXG5jb25zdCByZWdpc3RlckhhbmRsZXJzID0gKCkgPT4ge1xyXG4gIGNvbnN0IGV4ZWN1dGlvbkNvbnRleHRzID0gKHdpbmRvdyBhcyBhbnkpLm1zZnREYXRhPy5leGVjdXRpb25Db250ZXh0cz8ubGVuZ3RoXHJcbiAgICA/ICgod2luZG93IGFzIGFueSkubXNmdERhdGEuZXhlY3V0aW9uQ29udGV4dHMgYXMgc3RyaW5nW10pXHJcbiAgICA6IFtdO1xyXG4gIC8vIHJlZ2lzdGVyIGFsbCBoYW5kbGVyc1xyXG4gIGhhbmRsZXJzLmZvckVhY2goKHsgc2VsZWN0b3IsIGhhbmRsZXIgfSkgPT4ge1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcikuZm9yRWFjaChlbG0gPT4ge1xyXG4gICAgICBpZiAoZXhlY3V0aW9uQ29udGV4dHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGNvbnN0IGF0dHJpYnV0ZXMgPSBlbG0uZ2V0QXR0cmlidXRlTmFtZXMoKTtcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICBleGVjdXRpb25Db250ZXh0cy5zb21lKGN0eCA9PiBhdHRyaWJ1dGVzLmluY2x1ZGVzKGAke2N0eH0tZGlzYWJsZWRgKSlcclxuICAgICAgICApIHtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgaGFuZGxlcihlbG0pO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIC8vcmVtb3ZlIGFsbCBoaWRkZW4gZWxlbWVudHNcclxuICBleGVjdXRpb25Db250ZXh0cy5mb3JFYWNoKGN0eCA9PiB7XHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGBbJHtjdHh9LWhpZGRlbl1gKS5mb3JFYWNoKGVsbSA9PiB7XHJcbiAgICAgIGVsbS5yZW1vdmUoKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG59O1xyXG5cclxuaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgIT09ICdsb2FkaW5nJykge1xyXG4gIHJlZ2lzdGVySGFuZGxlcnMoKTtcclxufSBlbHNlIHtcclxuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24gKCkge1xyXG4gICAgcmVnaXN0ZXJIYW5kbGVycygpO1xyXG4gIH0pO1xyXG59XHJcbiIsImltcG9ydCAnLi9hdHRyaWJ1dGVIYW5kbGVycyc7XHJcblxyXG5jb25zdCBhZGRQcm94eU1ldGhvZHMgPSAoKSA9PiB7XHJcbiAgaW1wb3J0KCcuL2FuY2hvckNsaWNrSGFuZGxlcicpO1xyXG5cclxuICBpbXBvcnQoJy4vcHJveHknKS50aGVuKCh7IGNhbGxNZXRob2QsIHNlbmRNZXNzYWdlIH0pID0+IHtcclxuICAgIHdpbmRvdy5NU0ZUQ29uc2VudCA9IHt9IGFzIGFueTtcclxuXHJcbiAgICBjb25zdCBtZXRob2RzV2l0aFJldHVyblR5cGUgPSBbJ2dldENvbnNlbnQnLCAnZ2V0VHJhY2tlckNhdGVnb3JpZXMnXTtcclxuICAgIGNvbnN0IG1ldGhvZHNXaXRob3V0UmV0dXJuVHlwZSA9IFsndHJpZ2dlcicsICdzaG93Q2hhbmdlU2V0dGluZ3NNb2RhbCddO1xyXG5cclxuICAgIG1ldGhvZHNXaXRob3V0UmV0dXJuVHlwZS5mb3JFYWNoKG1ldGhvZE5hbWUgPT4ge1xyXG4gICAgICAod2luZG93Lk1TRlRDb25zZW50IGFzIGFueSlbbWV0aG9kTmFtZV0gPSAoLi4uYXJnczogYW55W10pOiB2b2lkID0+IHtcclxuICAgICAgICBzZW5kTWVzc2FnZShtZXRob2ROYW1lLCBhcmdzKTtcclxuICAgICAgfTtcclxuICAgIH0pO1xyXG5cclxuICAgIG1ldGhvZHNXaXRoUmV0dXJuVHlwZS5mb3JFYWNoKG1ldGhvZE5hbWUgPT4ge1xyXG4gICAgICAod2luZG93Lk1TRlRDb25zZW50IGFzIGFueSlbbWV0aG9kTmFtZV0gPSAoXHJcbiAgICAgICAgLi4uYXJnczogYW55W11cclxuICAgICAgKTogUHJvbWlzZTxhbnk+ID0+IHtcclxuICAgICAgICByZXR1cm4gY2FsbE1ldGhvZChtZXRob2ROYW1lLCBhcmdzKTtcclxuICAgICAgfTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG59O1xyXG5cclxuaWYgKCEod2luZG93IGFzIGFueSkubXNmdERhdGE/LnJlbmRlclRlbXBsYXRlV2l0aG91dElmcmFtZSkge1xyXG4gIGFkZFByb3h5TWV0aG9kcygpO1xyXG59XHJcbiIsImV4cG9ydCBlbnVtIENvbnNlbnRNb2RlbFR5cGUge1xyXG4gIEV4cGxpY2l0ID0gJ0V4cGxpY2l0JyxcclxuICBJbXBsaWNpdCA9ICdJbXBsaWNpdCcsXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIFB1YmxpY0V2ZW50cyB7XHJcbiAgQ29uc2VudENoYW5nZWQgPSAnQ29uc2VudENoYW5nZWQnLFxyXG4gIFNob3dDb25zZW50Tm90aWNlID0gJ1Nob3dDb25zZW50Tm90aWNlJyxcclxuICBTaG93Rmlyc3RQYWdlID0gJ1Nob3dGaXJzdFBhZ2UnLFxyXG4gIENsb3NlQ29uc2VudE5vdGljZSA9ICdDbG9zZUNvbnNlbnROb3RpY2UnLFxyXG4gIEFjY2VwdEFsbCA9ICdBY2NlcHRBbGwnLFxyXG4gIFJlamVjdEFsbCA9ICdSZWplY3RBbGwnLFxyXG4gIFNob3dUZW1wbGF0ZSA9ICdTaG93VGVtcGxhdGUnLFxyXG4gIENsb3NlVGVtcGxhdGUgPSAnQ2xvc2VUZW1wbGF0ZScsXHJcbiAgVXBkYXRlQ29uc2VudCA9ICdVcGRhdGVDb25zZW50JyxcclxuICBBbmNob3JUYWdDbGlja2VkID0gJ0FuY2hvclRhZ0NsaWNrZWQnLFxyXG4gIEZldGNoQ29uZmlnID0gJ0ZldGNoQ29uZmlnJyxcclxuICBRdWVzdGlvbnNGb3JtU3VibWl0V2l0aG91dE1ldGFEYXRhID0gJ1F1ZXN0aW9uc0Zvcm1TdWJtaXRXaXRob3V0TWV0YURhdGEnLFxyXG4gIFF1ZXN0aW9uc0Zvcm1TdWJtaXQgPSAnUXVlc3Rpb25zRm9ybVN1Ym1pdCcsXHJcbiAgU2hvd1ByZWZlcmVuY2VzID0gJ1Nob3dQcmVmZXJlbmNlcycsXHJcbiAgQ29uc2VudFByZWZlcmVuY2UgPSAnTVNGVENvbnNlbnRQcmVmZXJlbmNlJyxcclxufVxyXG5cclxuZXhwb3J0IGVudW0gRXZlbnRzIHtcclxuICBJbml0ID0gJ0luaXQnLFxyXG4gIENvcmVDb25zZW50TW9kZWxTZWxlY3RlZCA9ICdDb3JlQ29uc2VudE1vZGVsU2VsZWN0ZWQnLFxyXG4gIENvbmZpZ1JlYWR5ID0gJ0NvbmZpZ1JlYWR5JyxcclxufVxyXG5cclxuZXhwb3J0IGVudW0gU0RLTW9kZSB7XHJcbiAgRGVmYXVsdCA9ICdEZWZhdWx0JyxcclxuICBIZWFkTGVzcyA9ICdIZWFkTGVzcycsXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIFN0eWxlVHlwZSB7XHJcbiAgVXJsID0gJ1VybCcsXHJcbiAgVGV4dCA9ICdUZXh0JyxcclxufVxyXG5cclxuZXhwb3J0IGVudW0gUHJlZmVyZW5jZSB7XHJcbiAgT0ZGID0gJzAnLFxyXG4gIE9OID0gJzEnLFxyXG59XHJcblxyXG5leHBvcnQgZW51bSBDb29raWUge1xyXG4gIENvbnNlbnQgPSAnbXNmdC1jb25zZW50JyxcclxufVxyXG5cclxuZXhwb3J0IGVudW0gUmVnaXN0ZXJlZERpdlR5cGUge1xyXG4gIFNjcmlwdCA9ICdzY3JpcHQnLFxyXG4gIElGcmFtZSA9ICdpZnJhbWUnLFxyXG59XHJcblxyXG5leHBvcnQgZW51bSBOb3RpY2VUeXBlIHtcclxuICBUcmFja2VyQ2F0ZWdvcnkgPSAndHJhY2tlckNhdGVnb3J5JyxcclxuICBRdWVzdGlvbnMgPSAnUXVlc3Rpb25zJyxcclxufVxyXG5cclxuZXhwb3J0IGVudW0gRXJyb3JTdHJpbmdzIHtcclxuICBUZW1wbGF0ZUVycm9yID0gJzxiPlRoZXJlIGlzIHNvbWV0aGluZyB3cm9uZyB3aXRoIHRlbXBsYXRlLiBQbGVhc2UgY2hlY2sgbG9ncy48L2I+JyxcclxufVxyXG5cclxuZXhwb3J0IGVudW0gSW50ZXJ2YWxVbml0cyB7XHJcbiAgZGF5ID0gJ2RheScsXHJcbiAgd2VlayA9ICd3ZWVrJyxcclxuICBtb250aCA9ICdtb250aCcsXHJcbiAgeWVhciA9ICd5ZWFyJyxcclxufVxyXG5cclxuZXhwb3J0IGVudW0gUXVlc3Rpb25UeXBlIHtcclxuICBUZXh0ID0gJ1RleHQnLFxyXG4gIEVtYWlsID0gJ0VtYWlsJyxcclxuICBSYWRpbyA9ICdSYWRpbycsXHJcbiAgTXVsdGlTZWxlY3QgPSAnTXVsdGlTZWxlY3QnLFxyXG4gIFNlbGVjdCA9ICdTZWxlY3QnLFxyXG4gIERhdGUgPSAnRGF0ZScsXHJcbiAgUGhvbmVOdW1iZXIgPSAnUGhvbmVOdW1iZXInLFxyXG4gIENyZWRpdENhcmQgPSAnQ3JlZGl0Q2FyZCcsXHJcbiAgTnVtYmVyID0gJ051bWJlcicsXHJcbiAgTXVsdGlMaW5lVGV4dCA9ICdtdWx0aUxpbmVUZXh0JyxcclxufVxyXG5cclxuZXhwb3J0IGVudW0gUXVlc3Rpb25WYWxpZGF0aW9uIHtcclxuICBSZXF1aXJlZCA9ICdSZXF1aXJlZCcsXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIFF1ZXN0aW9uRmllbGQge1xyXG4gIFF1ZXN0aW9uID0gJ3F1ZXN0aW9uJyxcclxuICBQbGFjZWhvbGRlciA9ICdwbGFjZWhvbGRlcicsXHJcbiAgT3B0aW9ucyA9ICdvcHRpb25zJyxcclxufVxyXG5cclxuZXhwb3J0IGVudW0gTW9kZWxLaW5kIHtcclxuICBXZWJDb25zZW50TW9kZWwgPSAnV2ViQ29uc2VudE1vZGVsJyxcclxuICBRdWVzdGlvbk1vZGVsID0gJ0RTUlN1Ym1pc3Npb25Nb2RlbCcsXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIFBhY2thZ2VLaW5kIHtcclxuICBXZWJDb25zZW50UGFja2FnZSA9ICdXZWJDb25zZW50UGFja2FnZScsXHJcbiAgRklERVNQYWNrYWdlID0gJ0ZJREVTUGFja2FnZScsXHJcbiAgRFNSU3VibWlzc2lvblBhY2thZ2UgPSAnRFNSU3VibWlzc2lvblBhY2thZ2UnLFxyXG59XHJcblxyXG5leHBvcnQgZW51bSBUZW1wbGF0ZSB7XHJcbiAgUHJlZmVyZW5jZXMgPSAnUHJlZmVyZW5jZXMnLFxyXG59XHJcbiIsImltcG9ydCB7IFB1YmxpY0V2ZW50cyB9IGZyb20gJ2NvcmUvY29uc3RhbnRzL2VudW1zJztcclxuXHJcbmNvbnN0IG9uY2xpY2tIYW5kbGVyID0gKGU6IE1vdXNlRXZlbnQpID0+IHtcclxuICBpZiAoXHJcbiAgICBlLnRhcmdldCAmJlxyXG4gICAgKGUudGFyZ2V0IGFzIEhUTUxBbmNob3JFbGVtZW50KS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnYSdcclxuICApIHtcclxuICAgIGNvbnN0IGF0dHJpYnV0ZXM6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH0gPSB7fTtcclxuICAgIGNvbnN0IGF0dHJpYnV0ZU5hbWVzID0gKGUudGFyZ2V0IGFzIEhUTUxBbmNob3JFbGVtZW50KS5nZXRBdHRyaWJ1dGVOYW1lcygpO1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXR0cmlidXRlTmFtZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgY29uc3QgYXR0ck5hbWUgPSBhdHRyaWJ1dGVOYW1lc1tpXTtcclxuICAgICAgYXR0cmlidXRlc1thdHRyTmFtZV0gPVxyXG4gICAgICAgIChlLnRhcmdldCBhcyBIVE1MQW5jaG9yRWxlbWVudCkuZ2V0QXR0cmlidXRlKGF0dHJOYW1lKSB8fCAnJztcclxuICAgIH1cclxuICAgIHdpbmRvdy5NU0ZUQ29uc2VudC50cmlnZ2VyKFB1YmxpY0V2ZW50cy5BbmNob3JUYWdDbGlja2VkLCB7IGF0dHJpYnV0ZXMgfSk7XHJcbiAgfVxyXG59O1xyXG5cclxuLy8gT3B0aW9ucyBmb3IgdGhlIG9ic2VydmVyICh3aGljaCBtdXRhdGlvbnMgdG8gb2JzZXJ2ZSlcclxuY29uc3QgY29uZmlnID0geyBjaGlsZExpc3Q6IHRydWUsIHN1YnRyZWU6IHRydWUgfTtcclxuXHJcbi8vIENhbGxiYWNrIGZ1bmN0aW9uIHRvIGV4ZWN1dGUgd2hlbiBtdXRhdGlvbnMgYXJlIG9ic2VydmVkXHJcbmNvbnN0IGNhbGxiYWNrOiBNdXRhdGlvbkNhbGxiYWNrID0gZnVuY3Rpb24gKG11dGF0aW9uTGlzdCkge1xyXG4gIG11dGF0aW9uTGlzdC5mb3JFYWNoKG11dGF0aW9uUmVjb3JkID0+IHtcclxuICAgIG11dGF0aW9uUmVjb3JkLmFkZGVkTm9kZXMuZm9yRWFjaChhZGRlZE5vZGUgPT4ge1xyXG4gICAgICBpZiAoYWRkZWROb2RlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdhJykge1xyXG4gICAgICAgIGFkZGVkTm9kZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHsgaGFuZGxlRXZlbnQ6IG9uY2xpY2tIYW5kbGVyIH0pO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9KTtcclxufTtcclxuXHJcbi8vIENyZWF0ZSBhbiBvYnNlcnZlciBpbnN0YW5jZSBsaW5rZWQgdG8gdGhlIGNhbGxiYWNrIGZ1bmN0aW9uXHJcbmNvbnN0IG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoY2FsbGJhY2spO1xyXG5cclxuLy8gU3RhcnQgb2JzZXJ2aW5nIHRoZSB0YXJnZXQgbm9kZSBmb3IgY29uZmlndXJlZCBtdXRhdGlvbnNcclxub2JzZXJ2ZXIub2JzZXJ2ZShkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsIGNvbmZpZyk7XHJcbiIsImV4cG9ydCBpbnRlcmZhY2UgSURlZmVycmVkPFQ+IHtcclxuICBwcm9taXNlOiBQcm9taXNlPFQ+O1xyXG4gIHJlc29sdmU6ICh2YWx1ZTogVCB8IFByb21pc2VMaWtlPFQ+KSA9PiB2b2lkO1xyXG4gIHJlamVjdDogKHJlYXNvbj86IGFueSkgPT4gdm9pZDtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXN5bmNVdGlscyB7XHJcbiAgcHVibGljIHN0YXRpYyBkZWZlcnJlZDxUPigpOiBJRGVmZXJyZWQ8VD4ge1xyXG4gICAgY29uc3QgZGVmZXIgPSB7fSBhcyBJRGVmZXJyZWQ8VD47XHJcbiAgICBkZWZlci5wcm9taXNlID0gbmV3IFByb21pc2U8VD4oKHJlcywgcmVqKSA9PiB7XHJcbiAgICAgIGRlZmVyLnJlc29sdmUgPSByZXM7XHJcbiAgICAgIGRlZmVyLnJlamVjdCA9IHJlajtcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBkZWZlcjtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IEFzeW5jVXRpbHMsIHsgSURlZmVycmVkIH0gZnJvbSAnY29yZS91dGlscy9Bc3luY1V0aWxzJztcclxuXHJcbmNvbnN0IHByb21pc2VNYXA6IHsgW2tleTogc3RyaW5nXTogSURlZmVycmVkPGFueT4gfSA9IHt9O1xyXG5cclxuZXhwb3J0IGNvbnN0IHNlbmRNZXNzYWdlID0gKFxyXG4gIG1ldGhvZDogc3RyaW5nLFxyXG4gIGFyZ3M6IGFueVtdLFxyXG4gIHJlc3BvbnNlSWQ/OiBzdHJpbmcsXHJcbikgPT4ge1xyXG4gIGlmIChwYXJlbnQpIHtcclxuICAgIHBhcmVudC5wb3N0TWVzc2FnZShcclxuICAgICAgeyBtZXRob2Q6IG1ldGhvZCwgcGFyYW1zOiBPYmplY3QudmFsdWVzKGFyZ3MpLCByZXNwb25zZUlkIH0sXHJcbiAgICAgIG1zZnREYXRhLm9yaWdpbixcclxuICAgICk7XHJcbiAgfVxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGNhbGxNZXRob2QgPSAobWV0aG9kOiBzdHJpbmcsIGFyZ3M6IGFueVtdKTogUHJvbWlzZTxhbnk+ID0+IHtcclxuICBjb25zdCByZXNwb25zZUlkID0gYCR7bWV0aG9kfS0ke25ldyBEYXRlKCkuZ2V0VGltZSgpfWA7XHJcbiAgY29uc3QgZGVmZXJyZWQgPSBBc3luY1V0aWxzLmRlZmVycmVkPGFueT4oKTtcclxuICBwcm9taXNlTWFwW3Jlc3BvbnNlSWRdID0gZGVmZXJyZWQ7XHJcbiAgc2VuZE1lc3NhZ2UobWV0aG9kLCBhcmdzLCByZXNwb25zZUlkKTtcclxuICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcclxufTtcclxuXHJcbndpbmRvdy5vbm1lc3NhZ2UgPSBlID0+IHtcclxuICBpZiAoZS5vcmlnaW4gPT09IG1zZnREYXRhLm9yaWdpbiAmJiBlPy5kYXRhPy5yZXNwb25zZUlkKSB7XHJcbiAgICBlLmRhdGEuZXJyb3JcclxuICAgICAgPyBwcm9taXNlTWFwW2UuZGF0YS5yZXNwb25zZUlkXS5yZWplY3QoZS5kYXRhLmVycm9yKVxyXG4gICAgICA6IHByb21pc2VNYXBbZS5kYXRhLnJlc3BvbnNlSWRdLnJlc29sdmUoZS5kYXRhLnJlc3BvbnNlKTtcclxuICB9XHJcbn07XHJcbiJdLCJuYW1lcyI6WyJBc3luY1V0aWxzIl0sIm1hcHBpbmdzIjoiOzs7SUFBTyxJQUFNLG9CQUFvQixHQUFHLFVBQUMsUUFBa0I7UUFDckQsSUFBTSxNQUFNLEdBQVEsRUFB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
