(function () {
    'use strict';

    /******************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */

    var __assign = function() {
        __assign = Object.assign || function __assign(t) {
            for (var s, i = 1, n = arguments.length; i < n; i++) {
                s = arguments[i];
                for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
            }
            return t;
        };
        return __assign.apply(this, arguments);
    };

    function __read(o, n) {
        var m = typeof Symbol === "function" && o[Symbol.iterator];
        if (!m) return o;
        var i = m.call(o), r, ar = [], e;
        try {
            while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);
        }
        catch (error) { e = { error: error }; }
        finally {
            try {
                if (r && !r.done && (m = i["return"])) m.call(i);
            }
            finally { if (e) throw e.error; }
        }
        return ar;
    }

    function __spreadArray(to, from, pack) {
        if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {
            if (ar || !(i in from)) {
                if (!ar) ar = Array.prototype.slice.call(from, 0, i);
                ar[i] = from[i];
            }
        }
        return to.concat(ar || Array.prototype.slice.call(from));
    }

    var ConsentModelType;
    (function (ConsentModelType) {
        ConsentModelType["Explicit"] = "Explicit";
        ConsentModelType["Implicit"] = "Implicit";
    })(ConsentModelType || (ConsentModelType = {}));
    var PublicEvents;
    (function (PublicEvents) {
        PublicEvents["ConsentChanged"] = "ConsentChanged";
        PublicEvents["ShowConsentNotice"] = "ShowConsentNotice";
        PublicEvents["ShowFirstPage"] = "ShowFirstPage";
        PublicEvents["CloseConsentNotice"] = "CloseConsentNotice";
        PublicEvents["AcceptAll"] = "AcceptAll";
        PublicEvents["RejectAll"] = "RejectAll";
        PublicEvents["ShowTemplate"] = "ShowTemplate";
        PublicEvents["CloseTemplate"] = "CloseTemplate";
        PublicEvents["UpdateConsent"] = "UpdateConsent";
        PublicEvents["AnchorTagClicked"] = "AnchorTagClicked";
        PublicEvents["FetchConfig"] = "FetchConfig";
        PublicEvents["QuestionsFormSubmitWithoutMetaData"] = "QuestionsFormSubmitWithoutMetaData";
        PublicEvents["QuestionsFormSubmit"] = "QuestionsFormSubmit";
        PublicEvents["ShowPreferences"] = "ShowPreferences";
        PublicEvents["ConsentPreference"] = "MSFTConsentPreference";
    })(PublicEvents || (PublicEvents = {}));
    var Events;
    (function (Events) {
        Events["Init"] = "Init";
        Events["CoreConsentModelSelected"] = "CoreConsentModelSelected";
        Events["ConfigReady"] = "ConfigReady";
    })(Events || (Events = {}));
    var SDKMode;
    (function (SDKMode) {
        SDKMode["Default"] = "Default";
        SDKMode["HeadLess"] = "HeadLess";
    })(SDKMode || (SDKMode = {}));
    var StyleType;
    (function (StyleType) {
        StyleType["Url"] = "Url";
        StyleType["Text"] = "Text";
    })(StyleType || (StyleType = {}));
    var Preference;
    (function (Preference) {
        Preference["OFF"] = "0";
        Preference["ON"] = "1";
    })(Preference || (Preference = {}));
    var Cookie;
    (function (Cookie) {
        Cookie["Consent"] = "msft-consent";
    })(Cookie || (Cookie = {}));
    var RegisteredDivType;
    (function (RegisteredDivType) {
        RegisteredDivType["Script"] = "script";
        RegisteredDivType["IFrame"] = "iframe";
    })(RegisteredDivType || (RegisteredDivType = {}));
    var NoticeType;
    (function (NoticeType) {
        NoticeType["TrackerCategory"] = "trackerCategory";
        NoticeType["Questions"] = "Questions";
    })(NoticeType || (NoticeType = {}));
    var ErrorStrings;
    (function (ErrorStrings) {
        ErrorStrings["TemplateError"] = "<b>There is something wrong with template. Please check logs.</b>";
    })(ErrorStrings || (ErrorStrings = {}));
    var IntervalUnits;
    (function (IntervalUnits) {
        IntervalUnits["day"] = "day";
        IntervalUnits["week"] = "week";
        IntervalUnits["month"] = "month";
        IntervalUnits["year"] = "year";
    })(IntervalUnits || (IntervalUnits = {}));
    var QuestionType;
    (function (QuestionType) {
        QuestionType["Text"] = "Text";
        QuestionType["Email"] = "Email";
        QuestionType["Radio"] = "Radio";
        QuestionType["MultiSelect"] = "MultiSelect";
        QuestionType["Select"] = "Select";
        QuestionType["Date"] = "Date";
        QuestionType["PhoneNumber"] = "PhoneNumber";
        QuestionType["CreditCard"] = "CreditCard";
        QuestionType["Number"] = "Number";
        QuestionType["MultiLineText"] = "multiLineText";
    })(QuestionType || (QuestionType = {}));
    var QuestionValidation;
    (function (QuestionValidation) {
        QuestionValidation["Required"] = "Required";
    })(QuestionValidation || (QuestionValidation = {}));
    var QuestionField;
    (function (QuestionField) {
        QuestionField["Question"] = "question";
        QuestionField["Placeholder"] = "placeholder";
        QuestionField["Options"] = "options";
    })(QuestionField || (QuestionField = {}));
    var ModelKind;
    (function (ModelKind) {
        ModelKind["WebConsentModel"] = "WebConsentModel";
        ModelKind["QuestionModel"] = "DSRSubmissionModel";
    })(ModelKind || (ModelKind = {}));
    var PackageKind;
    (function (PackageKind) {
        PackageKind["WebConsentPackage"] = "WebConsentPackage";
        PackageKind["FIDESPackage"] = "FIDESPackage";
        PackageKind["DSRSubmissionPackage"] = "DSRSubmissionPackage";
    })(PackageKind || (PackageKind = {}));
    var Template;
    (function (Template) {
        Template["Preferences"] = "Preferences";
    })(Template || (Template = {}));

    var FormHandler = /** @class */ (function () {
        function FormHandler() {
            window.__MSFT_SDK.EventBus.on(Events.ConfigReady, FormHandler.init);
            window.__MSFT_SDK.EventBus.on(Events.Init, function () {
                window.__MSFT_SDK.EventBus.trigger(PublicEvents.ShowFirstPage);
            });
            window.__MSFT_SDK.EventBus.on(PublicEvents.QuestionsFormSubmitWithoutMetaData, FormHandler.onQuestionFormSubmit);
        }
        FormHandler.getQuestionTemplate = function (question, validations) {
            var questionStr = "<label class=\"msft-form-question-label\" for=\"".concat(question.name, "\">{{{").concat(question.name, ".question}}} ").concat(validations.includes(QuestionValidation.Required)
                ? '<span class="required-star">*</span>'
                : '', "</label>");
            var answer = "";
            switch (question.type) {
                case QuestionType.Text:
                case QuestionType.Number:
                case QuestionType.Date:
                    answer = "<input id=\"".concat(question.name, "\" name=\"").concat(question.name, "\" ").concat(validations.includes(QuestionValidation.Required) && 'required', "  type=\"").concat(question.type.toLowerCase(), "\" />");
                    break;
                case QuestionType.Email:
                    answer = "<input id=\"".concat(question.name, "\" name=\"").concat(question.name, "\"\n        pattern=\"^([a-zA-Z0-9._%-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,6})*$\"\n        ").concat(validations.includes(QuestionValidation.Required) && 'required', "\n        type=\"text\" title=\"Valid email address\" />");
                    break;
                case QuestionType.MultiLineText:
                    answer = "<textarea name=\"".concat(question.name, "\" ").concat(validations.includes(QuestionValidation.Required) && 'required', " > </textarea>");
                    break;
                case QuestionType.Select:
                    answer = "<select id=\"".concat(question.name, "\" name=\"").concat(question.name, "\" ").concat(validations.includes(QuestionValidation.Required) && 'required', "> \n          {{#each ").concat(question.name, ".options}} <option value={{{value}}}>{{{label}}}</option> {{/each}}\n        </select>");
                    break;
                case QuestionType.MultiSelect:
                    answer = "<select id=\"".concat(question.name, "\" name=\"").concat(question.name, "\" multiple ").concat(validations.includes(QuestionValidation.Required) && 'required', "> \n          {{#each ").concat(question.name, ".options}} <option value={{{value}}}>{{{label}}}</option> {{/each}}\n        </select>");
                    break;
                case QuestionType.Radio:
                    answer = "{{#each ".concat(question.name, ".options}}\n        <div>\n          <input type=\"radio\" id={{{value}}} name=\"").concat(question.name, "\" value={{{value}}}>\n          <label class=\"msft-form-question-label\" for={{{value}}}>{{{label}}}</label>\n        </div>\n        {{/each}}");
                    break;
                case QuestionType.CreditCard:
                    answer = "<input id=\"".concat(question.name, "\" name=\"").concat(question.name, "\" ").concat(validations.includes(QuestionValidation.Required) && 'required', "  type=\"tel\" inputmode=\"numeric\"/>");
                    break;
                case QuestionType.PhoneNumber:
                    answer = "<input id=\"".concat(question.name, "\" name=\"").concat(question.name, "\" ").concat(validations.includes(QuestionValidation.Required) && 'required', "  type=\"text\"/>");
            }
            return "<div class=\"msft-form-question\">".concat(questionStr, " ").concat(answer, "</div>");
        };
        FormHandler.init = function () {
            var selectedModel = window.__MSFT_SDK.Store.getters
                .currentModel;
            if ((selectedModel === null || selectedModel === void 0 ? void 0 : selectedModel.kind) === ModelKind.QuestionModel) {
                var formTemplate = FormHandler.getFormTemplate(window.__MSFT_SDK.Store.getters.questions, selectedModel);
                window.__MSFT_SDK.Logger.info('Setting question form template data');
                window.__MSFT_SDK.Store.reducers.setTemplateData(__assign(__assign({}, window.__MSFT_SDK.Store.getters.templateData), { questions: formTemplate, logoURL: selectedModel.logoURL }));
            }
        };
        FormHandler.getFormTemplate = function (questions, questionModel) {
            var questionMap = {};
            questions.forEach(function (question) {
                questionMap[question.name] = question;
            });
            return ("\n      <style>\n        .msft-question-form {\n          display: inline-block;\n          text-align: left;\n        }\n        .msft-form-question {\n          display:flex;\n          flex-direction:column;\n        }\n        .required-star {\n          color: red;\n        }\n      </style>\n      <form id=\"".concat(FormHandler.formId, "\" class=\"msft-question-form\">") +
                questionModel.questions.reduce(function (templateStr, ques) {
                    return templateStr +
                        FormHandler.getQuestionTemplate(questionMap[ques.questionName], __spreadArray(__spreadArray([], __read((ques.validations || [])), false), __read(questionMap[ques.questionName].validations), false));
                }, '') +
                "</form>\n       <script>\n        const form = document.getElementById('".concat(FormHandler.formId, "');\n        form.addEventListener('submit', msftCallbackFunction);\n       </script>\n      "));
        };
        FormHandler.onQuestionFormSubmit = function (payload) {
            var questions = window.__MSFT_SDK.Store.getters.questions;
            var model = window.__MSFT_SDK.Store.getters
                .currentModel;
            questions.forEach(function (question) {
                var _a, _b, _c;
                question.classification =
                    ((_c = (_b = (_a = model.questions) === null || _a === void 0 ? void 0 : _a.find(function (que) { return que.questionName === question.name; })) === null || _b === void 0 ? void 0 : _b.classifications) === null || _c === void 0 ? void 0 : _c[0]) || question.classification;
            });
            window.__MSFT_SDK.EventBus.trigger(PublicEvents.QuestionsFormSubmit, {
                data: payload.data,
                metadata: {
                    questions: questions,
                    model: model,
                },
            });
        };
        FormHandler.formId = 'msft-question-form';
        return FormHandler;
    }());
    new FormHandler();

}());
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZHNyLm1pbi5qcyIsInNvdXJjZXMiOlsiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3RzbGliL3RzbGliLmVzNi5qcyIsIi4uLy4uLy4uLy4uLy4uL1NESy9zcmMvY29yZS9jb25zdGFudHMvZW51bXMudHMiLCIuLi8uLi8uLi8uLi8uLi9TREsvc3JjL2Rzci9Gb3JtSGFuZGxlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLlxyXG5cclxuUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55XHJcbnB1cnBvc2Ugd2l0aCBvciB3aXRob3V0IGZlZSBpcyBoZXJlYnkgZ3JhbnRlZC5cclxuXHJcblRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEhcclxuUkVHQVJEIFRPIFRISVMgU09GVFdBUkUgSU5DTFVESU5HIEFMTCBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZXHJcbkFORCBGSVRORVNTLiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SIEJFIExJQUJMRSBGT1IgQU5ZIFNQRUNJQUwsIERJUkVDVCxcclxuSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NXHJcbkxPU1MgT0YgVVNFLCBEQVRBIE9SIFBST0ZJVFMsIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBORUdMSUdFTkNFIE9SXHJcbk9USEVSIFRPUlRJT1VTIEFDVElPTiwgQVJJU0lORyBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBVU0UgT1JcclxuUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS5cclxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cclxuLyogZ2xvYmFsIFJlZmxlY3QsIFByb21pc2UgKi9cclxuXHJcbnZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24oZCwgYikge1xyXG4gICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19leHRlbmRzKGQsIGIpIHtcclxuICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXHJcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xyXG4gICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG59XHJcblxyXG5leHBvcnQgdmFyIF9fYXNzaWduID0gZnVuY3Rpb24oKSB7XHJcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gX19hc3NpZ24odCkge1xyXG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpIHRbcF0gPSBzW3BdO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdDtcclxuICAgIH1cclxuICAgIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19yZXN0KHMsIGUpIHtcclxuICAgIHZhciB0ID0ge307XHJcbiAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkgJiYgZS5pbmRleE9mKHApIDwgMClcclxuICAgICAgICB0W3BdID0gc1twXTtcclxuICAgIGlmIChzICE9IG51bGwgJiYgdHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPT09IFwiZnVuY3Rpb25cIilcclxuICAgICAgICBmb3IgKHZhciBpID0gMCwgcCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocyk7IGkgPCBwLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChlLmluZGV4T2YocFtpXSkgPCAwICYmIE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChzLCBwW2ldKSlcclxuICAgICAgICAgICAgICAgIHRbcFtpXV0gPSBzW3BbaV1dO1xyXG4gICAgICAgIH1cclxuICAgIHJldHVybiB0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xyXG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xyXG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcGFyYW0ocGFyYW1JbmRleCwgZGVjb3JhdG9yKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwga2V5KSB7IGRlY29yYXRvcih0YXJnZXQsIGtleSwgcGFyYW1JbmRleCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpIHtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0ZXIodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XHJcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cclxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxyXG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19nZW5lcmF0b3IodGhpc0FyZywgYm9keSkge1xyXG4gICAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZztcclxuICAgIHJldHVybiBnID0geyBuZXh0OiB2ZXJiKDApLCBcInRocm93XCI6IHZlcmIoMSksIFwicmV0dXJuXCI6IHZlcmIoMikgfSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKG9wKSB7XHJcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xyXG4gICAgICAgIHdoaWxlIChfKSB0cnkge1xyXG4gICAgICAgICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSBvcFswXSAmIDIgPyB5W1wicmV0dXJuXCJdIDogb3BbMF0gPyB5W1widGhyb3dcIl0gfHwgKCh0ID0geVtcInJldHVyblwiXSkgJiYgdC5jYWxsKHkpLCAwKSA6IHkubmV4dCkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7XHJcbiAgICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcclxuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9XHJcbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCB2YXIgX19jcmVhdGVCaW5kaW5nID0gT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xyXG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcclxuICAgIHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihtLCBrKTtcclxuICAgIGlmICghZGVzYyB8fCAoXCJnZXRcIiBpbiBkZXNjID8gIW0uX19lc01vZHVsZSA6IGRlc2Mud3JpdGFibGUgfHwgZGVzYy5jb25maWd1cmFibGUpKSB7XHJcbiAgICAgICAgZGVzYyA9IHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIG1ba107IH0gfTtcclxuICAgIH1cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBrMiwgZGVzYyk7XHJcbn0pIDogKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XHJcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xyXG4gICAgb1trMl0gPSBtW2tdO1xyXG59KTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2V4cG9ydFN0YXIobSwgbykge1xyXG4gICAgZm9yICh2YXIgcCBpbiBtKSBpZiAocCAhPT0gXCJkZWZhdWx0XCIgJiYgIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvLCBwKSkgX19jcmVhdGVCaW5kaW5nKG8sIG0sIHApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX192YWx1ZXMobykge1xyXG4gICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDtcclxuICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pO1xyXG4gICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSBcIm51bWJlclwiKSByZXR1cm4ge1xyXG4gICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDtcclxuICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9O1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyBcIk9iamVjdCBpcyBub3QgaXRlcmFibGUuXCIgOiBcIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3JlYWQobywgbikge1xyXG4gICAgdmFyIG0gPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdO1xyXG4gICAgaWYgKCFtKSByZXR1cm4gbztcclxuICAgIHZhciBpID0gbS5jYWxsKG8pLCByLCBhciA9IFtdLCBlO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICB3aGlsZSAoKG4gPT09IHZvaWQgMCB8fCBuLS0gPiAwKSAmJiAhKHIgPSBpLm5leHQoKSkuZG9uZSkgYXIucHVzaChyLnZhbHVlKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlcnJvcikgeyBlID0geyBlcnJvcjogZXJyb3IgfTsgfVxyXG4gICAgZmluYWxseSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKHIgJiYgIXIuZG9uZSAmJiAobSA9IGlbXCJyZXR1cm5cIl0pKSBtLmNhbGwoaSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZpbmFsbHkgeyBpZiAoZSkgdGhyb3cgZS5lcnJvcjsgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFyO1xyXG59XHJcblxyXG4vKiogQGRlcHJlY2F0ZWQgKi9cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkKCkge1xyXG4gICAgZm9yICh2YXIgYXIgPSBbXSwgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgYXIgPSBhci5jb25jYXQoX19yZWFkKGFyZ3VtZW50c1tpXSkpO1xyXG4gICAgcmV0dXJuIGFyO1xyXG59XHJcblxyXG4vKiogQGRlcHJlY2F0ZWQgKi9cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkQXJyYXlzKCkge1xyXG4gICAgZm9yICh2YXIgcyA9IDAsIGkgPSAwLCBpbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpbDsgaSsrKSBzICs9IGFyZ3VtZW50c1tpXS5sZW5ndGg7XHJcbiAgICBmb3IgKHZhciByID0gQXJyYXkocyksIGsgPSAwLCBpID0gMDsgaSA8IGlsOyBpKyspXHJcbiAgICAgICAgZm9yICh2YXIgYSA9IGFyZ3VtZW50c1tpXSwgaiA9IDAsIGpsID0gYS5sZW5ndGg7IGogPCBqbDsgaisrLCBrKyspXHJcbiAgICAgICAgICAgIHJba10gPSBhW2pdO1xyXG4gICAgcmV0dXJuIHI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZEFycmF5KHRvLCBmcm9tLCBwYWNrKSB7XHJcbiAgICBpZiAocGFjayB8fCBhcmd1bWVudHMubGVuZ3RoID09PSAyKSBmb3IgKHZhciBpID0gMCwgbCA9IGZyb20ubGVuZ3RoLCBhcjsgaSA8IGw7IGkrKykge1xyXG4gICAgICAgIGlmIChhciB8fCAhKGkgaW4gZnJvbSkpIHtcclxuICAgICAgICAgICAgaWYgKCFhcikgYXIgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tLCAwLCBpKTtcclxuICAgICAgICAgICAgYXJbaV0gPSBmcm9tW2ldO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB0by5jb25jYXQoYXIgfHwgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZnJvbSkpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdCh2KSB7XHJcbiAgICByZXR1cm4gdGhpcyBpbnN0YW5jZW9mIF9fYXdhaXQgPyAodGhpcy52ID0gdiwgdGhpcykgOiBuZXcgX19hd2FpdCh2KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNHZW5lcmF0b3IodGhpc0FyZywgX2FyZ3VtZW50cywgZ2VuZXJhdG9yKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIGcgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSksIGksIHEgPSBbXTtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyBpZiAoZ1tuXSkgaVtuXSA9IGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoYSwgYikgeyBxLnB1c2goW24sIHYsIGEsIGJdKSA+IDEgfHwgcmVzdW1lKG4sIHYpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gcmVzdW1lKG4sIHYpIHsgdHJ5IHsgc3RlcChnW25dKHYpKTsgfSBjYXRjaCAoZSkgeyBzZXR0bGUocVswXVszXSwgZSk7IH0gfVxyXG4gICAgZnVuY3Rpb24gc3RlcChyKSB7IHIudmFsdWUgaW5zdGFuY2VvZiBfX2F3YWl0ID8gUHJvbWlzZS5yZXNvbHZlKHIudmFsdWUudikudGhlbihmdWxmaWxsLCByZWplY3QpIDogc2V0dGxlKHFbMF1bMl0sIHIpOyB9XHJcbiAgICBmdW5jdGlvbiBmdWxmaWxsKHZhbHVlKSB7IHJlc3VtZShcIm5leHRcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiByZWplY3QodmFsdWUpIHsgcmVzdW1lKFwidGhyb3dcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUoZiwgdikgeyBpZiAoZih2KSwgcS5zaGlmdCgpLCBxLmxlbmd0aCkgcmVzdW1lKHFbMF1bMF0sIHFbMF1bMV0pOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jRGVsZWdhdG9yKG8pIHtcclxuICAgIHZhciBpLCBwO1xyXG4gICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiLCBmdW5jdGlvbiAoZSkgeyB0aHJvdyBlOyB9KSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobiwgZikgeyBpW25dID0gb1tuXSA/IGZ1bmN0aW9uICh2KSB7IHJldHVybiAocCA9ICFwKSA/IHsgdmFsdWU6IF9fYXdhaXQob1tuXSh2KSksIGRvbmU6IG4gPT09IFwicmV0dXJuXCIgfSA6IGYgPyBmKHYpIDogdjsgfSA6IGY7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNWYWx1ZXMobykge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBtID0gb1tTeW1ib2wuYXN5bmNJdGVyYXRvcl0sIGk7XHJcbiAgICByZXR1cm4gbSA/IG0uY2FsbChvKSA6IChvID0gdHlwZW9mIF9fdmFsdWVzID09PSBcImZ1bmN0aW9uXCIgPyBfX3ZhbHVlcyhvKSA6IG9bU3ltYm9sLml0ZXJhdG9yXSgpLCBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaSk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaVtuXSA9IG9bbl0gJiYgZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgdiA9IG9bbl0odiksIHNldHRsZShyZXNvbHZlLCByZWplY3QsIHYuZG9uZSwgdi52YWx1ZSk7IH0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCBkLCB2KSB7IFByb21pc2UucmVzb2x2ZSh2KS50aGVuKGZ1bmN0aW9uKHYpIHsgcmVzb2x2ZSh7IHZhbHVlOiB2LCBkb25lOiBkIH0pOyB9LCByZWplY3QpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ha2VUZW1wbGF0ZU9iamVjdChjb29rZWQsIHJhdykge1xyXG4gICAgaWYgKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkoY29va2VkLCBcInJhd1wiLCB7IHZhbHVlOiByYXcgfSk7IH0gZWxzZSB7IGNvb2tlZC5yYXcgPSByYXc7IH1cclxuICAgIHJldHVybiBjb29rZWQ7XHJcbn07XHJcblxyXG52YXIgX19zZXRNb2R1bGVEZWZhdWx0ID0gT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCB2KSB7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgXCJkZWZhdWx0XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHYgfSk7XHJcbn0pIDogZnVuY3Rpb24obywgdikge1xyXG4gICAgb1tcImRlZmF1bHRcIl0gPSB2O1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0U3Rhcihtb2QpIHtcclxuICAgIGlmIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpIHJldHVybiBtb2Q7XHJcbiAgICB2YXIgcmVzdWx0ID0ge307XHJcbiAgICBpZiAobW9kICE9IG51bGwpIGZvciAodmFyIGsgaW4gbW9kKSBpZiAoayAhPT0gXCJkZWZhdWx0XCIgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vZCwgaykpIF9fY3JlYXRlQmluZGluZyhyZXN1bHQsIG1vZCwgayk7XHJcbiAgICBfX3NldE1vZHVsZURlZmF1bHQocmVzdWx0LCBtb2QpO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0RGVmYXVsdChtb2QpIHtcclxuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgZGVmYXVsdDogbW9kIH07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHJlY2VpdmVyLCBzdGF0ZSwga2luZCwgZikge1xyXG4gICAgaWYgKGtpbmQgPT09IFwiYVwiICYmICFmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBhY2Nlc3NvciB3YXMgZGVmaW5lZCB3aXRob3V0IGEgZ2V0dGVyXCIpO1xyXG4gICAgaWYgKHR5cGVvZiBzdGF0ZSA9PT0gXCJmdW5jdGlvblwiID8gcmVjZWl2ZXIgIT09IHN0YXRlIHx8ICFmIDogIXN0YXRlLmhhcyhyZWNlaXZlcikpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgcmVhZCBwcml2YXRlIG1lbWJlciBmcm9tIGFuIG9iamVjdCB3aG9zZSBjbGFzcyBkaWQgbm90IGRlY2xhcmUgaXRcIik7XHJcbiAgICByZXR1cm4ga2luZCA9PT0gXCJtXCIgPyBmIDoga2luZCA9PT0gXCJhXCIgPyBmLmNhbGwocmVjZWl2ZXIpIDogZiA/IGYudmFsdWUgOiBzdGF0ZS5nZXQocmVjZWl2ZXIpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19jbGFzc1ByaXZhdGVGaWVsZFNldChyZWNlaXZlciwgc3RhdGUsIHZhbHVlLCBraW5kLCBmKSB7XHJcbiAgICBpZiAoa2luZCA9PT0gXCJtXCIpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIG1ldGhvZCBpcyBub3Qgd3JpdGFibGVcIik7XHJcbiAgICBpZiAoa2luZCA9PT0gXCJhXCIgJiYgIWYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIGFjY2Vzc29yIHdhcyBkZWZpbmVkIHdpdGhvdXQgYSBzZXR0ZXJcIik7XHJcbiAgICBpZiAodHlwZW9mIHN0YXRlID09PSBcImZ1bmN0aW9uXCIgPyByZWNlaXZlciAhPT0gc3RhdGUgfHwgIWYgOiAhc3RhdGUuaGFzKHJlY2VpdmVyKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCB3cml0ZSBwcml2YXRlIG1lbWJlciB0byBhbiBvYmplY3Qgd2hvc2UgY2xhc3MgZGlkIG5vdCBkZWNsYXJlIGl0XCIpO1xyXG4gICAgcmV0dXJuIChraW5kID09PSBcImFcIiA/IGYuY2FsbChyZWNlaXZlciwgdmFsdWUpIDogZiA/IGYudmFsdWUgPSB2YWx1ZSA6IHN0YXRlLnNldChyZWNlaXZlciwgdmFsdWUpKSwgdmFsdWU7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2NsYXNzUHJpdmF0ZUZpZWxkSW4oc3RhdGUsIHJlY2VpdmVyKSB7XHJcbiAgICBpZiAocmVjZWl2ZXIgPT09IG51bGwgfHwgKHR5cGVvZiByZWNlaXZlciAhPT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgcmVjZWl2ZXIgIT09IFwiZnVuY3Rpb25cIikpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgdXNlICdpbicgb3BlcmF0b3Igb24gbm9uLW9iamVjdFwiKTtcclxuICAgIHJldHVybiB0eXBlb2Ygc3RhdGUgPT09IFwiZnVuY3Rpb25cIiA/IHJlY2VpdmVyID09PSBzdGF0ZSA6IHN0YXRlLmhhcyhyZWNlaXZlcik7XHJcbn1cclxuIiwiZXhwb3J0IGVudW0gQ29uc2VudE1vZGVsVHlwZSB7XHJcbiAgRXhwbGljaXQgPSAnRXhwbGljaXQnLFxyXG4gIEltcGxpY2l0ID0gJ0ltcGxpY2l0JyxcclxufVxyXG5cclxuZXhwb3J0IGVudW0gUHVibGljRXZlbnRzIHtcclxuICBDb25zZW50Q2hhbmdlZCA9ICdDb25zZW50Q2hhbmdlZCcsXHJcbiAgU2hvd0NvbnNlbnROb3RpY2UgPSAnU2hvd0NvbnNlbnROb3RpY2UnLFxyXG4gIFNob3dGaXJzdFBhZ2UgPSAnU2hvd0ZpcnN0UGFnZScsXHJcbiAgQ2xvc2VDb25zZW50Tm90aWNlID0gJ0Nsb3NlQ29uc2VudE5vdGljZScsXHJcbiAgQWNjZXB0QWxsID0gJ0FjY2VwdEFsbCcsXHJcbiAgUmVqZWN0QWxsID0gJ1JlamVjdEFsbCcsXHJcbiAgU2hvd1RlbXBsYXRlID0gJ1Nob3dUZW1wbGF0ZScsXHJcbiAgQ2xvc2VUZW1wbGF0ZSA9ICdDbG9zZVRlbXBsYXRlJyxcclxuICBVcGRhdGVDb25zZW50ID0gJ1VwZGF0ZUNvbnNlbnQnLFxyXG4gIEFuY2hvclRhZ0NsaWNrZWQgPSAnQW5jaG9yVGFnQ2xpY2tlZCcsXHJcbiAgRmV0Y2hDb25maWcgPSAnRmV0Y2hDb25maWcnLFxyXG4gIFF1ZXN0aW9uc0Zvcm1TdWJtaXRXaXRob3V0TWV0YURhdGEgPSAnUXVlc3Rpb25zRm9ybVN1Ym1pdFdpdGhvdXRNZXRhRGF0YScsXHJcbiAgUXVlc3Rpb25zRm9ybVN1Ym1pdCA9ICdRdWVzdGlvbnNGb3JtU3VibWl0JyxcclxuICBTaG93UHJlZmVyZW5jZXMgPSAnU2hvd1ByZWZlcmVuY2VzJyxcclxuICBDb25zZW50UHJlZmVyZW5jZSA9ICdNU0ZUQ29uc2VudFByZWZlcmVuY2UnLFxyXG59XHJcblxyXG5leHBvcnQgZW51bSBFdmVudHMge1xyXG4gIEluaXQgPSAnSW5pdCcsXHJcbiAgQ29yZUNvbnNlbnRNb2RlbFNlbGVjdGVkID0gJ0NvcmVDb25zZW50TW9kZWxTZWxlY3RlZCcsXHJcbiAgQ29uZmlnUmVhZHkgPSAnQ29uZmlnUmVhZHknLFxyXG59XHJcblxyXG5leHBvcnQgZW51bSBTREtNb2RlIHtcclxuICBEZWZhdWx0ID0gJ0RlZmF1bHQnLFxyXG4gIEhlYWRMZXNzID0gJ0hlYWRMZXNzJyxcclxufVxyXG5cclxuZXhwb3J0IGVudW0gU3R5bGVUeXBlIHtcclxuICBVcmwgPSAnVXJsJyxcclxuICBUZXh0ID0gJ1RleHQnLFxyXG59XHJcblxyXG5leHBvcnQgZW51bSBQcmVmZXJlbmNlIHtcclxuICBPRkYgPSAnMCcsXHJcbiAgT04gPSAnMScsXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIENvb2tpZSB7XHJcbiAgQ29uc2VudCA9ICdtc2Z0LWNvbnNlbnQnLFxyXG59XHJcblxyXG5leHBvcnQgZW51bSBSZWdpc3RlcmVkRGl2VHlwZSB7XHJcbiAgU2NyaXB0ID0gJ3NjcmlwdCcsXHJcbiAgSUZyYW1lID0gJ2lmcmFtZScsXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIE5vdGljZVR5cGUge1xyXG4gIFRyYWNrZXJDYXRlZ29yeSA9ICd0cmFja2VyQ2F0ZWdvcnknLFxyXG4gIFF1ZXN0aW9ucyA9ICdRdWVzdGlvbnMnLFxyXG59XHJcblxyXG5leHBvcnQgZW51bSBFcnJvclN0cmluZ3Mge1xyXG4gIFRlbXBsYXRlRXJyb3IgPSAnPGI+VGhlcmUgaXMgc29tZXRoaW5nIHdyb25nIHdpdGggdGVtcGxhdGUuIFBsZWFzZSBjaGVjayBsb2dzLjwvYj4nLFxyXG59XHJcblxyXG5leHBvcnQgZW51bSBJbnRlcnZhbFVuaXRzIHtcclxuICBkYXkgPSAnZGF5JyxcclxuICB3ZWVrID0gJ3dlZWsnLFxyXG4gIG1vbnRoID0gJ21vbnRoJyxcclxuICB5ZWFyID0gJ3llYXInLFxyXG59XHJcblxyXG5leHBvcnQgZW51bSBRdWVzdGlvblR5cGUge1xyXG4gIFRleHQgPSAnVGV4dCcsXHJcbiAgRW1haWwgPSAnRW1haWwnLFxyXG4gIFJhZGlvID0gJ1JhZGlvJyxcclxuICBNdWx0aVNlbGVjdCA9ICdNdWx0aVNlbGVjdCcsXHJcbiAgU2VsZWN0ID0gJ1NlbGVjdCcsXHJcbiAgRGF0ZSA9ICdEYXRlJyxcclxuICBQaG9uZU51bWJlciA9ICdQaG9uZU51bWJlcicsXHJcbiAgQ3JlZGl0Q2FyZCA9ICdDcmVkaXRDYXJkJyxcclxuICBOdW1iZXIgPSAnTnVtYmVyJyxcclxuICBNdWx0aUxpbmVUZXh0ID0gJ211bHRpTGluZVRleHQnLFxyXG59XHJcblxyXG5leHBvcnQgZW51bSBRdWVzdGlvblZhbGlkYXRpb24ge1xyXG4gIFJlcXVpcmVkID0gJ1JlcXVpcmVkJyxcclxufVxyXG5cclxuZXhwb3J0IGVudW0gUXVlc3Rpb25GaWVsZCB7XHJcbiAgUXVlc3Rpb24gPSAncXVlc3Rpb24nLFxyXG4gIFBsYWNlaG9sZGVyID0gJ3BsYWNlaG9sZGVyJyxcclxuICBPcHRpb25zID0gJ29wdGlvbnMnLFxyXG59XHJcblxyXG5leHBvcnQgZW51bSBNb2RlbEtpbmQge1xyXG4gIFdlYkNvbnNlbnRNb2RlbCA9ICdXZWJDb25zZW50TW9kZWwnLFxyXG4gIFF1ZXN0aW9uTW9kZWwgPSAnRFNSU3VibWlzc2lvbk1vZGVsJyxcclxufVxyXG5cclxuZXhwb3J0IGVudW0gUGFja2FnZUtpbmQge1xyXG4gIFdlYkNvbnNlbnRQYWNrYWdlID0gJ1dlYkNvbnNlbnRQYWNrYWdlJyxcclxuICBGSURFU1BhY2thZ2UgPSAnRklERVNQYWNrYWdlJyxcclxuICBEU1JTdWJtaXNzaW9uUGFja2FnZSA9ICdEU1JTdWJtaXNzaW9uUGFja2FnZScsXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIFRlbXBsYXRlIHtcclxuICBQcmVmZXJlbmNlcyA9ICdQcmVmZXJlbmNlcycsXHJcbn1cclxuIiwiaW1wb3J0IHtcclxuICBFdmVudHMsXHJcbiAgTW9kZWxLaW5kLFxyXG4gIFB1YmxpY0V2ZW50cyxcclxuICBRdWVzdGlvblR5cGUsXHJcbiAgUXVlc3Rpb25WYWxpZGF0aW9uLFxyXG59IGZyb20gJ2NvcmUvY29uc3RhbnRzL2VudW1zJztcclxuXHJcbmV4cG9ydCBjbGFzcyBGb3JtSGFuZGxlciB7XHJcbiAgc3RhdGljIGZvcm1JZCA9ICdtc2Z0LXF1ZXN0aW9uLWZvcm0nO1xyXG5cclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHdpbmRvdy5fX01TRlRfU0RLLkV2ZW50QnVzLm9uKEV2ZW50cy5Db25maWdSZWFkeSwgRm9ybUhhbmRsZXIuaW5pdCk7XHJcbiAgICB3aW5kb3cuX19NU0ZUX1NESy5FdmVudEJ1cy5vbihFdmVudHMuSW5pdCwgKCkgPT4ge1xyXG4gICAgICB3aW5kb3cuX19NU0ZUX1NESy5FdmVudEJ1cy50cmlnZ2VyKFB1YmxpY0V2ZW50cy5TaG93Rmlyc3RQYWdlKTtcclxuICAgIH0pO1xyXG4gICAgd2luZG93Ll9fTVNGVF9TREsuRXZlbnRCdXMub24oXHJcbiAgICAgIFB1YmxpY0V2ZW50cy5RdWVzdGlvbnNGb3JtU3VibWl0V2l0aG91dE1ldGFEYXRhLFxyXG4gICAgICBGb3JtSGFuZGxlci5vblF1ZXN0aW9uRm9ybVN1Ym1pdCxcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHN0YXRpYyBnZXRRdWVzdGlvblRlbXBsYXRlKFxyXG4gICAgcXVlc3Rpb246IElRdWVzdGlvbixcclxuICAgIHZhbGlkYXRpb25zOiBzdHJpbmdbXSxcclxuICApIHtcclxuICAgIGNvbnN0IHF1ZXN0aW9uU3RyID0gYDxsYWJlbCBjbGFzcz1cIm1zZnQtZm9ybS1xdWVzdGlvbi1sYWJlbFwiIGZvcj1cIiR7XHJcbiAgICAgIHF1ZXN0aW9uLm5hbWVcclxuICAgIH1cIj57e3ske3F1ZXN0aW9uLm5hbWV9LnF1ZXN0aW9ufX19ICR7XHJcbiAgICAgIHZhbGlkYXRpb25zLmluY2x1ZGVzKFF1ZXN0aW9uVmFsaWRhdGlvbi5SZXF1aXJlZClcclxuICAgICAgICA/ICc8c3BhbiBjbGFzcz1cInJlcXVpcmVkLXN0YXJcIj4qPC9zcGFuPidcclxuICAgICAgICA6ICcnXHJcbiAgICB9PC9sYWJlbD5gO1xyXG4gICAgbGV0IGFuc3dlciA9IGBgO1xyXG4gICAgc3dpdGNoIChxdWVzdGlvbi50eXBlKSB7XHJcbiAgICAgIGNhc2UgUXVlc3Rpb25UeXBlLlRleHQ6XHJcbiAgICAgIGNhc2UgUXVlc3Rpb25UeXBlLk51bWJlcjpcclxuICAgICAgY2FzZSBRdWVzdGlvblR5cGUuRGF0ZTpcclxuICAgICAgICBhbnN3ZXIgPSBgPGlucHV0IGlkPVwiJHtxdWVzdGlvbi5uYW1lfVwiIG5hbWU9XCIke3F1ZXN0aW9uLm5hbWV9XCIgJHtcclxuICAgICAgICAgIHZhbGlkYXRpb25zLmluY2x1ZGVzKFF1ZXN0aW9uVmFsaWRhdGlvbi5SZXF1aXJlZCkgJiYgJ3JlcXVpcmVkJ1xyXG4gICAgICAgIH0gIHR5cGU9XCIke3F1ZXN0aW9uLnR5cGUudG9Mb3dlckNhc2UoKX1cIiAvPmA7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgUXVlc3Rpb25UeXBlLkVtYWlsOlxyXG4gICAgICAgIGFuc3dlciA9IGA8aW5wdXQgaWQ9XCIke3F1ZXN0aW9uLm5hbWV9XCIgbmFtZT1cIiR7cXVlc3Rpb24ubmFtZX1cIlxyXG4gICAgICAgIHBhdHRlcm49XCJeKFthLXpBLVowLTkuXyUtXStAW2EtekEtWjAtOS4tXStcXFxcLlthLXpBLVpdezIsNn0pKiRcIlxyXG4gICAgICAgICR7dmFsaWRhdGlvbnMuaW5jbHVkZXMoUXVlc3Rpb25WYWxpZGF0aW9uLlJlcXVpcmVkKSAmJiAncmVxdWlyZWQnfVxyXG4gICAgICAgIHR5cGU9XCJ0ZXh0XCIgdGl0bGU9XCJWYWxpZCBlbWFpbCBhZGRyZXNzXCIgLz5gO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIFF1ZXN0aW9uVHlwZS5NdWx0aUxpbmVUZXh0OlxyXG4gICAgICAgIGFuc3dlciA9IGA8dGV4dGFyZWEgbmFtZT1cIiR7cXVlc3Rpb24ubmFtZX1cIiAke1xyXG4gICAgICAgICAgdmFsaWRhdGlvbnMuaW5jbHVkZXMoUXVlc3Rpb25WYWxpZGF0aW9uLlJlcXVpcmVkKSAmJiAncmVxdWlyZWQnXHJcbiAgICAgICAgfSA+IDwvdGV4dGFyZWE+YDtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBRdWVzdGlvblR5cGUuU2VsZWN0OlxyXG4gICAgICAgIGFuc3dlciA9IGA8c2VsZWN0IGlkPVwiJHtxdWVzdGlvbi5uYW1lfVwiIG5hbWU9XCIke3F1ZXN0aW9uLm5hbWV9XCIgJHtcclxuICAgICAgICAgIHZhbGlkYXRpb25zLmluY2x1ZGVzKFF1ZXN0aW9uVmFsaWRhdGlvbi5SZXF1aXJlZCkgJiYgJ3JlcXVpcmVkJ1xyXG4gICAgICAgIH0+IFxyXG4gICAgICAgICAge3sjZWFjaCAke1xyXG4gICAgICAgICAgICBxdWVzdGlvbi5uYW1lXHJcbiAgICAgICAgICB9Lm9wdGlvbnN9fSA8b3B0aW9uIHZhbHVlPXt7e3ZhbHVlfX19Pnt7e2xhYmVsfX19PC9vcHRpb24+IHt7L2VhY2h9fVxyXG4gICAgICAgIDwvc2VsZWN0PmA7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgUXVlc3Rpb25UeXBlLk11bHRpU2VsZWN0OlxyXG4gICAgICAgIGFuc3dlciA9IGA8c2VsZWN0IGlkPVwiJHtxdWVzdGlvbi5uYW1lfVwiIG5hbWU9XCIke1xyXG4gICAgICAgICAgcXVlc3Rpb24ubmFtZVxyXG4gICAgICAgIH1cIiBtdWx0aXBsZSAke1xyXG4gICAgICAgICAgdmFsaWRhdGlvbnMuaW5jbHVkZXMoUXVlc3Rpb25WYWxpZGF0aW9uLlJlcXVpcmVkKSAmJiAncmVxdWlyZWQnXHJcbiAgICAgICAgfT4gXHJcbiAgICAgICAgICB7eyNlYWNoICR7XHJcbiAgICAgICAgICAgIHF1ZXN0aW9uLm5hbWVcclxuICAgICAgICAgIH0ub3B0aW9uc319IDxvcHRpb24gdmFsdWU9e3t7dmFsdWV9fX0+e3t7bGFiZWx9fX08L29wdGlvbj4ge3svZWFjaH19XHJcbiAgICAgICAgPC9zZWxlY3Q+YDtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBRdWVzdGlvblR5cGUuUmFkaW86XHJcbiAgICAgICAgYW5zd2VyID0gYHt7I2VhY2ggJHtxdWVzdGlvbi5uYW1lfS5vcHRpb25zfX1cclxuICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgPGlucHV0IHR5cGU9XCJyYWRpb1wiIGlkPXt7e3ZhbHVlfX19IG5hbWU9XCIke3F1ZXN0aW9uLm5hbWV9XCIgdmFsdWU9e3t7dmFsdWV9fX0+XHJcbiAgICAgICAgICA8bGFiZWwgY2xhc3M9XCJtc2Z0LWZvcm0tcXVlc3Rpb24tbGFiZWxcIiBmb3I9e3t7dmFsdWV9fX0+e3t7bGFiZWx9fX08L2xhYmVsPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIHt7L2VhY2h9fWA7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgUXVlc3Rpb25UeXBlLkNyZWRpdENhcmQ6XHJcbiAgICAgICAgYW5zd2VyID0gYDxpbnB1dCBpZD1cIiR7cXVlc3Rpb24ubmFtZX1cIiBuYW1lPVwiJHtxdWVzdGlvbi5uYW1lfVwiICR7XHJcbiAgICAgICAgICB2YWxpZGF0aW9ucy5pbmNsdWRlcyhRdWVzdGlvblZhbGlkYXRpb24uUmVxdWlyZWQpICYmICdyZXF1aXJlZCdcclxuICAgICAgICB9ICB0eXBlPVwidGVsXCIgaW5wdXRtb2RlPVwibnVtZXJpY1wiLz5gO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIFF1ZXN0aW9uVHlwZS5QaG9uZU51bWJlcjpcclxuICAgICAgICBhbnN3ZXIgPSBgPGlucHV0IGlkPVwiJHtxdWVzdGlvbi5uYW1lfVwiIG5hbWU9XCIke3F1ZXN0aW9uLm5hbWV9XCIgJHtcclxuICAgICAgICAgIHZhbGlkYXRpb25zLmluY2x1ZGVzKFF1ZXN0aW9uVmFsaWRhdGlvbi5SZXF1aXJlZCkgJiYgJ3JlcXVpcmVkJ1xyXG4gICAgICAgIH0gIHR5cGU9XCJ0ZXh0XCIvPmA7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYDxkaXYgY2xhc3M9XCJtc2Z0LWZvcm0tcXVlc3Rpb25cIj4ke3F1ZXN0aW9uU3RyfSAke2Fuc3dlcn08L2Rpdj5gO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzdGF0aWMgaW5pdCgpIHtcclxuICAgIGNvbnN0IHNlbGVjdGVkTW9kZWwgPSB3aW5kb3cuX19NU0ZUX1NESy5TdG9yZS5nZXR0ZXJzXHJcbiAgICAgIC5jdXJyZW50TW9kZWwgYXMgSVF1ZXN0aW9uTW9kZWw7XHJcbiAgICBpZiAoc2VsZWN0ZWRNb2RlbD8ua2luZCA9PT0gTW9kZWxLaW5kLlF1ZXN0aW9uTW9kZWwpIHtcclxuICAgICAgY29uc3QgZm9ybVRlbXBsYXRlID0gRm9ybUhhbmRsZXIuZ2V0Rm9ybVRlbXBsYXRlKFxyXG4gICAgICAgIHdpbmRvdy5fX01TRlRfU0RLLlN0b3JlLmdldHRlcnMucXVlc3Rpb25zLFxyXG4gICAgICAgIHNlbGVjdGVkTW9kZWwsXHJcbiAgICAgICk7XHJcbiAgICAgIHdpbmRvdy5fX01TRlRfU0RLLkxvZ2dlci5pbmZvKCdTZXR0aW5nIHF1ZXN0aW9uIGZvcm0gdGVtcGxhdGUgZGF0YScpO1xyXG4gICAgICB3aW5kb3cuX19NU0ZUX1NESy5TdG9yZS5yZWR1Y2Vycy5zZXRUZW1wbGF0ZURhdGEoe1xyXG4gICAgICAgIC4uLndpbmRvdy5fX01TRlRfU0RLLlN0b3JlLmdldHRlcnMudGVtcGxhdGVEYXRhLFxyXG4gICAgICAgIHF1ZXN0aW9uczogZm9ybVRlbXBsYXRlLFxyXG4gICAgICAgIGxvZ29VUkw6IHNlbGVjdGVkTW9kZWwubG9nb1VSTCxcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHN0YXRpYyBnZXRGb3JtVGVtcGxhdGUoXHJcbiAgICBxdWVzdGlvbnM6IElRdWVzdGlvbltdLFxyXG4gICAgcXVlc3Rpb25Nb2RlbDogSVF1ZXN0aW9uTW9kZWwsXHJcbiAgKSB7XHJcbiAgICBjb25zdCBxdWVzdGlvbk1hcDogeyBbbmFtZTogc3RyaW5nXTogSVF1ZXN0aW9uIH0gPSB7fTtcclxuICAgIHF1ZXN0aW9ucy5mb3JFYWNoKHF1ZXN0aW9uID0+IHtcclxuICAgICAgcXVlc3Rpb25NYXBbcXVlc3Rpb24ubmFtZV0gPSBxdWVzdGlvbjtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIChcclxuICAgICAgYFxyXG4gICAgICA8c3R5bGU+XHJcbiAgICAgICAgLm1zZnQtcXVlc3Rpb24tZm9ybSB7XHJcbiAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbiAgICAgICAgICB0ZXh0LWFsaWduOiBsZWZ0O1xyXG4gICAgICAgIH1cclxuICAgICAgICAubXNmdC1mb3JtLXF1ZXN0aW9uIHtcclxuICAgICAgICAgIGRpc3BsYXk6ZmxleDtcclxuICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOmNvbHVtbjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLnJlcXVpcmVkLXN0YXIge1xyXG4gICAgICAgICAgY29sb3I6IHJlZDtcclxuICAgICAgICB9XHJcbiAgICAgIDwvc3R5bGU+XHJcbiAgICAgIDxmb3JtIGlkPVwiJHtGb3JtSGFuZGxlci5mb3JtSWR9XCIgY2xhc3M9XCJtc2Z0LXF1ZXN0aW9uLWZvcm1cIj5gICtcclxuICAgICAgcXVlc3Rpb25Nb2RlbC5xdWVzdGlvbnMucmVkdWNlKFxyXG4gICAgICAgICh0ZW1wbGF0ZVN0ciwgcXVlcykgPT5cclxuICAgICAgICAgIHRlbXBsYXRlU3RyICtcclxuICAgICAgICAgIEZvcm1IYW5kbGVyLmdldFF1ZXN0aW9uVGVtcGxhdGUocXVlc3Rpb25NYXBbcXVlcy5xdWVzdGlvbk5hbWVdLCBbXHJcbiAgICAgICAgICAgIC4uLihxdWVzLnZhbGlkYXRpb25zIHx8IFtdKSxcclxuICAgICAgICAgICAgLi4ucXVlc3Rpb25NYXBbcXVlcy5xdWVzdGlvbk5hbWVdLnZhbGlkYXRpb25zLFxyXG4gICAgICAgICAgXSksXHJcbiAgICAgICAgJycsXHJcbiAgICAgICkgK1xyXG4gICAgICBgPC9mb3JtPlxyXG4gICAgICAgPHNjcmlwdD5cclxuICAgICAgICBjb25zdCBmb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJyR7Rm9ybUhhbmRsZXIuZm9ybUlkfScpO1xyXG4gICAgICAgIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgbXNmdENhbGxiYWNrRnVuY3Rpb24pO1xyXG4gICAgICAgPC9zY3JpcHQ+XHJcbiAgICAgIGBcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHN0YXRpYyBvblF1ZXN0aW9uRm9ybVN1Ym1pdChwYXlsb2FkOiBhbnkpIHtcclxuICAgIGNvbnN0IHF1ZXN0aW9ucyA9IHdpbmRvdy5fX01TRlRfU0RLLlN0b3JlLmdldHRlcnMucXVlc3Rpb25zO1xyXG4gICAgY29uc3QgbW9kZWwgPSB3aW5kb3cuX19NU0ZUX1NESy5TdG9yZS5nZXR0ZXJzXHJcbiAgICAgIC5jdXJyZW50TW9kZWwgYXMgSVF1ZXN0aW9uTW9kZWw7XHJcblxyXG4gICAgcXVlc3Rpb25zLmZvckVhY2gocXVlc3Rpb24gPT4ge1xyXG4gICAgICBxdWVzdGlvbi5jbGFzc2lmaWNhdGlvbiA9XHJcbiAgICAgICAgbW9kZWwucXVlc3Rpb25zPy5maW5kKHF1ZSA9PiBxdWUucXVlc3Rpb25OYW1lID09PSBxdWVzdGlvbi5uYW1lKVxyXG4gICAgICAgICAgPy5jbGFzc2lmaWNhdGlvbnM/LlswXSB8fCBxdWVzdGlvbi5jbGFzc2lmaWNhdGlvbjtcclxuICAgIH0pO1xyXG5cclxuICAgIHdpbmRvdy5fX01TRlRfU0RLLkV2ZW50QnVzLnRyaWdnZXIoUHVibGljRXZlbnRzLlF1ZXN0aW9uc0Zvcm1TdWJtaXQsIHtcclxuICAgICAgZGF0YTogcGF5bG9hZC5kYXRhLFxyXG4gICAgICBtZXRhZGF0YToge1xyXG4gICAgICAgIHF1ZXN0aW9ucyxcclxuICAgICAgICBtb2RlbCxcclxuICAgICAgfSxcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxubmV3IEZvcm1IYW5kbGVyKCk7XHJcbiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7SUFBQTtJQUNBO0FBQ0E7SUFDQTtJQUNBO0FBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0FBaUJBO0lBQ08sSUFBSSxRQUFRLEdBQUcsV0FBVztJQUNqQyxJQUFJLFFBQVEsR0FBRyxNQUFNLENBQUMsTUFBTSxJQUFJLFNBQVMsUUFBUSxDQUFDLENBQUMsRUFBRTtJQUNyRCxRQUFRLEtBQUssSUFBSSxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsU0FBUyxDQUFDLE1BQU0sRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFO0lBQzdELFlBQVksQ0FBQyxHQUFHLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUM3QixZQUFZLEtBQUssSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLElBQUksTUFBTSxDQUFDLFNBQVMsQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENB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
